{"version":3,"sources":["../../src/js/picky.js"],"names":[],"mappings":"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","file":"picky.js","sourcesContent":["/* global Ractive, $, Clipboard */\n\n// Adds the commas after the attributes in the JSON\nRactive.defaults.data.pickyLengthCheck = function (keypath, index) {\n  const items = this.get(keypath.replace(/\\.[a-z\\_0-9]*$/gi, ''))\n  const length = Array.isArray(items) ? items.length : Object.keys(items).length\n  return index < length - 1\n}\n\nRactive.defaults.data.inArrayCheck = function (keypath, index) {\n  return !Array.isArray(this.get(keypath.replace(/\\.[0-9]*$/, '')))\n}\n\nRactive.DEBUG = false\n\nconst main = new Ractive({\n  el: '.json',\n  template: '#main',\n  data: (localStorage.main ? JSON.parse(localStorage.getItem('main')) : { collapsed: [] })\n})\n\nconst input = new Ractive({\n  el: '.grab',\n  template: '#grab',\n  data: (localStorage.input ? JSON.parse(localStorage.getItem('input')) : {}),\n  onrender: () => {\n    // Activate clipboard\n    const clipboard = new Clipboard('.btn-clipboard') // Stop crying Firefox!\n    clipboard // stop crying StandardJS!\n  }\n})\n\n$('textarea').on('keyup', function() {\n  if($(this).val()) {\n    main.set('data', JSON.parse($(this).val()))\n  }\n})\n\n$('.btn-example').click(() => {\n  $('#picked').val('')\n  $.ajax({\n    url: 'https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco',\n    success: (data) => {\n      $('textarea').val('https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco')\n      main.set('pickyIsSelected', '')\n      main.set({\n        data: JSON.parse(data)\n      })\n    },\n    dataType: 'text'\n  })\n})\n\n// Before unload, stores everything in localstorage, the input will only get stored int he local storage\n// if there is both a textarea value and data in the main component\n$(window).on('beforeunload', () => {\n  main.set('loading', false)\n  if (!main.get('collapsed') || !main.get('collapsed').length) main.set('collapsed', [])\n  localStorage.setItem('main', JSON.stringify(main.get() || { collapsed: [] }))\n  localStorage.setItem('input', JSON.stringify($('textarea').val().length && main.get('data') ? input.get() : {}))\n  localStorage.setItem('text', $('textarea').val())\n})"]}