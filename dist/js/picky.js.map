{"version":3,"sources":["../../src/js/picky.js"],"names":[],"mappings":"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","file":"picky.js","sourcesContent":["/* global Ractive, $, Clipboard */\n\nRactive.DEBUG = false\n\nconst expression = /^[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi\nconst urlRegex = new RegExp(expression)\n\nconst main = new Ractive({\n  el: '.json',\n  template: templates.main,\n  partials: {\n    array: templates.array,\n    object: templates.object,\n    attr: templates.attr,\n    recurse: templates.recurse\n  },\n  data: (localStorage.main ? JSON.parse(localStorage.getItem('main')) : { data: null, collapsed: [], pickyIsSelected: '' } )\n})\n\nconst input = new Ractive({\n  el: '.grab',\n  template: templates.grab,\n  data: (localStorage.input ? JSON.parse(localStorage.getItem('input')) : {}),\n  onrender: () => {\n    const clipboard = new Clipboard('.btn-clipboard') // Stop crying Firefox!\n    clipboard // stop crying StandardJS!\n  }\n})\n\nif (localStorage.text) {\n  $('textarea').val(localStorage.getItem('text'))\n}\n\nconst formatSelected = (path) => {\n  return path.replace(/\\[/g, '.').replace(/\\]\\.?/g, '.').replace(/\\.$/, '')\n}\n\nconst unformatSelected = (path) => {\n  return path.replace(/\\.?([0-9]+)\\.?/g, '[$1].') // Wraps number keys in brackets\n    .replace(/([a-z0-9]+\\-+[a-z0-9]+)\\.?/g, '[\"$1\"].') // Moves keys with dashes into square brackets\n    .replace(/\\]\\.\\[/g, '][') // replace full stops where two brackets are next to eachother\n    .replace(/\\.$/, '') // Gets rid of trailing full stop\n    .replace(/(\\[[0-9]*$)/, '$1]') // Adds the bracket to the end if needed\n    .replace(/(^[0-9]*\\])/, '[$1') // adds the bracket to the beginning if needed\n}\n\nmain.on('showPath', function (el, path) {\n  this.set('pickyIsSelected', path)\n  input.set('path', unformatSelected(path.replace(/^data./, '')))\n})\n\nmain.on('collapse', function (el) {\n  if ( !this.get('collapsed') ) this.set('collapsed', [])\n\n  if (this.get('collapsed').indexOf(el.keypath) > -1) {\n    this.splice('collapsed', this.get('collapsed').indexOf(el.keypath), 1)\n  } else {\n    this.push('collapsed', el.keypath)\n  }\n\n})\n\ninput.on('highlight', function (el, value) {\n  main.set('pickyIsSelected', 'data.' + formatSelected(value))\n})\n\n// Test if JSON is valid and trigger notification if it's not\nconst validNotification = () => {\n  if ($('textarea').val() !== '' && !$('textarea').val().match(urlRegex)) {\n    try {\n      $.parseJSON($('textarea').val())\n      $('.invalid-json').fadeOut()\n    } catch (err) {\n      $('.invalid-json').fadeIn()\n    }\n  } else {\n    $('.invalid-json').fadeOut()\n  }\n}\n\nsetInterval(validNotification, 500)\n\n// Load example data\n$('.btn-example').click(() => {\n  $('#picked').val('')\n  $.ajax({\n    url: 'https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco',\n    success: (data) => {\n      $('textarea').val('https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco')\n      main.set('pickyIsSelected', '')\n      main.set({\n        data: JSON.parse(data)\n      })\n    },\n    dataType: 'text'\n  })\n})\n\n// Resize panels\nconst resizer = (offset, field, max) => {\n  if (100 - offset > max && offset > max) {\n    $('textarea').css(field, offset + '%')\n    $('.code-wrap').css(field, (100 - offset) + '%')\n  }\n}\n\nlet resizing = false\n$('.resize').on('mousedown touchstart', () => {\n  resizing = true\n})\n\n$(document).on('mousemove touchmove', (e) => {\n  if (!resizing) {\n    return\n  }\n  if (document.querySelector('body').clientWidth >= 1000) {\n    resizer((e.pageX / document.querySelector('main').clientWidth) * 100, 'width', 10)\n  } else {\n    resizer((((e.originalEvent.pageY || e.originalEvent.touches[0].pageY) / document.querySelector('body').clientHeight) * 100) - 5, 'height', 20)\n    return false\n  }\n}).on('mouseup touchend', () => {\n  resizing = false\n})\n\n// Remove the resize styles on window change so it doesn't get wierd\n$(window).on('resize', () =>\n  $('textarea, .code-wrap').removeAttr('style')\n)\n\n// If a user is typing text into the textarea which is\n// a largely different length then what we have already\n// it's a good chance that it's a large JSON object that\n// we'll need to debounce\nlet previousVal = $('textarea').val()\nlet textTimeout = ''\nconst debounceText = ($this, timeout) => {\n\n  textTimeout = setTimeout(() => {\n\n    try {\n      main.set({\n        data: JSON.parse($this.val())\n      })\n    } catch (error) {\n      if (!$this.val().length) {\n        main.set({data: ''})\n      }\n    }\n\n    previousVal = $this.val()\n    main.set('loading', false)\n\n  }, timeout)\n\n}\n\n// If the user is typing a URL, debouncing is added to wait for\n// the user to finish typing\nlet requestTimeout = ''\nconst debounceRequest = (contents, timeout) => {\n  requestTimeout = setTimeout(() => {\n\n    if (!$('textarea').val().length) return\n\n    if (!$('textarea').val().match(urlRegex)) {\n      main.set({data: ''})\n      return\n    }\n\n    $.ajax({\n      url: contents,\n      type: 'GET',\n      dataType: 'json',\n      success: (data) => {\n        main.set({\n          data: typeof data === 'object' ? data : JSON.parse(data)\n        })\n      },\n      error: () => {\n        // Send textarea code to highlight.js <code> container\n        console.log(`Sorry for spamming the ðŸ’© out of your console! https://github.com/corysimmons/picky.json/issues/4`)\n        main.set($('textarea').val())\n      }\n    }).always(() => {\n      main.set('loading', false)\n    })\n\n  }, timeout)\n}\n\n// Test the input to see if it's a JSON url\n// If it is, populate <code> with that data\n// If it's not, populate <code> with whatever is in <textarea>\n$('textarea').on('keyup', function() {\n  let text = $('textarea').val().trim()\n\n  if (text === previousVal) return\n\n  clearTimeout(requestTimeout)\n  if (text.match(urlRegex)) {\n    main.set('loading', true)\n    main.set('loadingMessage', 'Loading JSON from URL...')\n    debounceRequest(text, 2000)\n  } else {\n\n    if ( $(this).val().length - previousVal.length > 500 || $(this).val().length - previousVal.length < -500) {\n      main.set('loading', true)\n      main.set('loadingMessage', 'Loading large JSON changes...')\n      debounceText($(this), 2000)\n    } else {\n      debounceText($(this), 0)\n    }\n\n  }\n\n  previousVal = text\n\n}).on('keydown', function(e) {\n\n  let text = $('textarea').val().trim()\n\n  if ( text.length < 1 ) main.set({ data: '' })\n\n  if (text === previousVal) return\n\n  if (e.which === 9) {\n    e.preventDefault()\n    if (this.value) {\n      const val = this.value\n      const start = this.selectionStart\n      const end = this.selectionEnd\n      const selected = val.substring(start, end)\n      let re = ''\n      let count = ''\n\n      if (e.shiftKey) {\n        re = /^\\t/gm\n        count = -selected.match(re).length\n        this.value = val.substring(0, start) + selected.replace(re, '') + val.substring(end)\n      } else {\n        re = /^/gm\n        count = selected.match(re).length\n        this.value = val.substring(0, start) + selected.replace(re, '\\t') + val.substring(end)\n      }\n      if (start === end) {\n        this.selectionStart = end + count\n      } else {\n        this.selectionStart = start\n      }\n      this.selectionEnd = end + count\n    }\n  }\n\n  clearTimeout(requestTimeout)\n\n})\n\n// Before unload, stores everything in localstorage, the input will only get stored int he local storage\n// if there is both a textarea value and data in the main component\n$(window).on('beforeunload', () => {\n  main.set('loading', false)\n  if (!main.get('collapsed') || !main.get('collapsed').length) main.set('collapsed', [])\n  localStorage.setItem('main', JSON.stringify(main.get() || { collapsed: [] }))\n  localStorage.setItem('input', JSON.stringify($('textarea').val().length && main.get('data') ? input.get() : {}))\n  localStorage.setItem('text', $('textarea').val())\n})\n\n$(document).on('mouseenter', '.hljs-wrap, .hljs-attr, .collapsible', function() {\n  $(this).closest('.parent').addClass('active-collapse')\n}).on('mouseout', '.hljs-wrap, .hljs-attr, .collapsible', () => {\n  $('.active-collapse').removeClass('active-collapse')\n})"]}