{"version":3,"file":"ractive.js","sources":["../src/Ractive.js","../src/Ractive/static/getNodeInfo.js","../src/extend/_extend.js","../src/extend/unwrapExtended.js","../src/utils/wrapMethod.js","../src/Ractive/prototype.js","../src/Ractive/prototype/updateModel.js","../src/Ractive/prototype/update.js","../src/Ractive/prototype/unshift.js","../src/Ractive/prototype/unrender.js","../src/Ractive/prototype/toHTML.js","../src/Ractive/prototype/toggle.js","../src/Ractive/prototype/teardown.js","../src/Ractive/prototype/subtract.js","../src/Ractive/prototype/splice.js","../src/Ractive/prototype/sort.js","../src/Ractive/prototype/shift.js","../src/Ractive/prototype/set.js","../src/Ractive/prototype/reverse.js","../src/Ractive/prototype/resetTemplate.js","../src/view/Fragment.js","../src/view/helpers/processItems.js","../src/view/resolvers/ReferenceResolver.js","../src/view/items/createItem.js","../src/view/items/component/getComponentConstructor.js","../src/view/items/Yielder.js","../src/view/items/Triple.js","../src/view/items/triple/insertHtml.js","../src/view/items/Text.js","../src/view/items/element/specials/Select.js","../src/view/items/Section.js","../src/view/RepeatedFragment.js","../src/view/items/Partial.js","../src/view/items/partial/getPartialTemplate.js","../src/view/items/element/specials/Option.js","../src/view/items/element/specials/Input.js","../src/view/items/Interpolator.js","../src/view/items/shared/Mustache.js","../src/view/items/element/specials/Form.js","../src/view/items/Element.js","../src/view/items/element/binding/selectBinding.js","../src/view/items/element/binding/SingleSelectBinding.js","../src/view/items/element/binding/RadioNameBinding.js","../src/view/items/element/binding/RadioBinding.js","../src/view/items/element/binding/NumericBinding.js","../src/view/items/element/binding/MultipleSelectBinding.js","../src/view/items/element/binding/GenericBinding.js","../src/view/items/element/binding/FileListBinding.js","../src/view/items/element/binding/ContentEditableBinding.js","../src/view/items/element/binding/CheckboxNameBinding.js","../src/view/items/element/binding/getBindingGroup.js","../src/view/items/element/binding/CheckboxBinding.js","../src/view/items/element/binding/handleDomEvent.js","../src/view/items/element/binding/Binding.js","../src/view/items/element/updateLiveQueries.js","../src/view/items/element/Transition.js","../src/view/items/element/transitions/resetStyle.js","../src/view/items/element/transitions/createTransitions.js","../src/view/items/element/transitions/hyphenate.js","../src/view/items/element/transitions/unprefix.js","../src/shared/Ticker.js","../src/config/visibility.js","../src/view/items/element/transitions/prefix.js","../src/utils/camelCase.js","../src/view/items/element/EventHandler.js","../src/view/items/element/Decorator.js","../src/view/items/element/ConditionalAttribute.js","../src/view/items/element/Attribute.js","../src/view/items/element/attribute/propertyNames.js","../src/view/items/element/attribute/getUpdateDelegate.js","../src/view/items/Doctype.js","../src/view/items/Component.js","../src/view/items/component/updateLiveQueries.js","../src/view/resolvers/resolve.js","../src/view/resolvers/ReferenceExpressionProxy.js","../src/view/resolvers/ExpressionProxy.js","../src/shared/createFunction.js","../src/Ractive/initialise.js","../src/events/HookQueue.js","../src/Ractive/construct.js","../src/Ractive/helpers/getComputationSignature.js","../src/model/RootModel.js","../src/model/Computation.js","../src/model/Model.js","../src/model/specials/KeypathModel.js","../src/model/specials/KeyModel.js","../src/model/helpers/getPrefixer.js","../src/global/capture.js","../src/Ractive/static/adaptors/magicArray.js","../src/Ractive/static/adaptors/magic.js","../src/Ractive/static/adaptors/array/index.js","../src/Ractive/static/adaptors/array/patch.js","../src/Ractive/static/adaptors/array/processWrapper.js","../src/view/items/shared/Item.js","../src/Ractive/prototype/resetPartial.js","../src/Ractive/prototype/reset.js","../src/Ractive/config/config.js","../src/Ractive/config/deprecate.js","../src/Ractive/config/wrapPrototypeMethod.js","../src/Ractive/config/registries.js","../src/Ractive/config/custom/template/template.js","../src/Ractive/config/custom/template/parser.js","../src/parse/converters/readTemplate.js","../src/parse/converters/readPartialDefinitionSection.js","../src/parse/converters/readPartialDefinitionComment.js","../src/utils/escapeRegExp.js","../src/parse/converters/readText.js","../src/parse/converters/readElement.js","../src/parse/converters/element/processDirective.js","../src/utils/parseJSON.js","../src/parse/converters/element/readAttribute.js","../src/parse/converters/utils/getLowestIndex.js","../src/parse/converters/element/readClosingTag.js","../src/parse/utils/cleanup.js","../src/parse/utils/trimWhitespace.js","../src/parse/utils/stripStandalones.js","../src/utils/html.js","../src/parse/converters/readHtmlComment.js","../src/parse/converters/mustache/readSection.js","../src/parse/converters/mustache/handlebarsBlockCodes.js","../src/parse/converters/mustache/section/readElseIf.js","../src/parse/converters/mustache/section/readElse.js","../src/parse/converters/mustache/section/readClosing.js","../src/parse/converters/mustache/readYielder.js","../src/parse/converters/mustache/readInterpolator.js","../src/parse/converters/readExpressionOrReference.js","../src/parse/converters/mustache/readMustacheComment.js","../src/parse/converters/mustache/readPartial.js","../src/parse/converters/mustache/readUnescaped.js","../src/parse/converters/mustache/readTriple.js","../src/parse/utils/refineExpression.js","../src/parse/utils/flattenExpression.js","../src/parse/converters/readExpression.js","../src/parse/converters/expressions/readConditional.js","../src/parse/converters/expressions/readLogicalOr.js","../src/parse/converters/expressions/readTypeof.js","../src/parse/converters/expressions/readMemberOrInvocation.js","../src/parse/converters/expressions/shared/readRefinement.js","../src/parse/converters/expressions/readPrimary.js","../src/parse/converters/expressions/primary/readBracketedExpression.js","../src/parse/converters/expressions/primary/readReference.js","../src/parse/converters/expressions/primary/readLiteral.js","../src/parse/converters/expressions/primary/literal/readArrayLiteral.js","../src/parse/converters/expressions/shared/readExpressionList.js","../src/parse/converters/expressions/primary/literal/readObjectLiteral.js","../src/parse/converters/expressions/primary/literal/objectLiteral/keyValuePairs.js","../src/parse/converters/expressions/primary/literal/objectLiteral/keyValuePair.js","../src/parse/converters/expressions/shared/readKey.js","../src/parse/converters/expressions/shared/patterns.js","../src/parse/converters/expressions/primary/literal/readStringLiteral.js","../src/parse/converters/expressions/primary/literal/stringLiteral/makeQuotedStringMatcher.js","../src/parse/converters/expressions/primary/literal/readBooleanLiteral.js","../src/parse/converters/expressions/primary/literal/readNumberLiteral.js","../src/parse/converters/expressions/shared/errors.js","../src/parse/converters/readMustache.js","../src/parse/converters/expressions/primary/literal/readRegexpLiteral.js","../src/parse/converters/mustache/readDelimiterChange.js","../src/config/types.js","../src/parse/Parser.js","../src/Ractive/config/custom/data.js","../src/Ractive/config/custom/css/css.js","../src/Ractive/config/custom/css/transform.js","../src/Ractive/config/custom/adapt.js","../src/Ractive/prototype/render.js","../src/Ractive/render.js","../src/global/css.js","../src/Ractive/prototype/push.js","../src/Ractive/prototype/pop.js","../src/Ractive/prototype/shared/makeArrayMethod.js","../src/shared/getNewIndices.js","../src/Ractive/prototype/once.js","../src/Ractive/prototype/on.js","../src/Ractive/prototype/off.js","../src/Ractive/prototype/shared/notEmptyString.js","../src/Ractive/prototype/shared/trim.js","../src/Ractive/prototype/observeOnce.js","../src/Ractive/prototype/observeList.js","../src/Ractive/prototype/observe.js","../src/Ractive/prototype/merge.js","../src/Ractive/prototype/insert.js","../src/Ractive/prototype/get.js","../src/view/resolvers/resolveReference.js","../src/view/resolvers/resolveAmbiguousReference.js","../src/Ractive/prototype/fire.js","../src/events/fireEvent.js","../src/utils/getPotentialWildcardMatches.js","../src/events/eventStack.js","../src/Ractive/prototype/findParent.js","../src/Ractive/prototype/findContainer.js","../src/Ractive/prototype/findComponent.js","../src/Ractive/prototype/findAllComponents.js","../src/Ractive/prototype/findAll.js","../src/Ractive/prototype/shared/Query.js","../src/Ractive/prototype/find.js","../src/Ractive/prototype/detach.js","../src/Ractive/prototype/animate.js","../src/Ractive/prototype/animate/Animation.js","../src/shared/animations.js","../src/global/runloop.js","../src/global/TransitionManager.js","../src/shared/methodCallers.js","../src/utils/Promise.js","../src/utils/array.js","../src/events/Hook.js","../src/utils/getTime.js","../src/utils/requestAnimationFrame.js","../src/Ractive/prototype/add.js","../src/Ractive/prototype/shared/add.js","../src/shared/keypaths.js","../src/Ractive/static/interpolators.js","../src/shared/interpolate.js","../src/shared/registry.js","../src/config/errors.js","../src/utils/log.js","../src/utils/is.js","../src/utils/object.js","../.gobble-build/02-babel/1/legacy.js","../src/utils/dom.js","../src/config/namespaces.js","../src/config/environment.js","../src/Ractive/static/easing.js","../src/Ractive/config/defaults.js","../src/config/template.js"],"sourcesContent":["import defaults from 'Ractive/config/defaults';\nimport easing from 'Ractive/static/easing';\nimport interpolators from 'Ractive/static/interpolators';\nimport { magic, svg, win } from 'config/environment';\nimport { defineProperties, extend as extendObj } from 'utils/object';\nimport proto from 'Ractive/prototype';\nimport Promise from 'utils/Promise';\nimport extend from 'extend/_extend';\nimport parse from 'parse/_parse';\nimport getNodeInfo from 'Ractive/static/getNodeInfo';\nimport construct from 'Ractive/construct';\nimport initialise from 'Ractive/initialise';\n\n// Ractive.js makes liberal use of things like Array.prototype.indexOf. In\n// older browsers, these are made available via a shim - here, we do a quick\n// pre-flight check to make sure that either a) we're not in a shit browser,\n// or b) we're using a Ractive-legacy.js build\nconst FUNCTION = 'function';\n\nif (\n\ttypeof Date.now !== FUNCTION                 ||\n\ttypeof String.prototype.trim !== FUNCTION    ||\n\ttypeof Object.keys !== FUNCTION              ||\n\ttypeof Array.prototype.indexOf !== FUNCTION  ||\n\ttypeof Array.prototype.forEach !== FUNCTION  ||\n\ttypeof Array.prototype.map !== FUNCTION      ||\n\ttypeof Array.prototype.filter !== FUNCTION   ||\n\t( win && typeof win.addEventListener !== FUNCTION )\n) {\n\tthrow new Error( 'It looks like you\\'re attempting to use Ractive.js in an older browser. You\\'ll need to use one of the \\'legacy builds\\' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.' );\n}\n\nexport default function Ractive ( options ) {\n\tif ( !( this instanceof Ractive ) ) return new Ractive( options );\n\n\tconstruct( this, options || {} );\n\tinitialise( this, options || {}, {} );\n}\n\nextendObj( Ractive.prototype, proto, defaults );\nRactive.prototype.constructor = Ractive;\n\n// alias prototype as `defaults`\nRactive.defaults = Ractive.prototype;\n\n// static properties\ndefineProperties( Ractive, {\n\n\t// debug flag\n\tDEBUG:          { writable: true, value: true },\n\tDEBUG_PROMISES: { writable: true, value: true },\n\n\t// static methods:\n\textend:         { value: extend },\n\tgetNodeInfo:    { value: getNodeInfo },\n\tparse:          { value: parse },\n\n\t// namespaced constructors\n\tPromise:        { value: Promise },\n\n\t// support\n\tsvg:            { value: svg },\n\tmagic:          { value: magic },\n\n\t// version\n\tVERSION:        { value: '<@version@>' },\n\n\t// plugins\n\tadaptors:       { writable: true, value: {} },\n\tcomponents:     { writable: true, value: {} },\n\tdecorators:     { writable: true, value: {} },\n\teasing:         { writable: true, value: easing },\n\tevents:         { writable: true, value: {} },\n\tinterpolators:  { writable: true, value: interpolators },\n\tpartials:       { writable: true, value: {} },\n\ttransitions:    { writable: true, value: {} }\n});\n","import { extend } from 'utils/object';\n\nexport default function( node ) {\n\tif ( !node || !node._ractive ) return {};\n\n\tconst storage = node._ractive;\n\n\treturn {\n\t\tractive: storage.ractive,\n\t\tkeypath: storage.context.getKeypath(),\n\t\tindex: extend( {}, storage.fragment.indexRefs ),\n\t\tkey: extend( {}, storage.fragment.keyRefs )\n\t};\n}\n","import { create, defineProperties, extend as extendObj } from 'utils/object';\nimport config from 'Ractive/config/config';\nimport dataConfigurator from 'Ractive/config/custom/data';\nimport construct from 'Ractive/construct';\nimport initialise from 'Ractive/initialise';\nimport Ractive from 'Ractive';\nimport unwrapExtended from './unwrapExtended';\n\nexport default extend;\n\nfunction extend ( ...options ) {\n\tif( !options.length ) {\n\t\treturn extendOne( this );\n\t} else {\n\t\treturn options.reduce( extendOne, this );\n\t}\n}\n\nfunction extendOne ( Parent, options = {} ) {\n\tvar Child, proto;\n\n\t// if we're extending with another Ractive instance...\n\t//\n\t//   var Human = Ractive.extend(...), Spider = Ractive.extend(...);\n\t//   var Spiderman = Human.extend( Spider );\n\t//\n\t// ...inherit prototype methods and default options as well\n\tif ( options.prototype instanceof Ractive ) {\n\t\toptions = unwrapExtended( options );\n\t}\n\n\tChild = function ( options ) {\n\t\tif ( !( this instanceof Child ) ) return new Child( options );\n\n\t\tconstruct( this, options || {} );\n\t\tinitialise( this, options || {}, {} );\n\t};\n\n\tproto = create( Parent.prototype );\n\tproto.constructor = Child;\n\n\t// Static properties\n\tdefineProperties( Child, {\n\t\t// alias prototype as defaults\n\t\tdefaults: { value: proto },\n\n\t\t// extendable\n\t\textend: { value: extend, writable: true, configurable: true },\n\n\t\t// Parent - for IE8, can't use Object.getPrototypeOf\n\t\t_Parent: { value: Parent }\n\t});\n\n\t// extend configuration\n\tconfig.extend( Parent, proto, options );\n\n\tdataConfigurator.extend( Parent, proto, options );\n\n\tif ( options.computed ) {\n\t\tproto.computed = extendObj( create( Parent.prototype.computed ), options.computed );\n\t}\n\n\tChild.prototype = proto;\n\n\treturn Child;\n}\n","import wrap from 'utils/wrapMethod';\nimport registries from 'Ractive/config/registries';\nimport Ractive from 'Ractive';\n\nexport default function unwrap ( Child ) {\n\tlet options = {};\n\n\twhile ( Child ) {\n\t\taddRegistries( Child, options );\n\t\taddOtherOptions( Child, options );\n\n\t\tif ( Child._Parent !== Ractive ) {\n\t\t\tChild = Child._Parent;\n\t\t} else {\n\t\t\tChild = false;\n\t\t}\n\t}\n\n\treturn options;\n}\n\nfunction addRegistries ( Child, options ) {\n\tregistries.forEach( r => {\n\t\taddRegistry(\n\t\t\tr.useDefaults ? Child.prototype : Child,\n\t\t\toptions, r.name );\n\t});\n}\n\nfunction addRegistry ( target, options, name ) {\n\tvar registry, keys = Object.keys( target[ name ] );\n\n\tif ( !keys.length ) { return; }\n\n\tif ( !( registry = options[ name ] ) ) {\n\t\tregistry = options[ name ] = {};\n\t}\n\n\tkeys\n\t\t.filter( key => !( key in registry ) )\n\t\t.forEach( key => registry[ key ] = target[ name ][ key ] );\n}\n\nfunction addOtherOptions ( Child, options ) {\n\tObject.keys( Child.prototype ).forEach( key => {\n\t\tif ( key === 'computed' ) { return; }\n\n\t\tvar value = Child.prototype[ key ];\n\n\t\tif ( !( key in options ) ) {\n\t\t\toptions[ key ] = value._method ? value._method : value;\n\t\t}\n\n\t\t// is it a wrapped function?\n\t\telse if ( typeof options[ key ] === 'function'\n\t\t\t\t&& typeof value === 'function'\n\t\t\t\t&& options[ key ]._method ) {\n\n\t\t\tlet result, needsSuper = value._method;\n\n\t\t\tif ( needsSuper ) { value = value._method; }\n\n\t\t\t// rewrap bound directly to parent fn\n\t\t\tresult = wrap( options[ key ]._method, value );\n\n\t\t\tif ( needsSuper ) { result._method = result; }\n\n\t\t\toptions[ key ] = result;\n\t\t}\n\t});\n}\n","export default function ( method, superMethod, force ) {\n\n\tif ( force || needsSuper( method, superMethod ) )  {\n\n\t\treturn function () {\n\n\t\t\tvar hasSuper = ( '_super' in this ), _super = this._super, result;\n\n\t\t\tthis._super = superMethod;\n\n\t\t\tresult = method.apply( this, arguments );\n\n\t\t\tif ( hasSuper ) {\n\t\t\t\tthis._super = _super;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\telse {\n\t\treturn method;\n\t}\n}\n\nfunction needsSuper ( method, superMethod ) {\n\treturn typeof superMethod === 'function' && /_super/.test( method );\n}\n","import add from 'Ractive/prototype/add';\nimport animate from 'Ractive/prototype/animate';\nimport detach from 'Ractive/prototype/detach';\nimport find from 'Ractive/prototype/find';\nimport findAll from 'Ractive/prototype/findAll';\nimport findAllComponents from 'Ractive/prototype/findAllComponents';\nimport findComponent from 'Ractive/prototype/findComponent';\nimport findContainer from 'Ractive/prototype/findContainer';\nimport findParent from 'Ractive/prototype/findParent';\nimport fire from 'Ractive/prototype/fire';\nimport get from 'Ractive/prototype/get';\nimport insert from 'Ractive/prototype/insert';\nimport merge from 'Ractive/prototype/merge';\nimport observe from 'Ractive/prototype/observe';\nimport observeList from 'Ractive/prototype/observeList';\nimport observeOnce from 'Ractive/prototype/observeOnce';\nimport off from 'Ractive/prototype/off';\nimport on from 'Ractive/prototype/on';\nimport once from 'Ractive/prototype/once';\nimport pop from 'Ractive/prototype/pop';\nimport push from 'Ractive/prototype/push';\nimport render from 'Ractive/prototype/render';\nimport reset from 'Ractive/prototype/reset';\nimport resetPartial from 'Ractive/prototype/resetPartial';\nimport resetTemplate from 'Ractive/prototype/resetTemplate';\nimport reverse from 'Ractive/prototype/reverse';\nimport set from 'Ractive/prototype/set';\nimport shift from 'Ractive/prototype/shift';\nimport sort from 'Ractive/prototype/sort';\nimport splice from 'Ractive/prototype/splice';\nimport subtract from 'Ractive/prototype/subtract';\nimport teardown from 'Ractive/prototype/teardown';\nimport toggle from 'Ractive/prototype/toggle';\nimport toHTML from 'Ractive/prototype/toHTML';\nimport unrender from 'Ractive/prototype/unrender';\nimport unshift from 'Ractive/prototype/unshift';\nimport update from 'Ractive/prototype/update';\nimport updateModel from 'Ractive/prototype/updateModel';\n\nexport default {\n\tadd,\n\tanimate,\n\tdetach,\n\tfind,\n\tfindAll,\n\tfindAllComponents,\n\tfindComponent,\n\tfindContainer,\n\tfindParent,\n\tfire,\n\tget,\n\tinsert,\n\tmerge,\n\tobserve,\n\tobserveList,\n\tobserveOnce,\n\t// TODO reinstate these\n\t// observeListOnce,\n\toff,\n\ton,\n\tonce,\n\tpop,\n\tpush,\n\trender,\n\treset,\n\tresetPartial,\n\tresetTemplate,\n\treverse,\n\tset,\n\tshift,\n\tsort,\n\tsplice,\n\tsubtract,\n\tteardown,\n\ttoggle,\n\ttoHTML,\n\ttoHtml: toHTML,\n\tunrender,\n\tunshift,\n\tupdate,\n\tupdateModel\n};\n","import { splitKeypath } from 'shared/keypaths';\nimport runloop from 'global/runloop';\n\nexport default function Ractive$updateModel ( keypath, cascade ) {\n\tconst promise = runloop.start( this, true );\n\n\tif ( !keypath ) {\n\t\tthis.viewmodel.updateFromBindings( true );\n\t} else {\n\t\tthis.viewmodel.joinAll( splitKeypath( keypath ) ).updateFromBindings( cascade !== false );\n\t}\n\n\trunloop.end();\n\n\treturn promise;\n}\n","import Hook from 'events/Hook';\nimport runloop from 'global/runloop';\nimport { splitKeypath } from 'shared/keypaths';\n\nvar updateHook = new Hook( 'update' );\n\nexport default function Ractive$update ( keypath ) {\n\tvar promise, model;\n\n\tmodel = keypath ?\n\t\tthis.viewmodel.joinAll( splitKeypath( keypath ) ) :\n\t\tthis.viewmodel;\n\n\tpromise = runloop.start( this, true );\n\tmodel.mark();\n\trunloop.end();\n\n\tupdateHook.fire( this, model );\n\n\treturn promise;\n}\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'unshift' );\n","import Hook from 'events/Hook';\nimport { warnIfDebug } from 'utils/log';\nimport Promise from 'utils/Promise';\nimport { removeFromArray } from 'utils/array';\nimport runloop from 'global/runloop';\n\nvar unrenderHook = new Hook( 'unrender' );\n\nexport default function Ractive$unrender () {\n\tvar promise, shouldDestroy;\n\n\tif ( !this.fragment.rendered ) {\n\t\twarnIfDebug( 'ractive.unrender() was called on a Ractive instance that was not rendered' );\n\t\treturn Promise.resolve();\n\t}\n\n\tpromise = runloop.start( this, true );\n\n\t// If this is a component, and the component isn't marked for destruction,\n\t// don't detach nodes from the DOM unnecessarily\n\tshouldDestroy = !this.component || this.component.shouldDestroy || this.shouldDestroy;\n\n\t// Cancel any animations in progress\n\twhile ( this._animations[0] ) {\n\t\tthis._animations[0].stop(); // it will remove itself from the index\n\t}\n\n\tthis.fragment.unrender( shouldDestroy );\n\n\tremoveFromArray( this.el.__ractive_instances__, this );\n\n\tunrenderHook.fire( this );\n\n\trunloop.end();\n\treturn promise;\n}\n","export default function Ractive$toHTML () {\n\treturn this.fragment.toString( true );\n}\n","import { badArguments } from 'config/errors';\nimport { splitKeypath } from 'shared/keypaths';\n\nexport default function Ractive$toggle ( keypath ) {\n\tif ( typeof keypath !== 'string' ) {\n\t\tthrow new TypeError( badArguments );\n\t}\n\n\tlet changes;\n\n\tif ( /\\*/.test( keypath ) ) {\n\t\tchanges = {};\n\n\t\tthis.viewmodel.findMatches( splitKeypath( keypath ) ).forEach( model => {\n\t\t\tchanges[ model.getKeypath() ] = !model.get();\n\t\t});\n\n\t\treturn this.set( changes );\n\t}\n\n\treturn this.set( keypath, !this.get( keypath ) );\n}\n","import Hook from 'events/Hook';\nimport Promise from 'utils/Promise';\nimport { removeFromArray } from 'utils/array';\nimport { cancel } from 'shared/methodCallers';\n\nvar teardownHook = new Hook( 'teardown' );\n\n// Teardown. This goes through the root fragment and all its children, removing observers\n// and generally cleaning up after itself\n\nexport default function Ractive$teardown () {\n\tvar promise;\n\n\tthis.fragment.unbind();\n\tthis.viewmodel.teardown();\n\n\tthis._observers.forEach( cancel );\n\n\tif ( this.fragment.rendered && this.el.__ractive_instances__ ) {\n\t\tremoveFromArray( this.el.__ractive_instances__, this );\n\t}\n\n\tthis.shouldDestroy = true;\n\tpromise = ( this.fragment.rendered ? this.unrender() : Promise.resolve() );\n\n\tteardownHook.fire( this );\n\n\tthis._boundFunctions.forEach( deleteFunctionCopy );\n\n\treturn promise;\n}\n\nfunction deleteFunctionCopy ( bound ) {\n\tdelete bound.fn[ bound.prop ];\n}\n","import add from './shared/add';\n\nexport default function Ractive$subtract ( keypath, d ) {\n\treturn add( this, keypath, ( d === undefined ? -1 : -d ) );\n}\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'splice' );\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'sort' );\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'shift' );\n","import { isObject } from 'utils/is';\nimport { splitKeypath } from 'shared/keypaths';\nimport runloop from 'global/runloop';\n\nexport default function Ractive$set ( keypath, value ) {\n\tvar map, promise;\n\n\tpromise = runloop.start( this, true );\n\n\t// Set multiple keypaths in one go\n\tif ( isObject( keypath ) ) {\n\t\tmap = keypath;\n\n\t\tfor ( keypath in map ) {\n\t\t\tif ( map.hasOwnProperty( keypath) ) {\n\t\t\t\tset( this, keypath, map[ keypath ] );\n\t\t\t}\n\t\t}\n\t}\n\t// Set a single keypath\n\telse {\n\t\tset( this, keypath, value );\n\t}\n\n\trunloop.end();\n\n\treturn promise;\n}\n\n\nfunction set ( ractive, keypath, value ) {\n\tif ( /\\*/.test( keypath ) ) {\n\t\tractive.viewmodel.findMatches( splitKeypath( keypath ) ).forEach( model => {\n\t\t\tmodel.set( value );\n\t\t});\n\t} else {\n\t\tconst model = ractive.viewmodel.joinAll( splitKeypath( keypath ) );\n\t\tmodel.set( value );\n\t}\n}\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'reverse' );\n","import { default as templateConfigurator } from 'Ractive/config/custom/template/template';\nimport Fragment from 'view/Fragment';\n\n// TODO should resetTemplate be asynchronous? i.e. should it be a case\n// of outro, update template, intro? I reckon probably not, since that\n// could be achieved with unrender-resetTemplate-render. Also, it should\n// conceptually be similar to resetPartial, which couldn't be async\n\nexport default function Ractive$resetTemplate ( template ) {\n\tvar transitionsEnabled, component;\n\n\ttemplateConfigurator.init( null, this, { template: template });\n\n\ttransitionsEnabled = this.transitionsEnabled;\n\tthis.transitionsEnabled = false;\n\n\t// Is this is a component, we need to set the `shouldDestroy`\n\t// flag, otherwise it will assume by default that a parent node\n\t// will be detached, and therefore it doesn't need to bother\n\t// detaching its own nodes\n\tif ( component = this.component ) {\n\t\tcomponent.shouldDestroy = true;\n\t}\n\n\tthis.unrender();\n\n\tif ( component ) {\n\t\tcomponent.shouldDestroy = false;\n\t}\n\n\t// remove existing fragment and create new one\n\tthis.fragment.unbind();\n\tthis.fragment = new Fragment({\n\t\ttemplate: this.template,\n\t\troot: this,\n\t\towner: this\n\t});\n\tthis.fragment.bind( this.viewmodel );\n\n\tthis.render( this.el, this.anchor );\n\n\tthis.transitionsEnabled = transitionsEnabled;\n}\n","import { ELEMENT } from 'config/types';\nimport runloop from 'global/runloop';\nimport createItem from './items/createItem';\nimport ReferenceResolver from './resolvers/ReferenceResolver';\nimport { bind, rebind, toEscapedString, toString, unbind, unrender, update } from 'shared/methodCallers';\nimport processItems from './helpers/processItems';\nimport parseJSON from 'utils/parseJSON';\nimport { createDocumentFragment } from 'utils/dom';\n\nfunction unrenderAndDestroy ( item ) {\n\titem.unrender( true );\n}\n\nexport default class Fragment {\n\tconstructor ( options ) {\n\t\tthis.owner = options.owner; // The item that owns this fragment - an element, section, partial, or attribute\n\n\t\tthis.isRoot = !options.owner.parentFragment;\n\t\tthis.parent = this.isRoot ? null : this.owner.parentFragment;\n\t\tthis.ractive = options.ractive || ( this.isRoot ? options.owner : this.parent.ractive );\n\n\t\tthis.componentParent = ( this.isRoot && this.ractive.component ) ? this.ractive.component.parentFragment : null;\n\n\t\tthis.context = null;\n\t\tthis.rendered = false;\n\t\tthis.indexRefs = options.indexRefs || ( this.parent ? this.parent.indexRefs : [] );\n\t\tthis.keyRefs = options.keyRefs || ( this.parent ? this.parent.keyRefs : {} );\n\n\t\t// encapsulated styles should be inherited until they get applied by an element\n\t\tthis.cssIds = 'cssIds' in options ? options.cssIds : ( this.parent ? this.parent.cssIds : null );\n\n\t\tthis.resolvers = [];\n\n\t\tthis.dirty = false;\n\t\tthis.dirtyArgs = this.dirtyValue = true; // TODO getArgsList is nonsense - should deprecate legacy directives style\n\n\t\tthis.template = options.template || [];\n\t\tthis.createItems();\n\t}\n\n\tbind ( context ) {\n\t\tthis.context = context;\n\t\tthis.items.forEach( bind );\n\t\tthis.bound = true;\n\n\t\t// in rare cases, a forced resolution (or similar) will cause the\n\t\t// fragment to be dirty before it's even finished binding. In those\n\t\t// cases we update immediately\n\t\tif ( this.dirty ) this.update();\n\n\t\treturn this;\n\t}\n\n\tbubble () {\n\t\tthis.dirtyArgs = this.dirtyValue = true;\n\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\n\t\t\tif ( this.isRoot ) { // TODO encapsulate 'is component root, but not overall root' check?\n\t\t\t\tif ( this.ractive.component ) {\n\t\t\t\t\tthis.ractive.component.bubble();\n\t\t\t\t} else if ( this.bound ) {\n\t\t\t\t\trunloop.addFragment( this );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.owner.bubble();\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateItems () {\n\t\tthis.items = this.template.map( ( template, index ) => {\n\t\t\treturn createItem({ parentFragment: this, template, index });\n\t\t});\n\t}\n\n\tdetach () {\n\t\tconst docFrag = createDocumentFragment();\n\t\tthis.items.forEach( item => docFrag.appendChild( item.detach() ) );\n\t\treturn docFrag;\n\t}\n\n\tfind ( selector ) {\n\t\tconst len = this.items.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst found = this.items[i].find( selector );\n\t\t\tif ( found ) return found;\n\t\t}\n\t}\n\n\tfindAll ( selector, query ) {\n\t\tif ( this.items ) {\n\t\t\tconst len = this.items.length;\n\t\t\tlet i;\n\n\t\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\t\tconst item = this.items[i];\n\n\t\t\t\tif ( item.findAll ) {\n\t\t\t\t\titem.findAll( selector, query );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn query;\n\t}\n\n\tfindComponent ( name ) {\n\t\tconst len = this.items.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst found = this.items[i].findComponent( name );\n\t\t\tif ( found ) return found;\n\t\t}\n\t}\n\n\tfindAllComponents ( name, query ) {\n\t\tif ( this.items ) {\n\t\t\tconst len = this.items.length;\n\t\t\tlet i;\n\n\t\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\t\tconst item = this.items[i];\n\n\t\t\t\tif ( item.findAllComponents ) {\n\t\t\t\t\titem.findAllComponents( name, query );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn query;\n\t}\n\n\tfindContext () {\n\t\tlet fragment = this;\n\t\twhile ( !fragment.context ) fragment = fragment.parent;\n\t\treturn fragment.context;\n\t}\n\n\tfindNextNode ( item ) {\n\t\tconst nextItem = this.items[ item.index + 1 ];\n\n\t\tif ( nextItem ) return nextItem.firstNode();\n\n\t\t// if this is the root fragment, and there are no more items,\n\t\t// it means we're at the end...\n\t\tif ( this.isRoot ) {\n\t\t\tif ( this.ractive.component ) {\n\t\t\t\treturn this.ractive.component.parentFragment.findNextNode( this.ractive.component );\n\t\t\t}\n\n\t\t\t// TODO possible edge case with other content\n\t\t\t// appended to this.ractive.el?\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.owner.findNextNode( this ); // the argument is in case the parent is a RepeatedFragment\n\t}\n\n\tfindParentNode () {\n\t\tlet fragment = this;\n\n\t\tdo {\n\t\t\tif ( fragment.owner.type === ELEMENT ) {\n\t\t\t\treturn fragment.owner.node;\n\t\t\t}\n\n\t\t\tif ( fragment.isRoot && !fragment.ractive.component ) { // TODO encapsulate check\n\t\t\t\treturn fragment.ractive.el;\n\t\t\t}\n\n\t\t\tfragment = fragment.componentParent || fragment.parent; // TODO ugh\n\t\t} while ( fragment );\n\n\t\tthrow new Error( 'Could not find parent node' ); // TODO link to issue tracker\n\t}\n\n\tfindRepeatingFragment () {\n\t\tlet fragment = this;\n\t\t// TODO better check than fragment.parent.iterations\n\t\twhile ( fragment.parent && !fragment.isIteration ) {\n\t\t\tfragment = fragment.parent || fragment.componentParent;\n\t\t}\n\n\t\treturn fragment;\n\t}\n\n\tfirstNode () {\n\t\treturn this.items[0] ? this.items[0].firstNode() : this.parent.findNextNode( this.owner );\n\t}\n\n\t// TODO ideally, this would be deprecated in favour of an\n\t// expression-like approach\n\tgetArgsList () {\n\t\tif ( this.dirtyArgs ) {\n\t\t\tconst values = {};\n\t\t\tconst source = processItems( this.items, values, this.ractive._guid );\n\t\t\tconst parsed = parseJSON( '[' + source + ']', values );\n\n\t\t\tthis.argsList = parsed ?\n\t\t\t\tparsed.value :\n\t\t\t\t[ this.toString() ];\n\n\t\t\tthis.dirtyArgs = false;\n\t\t}\n\n\t\treturn this.argsList;\n\t}\n\n\trebind ( context ) {\n\t\tthis.context = context;\n\n\t\tthis.items.forEach( rebind );\n\t}\n\n\trender ( target ) {\n\t\tif ( this.rendered ) throw new Error( 'Fragment is already rendered!' );\n\t\tthis.rendered = true;\n\n\t\tthis.items.forEach( item => item.render( target ) );\n\t}\n\n\tresetTemplate ( template ) {\n\t\tconst wasBound = this.bound;\n\t\tconst wasRendered = this.rendered;\n\n\t\t// TODO ensure transitions are disabled globally during reset\n\n\t\tif ( wasBound ) {\n\t\t\tif ( wasRendered ) this.unrender( true );\n\t\t\tthis.unbind();\n\t\t}\n\n\t\tthis.template = template;\n\t\tthis.createItems();\n\n\t\tif ( wasBound ) {\n\t\t\tthis.bind( this.context );\n\n\t\t\tif ( wasRendered ) {\n\t\t\t\tconst parentNode = this.findParentNode();\n\t\t\t\tconst anchor = this.parent ? this.parent.findNextNode( this.owner ) : null;\n\n\t\t\t\tif ( anchor ) {\n\t\t\t\t\tconst docFrag = createDocumentFragment();\n\t\t\t\t\tthis.render( docFrag );\n\t\t\t\t\tparentNode.insertBefore( docFrag, anchor );\n\t\t\t\t} else {\n\t\t\t\t\tthis.render( parentNode );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresolve ( template, callback ) {\n\t\tif ( !this.context ) {\n\t\t\treturn this.parent.resolve( template, callback );\n\t\t}\n\n\t\tconst resolver = new ReferenceResolver( this, template, callback );\n\t\tthis.resolvers.push( resolver );\n\n\t\treturn resolver; // so we can e.g. force resolution\n\t}\n\n\ttoHtml () {\n\t\treturn this.toString();\n\t}\n\n\ttoString ( escape ) {\n\t\treturn this.items.map( escape ? toEscapedString : toString ).join( '' );\n\t}\n\n\tunbind () {\n\t\tthis.items.forEach( unbind );\n\t\tthis.bound = false;\n\n\t\treturn this;\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tthis.items.forEach( shouldDestroy ? unrenderAndDestroy : unrender );\n\t\tthis.rendered = false;\n\t}\n\n\tupdate () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.items.forEach( update );\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n\n\tvalueOf () {\n\t\tif ( this.items.length === 1 ) {\n\t\t\treturn this.items[0].valueOf();\n\t\t}\n\n\t\tif ( this.dirtyValue ) {\n\t\t\tconst values = {};\n\t\t\tconst source = processItems( this.items, values, this.ractive._guid );\n\t\t\tconst parsed = parseJSON( source, values );\n\n\t\t\tthis.value = parsed ?\n\t\t\t\tparsed.value :\n\t\t\t\tthis.toString();\n\n\t\t\tthis.dirtyValue = false;\n\t\t}\n\n\t\treturn this.value;\n\t}\n}\n","import { TEXT } from 'config/types';\n\n// TODO all this code needs to die\nexport default function processItems ( items, values, guid, counter = 0 ) {\n\treturn items.map( function ( item ) {\n\t\tif ( item.type === TEXT ) {\n\t\t\treturn item.template;\n\t\t}\n\n\t\tif ( item.fragment ) {\n\t\t\tif ( item.fragment.iterations ) {\n\t\t\t\treturn item.fragment.iterations.map( fragment => {\n\t\t\t\t\treturn processItems( fragment.items, values, guid, counter );\n\t\t\t\t}).join( '' );\n\t\t\t} else {\n\t\t\t\treturn processItems( item.fragment.items, values, guid, counter );\n\t\t\t}\n\t\t}\n\n\t\tconst placeholderId = `${guid}-${counter++}`;\n\n\t\tvalues[ placeholderId ] = item.model ?\n\t\t\titem.model.wrapper ?\n\t\t\t\titem.model.wrapper.value :\n\t\t\t\titem.model.get() :\n\t\t\tundefined;\n\n\t\treturn '${' + placeholderId + '}';\n\t}).join( '' );\n}\n","import { normalise } from 'shared/keypaths';\nimport { removeFromArray } from 'utils/array';\nimport resolveAmbiguousReference from './resolveAmbiguousReference';\n\nexport default class ReferenceResolver {\n\tconstructor ( fragment, reference, callback ) {\n\t\tthis.fragment = fragment;\n\t\tthis.reference = normalise( reference );\n\t\tthis.callback = callback;\n\n\t\tthis.keys = reference.split( '.' );\n\t\tthis.resolved = false;\n\n\t\t// TODO the consumer should take care of addUnresolved\n\t\t// we attach to all the contexts between here and the root\n\t\t// - whenever their values change, they can quickly\n\t\t// check to see if we can resolve\n\t\twhile ( fragment ) {\n\t\t\tif ( fragment.context ) {\n\t\t\t\tfragment.context.addUnresolved( this.keys[0], this );\n\t\t\t}\n\n\t\t\tfragment = fragment.componentParent || fragment.parent;\n\t\t}\n\t}\n\n\tattemptResolution () {\n\t\tif ( this.resolved ) return;\n\n\t\tconst model = resolveAmbiguousReference( this.fragment, this.reference );\n\n\t\tif ( model ) {\n\t\t\tthis.resolved = true;\n\t\t\tthis.callback( model );\n\t\t}\n\t}\n\n\tforceResolution () {\n\t\tif ( this.resolved ) return;\n\n\t\tconst model = this.fragment.findContext().joinAll( this.keys );\n\t\tthis.callback( model );\n\t\tthis.resolved = true;\n\t}\n\n\tunbind () {\n\t\tremoveFromArray( this.fragment.unresolved, this );\n\t}\n}\n","import { DOCTYPE, ELEMENT, INTERPOLATOR, PARTIAL, SECTION, TRIPLE, YIELDER } from '../../config/types';\nimport Component from './Component';\nimport Doctype from './Doctype';\nimport Form from './element/specials/Form';\nimport Element from './Element';\nimport Interpolator from './Interpolator';\nimport Input from './element/specials/Input';\nimport Option from './element/specials/Option';\nimport Partial from './Partial';\nimport Section from './Section';\nimport Select from './element/specials/Select';\nimport Text from './Text';\nimport Triple from './Triple';\nimport Yielder from './Yielder';\nimport getComponentConstructor from './component/getComponentConstructor';\n\nconst constructors = {\n\t[ DOCTYPE ]: Doctype,\n\t[ INTERPOLATOR ]: Interpolator,\n\t[ PARTIAL ]: Partial,\n\t[ SECTION ]: Section,\n\t[ TRIPLE ]: Triple,\n\t[ YIELDER ]: Yielder\n};\n\nconst specialElements = {\n\tdoctype: Doctype,\n\tform: Form,\n\tinput: Input,\n\toption: Option,\n\tselect: Select,\n\ttextarea: Input // it may turn out we need a separate Textarea class, but until then...\n};\n\nexport default function createItem ( options ) {\n\tif ( typeof options.template === 'string' ) {\n\t\treturn new Text( options );\n\t}\n\n\tif ( options.template.t === ELEMENT ) {\n\t\t// could be component or element\n\t\tconst ComponentConstructor = getComponentConstructor( options.parentFragment.ractive, options.template.e );\n\t\tif ( ComponentConstructor ) {\n\t\t\treturn new Component( options, ComponentConstructor );\n\t\t}\n\n\t\tconst tagName = options.template.e.toLowerCase();\n\n\t\tconst ElementConstructor = specialElements[ tagName ] || Element;\n\t\treturn new ElementConstructor( options );\n\t}\n\n\tconst Item = constructors[ options.template.t ];\n\n\tif ( !Item ) throw new Error( `Unrecognised item type ${options.template.t}` );\n\n\treturn new Item( options );\n}\n","import { noRegistryFunctionReturn } from 'config/errors';\nimport { warnIfDebug } from 'utils/log';\nimport { findInstance } from 'shared/registry';\n\n// finds the component constructor in the registry or view hierarchy registries\nexport default function getComponentConstructor ( ractive, name ) {\n\tvar Component, instance = findInstance( 'components', ractive, name );\n\n\tif ( instance ) {\n\t\tComponent = instance.components[ name ];\n\n\t\t// best test we have for not Ractive.extend\n\t\tif ( !Component._Parent ) {\n\t\t\t// function option, execute and store for reset\n\t\t\tlet fn = Component.bind( instance );\n\t\t\tfn.isOwner = instance.components.hasOwnProperty( name );\n\t\t\tComponent = fn();\n\n\t\t\tif ( !Component ) {\n\t\t\t\twarnIfDebug( noRegistryFunctionReturn, name, 'component', 'component', { ractive });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( typeof Component === 'string' ) {\n\t\t\t\t// allow string lookup\n\t\t\t\tComponent = getComponentConstructor( ractive, Component );\n\t\t\t}\n\n\t\t\tComponent._fn = fn;\n\t\t\tinstance.components[ name ] = Component;\n\t\t}\n\t}\n\n\treturn Component;\n}\n","import Item from './shared/Item';\nimport Fragment from '../Fragment';\nimport parse from 'parse/_parse';\nimport { warnIfDebug } from 'utils/log';\nimport { removeFromArray } from 'utils/array';\n\nexport default class Yielder extends Item {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\n\t\tthis.container = options.parentFragment.ractive;\n\t\tthis.component = this.container.component;\n\n\t\tthis.containerFragment = options.parentFragment;\n\t\tthis.parentFragment = this.component.parentFragment;\n\n\t\t// {{yield}} is equivalent to {{yield content}}\n\t\tthis.name = options.template.n || '';\n\t}\n\n\tbind () {\n\t\tconst name = this.name;\n\n\t\t( this.component.yielders[ name ] || ( this.component.yielders[ name ] = [] ) ).push( this );\n\n\t\t// TODO don't parse here\n\t\tlet template = this.container._inlinePartials[ name || 'content' ];\n\n\t\tif ( typeof template === 'string' ) {\n\t\t\ttemplate = parse( template ).t;\n\t\t}\n\n\t\tif ( !template ) {\n\t\t\twarnIfDebug( `Could not find template for partial \"${name}\"`, { ractive: this.ractive });\n\t\t\ttemplate = [];\n\t\t}\n\n\t\tthis.fragment = new Fragment({\n\t\t\towner: this,\n\t\t\tractive: this.container.parent,\n\t\t\ttemplate\n\t\t}).bind();\n\t}\n\n\tdetach () {\n\t\treturn this.fragment.detach();\n\t}\n\n\tfind ( selector ) {\n\t\treturn this.fragment.find( selector );\n\t}\n\n\tfindAll ( selector, queryResult ) {\n\t\tthis.fragment.find( selector, queryResult );\n\t}\n\n\tfindComponent ( name ) {\n\t\treturn this.fragment.findComponent( name );\n\t}\n\n\tfindAllComponents ( name, queryResult ) {\n\t\tthis.fragment.findAllComponents( name, queryResult );\n\t}\n\n\tfirstNode () {\n\t\treturn this.fragment.firstNode();\n\t}\n\n\trebind () {\n\t\tthrow new Error( 'Yielder$rebind is not yet implemented!' );\n\t}\n\n\trender ( target ) {\n\t\treturn this.fragment.render( target );\n\t}\n\n\tsetTemplate ( name ) {\n\t\tlet template = this.parentFragment.ractive.partials[ name ];\n\n\t\tif ( typeof template === 'string' ) {\n\t\t\ttemplate = parse( template ).t;\n\t\t}\n\n\t\tthis.partialTemplate = template || []; // TODO warn on missing partial\n\t}\n\n\ttoString ( escape ) {\n\t\treturn this.fragment.toString( escape );\n\t}\n\n\tunbind () {\n\t\tthis.fragment.unbind();\n\t\tremoveFromArray( this.component.yielders[ this.name ], this );\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tthis.fragment.unrender( shouldDestroy );\n\t}\n}\n","import { createDocumentFragment, matches } from 'utils/dom';\nimport Mustache from './shared/Mustache';\nimport insertHtml from './triple/insertHtml';\nimport { decodeCharacterReferences } from 'utils/html';\n\nexport default class Triple extends Mustache {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\t}\n\n\tdetach () {\n\t\tconst docFrag = createDocumentFragment();\n\t\tthis.nodes.forEach( node => docFrag.appendChild( node ) );\n\t\treturn docFrag;\n\t}\n\n\tfind ( selector ) {\n\t\tconst len = this.nodes.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst node = this.nodes[i];\n\n\t\t\tif ( node.nodeType !== 1 ) continue;\n\n\t\t\tif ( matches( node, selector ) ) return node;\n\n\t\t\tconst queryResult = node.querySelector( selector );\n\t\t\tif ( queryResult ) return queryResult;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindAll ( selector, query ) {\n\t\tconst len = this.nodes.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst node = this.nodes[i];\n\n\t\t\tif ( node.nodeType !== 1 ) continue;\n\n\t\t\tif ( query.test( node ) ) query.add( node );\n\n\t\t\tconst queryAllResult = node.querySelectorAll( selector );\n\t\t\tif ( queryAllResult ) {\n\t\t\t\tconst numNodes = queryAllResult.length;\n\t\t\t\tlet j;\n\n\t\t\t\tfor ( j = 0; j < numNodes; j += 1 ) {\n\t\t\t\t\tquery.add( queryAllResult[j] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfindComponent () {\n\t\treturn null;\n\t}\n\n\tfirstNode () {\n\t\treturn this.nodes[0];\n\t}\n\n\trender ( target ) {\n\t\tconst html = this.model ? this.model.get() : '';\n\t\tthis.nodes = insertHtml( html, this.parentFragment.findParentNode(), target );\n\t\tthis.rendered = true;\n\t}\n\n\ttoString () {\n\t\treturn this.model && this.model.get() != null ? decodeCharacterReferences( '' + this.model.get() ) : '';\n\t}\n\n\tunrender () {\n\t\tif ( this.nodes ) this.nodes.forEach( node => node.parentNode.removeChild( node ) );\n\t\tthis.rendered = false;\n\t}\n\n\tupdate () {\n\t\tif ( this.rendered && this.dirty ) {\n\t\t\tthis.unrender();\n\t\t\tconst docFrag = createDocumentFragment();\n\t\t\tthis.render( docFrag );\n\n\t\t\tconst parentNode = this.parentFragment.findParentNode();\n\t\t\tconst anchor = this.parentFragment.findNextNode( this );\n\n\t\t\tparentNode.insertBefore( docFrag, anchor );\n\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n}\n","import { svg } from 'config/namespaces';\nimport { createElement } from 'utils/dom';\n\nvar elementCache = {}, ieBug, ieBlacklist;\n\ntry {\n\tcreateElement( 'table' ).innerHTML = 'foo';\n} catch ( err ) {\n\tieBug = true;\n\n\tieBlacklist = {\n\t\tTABLE:  [ '<table class=\"x\">', '</table>' ],\n\t\tTHEAD:  [ '<table><thead class=\"x\">', '</thead></table>' ],\n\t\tTBODY:  [ '<table><tbody class=\"x\">', '</tbody></table>' ],\n\t\tTR:     [ '<table><tr class=\"x\">', '</tr></table>' ],\n\t\tSELECT: [ '<select class=\"x\">', '</select>' ]\n\t};\n}\n\nexport default function ( html, node, docFrag ) {\n\tvar container, nodes = [], wrapper, selectedOption, child, i;\n\n\t// render 0 and false\n\tif ( html != null && html !== '' ) {\n\t\tif ( ieBug && ( wrapper = ieBlacklist[ node.tagName ] ) ) {\n\t\t\tcontainer = element( 'DIV' );\n\t\t\tcontainer.innerHTML = wrapper[0] + html + wrapper[1];\n\t\t\tcontainer = container.querySelector( '.x' );\n\n\t\t\tif ( container.tagName === 'SELECT' ) {\n\t\t\t\tselectedOption = container.options[ container.selectedIndex ];\n\t\t\t}\n\t\t}\n\n\t\telse if ( node.namespaceURI === svg ) {\n\t\t\tcontainer = element( 'DIV' );\n\t\t\tcontainer.innerHTML = '<svg class=\"x\">' + html + '</svg>';\n\t\t\tcontainer = container.querySelector( '.x' );\n\t\t}\n\n\t\telse {\n\t\t\tcontainer = element( node.tagName );\n\t\t\tcontainer.innerHTML = html;\n\n\t\t\tif ( container.tagName === 'SELECT' ) {\n\t\t\t\tselectedOption = container.options[ container.selectedIndex ];\n\t\t\t}\n\t\t}\n\n\t\twhile ( child = container.firstChild ) {\n\t\t\tnodes.push( child );\n\t\t\tdocFrag.appendChild( child );\n\t\t}\n\n\t\t// This is really annoying. Extracting <option> nodes from the\n\t\t// temporary container <select> causes the remaining ones to\n\t\t// become selected. So now we have to deselect them. IE8, you\n\t\t// amaze me. You really do\n\t\t// ...and now Chrome too\n\t\tif ( node.tagName === 'SELECT' ) {\n\t\t\ti = nodes.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( nodes[i] !== selectedOption ) {\n\t\t\t\t\tnodes[i].selected = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn nodes;\n}\n\nfunction element ( tagName ) {\n\treturn elementCache[ tagName ] || ( elementCache[ tagName ] = createElement( tagName ) );\n}\n","import { doc } from 'config/environment';\nimport { TEXT } from 'config/types';\nimport { escapeHtml } from 'utils/html';\nimport Item from './shared/Item';\n\nexport default class Text extends Item {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\t\tthis.type = TEXT;\n\t}\n\n\tbind () {\n\t\t// noop\n\t}\n\n\tdetach () {\n\t\tif ( !this.node.parentNode ) {\n\t\t\tthrow new Error( 'TODO an unexpected situation arose' );\n\t\t}\n\t\treturn this.node.parentNode.removeChild( this.node );\n\t}\n\n\tfirstNode () {\n\t\treturn this.node;\n\t}\n\n\trebind () {\n\t\t// noop\n\t}\n\n\trender ( target ) {\n\t\tthis.node = doc.createTextNode( this.template );\n\t\ttarget.appendChild( this.node );\n\t\tthis.rendered = true;\n\t}\n\n\ttoString ( escape ) {\n\t\treturn escape ? escapeHtml( this.template ) : this.template;\n\t}\n\n\tunbind () {\n\t\t// noop\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tif ( this.rendered && shouldDestroy ) this.detach();\n\t\tthis.rendered = false;\n\t}\n\n\tupdate () {\n\t\t// noop\n\t}\n\n\tvalueOf () {\n\t\treturn this.template;\n\t}\n}\n","import Element from '../../Element';\nimport runloop from 'global/runloop';\nimport { toArray } from 'utils/array';\n\nfunction valueContains ( selectValue, optionValue ) {\n\tlet i = selectValue.length;\n\twhile ( i-- ) {\n\t\tif ( selectValue[i] == optionValue ) return true;\n\t}\n}\n\nexport default class Select extends Element {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\t\tthis.options = [];\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\n\t\t\tif ( this.rendered ) {\n\t\t\t\trunloop.scheduleTask( () => {\n\t\t\t\t\tthis.sync();\n\t\t\t\t\tthis.dirty = false;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.parentFragment.bubble(); // default behaviour\n\t\t}\n\t}\n\n\trender ( target ) {\n\t\tsuper.render( target );\n\t\tthis.sync();\n\n\t\tconst node = this.node;\n\n\t\tlet i = node.options.length;\n\t\twhile ( i-- ) {\n\t\t\tnode.options[i].defaultSelected = node.options[i].selected;\n\t\t}\n\n\t\tthis.rendered = true;\n\t}\n\n\tsync () {\n\t\tconst selectNode = this.node;\n\n\t\tif ( !selectNode ) return;\n\n\t\tconst options = toArray( selectNode.options );\n\n\t\tconst selectValue = this.getAttribute( 'value' );\n\t\tconst isMultiple = this.getAttribute( 'multiple' );\n\n\t\t// If the <select> has a specified value, that should override\n\t\t// these options\n\t\tif ( selectValue !== undefined ) {\n\t\t\tlet optionWasSelected;\n\n\t\t\toptions.forEach( o => {\n\t\t\t\tconst optionValue = o._ractive ? o._ractive.value : o.value;\n\t\t\t\tconst shouldSelect = isMultiple ? valueContains( selectValue, optionValue ) : selectValue == optionValue;\n\n\t\t\t\tif ( shouldSelect ) {\n\t\t\t\t\toptionWasSelected = true;\n\t\t\t\t}\n\n\t\t\t\to.selected = shouldSelect;\n\t\t\t});\n\n\t\t\tif ( !optionWasSelected && !isMultiple ) {\n\t\t\t\tif ( options[0] ) {\n\t\t\t\t\toptions[0].selected = true;\n\t\t\t\t}\n\n\t\t\t\tif ( this.binding ) {\n\t\t\t\t\tthis.binding.forceUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Otherwise the value should be initialised according to which\n\t\t// <option> element is selected, if twoway binding is in effect\n\t\telse if ( this.binding ) {\n\t\t\tthis.binding.forceUpdate();\n\t\t}\n\t}\n\n\tupdate () {\n\t\tsuper.update();\n\t\tthis.sync();\n\t}\n}\n","import { createDocumentFragment } from 'utils/dom';\nimport { SECTION_EACH, SECTION_IF, SECTION_IF_WITH, SECTION_UNLESS, SECTION_WITH } from 'config/types';\nimport { isArray, isObject } from 'utils/is';\nimport Fragment from '../Fragment';\nimport RepeatedFragment from '../RepeatedFragment';\nimport Mustache from './shared/Mustache';\n\nfunction isEmpty ( value ) {\n\treturn !value ||\n\t       ( isArray( value ) && value.length === 0 ) ||\n\t\t   ( isObject( value ) && Object.keys( value ).length === 0 );\n}\n\nfunction getType ( value, hasIndexRef ) {\n\tif ( hasIndexRef || isArray( value ) ) return SECTION_EACH;\n\tif ( isObject( value ) || typeof value === 'function' ) return SECTION_WITH;\n\tif ( value === undefined ) return null;\n\treturn SECTION_IF;\n}\n\nexport default class Section extends Mustache {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\n\t\tthis.sectionType = options.template.n || null;\n\t\tthis.fragment = null;\n\t}\n\n\tbind () {\n\t\tsuper.bind();\n\n\t\t// if we managed to bind, we need to create children\n\t\tif ( this.model ) {\n\t\t\tconst value = this.model.value; // TODO should use this.model.get()... but weirdness around root models\n\t\t\tlet fragment;\n\n\t\t\tif ( !this.sectionType ) this.sectionType = getType( value, this.template.i );\n\n\t\t\tif ( isEmpty( value ) && this.sectionType !== SECTION_WITH ) { // TODO again, WITH should not render if empty\n\t\t\t\tif ( this.sectionType === SECTION_UNLESS ) {\n\t\t\t\t\tthis.fragment = new Fragment({\n\t\t\t\t\t\towner: this,\n\t\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t\t}).bind();\n\t\t\t\t}\n\n\t\t\t\t// otherwise, create no children\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.sectionType === SECTION_UNLESS ) return;\n\n\t\t\tif ( this.sectionType === SECTION_IF ) {\n\t\t\t\tfragment = new Fragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t}).bind();\n\t\t\t}\n\n\t\t\t// TODO should only be WITH, and it should behave like IF_WITH\n\t\t\telse if ( this.sectionType === SECTION_WITH || this.sectionType === SECTION_IF_WITH ) {\n\t\t\t\tfragment = new Fragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t}).bind( this.model );\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tfragment = new RepeatedFragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f,\n\t\t\t\t\tindexRef: this.template.i\n\t\t\t\t}).bind( this.model );\n\t\t\t}\n\n\n\t\t\tthis.fragment = fragment;\n\t\t}\n\t}\n\n\tdetach () {\n\t\treturn this.fragment ? this.fragment.detach() : createDocumentFragment();\n\t}\n\n\tfind ( selector ) {\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.find( selector );\n\t\t}\n\t}\n\n\tfindAll ( selector, query ) {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAll( selector, query );\n\t\t}\n\t}\n\n\tfindComponent ( name ) {\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.findComponent( name );\n\t\t}\n\t}\n\n\tfindAllComponents ( name, query ) {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAllComponents( name, query );\n\t\t}\n\t}\n\n\tfirstNode () {\n\t\treturn this.fragment && this.fragment.firstNode();\n\t}\n\n\trebind () {\n\t\tsuper.rebind();\n\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.rebind( this.sectionType === SECTION_IF ? null : this.model );\n\t\t}\n\t}\n\n\trender ( target ) {\n\t\tthis.rendered = true;\n\t\tif ( this.fragment ) this.fragment.render( target );\n\t}\n\n\tshuffle ( newIndices ) {\n\t\tif ( this.fragment && this.sectionType === SECTION_EACH ) {\n\t\t\tthis.fragment.shuffle( newIndices );\n\t\t}\n\t}\n\n\ttoString ( escape ) {\n\t\treturn this.fragment ? this.fragment.toString( escape ) : '';\n\t}\n\n\tunbind () {\n\t\tsuper.unbind();\n\t\tif ( this.fragment ) this.fragment.unbind();\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tif ( this.rendered && this.fragment ) this.fragment.unrender( shouldDestroy );\n\t\tthis.rendered = false;\n\t}\n\n\t// TODO DRY this out - lot of repeated stuff between this and bind()\n\tupdate () {\n\t\tif ( !this.dirty ) return;\n\t\tif ( !this.model ) return; // TODO can this happen?\n\n\t\tconst value = this.model.value; // TODO see above - should use .get()\n\n\t\tif ( this.sectionType === null ) this.sectionType = getType( value, this.template.i );\n\n\t\tlet newFragment;\n\n\t\tif ( this.sectionType === SECTION_EACH ) {\n\t\t\tif ( this.fragment ) {\n\t\t\t\tthis.fragment.update();\n\t\t\t} else {\n\t\t\t\t// TODO can this happen?\n\t\t\t\tnewFragment = new RepeatedFragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f,\n\t\t\t\t\tindexRef: this.template.i\n\t\t\t\t}).bind( this.model );\n\t\t\t}\n\t\t}\n\n\t\t// TODO same comment as before - WITH should be IF_WITH\n\t\telse if ( this.sectionType === SECTION_WITH ) {\n\t\t\tif ( this.fragment ) {\n\t\t\t\tthis.fragment.update();\n\t\t\t} else {\n\t\t\t\tnewFragment = new Fragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t}).bind( this.model );\n\t\t\t}\n\t\t}\n\n\t\telse if ( this.sectionType === SECTION_IF_WITH ) {\n\t\t\tif ( this.fragment ) {\n\t\t\t\tif ( isEmpty( value ) ) {\n\t\t\t\t\tif ( this.rendered ) {\n\t\t\t\t\t\tthis.fragment.unbind().unrender( true );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.fragment = null;\n\t\t\t\t} else {\n\t\t\t\t\tthis.fragment.update();\n\t\t\t\t}\n\t\t\t} else if ( !isEmpty( value ) ) {\n\t\t\t\tnewFragment = new Fragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t}).bind( this.model );\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tconst fragmentShouldExist = this.sectionType === SECTION_UNLESS ? isEmpty( value ) : !!value;\n\n\t\t\tif ( this.fragment ) {\n\t\t\t\tif ( fragmentShouldExist ) {\n\t\t\t\t\tthis.fragment.update();\n\t\t\t\t} else {\n\t\t\t\t\tif ( this.rendered ) {\n\t\t\t\t\t\tthis.fragment.unbind().unrender( true );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.fragment = null;\n\t\t\t\t}\n\t\t\t} else if ( fragmentShouldExist ) {\n\t\t\t\tnewFragment = new Fragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t}).bind( null );\n\t\t\t}\n\t\t}\n\n\t\tif ( newFragment ) {\n\t\t\tif ( this.rendered ) {\n\t\t\t\tconst parentNode = this.parentFragment.findParentNode();\n\t\t\t\tconst anchor = this.parentFragment.findNextNode( this );\n\n\t\t\t\tif ( anchor ) {\n\t\t\t\t\tconst docFrag = createDocumentFragment();\n\t\t\t\t\tnewFragment.render( docFrag );\n\n\t\t\t\t\t// we use anchor.parentNode, not parentNode, because the sibling\n\t\t\t\t\t// may be temporarily detached as a result of a shuffle\n\t\t\t\t\tanchor.parentNode.insertBefore( docFrag, anchor );\n\t\t\t\t} else {\n\t\t\t\t\tnewFragment.render( parentNode );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.fragment = newFragment;\n\t\t}\n\n\t\tthis.dirty = false;\n\t}\n}\n","import Fragment from './Fragment';\nimport { createDocumentFragment } from 'utils/dom';\nimport { isArray, isObject } from 'utils/is';\nimport { toEscapedString, toString, unbind, unrender, unrenderAndDestroy, update } from 'shared/methodCallers';\n\nfunction getRefs ( ref, value, parent ) {\n\tlet refs;\n\n\tif ( ref ) {\n\t\trefs = {};\n\t\tObject.keys( parent ).forEach( ref => {\n\t\t\trefs[ ref ] = parent[ ref ];\n\t\t});\n\t\trefs[ ref ] = value;\n\t} else {\n\t\trefs = parent;\n\t}\n\n\treturn refs;\n}\n\nexport default class RepeatedFragment {\n\tconstructor ( options ) {\n\t\tthis.parent = options.owner.parentFragment;\n\n\t\t// bit of a hack, so reference resolution works without another\n\t\t// layer of indirection\n\t\tthis.parentFragment = this;\n\t\tthis.owner = options.owner;\n\t\tthis.ractive = this.parent.ractive;\n\n\t\tthis.template = options.template;\n\n\t\tthis.indexRef = options.indexRef;\n\t\tthis.keyRef = options.keyRef;\n\n\t\tthis.pendingNewIndices = null;\n\t\tthis.indexByKey = null; // for `{{#each object}}...`\n\t}\n\n\tbind ( context ) {\n\t\tthis.context = context;\n\t\tconst value = context.get();\n\n\t\t// {{#each array}}...\n\t\tif ( isArray( value ) ) {\n\t\t\t// we can't use map, because of sparse arrays\n\t\t\tthis.iterations = [];\n\t\t\tfor ( let i = 0; i < value.length; i += 1 ) {\n\t\t\t\tthis.iterations[i] = this.createIteration( i, i );\n\t\t\t}\n\t\t}\n\n\t\t// {{#each object}}...\n\t\telse if ( isObject( value ) ) {\n\t\t\t// TODO this is a dreadful hack. There must be a neater way\n\t\t\tif ( this.indexRef ) {\n\t\t\t\tconst [ keyRef, indexRef ] = this.indexRef.split( ',' );\n\t\t\t\tthis.keyRef = keyRef;\n\t\t\t\tthis.indexRef = indexRef;\n\t\t\t}\n\n\t\t\tthis.indexByKey = {};\n\t\t\tthis.iterations = Object.keys( value ).map( ( key, index ) => {\n\t\t\t\tthis.indexByKey[ key ] = index;\n\t\t\t\treturn this.createIteration( key, index );\n\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tbubble () {\n\t\tthis.owner.bubble();\n\t}\n\n\tcreateIteration ( key, index ) {\n\t\tconst parentFragment = this.owner.parentFragment;\n\t\tconst keyRefs = getRefs( this.keyRef, key, parentFragment.keyRefs );\n\t\tconst indexRefs = getRefs( this.indexRef, index, parentFragment.indexRefs );\n\n\t\tconst fragment = new Fragment({\n\t\t\towner: this,\n\t\t\ttemplate: this.template,\n\t\t\tindexRefs,\n\t\t\tkeyRefs\n\t\t});\n\n\t\t// TODO this is a bit hacky\n\t\tfragment.key = key;\n\t\tfragment.index = index;\n\t\tfragment.isIteration = true;\n\n\t\tconst model = this.context.joinKey( key );\n\t\treturn fragment.bind( model );\n\t}\n\n\tdetach () {\n\t\tconst docFrag = createDocumentFragment();\n\t\tthis.iterations.forEach( fragment => docFrag.appendChild( fragment.detach() ) );\n\t\treturn docFrag;\n\t}\n\n\tfind ( selector ) {\n\t\tconst len = this.iterations.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst found = this.iterations[i].find( selector );\n\t\t\tif ( found ) return found;\n\t\t}\n\t}\n\n\tfindAll ( selector, query ) {\n\t\tconst len = this.iterations.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tthis.iterations[i].findAll( selector, query );\n\t\t}\n\t}\n\n\tfindComponent ( name ) {\n\t\tconst len = this.iterations.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst found = this.iterations[i].findComponent( name );\n\t\t\tif ( found ) return found;\n\t\t}\n\t}\n\n\tfindAllComponents ( name, query ) {\n\t\tconst len = this.iterations.length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tthis.iterations[i].findAllComponents( name, query );\n\t\t}\n\t}\n\n\tfindNextNode ( iteration ) {\n\t\tif ( iteration.index < this.iterations.length - 1 ) {\n\t\t\treturn this.iterations[ iteration.index + 1 ].firstNode();\n\t\t}\n\n\t\treturn this.owner.findNextNode();\n\t}\n\n\tfirstNode () {\n\t\treturn this.iterations[0] ? this.iterations[0].firstNode() : null;\n\t}\n\n\trebind ( context ) {\n\t\tthis.context = context;\n\n\t\t// {{#each array}}...\n\t\tif ( isArray( context.get() ) ) {\n\t\t\tthis.iterations.forEach( ( fragment, i ) => {\n\t\t\t\tfragment.rebind( context.joinKey( i ) );\n\t\t\t});\n\t\t}\n\t}\n\n\trender ( target ) {\n\t\t// TODO use docFrag.cloneNode...\n\n\t\tif ( this.iterations ) {\n\t\t\tthis.iterations.forEach( fragment => fragment.render( target ) );\n\t\t}\n\n\t\tthis.rendered = true;\n\t}\n\n\tshuffle ( newIndices ) {\n\t\tif ( this.pendingNewIndices ) {\n\t\t\tthrow new Error( 'Section was already shuffled!' );\n\t\t}\n\n\t\tthis.pendingNewIndices = newIndices;\n\t\tthis.previousIterations = this.iterations.slice();\n\n\t\tconst iterations = [];\n\n\t\tnewIndices.forEach( ( newIndex, oldIndex ) => {\n\t\t\tif ( newIndex === -1 ) return;\n\n\t\t\tconst fragment = this.iterations[ oldIndex ];\n\t\t\titerations[ newIndex ] = fragment;\n\n\t\t\tif ( newIndex !== oldIndex ) fragment.dirty = true;\n\t\t});\n\n\t\tthis.iterations = iterations;\n\t\tthis.bubble();\n\t}\n\n\ttoString ( escape ) {\n\t\treturn this.iterations ?\n\t\t\tthis.iterations.map( escape ? toEscapedString : toString ).join( '' ) :\n\t\t\t'';\n\t}\n\n\tunbind () {\n\t\tthis.iterations.forEach( unbind );\n\t\treturn this;\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tthis.iterations.forEach( shouldDestroy ? unrenderAndDestroy : unrender );\n\t\tthis.rendered = false;\n\t}\n\n\t// TODO smart update\n\tupdate () {\n\t\t// skip dirty check, since this is basically just a facade\n\n\t\tif ( this.pendingNewIndices ) {\n\t\t\tthis.updatePostShuffle();\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.context.get();\n\n\t\tlet toRemove;\n\t\tlet oldKeys;\n\n\t\tif ( isArray( value ) ) {\n\t\t\tif ( this.iterations.length > value.length ) {\n\t\t\t\ttoRemove = this.iterations.splice( value.length );\n\t\t\t}\n\t\t} else if ( isObject( value ) ) {\n\t\t\ttoRemove = [];\n\t\t\toldKeys = {};\n\t\t\tlet i = this.iterations.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tconst fragment = this.iterations[i];\n\t\t\t\tif ( fragment.key in value ) {\n\t\t\t\t\toldKeys[ fragment.key ] = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.iterations.splice( i, 1 );\n\t\t\t\t\ttoRemove.push( fragment );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\ttoRemove = this.iterations;\n\t\t\tthis.iterations = [];\n\t\t}\n\n\t\tif ( toRemove ) {\n\t\t\ttoRemove.forEach( fragment => {\n\t\t\t\tfragment.unbind();\n\t\t\t\tfragment.unrender( true );\n\t\t\t});\n\t\t}\n\n\t\t// update the remaining ones\n\t\tthis.iterations.forEach( update );\n\n\t\t// add new iterations\n\t\tconst newLength = isArray( value ) ?\n\t\t\tvalue.length :\n\t\t\tisObject( value ) ?\n\t\t\t\tObject.keys( value ).length :\n\t\t\t\t0;\n\n\t\tif ( newLength > this.iterations.length ) {\n\t\t\tconst docFrag = this.rendered ? createDocumentFragment() : null;\n\t\t\tlet i = this.iterations.length;\n\n\t\t\tif ( isArray( value ) ) {\n\t\t\t\twhile ( i < value.length ) {\n\t\t\t\t\tconst fragment = this.createIteration( i, i );\n\n\t\t\t\t\tthis.iterations.push( fragment );\n\t\t\t\t\tif ( this.rendered ) fragment.render( docFrag );\n\n\t\t\t\t\ti += 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse if ( isObject( value ) ) {\n\t\t\t\tObject.keys( value ).forEach( key => {\n\t\t\t\t\tif ( !( key in oldKeys ) ) {\n\t\t\t\t\t\tconst fragment = this.createIteration( key, i );\n\n\t\t\t\t\t\tthis.iterations.push( fragment );\n\t\t\t\t\t\tif ( this.rendered ) fragment.render( docFrag );\n\n\t\t\t\t\t\ti += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( this.rendered ) {\n\t\t\t\tconst parentNode = this.parent.findParentNode();\n\t\t\t\tconst anchor = this.parent.findNextNode( this );\n\n\t\t\t\tparentNode.insertBefore( docFrag, anchor );\n\t\t\t}\n\t\t}\n\t}\n\n\tupdatePostShuffle () {\n\t\tconst newIndices = this.pendingNewIndices;\n\n\t\t// This algorithm (for detaching incorrectly-ordered fragments from the DOM and\n\t\t// storing them in a document fragment for later reinsertion) seems a bit hokey,\n\t\t// but it seems to work for now\n\t\tlet previousNewIndex = -1;\n\t\tlet reinsertFrom = null;\n\n\t\tnewIndices.forEach( ( newIndex, oldIndex ) => {\n\t\t\tconst fragment = this.previousIterations[ oldIndex ];\n\n\t\t\tif ( newIndex === -1 ) {\n\t\t\t\tfragment.unbind().unrender( true );\n\t\t\t} else {\n\t\t\t\tfragment.index = newIndex;\n\t\t\t\tfragment.rebind( this.context.joinKey( newIndex ) );\n\n\t\t\t\tif ( reinsertFrom === null && ( newIndex !== previousNewIndex + 1 ) ) {\n\t\t\t\t\treinsertFrom = oldIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpreviousNewIndex = newIndex;\n\t\t});\n\n\t\t// create new iterations\n\t\tconst docFrag = this.rendered ? createDocumentFragment() : null;\n\t\tconst parentNode = this.rendered ? this.parent.findParentNode() : null;\n\n\t\tconst len = this.context.get().length;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tlet existingFragment = this.iterations[i];\n\n\t\t\tif ( this.rendered ) {\n\t\t\t\tif ( existingFragment ) {\n\t\t\t\t\tif ( reinsertFrom !== null && i >= reinsertFrom ) {\n\t\t\t\t\t\tdocFrag.appendChild( existingFragment.detach() );\n\t\t\t\t\t}\n\n\t\t\t\t\telse if ( docFrag.childNodes.length ) {\n\t\t\t\t\t\tparentNode.insertBefore( docFrag, existingFragment.firstNode() );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.iterations[i] = this.createIteration( i, i );\n\t\t\t\t\tthis.iterations[i].render( docFrag );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !this.rendered ) {\n\t\t\t\tif ( !existingFragment ) {\n\t\t\t\t\tthis.iterations[i] = this.createIteration( i, i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( this.rendered && docFrag.childNodes.length ) {\n\t\t\tparentNode.insertBefore( docFrag, this.owner.findNextNode() );\n\t\t}\n\n\t\tthis.iterations.forEach( update );\n\n\t\tthis.pendingNewIndices = null;\n\t}\n}\n","import { warnOnceIfDebug } from 'utils/log';\nimport Mustache from './shared/Mustache';\nimport Fragment from '../Fragment';\nimport getPartialTemplate from './partial/getPartialTemplate';\n\nexport default class Partial extends Mustache {\n\tbind () {\n\t\tsuper.bind();\n\n\t\t// name matches take priority over expressions\n\t\tlet template = this.template.r ? getPartialTemplate( this.ractive, this.template.r, this.parentFragment ) || null : null;\n\n\t\tif ( template ) {\n\t\t\tthis.named = true;\n\t\t\tthis.setTemplate( this.template.r, template );\n\t\t} else if ( ( !this.model || typeof this.model.get() !== 'string' ) && this.template.r ) {\n\t\t\tthis.setTemplate( this.template.r, template );\n\t\t} else {\n\t\t\tthis.setTemplate( this.model.get() );\n\t\t}\n\n\t\tthis.fragment = new Fragment({\n\t\t\towner: this,\n\t\t\ttemplate: this.partialTemplate\n\t\t}).bind();\n\t}\n\n\tdetach () {\n\t\treturn this.fragment.detach();\n\t}\n\n\tfind ( selector ) {\n\t\treturn this.fragment.find( selector );\n\t}\n\n\tfindAll ( selector, query ) {\n\t\tthis.fragment.findAll( selector, query );\n\t}\n\n\tfindComponent ( name ) {\n\t\treturn this.fragment.findComponent( name );\n\t}\n\n\tfindAllComponents ( name, query ) {\n\t\tthis.fragment.findAllComponents( name, query );\n\t}\n\n\tfirstNode () {\n\t\treturn this.fragment.firstNode();\n\t}\n\n\tforceResetTemplate () {\n\t\tthis.partialTemplate = getPartialTemplate( this.ractive, this.name, this.parentFragment );\n\n\t\tif ( !this.partialTemplate ) {\n\t\t\twarnOnceIfDebug( `Could not find template for partial '${this.name}'` );\n\t\t\tthis.partialTemplate = [];\n\t\t}\n\n\t\tthis.fragment.resetTemplate( this.partialTemplate );\n\t\tthis.bubble();\n\t}\n\n\trebind () {\n\t\tsuper.unbind();\n\t\tsuper.bind();\n\t\tthis.fragment.rebind();\n\t}\n\n\trender ( target ) {\n\t\tthis.fragment.render( target );\n\t}\n\n\tsetTemplate ( name, template ) {\n\t\tthis.name = name;\n\n\t\tif ( !template && template !== null ) template = getPartialTemplate( this.ractive, name, this.parentFragment );\n\n\t\tif ( !template ) {\n\t\t\twarnOnceIfDebug( `Could not find template for partial '${name}'` );\n\t\t}\n\n\t\tthis.partialTemplate = template || [];\n\t}\n\n\ttoString ( escape ) {\n\t\treturn this.fragment.toString( escape );\n\t}\n\n\tunbind () {\n\t\tsuper.unbind();\n\t\tthis.fragment.unbind();\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tthis.fragment.unrender( shouldDestroy );\n\t}\n\n\tupdate () {\n\t\tif ( this.dirty ) {\n\t\t\tif ( !this.named ) {\n\t\t\t\tif ( this.model && typeof this.model.get() === 'string' && this.model.get() !== this.name ) {\n\t\t\t\t\tthis.setTemplate( this.model.get() );\n\t\t\t\t\tthis.fragment.resetTemplate( this.partialTemplate );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.fragment.update();\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n}\n","import { noRegistryFunctionReturn } from 'config/errors';\nimport { warnIfDebug } from 'utils/log';\nimport parser from 'Ractive/config/custom/template/parser';\nimport { findInstance } from 'shared/registry';\n\nexport default function getPartialTemplate ( ractive, name, parentFragment ) {\n\tvar partial;\n\n\t// If the partial in instance or view heirarchy instances, great\n\tif ( partial = getPartialFromRegistry( ractive, name, parentFragment || {} ) ) {\n\t\treturn partial;\n\t}\n\n\t// Does it exist on the page as a script tag?\n\tpartial = parser.fromId( name, { noThrow: true } );\n\n\tif ( partial ) {\n\t\t// parse and register to this ractive instance\n\t\tlet parsed = parser.parse( partial, parser.getParseOptions( ractive ) );\n\n\t\t// register (and return main partial if there are others in the template)\n\t\treturn ractive.partials[ name ] = parsed.t;\n\t}\n}\n\nfunction getPartialFromRegistry ( ractive, name, parentFragment ) {\n\tlet fn, partial = findParentPartial( name, parentFragment.owner );\n\n\t// if there was an instance up-hierarchy, cool\n\tif ( partial ) return partial;\n\n\t// find first instance in the ractive or view hierarchy that has this partial\n\tvar instance = findInstance( 'partials', ractive, name );\n\n\tif ( !instance ) { return; }\n\n\tpartial = instance.partials[ name ];\n\n\t// partial is a function?\n\tif ( typeof partial === 'function' ) {\n\t\tfn = partial.bind( instance );\n\t\tfn.isOwner = instance.partials.hasOwnProperty(name);\n\t\tpartial = fn.call( ractive, parser );\n\t}\n\n\tif ( !partial && partial !== '' ) {\n\t\twarnIfDebug( noRegistryFunctionReturn, name, 'partial', 'partial', { ractive });\n\t\treturn;\n\t}\n\n\t// If this was added manually to the registry,\n\t// but hasn't been parsed, parse it now\n\tif ( !parser.isParsed( partial ) ) {\n\n\t\t// use the parseOptions of the ractive instance on which it was found\n\t\tlet parsed = parser.parse( partial, parser.getParseOptions( instance ) );\n\n\t\t// Partials cannot contain nested partials!\n\t\t// TODO add a test for this\n\t\tif ( parsed.p ) {\n\t\t\twarnIfDebug( 'Partials ({{>%s}}) cannot contain nested inline partials', name, { ractive });\n\t\t}\n\n\t\t// if fn, use instance to store result, otherwise needs to go\n\t\t// in the correct point in prototype chain on instance or constructor\n\t\tlet target = fn ? instance : findOwner( instance, name );\n\n\t\t// may be a template with partials, which need to be registered and main template extracted\n\t\ttarget.partials[ name ] = partial = parsed.t;\n\t}\n\n\t// store for reset\n\tif ( fn ) {\n\t\tpartial._fn = fn;\n\t}\n\n\treturn partial.v ? partial.t : partial;\n}\n\nfunction findOwner ( ractive, key ) {\n\treturn ractive.partials.hasOwnProperty( key )\n\t\t? ractive\n\t\t: findConstructor( ractive.constructor, key);\n}\n\nfunction findConstructor ( constructor, key ) {\n\tif ( !constructor ) { return; }\n\treturn constructor.partials.hasOwnProperty( key )\n\t\t? constructor\n\t\t: findConstructor( constructor._Parent, key );\n}\n\nfunction findParentPartial( name, parent ) {\n\tif ( parent ) {\n\t\tif ( parent.template && parent.template.p && parent.template.p[name] ) {\n\t\t\treturn parent.template.p[name];\n\t\t} else if ( parent.parentFragment && parent.parentFragment.owner ) {\n\t\t\treturn findParentPartial( name, parent.parentFragment.owner );\n\t\t}\n\t}\n}\n","import Element from '../../Element';\nimport { removeFromArray } from 'utils/array';\nimport { isArray } from 'utils/is';\n\nfunction findParentSelect ( element ) {\n\twhile ( element ) {\n\t\tif ( element.name === 'select' ) return element;\n\t\telement = element.parent;\n\t}\n}\n\nexport default class Option extends Element {\n\tconstructor ( options ) {\n\t\tconst template = options.template;\n\t\tif ( !template.a ) template.a = {};\n\n\t\t// If the value attribute is missing, use the element's content,\n\t\t// as long as it isn't disabled\n\t\tif ( template.a.value === undefined && !( 'disabled' in template ) ) {\n\t\t\ttemplate.a.value = template.f;\n\t\t}\n\n\t\tsuper( options );\n\n\t\tthis.select = findParentSelect( this.parent );\n\t}\n\n\tbind () {\n\t\tif ( !this.select ) {\n\t\t\tsuper.bind();\n\t\t\treturn;\n\t\t}\n\n\t\t// If the select has a value, it overrides the `selected` attribute on\n\t\t// this option - so we delete the attribute\n\t\tconst selectedAttribute = this.attributeByName.selected;\n\t\tif ( selectedAttribute && this.select.getAttribute( 'value' ) !== undefined ) {\n\t\t\tconst index = this.attributes.indexOf( selectedAttribute );\n\t\t\tthis.attributes.splice( index, 1 );\n\t\t\tdelete this.attributeByName.selected;\n\t\t}\n\n\t\tsuper.bind();\n\t\tthis.select.options.push( this );\n\t}\n\n\tisSelected () {\n\t\tconst optionValue = this.getAttribute( 'value' );\n\n\t\tif ( optionValue === undefined || !this.select ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst selectValue = this.select.getAttribute( 'value' );\n\n\t\tif ( selectValue == optionValue ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this.select.getAttribute( 'multiple' ) && isArray( selectValue ) ) {\n\t\t\tlet i = selectValue.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( selectValue[i] == optionValue ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tunbind () {\n\t\tsuper.unbind();\n\n\t\tif ( this.select ) {\n\t\t\tremoveFromArray( this.select.options, this );\n\t\t}\n\t}\n}\n","import Element from '../../Element';\n\nexport default class Input extends Element {\n\trender ( target ) {\n\t\tsuper.render( target );\n\t\tthis.node.defaultValue = this.node.value;\n\t}\n}\n","import { doc } from 'config/environment';\nimport { escapeHtml } from 'utils/html';\nimport { safeToStringValue } from 'utils/dom';\nimport Mustache from './shared/Mustache';\n\nexport default class Interpolator extends Mustache {\n\tdetach () {\n\t\treturn this.node.parentNode.removeChild( this.node );\n\t}\n\n\tfirstNode () {\n\t\treturn this.node;\n\t}\n\n\tgetString () {\n\t\treturn this.model ? safeToStringValue( this.model.get() ) : '';\n\t}\n\n\trender ( target ) {\n\t\tthis.rendered = true;\n\t\tthis.node = doc.createTextNode( this.getString() );\n\n\t\ttarget.appendChild( this.node );\n\t}\n\n\ttoString ( escape ) {\n\t\tconst string = this.getString();\n\t\treturn escape ? escapeHtml( string ) : string;\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tif ( shouldDestroy ) this.detach();\n\t\tthis.rendered = false;\n\t}\n\n\tupdate () {\n\t\tif ( this.dirty ) {\n\t\t\tif ( this.rendered ) {\n\t\t\t\tthis.node.data = this.getString();\n\t\t\t}\n\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n\n\tvalueOf () {\n\t\treturn this.model ? this.model.get() : undefined;\n\t}\n}\n","import Item from './Item';\nimport resolve from '../../resolvers/resolve';\n\nexport default class Mustache extends Item {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\n\t\tthis.parentFragment = options.parentFragment;\n\t\tthis.template = options.template;\n\t\tthis.index = options.index;\n\n\t\tthis.isStatic = !!options.template.s;\n\n\t\tthis.model = null;\n\t\tthis.dirty = false;\n\t}\n\n\tbind () {\n\t\t// try to find a model for this view\n\t\tconst model = resolve( this.parentFragment, this.template );\n\t\tconst value = model ? model.get() : undefined;\n\n\t\tif ( this.isStatic ) {\n\t\t\tthis.model = { get: () => value };\n\t\t\treturn;\n\t\t}\n\n\t\tif ( model ) {\n\t\t\tmodel.register( this );\n\t\t\tthis.model = model;\n\t\t} else {\n\t\t\tthis.resolver = this.parentFragment.resolve( this.template.r, model => {\n\t\t\t\tthis.model = model;\n\t\t\t\tmodel.register( this );\n\n\t\t\t\tthis.handleChange();\n\t\t\t\tthis.resolver = null;\n\t\t\t});\n\t\t}\n\t}\n\n\thandleChange () {\n\t\tthis.bubble();\n\t}\n\n\trebind () {\n\t\tif ( this.isStatic || !this.model ) return;\n\n\t\tconst model = resolve( this.parentFragment, this.template );\n\n\t\tif ( model === this.model ) return;\n\n\t\tconst oldValue = this.model.get();\n\t\tthis.model.unregister( this );\n\n\t\tmodel.register( this );\n\t\tthis.model = model;\n\n\t\tif ( model.get() !== oldValue ) this.handleChange();\n\t}\n\n\tunbind () {\n\t\tif ( !this.isStatic ) {\n\t\t\tthis.model && this.model.unregister( this );\n\t\t\tthis.resolver && this.resolver.unbind();\n\t\t}\n\t}\n}\n","import runloop from 'global/runloop';\nimport Element from '../../Element';\n\nexport default class Form extends Element {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\t\tthis.formBindings = [];\n\t}\n\n\trender ( target ) {\n\t\tsuper.render( target );\n\t\tthis.node.addEventListener( 'reset', handleReset, false );\n\t}\n\n\tunrender () {\n\t\tthis.node.removeEventListener( 'reset', handleReset, false );\n\t}\n}\n\nfunction handleReset () {\n\tvar element = this._ractive.proxy;\n\n\trunloop.start();\n\telement.formBindings.forEach( updateModel );\n\trunloop.end();\n}\n\nfunction updateModel ( binding ) {\n\tbinding.model.set( binding.resetValue );\n}\n","import { ELEMENT } from 'config/types';\nimport runloop from 'global/runloop';\nimport Item from './shared/Item';\nimport Fragment from '../Fragment';\nimport Attribute from './element/Attribute';\nimport ConditionalAttribute from './element/ConditionalAttribute';\nimport Decorator from './element/Decorator';\nimport EventHandler from './element/EventHandler';\nimport Transition from './element/Transition';\nimport updateLiveQueries from './element/updateLiveQueries';\nimport { escapeHtml, voidElementNames } from 'utils/html';\nimport { bind, rebind, render, unbind, unrender, update } from 'shared/methodCallers';\nimport { createElement, matches } from 'utils/dom';\nimport { html, svg } from 'config/namespaces';\nimport { defineProperty } from 'utils/object';\nimport selectBinding from './element/binding/selectBinding';\n\nfunction makeDirty ( query ) {\n\tquery.makeDirty();\n}\n\nexport default class Element extends Item {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\n\t\tthis.liveQueries = []; // TODO rare case. can we handle differently?\n\n\t\tthis.name = options.template.e.toLowerCase();\n\t\tthis.isVoid = voidElementNames.test( this.name );\n\n\t\t// find parent element\n\t\tlet fragment = this.parentFragment;\n\t\twhile ( fragment ) {\n\t\t\tif ( fragment.owner.type === ELEMENT ) {\n\t\t\t\tthis.parent = fragment.owner;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tfragment = fragment.parent;\n\t\t}\n\n\t\t// create attributes\n\t\tthis.attributeByName = {};\n\t\tthis.attributes = [];\n\n\t\tif ( this.template.a ) {\n\t\t\tObject.keys( this.template.a ).forEach( name => {\n\t\t\t\t// TODO process this at parse time\n\t\t\t\tif ( name === 'twoway' || name === 'lazy' ) return;\n\n\t\t\t\tconst attribute = new Attribute({\n\t\t\t\t\tname,\n\t\t\t\t\telement: this,\n\t\t\t\t\tparentFragment: this.parentFragment,\n\t\t\t\t\ttemplate: this.template.a[ name ]\n\t\t\t\t});\n\n\t\t\t\tthis.attributeByName[ name ] = attribute;\n\n\t\t\t\tif ( name !== 'value' && name !== 'type' ) this.attributes.push( attribute );\n\t\t\t});\n\n\t\t\tif ( this.attributeByName.type ) this.attributes.unshift( this.attributeByName.type );\n\t\t\tif ( this.attributeByName.value ) this.attributes.push( this.attributeByName.value );\n\t\t}\n\n\t\t// create conditional attributes\n\t\tthis.conditionalAttributes = ( this.template.m || [] ).map( template => {\n\t\t\treturn new ConditionalAttribute({\n\t\t\t\towner: this,\n\t\t\t\tparentFragment: this.parentFragment,\n\t\t\t\ttemplate\n\t\t\t});\n\t\t});\n\n\t\t// create decorator\n\t\tif ( this.template.o ) {\n\t\t\tthis.decorator = new Decorator( this, this.template.o );\n\t\t}\n\n\t\t// attach event handlers\n\t\tthis.eventHandlers = [];\n\t\tif ( this.template.v ) {\n\t\t\tObject.keys( this.template.v ).forEach( key => {\n\t\t\t\tconst eventNames = key.split( '-' );\n\t\t\t\tconst template = this.template.v[ key ];\n\n\t\t\t\teventNames.forEach( eventName => {\n\t\t\t\t\tthis.eventHandlers.push( new EventHandler( this, eventName, template ) );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// create children\n\t\tif ( options.template.f ) {\n\t\t\tthis.fragment = new Fragment({\n\t\t\t\ttemplate: options.template.f,\n\t\t\t\towner: this,\n\t\t\t\tcssIds: null\n\t\t\t});\n\t\t}\n\n\t\tthis.binding = null; // filled in later\n\t}\n\n\tbind () {\n\t\tthis.attributes.forEach( bind );\n\t\tthis.conditionalAttributes.forEach( bind );\n\t\tthis.eventHandlers.forEach( bind );\n\n\t\tif ( this.decorator ) this.decorator.bind();\n\t\tif ( this.fragment ) this.fragment.bind();\n\n\t\t// create two-way binding if necessary\n\t\tif ( this.binding = this.createTwowayBinding() ) this.binding.bind();\n\t}\n\n\tcreateTwowayBinding () {\n\t\tconst attributes = this.template.a;\n\n\t\tif ( !attributes ) return null;\n\n\t\tconst shouldBind = 'twoway' in attributes ?\n\t\t\tattributes.twoway === 0 || attributes.twoway === 'true' : // covers `twoway` and `twoway='true'`\n\t\t\tthis.ractive.twoway;\n\n\t\tif ( !shouldBind ) return null;\n\n\t\tconst Binding = selectBinding( this );\n\n\t\tif ( !Binding ) return null;\n\n\t\tconst binding = new Binding( this );\n\n\t\treturn binding && binding.model ?\n\t\t\tbinding :\n\t\t\tnull;\n\t}\n\n\tdetach () {\n\t\tif ( this.decorator ) this.decorator.unrender();\n\n\t\tconst parentNode = this.node.parentNode;\n\t\tif ( parentNode ) parentNode.removeChild( this.node );\n\n\t\treturn this.node;\n\t}\n\n\tfind ( selector ) {\n\t\tif ( matches( this.node, selector ) ) return this.node;\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.find( selector );\n\t\t}\n\t}\n\n\tfindAll ( selector, query ) {\n\t\t// Add this node to the query, if applicable, and register the\n\t\t// query on this element\n\t\tconst matches = query.test( this.node );\n\t\tif ( matches ) {\n\t\t\tquery.add( this.node );\n\t\t\tif ( query.live ) this.liveQueries.push( query );\n\t\t}\n\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAll( selector, query );\n\t\t}\n\t}\n\n\tfindComponent ( name ) {\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.findComponent( name );\n\t\t}\n\t}\n\n\tfindAllComponents ( name, query ) {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAllComponents( name, query );\n\t\t}\n\t}\n\n\tfindNextNode () {\n\t\treturn null;\n\t}\n\n\tfirstNode () {\n\t\treturn this.node;\n\t}\n\n\tgetAttribute ( name ) {\n\t\tconst attribute = this.attributeByName[ name ];\n\t\treturn attribute ? attribute.getValue() : undefined;\n\t}\n\n\trebind () {\n\t\tthis.attributes.forEach( rebind );\n\t\tthis.conditionalAttributes.forEach( rebind );\n\t\tif ( this.decorator ) this.decorator.rebind();\n\t\tif ( this.fragment ) this.fragment.rebind();\n\t\tif ( this.binding ) this.binding.rebind();\n\n\t\tthis.liveQueries.forEach( makeDirty );\n\t}\n\n\trender ( target ) {\n\t\t// TODO determine correct namespace\n\t\tthis.namespace = getNamespace( this );\n\n\t\tconst node = createElement( this.template.e, this.namespace );\n\t\tthis.node = node;\n\n\t\tconst context = this.parentFragment.findContext();\n\n\t\tdefineProperty( node, '_ractive', {\n\t\t\tvalue: {\n\t\t\t\tproxy: this,\n\t\t\t\tractive: this.ractive,\n\t\t\t\tfragment: this.parentFragment,\n\t\t\t\tevents: {},\n\t\t\t\tcontext,\n\t\t\t\tkeypath: context.getKeypath()\n\t\t\t}\n\t\t});\n\n\t\t// Is this a top-level node of a component? If so, we may need to add\n\t\t// a data-ractive-css attribute, for CSS encapsulation\n\t\tif ( this.parentFragment.cssIds ) {\n\t\t\tnode.setAttribute( 'data-ractive-css', this.parentFragment.cssIds.map( x => `{${x}}` ).join( ' ' ) );\n\t\t}\n\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.render( node );\n\t\t}\n\n\t\tthis.attributes.forEach( render );\n\t\tthis.conditionalAttributes.forEach( render );\n\n\t\tif ( this.decorator ) runloop.scheduleTask( () => this.decorator.render(), true );\n\t\tif ( this.binding ) this.binding.render();\n\n\t\tthis.eventHandlers.forEach( render );\n\n\t\tupdateLiveQueries( this );\n\n\t\t// transitions\n\t\tconst transitionTemplate = this.template.t0 || this.template.t1;\n\t\tif ( transitionTemplate && this.ractive.transitionsEnabled ) {\n\t\t\tconst transition = new Transition( this, transitionTemplate, true );\n\t\t\trunloop.registerTransition( transition );\n\n\t\t\tthis._introTransition = transition; // so we can abort if it gets removed\n\t\t}\n\n\t\ttarget.appendChild( node );\n\n\t\tthis.rendered = true;\n\t}\n\n\ttoString () {\n\t\tconst tagName = this.template.e;\n\n\t\tlet attrs = this.attributes.map( stringifyAttribute ).join( '' ) +\n\t\t            this.conditionalAttributes.map( stringifyAttribute ).join( '' );\n\n\t\t// Special case - selected options\n\t\tif ( this.name === 'option' && this.isSelected() ) {\n\t\t\tattrs += ' selected';\n\t\t}\n\n\t\t// Special case - two-way radio name bindings\n\t\tif ( this.name === 'input' && inputIsCheckedRadio( this ) ) {\n\t\t\tattrs += ' checked';\n\t\t}\n\n\t\tlet str = `<${tagName}${attrs}>`;\n\n\t\tif ( this.isVoid ) return str;\n\n\t\t// Special case - textarea\n\t\tif ( this.name === 'textarea' && this.getAttribute( 'value' ) !== undefined ) {\n\t\t\tstr += escapeHtml( this.getAttribute( 'value' ) );\n\t\t}\n\n\t\t// Special case - contenteditable\n\t\telse if ( this.getAttribute( 'contenteditable' ) !== undefined ) {\n\t\t\tstr += ( this.getAttribute( 'value' ) || '' );\n\t\t}\n\n\t\tif ( this.fragment ) {\n\t\t\tstr += this.fragment.toString( !/^(?:script|style)$/i.test( this.template.e ) ); // escape text unless script/style\n\t\t}\n\n\t\tstr += `</${tagName}>`;\n\t\treturn str;\n\t}\n\n\tunbind () {\n\t\tthis.attributes.forEach( unbind );\n\t\tthis.conditionalAttributes.forEach( unbind );\n\n\t\tif ( this.decorator ) this.decorator.unbind();\n\t\tif ( this.fragment ) this.fragment.unbind();\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tif ( !this.rendered ) return;\n\t\tthis.rendered = false;\n\n\t\t// unrendering before intro completed? complete it now\n\t\t// TODO should be an API for aborting transitions\n\t\tlet transition = this._introTransition;\n\t\tif ( transition ) transition.complete();\n\n\t\t// Detach as soon as we can\n\t\tif ( this.name === 'option' ) {\n\t\t\t// <option> elements detach immediately, so that\n\t\t\t// their parent <select> element syncs correctly, and\n\t\t\t// since option elements can't have transitions anyway\n\t\t\tthis.detach();\n\t\t} else if ( shouldDestroy ) {\n\t\t\trunloop.detachWhenReady( this );\n\t\t}\n\n\t\tif ( this.fragment ) this.fragment.unrender();\n\n\t\tthis.eventHandlers.forEach( unrender );\n\n\t\tif ( this.binding ) this.binding.unrender();\n\t\tif ( !shouldDestroy && this.decorator ) this.decorator.unrender();\n\n\t\t// outro transition\n\t\tconst transitionTemplate = this.template.t0 || this.template.t2;\n\t\tif ( transitionTemplate && this.ractive.transitionsEnabled ) {\n\t\t\tconst transition = new Transition( this, transitionTemplate, false );\n\t\t\trunloop.registerTransition( transition );\n\t\t}\n\n\t\t// special case\n\t\tconst id = this.attributeByName.id;\n\t\tif ( id  ) {\n\t\t\tdelete this.ractive.nodes[ id.getValue() ];\n\t\t}\n\n\t\tremoveFromLiveQueries( this );\n\t\t// TODO forms are a special case\n\t}\n\n\tupdate () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.attributes.forEach( update );\n\t\t\tthis.conditionalAttributes.forEach( update );\n\t\t\tthis.eventHandlers.forEach( update );\n\n\t\t\tif ( this.decorator ) this.decorator.update();\n\t\t\tif ( this.fragment ) this.fragment.update();\n\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n}\n\nfunction inputIsCheckedRadio ( element ) {\n\tconst attributes = element.attributeByName;\n\n\tconst typeAttribute  = attributes.type;\n\tconst valueAttribute = attributes.value;\n\tconst nameAttribute  = attributes.name;\n\n\tif ( !typeAttribute || ( typeAttribute.value !== 'radio' ) || !valueAttribute || !nameAttribute.interpolator ) {\n\t\treturn;\n\t}\n\n\tif ( valueAttribute.getValue() === nameAttribute.interpolator.model.get() ) {\n\t\treturn true;\n\t}\n}\n\nfunction stringifyAttribute ( attribute ) {\n\tconst str = attribute.toString();\n\treturn str ? ' ' + str : '';\n}\n\nfunction removeFromLiveQueries ( element ) {\n\tlet i = element.liveQueries.length;\n\twhile ( i-- ) {\n\t\tconst query = element.liveQueries[i];\n\t\tquery.remove( element.node );\n\t}\n}\n\nfunction getNamespace ( element ) {\n\t// Use specified namespace...\n\tconst xmlns = element.getAttribute( 'xmlns' );\n\tif ( xmlns ) return xmlns;\n\n\t// ...or SVG namespace, if this is an <svg> element\n\tif ( element.name === 'svg' ) return svg;\n\n\tconst parent = element.parent;\n\n\tif ( parent ) {\n\t\t// ...or HTML, if the parent is a <foreignObject>\n\t\tif ( parent.name === 'foreignobject' ) return html;\n\n\t\t// ...or inherit from the parent node\n\t\treturn parent.node.namespaceURI;\n\t}\n\n\treturn element.ractive.el.namespaceURI;\n}\n","import { INTERPOLATOR } from 'config/types';\nimport { warnIfDebug } from 'utils/log';\nimport CheckboxBinding from './CheckboxBinding';\nimport CheckboxNameBinding from './CheckboxNameBinding';\nimport ContentEditableBinding from './ContentEditableBinding';\nimport FileListBinding from './FileListBinding';\nimport GenericBinding from './GenericBinding';\nimport MultipleSelectBinding from './MultipleSelectBinding';\nimport NumericBinding from './NumericBinding';\nimport RadioBinding from './RadioBinding';\nimport RadioNameBinding from './RadioNameBinding';\nimport SingleSelectBinding from './SingleSelectBinding';\n\nfunction isBindable ( attribute ) {\n\treturn attribute &&\n\t       attribute.template.length === 1 &&\n\t       attribute.template[0].t === INTERPOLATOR &&\n\t       !attribute.template[0].s;\n}\n\nexport default function selectBinding ( element ) {\n\tconst attributes = element.attributeByName;\n\n\t// contenteditable - bind if the contenteditable attribute is true\n\t// or is bindable and may thus become true...\n\tif ( element.getAttribute( 'contenteditable' ) || isBindable( attributes.contenteditable ) ) {\n\t\t// ...and this element also has a value attribute to bind\n\t\treturn isBindable( attributes.value ) ? ContentEditableBinding : null;\n\t}\n\n\t// <input>\n\tif ( element.name === 'input' ) {\n\t\tconst type = element.getAttribute( 'type' );\n\n\t\tif ( type === 'radio' || type === 'checkbox' ) {\n\t\t\tconst bindName = isBindable( attributes.name );\n\t\t\tconst bindChecked = isBindable( attributes.checked );\n\n\t\t\t// we can either bind the name attribute, or the checked attribute - not both\n\t\t\tif ( bindName && bindChecked ) {\n\t\t\t\twarnIfDebug( 'A radio input can have two-way binding on its name attribute, or its checked attribute - not both', { ractive: element.root });\n\t\t\t}\n\n\t\t\tif ( bindName ) {\n\t\t\t\treturn type === 'radio' ? RadioNameBinding : CheckboxNameBinding;\n\t\t\t}\n\n\t\t\tif ( bindChecked ) {\n\t\t\t\treturn type === 'radio' ? RadioBinding : CheckboxBinding;\n\t\t\t}\n\t\t}\n\n\t\tif ( type === 'file' && isBindable( attributes.value ) ) {\n\t\t\treturn FileListBinding;\n\t\t}\n\n\t\tif ( isBindable( attributes.value ) ) {\n\t\t\treturn ( type === 'number' || type === 'range' ) ? NumericBinding : GenericBinding;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t// <select>\n\tif ( element.name === 'select' && isBindable( attributes.value ) ) {\n\t\treturn element.getAttribute( 'multiple' ) ? MultipleSelectBinding : SingleSelectBinding;\n\t}\n\n\t// <textarea>\n\tif ( element.name === 'textarea' && isBindable( attributes.value ) ) {\n\t\treturn GenericBinding;\n\t}\n}\n","import runloop from 'global/runloop';\nimport Binding from './Binding';\nimport handleDomEvent from './handleDomEvent';\n\nexport default class SingleSelectBinding extends Binding {\n\tforceUpdate () {\n\t\tconst value = this.getValue();\n\n\t\tif ( value !== undefined ) {\n\t\t\tthis.attribute.locked = true;\n\t\t\trunloop.scheduleTask( () => this.attribute.locked = false );\n\t\t\tthis.model.set( value );\n\t\t}\n\t}\n\n\tgetInitialValue () {\n\t\tif ( this.element.getAttribute( 'value' ) !== undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = this.element.options;\n\t\tconst len = options.length;\n\n\t\tif ( !len ) return;\n\n\t\tlet value;\n\t\tlet optionWasSelected;\n\t\tlet i = len;\n\n\t\t// take the final selected option...\n\t\twhile ( i-- ) {\n\t\t\tconst option = options[i];\n\n\t\t\tif ( option.getAttribute( 'selected' ) ) {\n\t\t\t\tif ( !option.getAttribute( 'disabled' ) ) {\n\t\t\t\t\tvalue = option.getAttribute( 'value' );\n\t\t\t\t}\n\n\t\t\t\toptionWasSelected = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// or the first non-disabled option, if none are selected\n\t\tif ( !optionWasSelected ) {\n\t\t\twhile ( ++i < len ) {\n\t\t\t\tif ( !options[i].getAttribute( 'disabled' ) ) {\n\t\t\t\t\tvalue = options[i].getAttribute( 'value' );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// This is an optimisation (aka hack) that allows us to forgo some\n\t\t// other more expensive work\n\t\t// TODO does it still work? seems at odds with new architecture\n\t\tif ( value !== undefined ) {\n\t\t\tthis.element.attributeByName.value.value = value;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tgetValue () {\n\t\tvar options, i, len, option, optionValue;\n\n\t\toptions = this.node.options;\n\t\tlen = options.length;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\toption = options[i];\n\n\t\t\tif ( options[i].selected && !options[i].disabled ) {\n\t\t\t\toptionValue = option._ractive ? option._ractive.value : option.value;\n\t\t\t\treturn optionValue;\n\t\t\t}\n\t\t}\n\t}\n\n\trender () {\n\t\tsuper.render();\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\t}\n\n\t// TODO this method is an anomaly... is it necessary?\n\tsetValue ( value ) {\n\t\tthis.model.set( value );\n\t}\n\n\tunrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t}\n}\n","import Binding from './Binding';\nimport getBindingGroup from './getBindingGroup';\nimport handleDomEvent from './handleDomEvent';\n\nfunction getGroupValue () {\n\tlet i = this.bindings.length;\n\twhile ( i-- ) {\n\t\tconst binding = this.bindings[i];\n\t\tif ( binding.node.checked ) return binding.element.getAttribute( 'value' );\n\t}\n}\n\nexport default class RadioNameBinding extends Binding {\n\tconstructor ( element ) {\n\t\tsuper( element, 'name' );\n\n\t\tthis.group = getBindingGroup( this.ractive._guid, 'radioname', this.model, getGroupValue );\n\t\tthis.group.add( this );\n\t}\n\n\tbind () {\n\t\tif ( !this.group.bound ) {\n\t\t\tthis.group.bind();\n\t\t}\n\n\t\t// update name keypath when necessary\n\t\tthis.nameAttributeBinding = {\n\t\t\thandleChange: () => this.node.name = `{{${this.model.getKeypath()}}}`\n\t\t};\n\n\t\tthis.model.getKeypathModel().register( this.nameAttributeBinding );\n\t}\n\n\tgetInitialValue () {\n\t\tif ( this.element.getAttribute( 'checked' ) ) {\n\t\t\treturn this.element.getAttribute( 'value' );\n\t\t}\n\t}\n\n\tgetValue () {\n\t\treturn this.element.getAttribute( 'value' );\n\t}\n\n\thandleChange () {\n\t\t// If this <input> is the one that's checked, then the value of its\n\t\t// `name` model gets set to its value\n\t\tif ( this.node.checked ) {\n\t\t\tsuper.handleChange();\n\t\t}\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\tconst node = this.node;\n\n\t\tnode.name = `{{${this.model.getKeypath()}}}`;\n\t\tnode.checked = this.model.get() == this.element.getAttribute( 'value' );\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( node.attachEvent ) {\n\t\t\tnode.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t}\n\n\tunbind () {\n\t\tthis.group.remove( this );\n\n\t\tthis.model.getKeypathModel().unregister( this.nameAttributeBinding );\n\t}\n\n\tunrender () {\n\t\tvar node = this.node;\n\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'click', handleDomEvent, false );\n\t}\n}\n","import runloop from 'global/runloop';\nimport { removeFromArray } from 'utils/array';\nimport Binding from './Binding';\nimport getBindingGroup from './getBindingGroup';\nimport handleDomEvent from './handleDomEvent';\n\nlet siblings = {};\n\nfunction getSiblings ( hash ) {\n\treturn siblings[ hash ] || ( siblings[ hash ] = [] );\n}\n\nexport default class RadioBinding extends Binding {\n\tconstructor ( element ) {\n\t\tsuper( element, 'checked' );\n\n\t\t// TODO this should use getBindingGroup\n\t\tthis.siblings = getSiblings( this.ractive._guid + this.element.getAttribute( 'name' ) );\n\t\tthis.siblings.push( this );\n\t}\n\n\tgetValue () {\n\t\treturn this.node.checked;\n\t}\n\n\thandleChange () {\n\t\trunloop.start( this.root );\n\n\t\tthis.siblings.forEach( binding => {\n\t\t\tbinding.model.set( binding.getValue() );\n\t\t});\n\n\t\trunloop.end();\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( this.node.attachEvent ) {\n\t\t\tthis.node.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t}\n\n\tunbind () {\n\t\tremoveFromArray( this.siblings, this );\n\t}\n\n\tunrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t\tthis.node.removeEventListener( 'click', handleDomEvent, false );\n\t}\n}\n","import GenericBinding from './GenericBinding';\n\nexport default class NumericBinding extends GenericBinding {\n\tgetInitialValue () {\n\t\treturn undefined;\n\t}\n\t\n\tgetValue () {\n\t\tconst value = parseFloat( this.node.value );\n\t\treturn isNaN( value ) ? undefined : value;\n\t}\n}\n","import runloop from 'global/runloop';\nimport Binding from './Binding';\nimport handleDomEvent from './handleDomEvent';\nimport { arrayContentsMatch } from 'utils/array';\n\nexport default class MultipleSelectBinding extends Binding {\n\tforceUpdate () {\n\t\tvar value = this.getValue();\n\n\t\tif ( value !== undefined ) {\n\t\t\tthis.attribute.locked = true;\n\t\t\trunloop.scheduleTask( () => this.attribute.locked = false );\n\t\t\tthis.model.set( value );\n\t\t}\n\t}\n\n\tgetInitialValue () {\n\t\treturn this.element.options\n\t\t\t.filter( option => option.getAttribute( 'selected' ) )\n\t\t\t.map( option => option.getAttribute( 'value' ) );\n\t}\n\n\tgetValue () {\n\t\tconst options = this.element.node.options;\n\t\tconst len = options.length;\n\n\t\tlet selectedValues = [];\n\n\t\tfor ( let i = 0; i < len; i += 1 ) {\n\t\t\tconst option = options[i];\n\n\t\t\tif ( option.selected ) {\n\t\t\t\tconst optionValue = option._ractive ? option._ractive.value : option.value;\n\t\t\t\tselectedValues.push( optionValue );\n\t\t\t}\n\t\t}\n\n\t\treturn selectedValues;\n\t}\n\n\thandleChange () {\n\t\tconst attribute = this.attribute;\n\t\tconst previousValue = attribute.getValue();\n\n\t\tconst value = this.getValue();\n\n\t\tif ( previousValue === undefined || !arrayContentsMatch( value, previousValue ) ) {\n\t\t\tsuper.handleChange();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( this.model.get() === undefined ) {\n\t\t\t// get value from DOM, if possible\n\t\t\tthis.handleChange();\n\t\t}\n\t}\n\n\tsetValue () {\n\t\tthrow new Error( 'TODO not implemented yet' );\n\t}\n\n\tunrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t}\n\n\tupdateModel () {\n\t\tif ( this.attribute.value === undefined || !this.attribute.value.length ) {\n\t\t\tthis.keypath.set( this.initialValue );\n\t\t}\n\t}\n}\n","import Binding from './Binding';\nimport { isNumeric } from 'utils/is';\nimport handleDomEvent from './handleDomEvent';\n\nfunction handleBlur () {\n\tvar value;\n\n\thandleDomEvent.call( this );\n\n\tvalue = this._ractive.binding.model.get();\n\tthis.value = value == undefined ? '' : value;\n}\n\nfunction handleDelay ( delay ) {\n\tlet timeout;\n\n\treturn function () {\n\t\tif ( timeout ) clearTimeout( timeout );\n\n\t\ttimeout = setTimeout( () => {\n\t\t\tconst binding = this._ractive.binding;\n\t\t\tif ( binding.rendered ) handleDomEvent.call( this );\n\t\t\ttimeout = null;\n\t\t}, delay );\n\t};\n}\n\nexport default class GenericBinding extends Binding {\n\tgetInitialValue () {\n\t\treturn '';\n\t}\n\n\tgetValue () {\n\t\treturn this.node.value;\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\t// any lazy setting for this element overrides the root\n\t\t// if the value is a number, it's a timeout\n\t\tlet lazy = this.ractive.lazy;\n\t\tlet timeout = false;\n\n\t\t// TODO handle at parse time\n\t\tif ( this.element.template.a && ( 'lazy' in this.element.template.a ) ) {\n\t\t\tlazy = this.element.template.a.lazy;\n\t\t\tif ( lazy === 0 ) lazy = true; // empty attribute\n\t\t}\n\n\t\t// TODO handle this at parse time as well?\n\t\tif ( lazy === 'false' ) lazy = false;\n\n\t\tif ( isNumeric( lazy ) ) {\n\t\t\ttimeout = +lazy;\n\t\t\tlazy = false;\n\t\t}\n\n\t\tthis.handler = timeout ? handleDelay( timeout ) : handleDomEvent;\n\n\t\tconst node = this.node;\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( !lazy ) {\n\t\t\tnode.addEventListener( 'input', this.handler, false );\n\n\t\t\tif ( node.attachEvent ) {\n\t\t\t\tnode.addEventListener( 'keyup', this.handler, false );\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener( 'blur', handleBlur, false );\n\t}\n\n\tunrender () {\n\t\tvar node = this.element.node;\n\t\tthis.rendered = false;\n\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'input', this.handler, false );\n\t\tnode.removeEventListener( 'keyup', this.handler, false );\n\t\tnode.removeEventListener( 'blur', handleBlur, false );\n\t}\n}\n","import Binding from './Binding';\n\nexport default class FileListBinding extends Binding {\n\n}\n","import Binding from './Binding';\nimport handleDomEvent from './handleDomEvent';\n\nexport default class ContentEditableBinding extends Binding {\n\tgetInitialValue () {\n\t\treturn this.element.fragment ? this.element.fragment.toString() : '';\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\tconst node = this.node;\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\t\tnode.addEventListener( 'blur', handleDomEvent, false );\n\n\t\tif ( !this.ractive.lazy ) {\n\t\t\tnode.addEventListener( 'input', handleDomEvent, false );\n\n\t\t\tif ( node.attachEvent ) {\n\t\t\t\tnode.addEventListener( 'keyup', handleDomEvent, false );\n\t\t\t}\n\t\t}\n\t}\n\n\tunrender () {\n\t\tconst node = this.node;\n\n\t\tnode.removeEventListener( 'blur', handleDomEvent, false );\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'input', handleDomEvent, false );\n\t\tnode.removeEventListener( 'keyup', handleDomEvent, false );\n\t}\n\n\tgetValue () {\n\t\treturn this.element.node.innerHTML;\n\t}\n}\n","import Binding from './Binding';\nimport { isArray } from 'utils/is';\nimport { arrayContains } from 'utils/array';\nimport getBindingGroup from './getBindingGroup';\nimport handleDomEvent from './handleDomEvent';\n\nfunction isChecked ( binding ) {\n\treturn binding.node.checked;\n}\n\nfunction getValue ( binding ) {\n\treturn binding.element.getAttribute( 'value' );\n}\n\nfunction getGroupValue () {\n\treturn this.bindings.filter( isChecked ).map( getValue );\n}\n\nconst push = [].push;\n\nexport default class CheckboxNameBinding extends Binding {\n\tconstructor ( element ) {\n\t\tsuper( element, 'name' );\n\n\t\tvar existingValue, bindingValue;\n\n\t\tthis.checkboxName = true; // so that ractive.updateModel() knows what to do with this\n\n\t\t// Each input has a reference to an array containing it and its\n\t\t// group, as two-way binding depends on being able to ascertain\n\t\t// the status of all inputs within the group\n\t\tthis.group = getBindingGroup( this.ractive._guid, 'checkboxes', this.model, getGroupValue );\n\t\tthis.group.add( this );\n\n\t\tif ( this.noInitialValue ) {\n\t\t\tthis.group.noInitialValue = true;\n\t\t}\n\n\t\t// If no initial value was set, and this input is checked, we\n\t\t// update the model\n\t\tif ( this.group.noInitialValue && this.element.getAttribute( 'checked' ) ) {\n\t\t\texistingValue = this.model.get();\n\t\t\tbindingValue = this.element.getAttribute( 'value' );\n\n\t\t\tpush.call( existingValue, bindingValue ); // to avoid triggering runloop with array adaptor\n\t\t}\n\t}\n\n\tbind () {\n\t\tif ( !this.group.bound ) {\n\t\t\tthis.group.bind();\n\t\t}\n\t}\n\n\tchanged () {\n\t\tvar wasChecked = !!this.isChecked;\n\t\tthis.isChecked = this.node.checked;\n\t\treturn this.isChecked === wasChecked;\n\t}\n\n\tgetInitialValue () {\n\t\t// This only gets called once per group (of inputs that\n\t\t// share a name), because it only gets called if there\n\t\t// isn't an initial value. By the same token, we can make\n\t\t// a note of that fact that there was no initial value,\n\t\t// and populate it using any `checked` attributes that\n\t\t// exist (which users should avoid, but which we should\n\t\t// support anyway to avoid breaking expectations)\n\t\tthis.noInitialValue = true;\n\t\treturn [];\n\t}\n\n\tgetValue () {\n\t\treturn this.group.getValue();\n\t}\n\n\thandleChange () {\n\t\tthis.isChecked = this.element.node.checked;\n\t\tsuper.handleChange();\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\tconst node = this.node;\n\n\t\tconst existingValue = this.model.get();\n\t\tconst bindingValue = this.element.getAttribute( 'value' );\n\n\t\tif ( isArray( existingValue ) ) {\n\t\t\tthis.isChecked = arrayContains( existingValue, bindingValue );\n\t\t} else {\n\t\t\tthis.isChecked = existingValue == bindingValue;\n\t\t}\n\n\t\tnode.name = '{{' + this.model.getKeypath() + '}}';\n\t\tnode.checked = this.isChecked;\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\n\t\t// in case of IE emergency, bind to click event as well\n\t\tif ( node.attachEvent ) {\n\t\t\tnode.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t}\n\n\tunbind () {\n\t\tthis.group.remove( this );\n\t}\n\n\tunrender () {\n\t\tvar node = this.element.node;\n\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'click', handleDomEvent, false );\n\t}\n}\n","import { removeFromArray } from 'utils/array';\n\nlet groups = {};\n\nexport default function getBindingGroup ( id, group, model, getValue ) {\n\tconst hash = id + group + model.getKeypath();\n\treturn groups[ hash ] || ( groups[ hash ] = new BindingGroup( model, getValue ) );\n}\n\nclass BindingGroup {\n\tconstructor ( model, getValue ) {\n\t\tthis.model = model;\n\t\tthis.getValue = getValue;\n\n\t\tthis.bindings = [];\n\t}\n\n\tadd ( binding ) {\n\t\tthis.bindings.push( binding );\n\t}\n\n\tbind () {\n\t\tthis.model.registerTwowayBinding( this );\n\t\tthis.bound = true;\n\t}\n\n\tremove ( binding ) {\n\t\tremoveFromArray( this.bindings, binding );\n\t\tif ( !this.bindings.length ) {\n\t\t\tthis.unbind();\n\t\t}\n\t}\n\n\tunbind () {\n\t\tthis.model.unregisterTwowayBinding( this );\n\t\tthis.bound = false;\n\t}\n}\n","import Binding from './Binding';\nimport handleDomEvent from './handleDomEvent';\n\nexport default class CheckboxBinding extends Binding {\n\tconstructor ( element ) {\n\t\tsuper( element, 'checked' );\n\t}\n\n\trender () {\n\t\tsuper.render();\n\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( this.node.attachEvent ) {\n\t\t\tthis.node.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t}\n\n\tunrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t\tthis.node.removeEventListener( 'click', handleDomEvent, false );\n\t}\n\n\tgetInitialValue () {\n\t\treturn !!this.element.getAttribute( 'checked' );\n\t}\n\n\tgetValue () {\n\t\treturn this.node.checked;\n\t}\n}\n","// This is the handler for DOM events that would lead to a change in the model\n// (i.e. change, sometimes, input, and occasionally click and keyup)\nexport default function handleDomEvent () {\n\tthis._ractive.binding.handleChange();\n}\n","import runloop from 'global/runloop';\nimport { warnOnceIfDebug } from 'utils/log';\n\n// TODO element.parent currently undefined\nfunction findParentForm ( element ) {\n\twhile ( element = element.parent ) {\n\t\tif ( element.name === 'form' ) {\n\t\t\treturn element;\n\t\t}\n\t}\n}\n\nfunction warnAboutAmbiguity ( description, ractive ) {\n\twarnOnceIfDebug( `The ${description} being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity`, { ractive });\n}\n\nexport default class Binding {\n\tconstructor ( element, name = 'value' ) {\n\t\tthis.element = element;\n\t\tthis.ractive = element.ractive;\n\t\tthis.attribute = element.attributeByName[ name ];\n\n\t\tconst interpolator = this.attribute.interpolator;\n\t\tinterpolator.twowayBinding = this;\n\n\t\tlet model = interpolator.model;\n\n\t\t// not bound?\n\t\tif ( !model ) {\n\t\t\t// try to force resolution\n\t\t\tinterpolator.resolver.forceResolution();\n\t\t\tmodel = interpolator.model;\n\n\t\t\twarnAboutAmbiguity( `'${interpolator.template.r}' reference`, this.ractive );\n\t\t}\n\n\t\telse if ( model.isUnresolved ) {\n\t\t\t// reference expressions (e.g. foo[bar])\n\t\t\tmodel.forceResolution();\n\t\t\twarnAboutAmbiguity( 'expression', this.ractive );\n\t\t}\n\n\t\t// TODO include index/key/keypath refs as read-only\n\t\telse if ( model.isReadonly ) {\n\t\t\tconst keypath = model.getKeypath().replace( /^@/, '' );\n\t\t\twarnOnceIfDebug( `Cannot use two-way binding on <${element.name}> element: ${keypath} is read-only. To suppress this warning use <${element.name} twoway='false'...>`, { ractive: this.ractive });\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.attribute.isTwoway = true;\n\t\tthis.model = model;\n\n\t\t// initialise value, if it's undefined\n\t\tlet value = model.get();\n\n\t\tif ( value === undefined && this.getInitialValue ) {\n\t\t\tvalue = this.getInitialValue();\n\t\t\tmodel.set( value );\n\t\t}\n\n\t\tconst parentForm = findParentForm( element );\n\t\tif ( parentForm ) {\n\t\t\tthis.resetValue = value;\n\t\t\tparentForm.formBindings.push( this );\n\t\t}\n\t}\n\n\tbind () {\n\t\tthis.model.registerTwowayBinding( this );\n\t}\n\n\thandleChange () {\n\t\trunloop.start( this.root );\n\t\tthis.attribute.locked = true;\n\t\tthis.model.set( this.getValue() );\n\t\trunloop.scheduleTask( () => this.attribute.locked = false );\n\t\trunloop.end();\n\t}\n\n\trebind () {\n\t\t// TODO what does this work with CheckboxNameBinding et al?\n\t\tthis.unbind();\n\t\tthis.model = this.attribute.interpolator.model;\n\t\tthis.bind();\n\t}\n\n\trender () {\n\t\tthis.node = this.element.node;\n\t\tthis.node._ractive.binding = this;\n\t\tthis.rendered = true; // TODO is this used anywhere?\n\t}\n\n\tunbind () {\n\t\tthis.model.unregisterTwowayBinding( this );\n\t}\n\n\tunrender () {\n\t\t// noop?\n\t}\n}\n","export default function updateLiveQueries ( element ) {\n\t// Does this need to be added to any live queries?\n\tconst node = element.node;\n\tlet instance = element.ractive;\n\n\tdo {\n\t\tconst liveQueries = instance._liveQueries;\n\n\t\tlet i = liveQueries.length;\n\t\twhile ( i-- ) {\n\t\t\tconst selector = liveQueries[i];\n\t\t\tconst query = liveQueries[ `_${selector}` ];\n\n\t\t\tif ( query.test( node ) ) {\n\t\t\t\tquery.add( node );\n\t\t\t\t// keep register of applicable selectors, for when we teardown\n\t\t\t\telement.liveQueries.push( query );\n\t\t\t}\n\t\t}\n\t} while ( instance = instance.parent );\n}\n","import { win } from 'config/environment';\nimport legacy from 'legacy';\nimport { isArray } from 'utils/is';\nimport prefix from './transitions/prefix';\nimport { warnOnceIfDebug } from 'utils/log';\nimport { extend } from 'utils/object';\nimport { missingPlugin } from 'config/errors';\nimport Fragment from 'view/Fragment';\nimport { findInViewHierarchy } from 'shared/registry';\nimport { visible } from 'config/visibility';\nimport createTransitions from './transitions/createTransitions';\nimport resetStyle from './transitions/resetStyle';\nimport Promise from 'utils/Promise';\n\nconst getComputedStyle = win && ( win.getComputedStyle || legacy.getComputedStyle );\nconst resolved = Promise.resolve();\n\nexport default class Transition {\n\tconstructor ( owner, template, isIntro ) {\n\t\tthis.owner = owner;\n\t\tthis.isIntro = isIntro;\n\t\tthis.ractive = owner.ractive;\n\n\t\tconst ractive = owner.ractive;\n\n\t\tlet name = template.n || template;\n\n\t\tif ( typeof name !== 'string' ) {\n\t\t\tconst fragment = new Fragment({\n\t\t\t\towner,\n\t\t\t\ttemplate: name\n\t\t\t}).bind(); // TODO need a way to capture values without bind()\n\n\t\t\tname = fragment.toString();\n\t\t\tfragment.unbind();\n\n\t\t\tif ( name === '' ) {\n\t\t\t\t// empty string okay, just no transition\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.name = name;\n\n\t\tif ( template.a ) {\n\t\t\tthis.params = template.a;\n\t\t}\n\n\t\telse if ( template.d ) {\n\t\t\t// TODO is there a way to interpret dynamic arguments without all the\n\t\t\t// 'dependency thrashing'?\n\t\t\tconst fragment = new Fragment({\n\t\t\t\towner,\n\t\t\t\ttemplate: template.d\n\t\t\t}).bind();\n\n\t\t\tthis.params = fragment.getArgsList();\n\t\t\tfragment.unbind();\n\t\t}\n\n\t\tthis._fn = findInViewHierarchy( 'transitions', ractive, name );\n\n\t\tif ( !this._fn ) {\n\t\t\twarnOnceIfDebug( missingPlugin( name, 'transition' ), { ractive });\n\t\t}\n\t}\n\n\tanimateStyle ( style, value, options ) {\n\t\tif ( arguments.length === 4 ) {\n\t\t\tthrow new Error( 't.animateStyle() returns a promise - use .then() instead of passing a callback' );\n\t\t}\n\n\t\t// Special case - page isn't visible. Don't animate anything, because\n\t\t// that way you'll never get CSS transitionend events\n\t\tif ( !visible ) {\n\t\t\tthis.setStyle( style, value );\n\t\t\treturn resolved;\n\t\t}\n\n\t\tlet to;\n\n\t\tif ( typeof style === 'string' ) {\n\t\t\tto = {};\n\t\t\tto[ style ] = value;\n\t\t} else {\n\t\t\tto = style;\n\n\t\t\t// shuffle arguments\n\t\t\toptions = value;\n\t\t}\n\n\t\t// As of 0.3.9, transition authors should supply an `option` object with\n\t\t// `duration` and `easing` properties (and optional `delay`), plus a\n\t\t// callback function that gets called after the animation completes\n\n\t\t// TODO remove this check in a future version\n\t\tif ( !options ) {\n\t\t\twarnOnceIfDebug( 'The \"%s\" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340', this.name );\n\t\t\toptions = this;\n\t\t}\n\n\t\tvar promise = new Promise( resolve => {\n\t\t\tvar propertyNames, changedProperties, computedStyle, current, from, i, prop;\n\n\t\t\t// Edge case - if duration is zero, set style synchronously and complete\n\t\t\tif ( !options.duration ) {\n\t\t\t\tthis.setStyle( to );\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get a list of the properties we're animating\n\t\t\tpropertyNames = Object.keys( to );\n\t\t\tchangedProperties = [];\n\n\t\t\t// Store the current styles\n\t\t\tcomputedStyle = getComputedStyle( this.node );\n\n\t\t\tfrom = {};\n\t\t\ti = propertyNames.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tprop = propertyNames[i];\n\t\t\t\tcurrent = computedStyle[ prefix( prop ) ];\n\n\t\t\t\tif ( current === '0px' ) {\n\t\t\t\t\tcurrent = 0;\n\t\t\t\t}\n\n\t\t\t\t// we need to know if we're actually changing anything\n\t\t\t\tif ( current != to[ prop ] ) { // use != instead of !==, so we can compare strings with numbers\n\t\t\t\t\tchangedProperties.push( prop );\n\n\t\t\t\t\t// make the computed style explicit, so we can animate where\n\t\t\t\t\t// e.g. height='auto'\n\t\t\t\t\tthis.node.style[ prefix( prop ) ] = current;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we're not actually changing anything, the transitionend event\n\t\t\t// will never fire! So we complete early\n\t\t\tif ( !changedProperties.length ) {\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcreateTransitions( this, to, options, changedProperties, resolve );\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tgetStyle ( props ) {\n\t\tvar computedStyle, styles, i, prop, value;\n\n\t\tcomputedStyle = getComputedStyle( this.node );\n\n\t\tif ( typeof props === 'string' ) {\n\t\t\tvalue = computedStyle[ prefix( props ) ];\n\t\t\tif ( value === '0px' ) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( !isArray( props ) ) {\n\t\t\tthrow new Error( 'Transition$getStyle must be passed a string, or an array of strings representing CSS properties' );\n\t\t}\n\n\t\tstyles = {};\n\n\t\ti = props.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = props[i];\n\t\t\tvalue = computedStyle[ prefix( prop ) ];\n\t\t\tif ( value === '0px' ) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tstyles[ prop ] = value;\n\t\t}\n\n\t\treturn styles;\n\t}\n\n\tprocessParams ( params, defaults ) {\n\t\tif ( typeof params === 'number' ) {\n\t\t\tparams = { duration: params };\n\t\t}\n\n\t\telse if ( typeof params === 'string' ) {\n\t\t\tif ( params === 'slow' ) {\n\t\t\t\tparams = { duration: 600 };\n\t\t\t} else if ( params === 'fast' ) {\n\t\t\t\tparams = { duration: 200 };\n\t\t\t} else {\n\t\t\t\tparams = { duration: 400 };\n\t\t\t}\n\t\t} else if ( !params ) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn extend( {}, defaults, params );\n\t}\n\n\tsetStyle ( style, value ) {\n\t\tvar prop;\n\n\t\tif ( typeof style === 'string' ) {\n\t\t\tthis.node.style[ prefix( style ) ] = value;\n\t\t}\n\n\t\telse {\n\t\t\tfor ( prop in style ) {\n\t\t\t\tif ( style.hasOwnProperty( prop ) ) {\n\t\t\t\t\tthis.node.style[ prefix( prop ) ] = style[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tstart () {\n\t\tvar node, originalStyle, completed;\n\n\t\tnode = this.node = this.owner.node;\n\t\toriginalStyle = node.getAttribute( 'style' );\n\n\t\t// create t.complete() - we don't want this on the prototype,\n\t\t// because we don't want `this` silliness when passing it as\n\t\t// an argument\n\t\tthis.complete = noReset => {\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !noReset && this.isIntro ) {\n\t\t\t\tresetStyle( node, originalStyle);\n\t\t\t}\n\n\t\t\tthis._manager.remove( this );\n\n\t\t\tcompleted = true;\n\t\t};\n\n\t\t// If the transition function doesn't exist, abort\n\t\tif ( !this._fn ) {\n\t\t\tthis.complete();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._fn.apply( this.root, [ this ].concat( this.params ) );\n\t}\n}\n","export default function resetStyle ( node, style ) {\n\tif ( style ) {\n\t\tnode.setAttribute( 'style', style );\n\t} else {\n\t\t// Next line is necessary, to remove empty style attribute!\n\t\t// See http://stackoverflow.com/a/7167553\n\t\tnode.getAttribute( 'style' );\n\t\tnode.removeAttribute( 'style' );\n\t}\n}\n","import { isClient } from 'config/environment';\nimport { warnIfDebug } from 'utils/log';\nimport { createElement } from 'utils/dom';\nimport camelCase from 'utils/camelCase';\nimport interpolate from 'shared/interpolate';\nimport Ticker from 'shared/Ticker';\nimport prefix from './prefix';\nimport unprefix from './unprefix';\nimport hyphenate from './hyphenate';\n\nvar createTransitions,\n\ttestStyle,\n\tTRANSITION,\n\tTRANSITIONEND,\n\tCSS_TRANSITIONS_ENABLED,\n\tTRANSITION_DURATION,\n\tTRANSITION_PROPERTY,\n\tTRANSITION_TIMING_FUNCTION,\n\tcanUseCssTransitions = {},\n\tcannotUseCssTransitions = {};\n\nif ( !isClient ) {\n\tcreateTransitions = null;\n} else {\n\ttestStyle = createElement( 'div' ).style;\n\n\t// determine some facts about our environment\n\t(function() {\n\t\tif ( testStyle.transition !== undefined ) {\n\t\t\tTRANSITION = 'transition';\n\t\t\tTRANSITIONEND = 'transitionend';\n\t\t\tCSS_TRANSITIONS_ENABLED = true;\n\t\t} else if ( testStyle.webkitTransition !== undefined ) {\n\t\t\tTRANSITION = 'webkitTransition';\n\t\t\tTRANSITIONEND = 'webkitTransitionEnd';\n\t\t\tCSS_TRANSITIONS_ENABLED = true;\n\t\t} else {\n\t\t\tCSS_TRANSITIONS_ENABLED = false;\n\t\t}\n\t}());\n\n\tif ( TRANSITION ) {\n\t\tTRANSITION_DURATION = TRANSITION + 'Duration';\n\t\tTRANSITION_PROPERTY = TRANSITION + 'Property';\n\t\tTRANSITION_TIMING_FUNCTION = TRANSITION + 'TimingFunction';\n\t}\n\n\tcreateTransitions = function ( t, to, options, changedProperties, resolve ) {\n\n\t\t// Wait a beat (otherwise the target styles will be applied immediately)\n\t\t// TODO use a fastdom-style mechanism?\n\t\tsetTimeout( function () {\n\n\t\t\tvar hashPrefix, jsTransitionsComplete, cssTransitionsComplete, checkComplete, transitionEndHandler;\n\n\t\t\tcheckComplete = function () {\n\t\t\t\tif ( jsTransitionsComplete && cssTransitionsComplete ) {\n\t\t\t\t\t// will changes to events and fire have an unexpected consequence here?\n\t\t\t\t\tt.root.fire( t.name + ':end', t.node, t.isIntro );\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// this is used to keep track of which elements can use CSS to animate\n\t\t\t// which properties\n\t\t\thashPrefix = ( t.node.namespaceURI || '' ) + t.node.tagName;\n\n\t\t\tt.node.style[ TRANSITION_PROPERTY ] = changedProperties.map( prefix ).map( hyphenate ).join( ',' );\n\t\t\tt.node.style[ TRANSITION_TIMING_FUNCTION ] = hyphenate( options.easing || 'linear' );\n\t\t\tt.node.style[ TRANSITION_DURATION ] = ( options.duration / 1000 ) + 's';\n\n\t\t\ttransitionEndHandler = function ( event ) {\n\t\t\t\tvar index;\n\n\t\t\t\tindex = changedProperties.indexOf( camelCase( unprefix( event.propertyName ) ) );\n\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\tchangedProperties.splice( index, 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( changedProperties.length ) {\n\t\t\t\t\t// still transitioning...\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tt.node.removeEventListener( TRANSITIONEND, transitionEndHandler, false );\n\n\t\t\t\tcssTransitionsComplete = true;\n\t\t\t\tcheckComplete();\n\t\t\t};\n\n\t\t\tt.node.addEventListener( TRANSITIONEND, transitionEndHandler, false );\n\n\t\t\tsetTimeout( function () {\n\t\t\t\tvar i = changedProperties.length, hash, originalValue, index, propertiesToTransitionInJs = [], prop, suffix;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tprop = changedProperties[i];\n\t\t\t\t\thash = hashPrefix + prop;\n\n\t\t\t\t\tif ( CSS_TRANSITIONS_ENABLED && !cannotUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\tt.node.style[ prefix( prop ) ] = to[ prop ];\n\n\t\t\t\t\t\t// If we're not sure if CSS transitions are supported for\n\t\t\t\t\t\t// this tag/property combo, find out now\n\t\t\t\t\t\tif ( !canUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\t\toriginalValue = t.getStyle( prop );\n\n\t\t\t\t\t\t\t// if this property is transitionable in this browser,\n\t\t\t\t\t\t\t// the current style will be different from the target style\n\t\t\t\t\t\t\tcanUseCssTransitions[ hash ] = ( t.getStyle( prop ) != to[ prop ] );\n\t\t\t\t\t\t\tcannotUseCssTransitions[ hash ] = !canUseCssTransitions[ hash ];\n\n\t\t\t\t\t\t\t// Reset, if we're going to use timers after all\n\t\t\t\t\t\t\tif ( cannotUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\t\t\tt.node.style[ prefix( prop ) ] = originalValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !CSS_TRANSITIONS_ENABLED || cannotUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\t// we need to fall back to timer-based stuff\n\t\t\t\t\t\tif ( originalValue === undefined ) {\n\t\t\t\t\t\t\toriginalValue = t.getStyle( prop );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// need to remove this from changedProperties, otherwise transitionEndHandler\n\t\t\t\t\t\t// will get confused\n\t\t\t\t\t\tindex = changedProperties.indexOf( prop );\n\t\t\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\t\t\twarnIfDebug( 'Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!', { node: t.node });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchangedProperties.splice( index, 1 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO Determine whether this property is animatable at all\n\n\t\t\t\t\t\tsuffix = /[^\\d]*$/.exec( to[ prop ] )[0];\n\n\t\t\t\t\t\t// ...then kick off a timer-based transition\n\t\t\t\t\t\tpropertiesToTransitionInJs.push({\n\t\t\t\t\t\t\tname: prefix( prop ),\n\t\t\t\t\t\t\tinterpolator: interpolate( parseFloat( originalValue ), parseFloat( to[ prop ] ) ),\n\t\t\t\t\t\t\tsuffix: suffix\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// javascript transitions\n\t\t\t\tif ( propertiesToTransitionInJs.length ) {\n\t\t\t\t\tnew Ticker({\n\t\t\t\t\t\troot: t.root,\n\t\t\t\t\t\tduration: options.duration,\n\t\t\t\t\t\teasing: camelCase( options.easing || '' ),\n\t\t\t\t\t\tstep: function ( pos ) {\n\t\t\t\t\t\t\tvar prop, i;\n\n\t\t\t\t\t\t\ti = propertiesToTransitionInJs.length;\n\t\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\t\tprop = propertiesToTransitionInJs[i];\n\t\t\t\t\t\t\t\tt.node.style[ prop.name ] = prop.interpolator( pos ) + prop.suffix;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: function () {\n\t\t\t\t\t\t\tjsTransitionsComplete = true;\n\t\t\t\t\t\t\tcheckComplete();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tjsTransitionsComplete = true;\n\t\t\t\t}\n\n\n\t\t\t\tif ( !changedProperties.length ) {\n\t\t\t\t\t// We need to cancel the transitionEndHandler, and deal with\n\t\t\t\t\t// the fact that it will never fire\n\t\t\t\t\tt.node.removeEventListener( TRANSITIONEND, transitionEndHandler, false );\n\t\t\t\t\tcssTransitionsComplete = true;\n\t\t\t\t\tcheckComplete();\n\t\t\t\t}\n\t\t\t}, 0 );\n\t\t}, options.delay || 0 );\n\t};\n}\n\nexport default createTransitions;\n","import { vendors } from 'config/environment';\n\nvar vendorPattern = new RegExp( '^(?:' + vendors.join( '|' ) + ')([A-Z])' );\n\nexport default function ( str ) {\n\tvar hyphenated;\n\n\tif ( !str ) {\n\t\treturn ''; // edge case\n\t}\n\n\tif ( vendorPattern.test( str ) ) {\n\t\tstr = '-' + str;\n\t}\n\n\thyphenated = str.replace( /[A-Z]/g, function ( match ) {\n\t\treturn '-' + match.toLowerCase();\n\t});\n\n\treturn hyphenated;\n}\n","import { vendors } from 'config/environment';\n\nvar unprefixPattern = new RegExp( '^-(?:' + vendors.join( '|' ) + ')-' );\n\nexport default function ( prop ) {\n\treturn prop.replace( unprefixPattern, '' );\n}\n","import { warnOnceIfDebug } from 'utils/log';\nimport { missingPlugin } from 'config/errors';\nimport getTime from 'utils/getTime';\nimport animations from 'shared/animations';\n\n// TODO what happens if a transition is aborted?\n// TODO use this with Animation to dedupe some code?\n\nvar Ticker = function ( options ) {\n\tvar easing;\n\n\tthis.duration = options.duration;\n\tthis.step = options.step;\n\tthis.complete = options.complete;\n\n\t// easing\n\tif ( typeof options.easing === 'string' ) {\n\t\teasing = options.root.easing[ options.easing ];\n\n\t\tif ( !easing ) {\n\t\t\twarnOnceIfDebug( missingPlugin( options.easing, 'easing' ) );\n\t\t\teasing = linear;\n\t\t}\n\t} else if ( typeof options.easing === 'function' ) {\n\t\teasing = options.easing;\n\t} else {\n\t\teasing = linear;\n\t}\n\n\tthis.easing = easing;\n\n\tthis.start = getTime();\n\tthis.end = this.start + this.duration;\n\n\tthis.running = true;\n\tanimations.add( this );\n};\n\nTicker.prototype = {\n\ttick: function ( now ) {\n\t\tvar elapsed, eased;\n\n\t\tif ( !this.running ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( now > this.end ) {\n\t\t\tif ( this.step ) {\n\t\t\t\tthis.step( 1 );\n\t\t\t}\n\n\t\t\tif ( this.complete ) {\n\t\t\t\tthis.complete( 1 );\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\telapsed = now - this.start;\n\t\teased = this.easing( elapsed / this.duration );\n\n\t\tif ( this.step ) {\n\t\t\tthis.step( eased );\n\t\t}\n\n\t\treturn true;\n\t},\n\n\tstop: function () {\n\t\tif ( this.abort ) {\n\t\t\tthis.abort();\n\t\t}\n\n\t\tthis.running = false;\n\t}\n};\n\nexport default Ticker;\nfunction linear ( t ) { return t; }\n","import { win, doc, vendors } from 'config/environment';\n\nexport let visible;\nlet hidden = 'hidden';\n\nif ( doc ) {\n\tlet prefix;\n\n\tif ( hidden in doc ) {\n\t\tprefix = '';\n\t} else {\n\t\tlet i = vendors.length;\n\t\twhile ( i-- ) {\n\t\t\tconst vendor = vendors[i];\n\t\t\thidden = vendor + 'Hidden';\n\n\t\t\tif ( hidden in doc ) {\n\t\t\t\tprefix = vendor;\n\t\t\t\tdoc.addEventListener( prefix + 'visibilitychange', onChange );\n\t\t\t\tonChange();\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( prefix === undefined ) {\n\t\t// gah, we're in an old browser\n\t\tif ( 'onfocusout' in doc ) {\n\t\t\tdoc.addEventListener( 'focusout', onHide );\n\t\t\tdoc.addEventListener( 'focusin', onShow );\n\t\t}\n\n\t\telse {\n\t\t\twin.addEventListener( 'pagehide', onHide );\n\t\t\twin.addEventListener( 'blur', onHide );\n\n\t\t\twin.addEventListener( 'pageshow', onShow );\n\t\t\twin.addEventListener( 'focus', onShow );\n\t\t}\n\n\t\tvisible = true; // until proven otherwise. Not ideal but hey\n\t}\n}\n\nfunction onChange () {\n\tvisible = !doc[ hidden ];\n}\n\nfunction onHide () {\n\tvisible = false;\n}\n\nfunction onShow () {\n\tvisible = true;\n}\n","import { isClient, vendors } from 'config/environment';\nimport { createElement } from 'utils/dom';\nimport camelCase from 'utils/camelCase';\n\nvar prefix, prefixCache, testStyle;\n\nif ( !isClient ) {\n\tprefix = null;\n} else {\n\tprefixCache = {};\n\ttestStyle = createElement( 'div' ).style;\n\n\tprefix = function ( prop ) {\n\t\tvar i, vendor, capped;\n\n\t\tprop = camelCase( prop );\n\n\t\tif ( !prefixCache[ prop ] ) {\n\t\t\tif ( testStyle[ prop ] !== undefined ) {\n\t\t\t\tprefixCache[ prop ] = prop;\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\t// test vendors...\n\t\t\t\tcapped = prop.charAt( 0 ).toUpperCase() + prop.substring( 1 );\n\n\t\t\t\ti = vendors.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tvendor = vendors[i];\n\t\t\t\t\tif ( testStyle[ vendor + capped ] !== undefined ) {\n\t\t\t\t\t\tprefixCache[ prop ] = vendor + capped;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn prefixCache[ prop ];\n\t};\n}\n\nexport default prefix;\n","export default function ( hyphenatedStr ) {\n\treturn hyphenatedStr.replace( /-([a-zA-Z])/g, function ( match, $1 ) {\n\t\treturn $1.toUpperCase();\n\t});\n}\n","import { fatal } from 'utils/log';\nimport { findInViewHierarchy } from 'shared/registry';\nimport { missingPlugin } from 'config/errors';\nimport { removeFromArray } from 'utils/array';\nimport fireEvent from 'events/fireEvent';\nimport Fragment from '../../Fragment';\nimport createFunction from 'shared/createFunction';\nimport { unbind } from 'shared/methodCallers';\nimport noop from 'utils/noop';\nimport resolveReference from 'view/resolvers/resolveReference';\n\nfunction defaultHandler ( event ) {\n\tconst handler = this._ractive.events[ event.type ];\n\n\thandler.fire({\n\t\tnode: this,\n\t\toriginal: event\n\t});\n}\n\nexport default class EventHandler {\n\tconstructor ( owner, name, template ) {\n\t\tif ( name.indexOf( '*' ) !== -1 ) {\n\t\t\tfatal( `Only component proxy-events may contain \"*\" wildcards, <${owner.name} on-${name}=\"...\"/> is not valid` );\n\t\t}\n\n\t\tthis.owner = owner;\n\t\tthis.name = name;\n\t\tthis.template = template;\n\n\t\tthis.ractive = owner.parentFragment.ractive;\n\t\tthis.parentFragment = owner.parentFragment;\n\t\tthis.node = null;\n\t}\n\n\tbind () {\n\t\tlet fragment = this.parentFragment;\n\t\twhile ( !fragment.context ) fragment = fragment.parent;\n\t\tthis.context = fragment.context;\n\n\t\tconst template = this.template;\n\n\t\tif ( template.m ) {\n\t\t\tthis.method = template.m;\n\n\t\t\tthis.resolvers = [];\n\t\t\tthis.models = template.a.r.map( ( ref, i ) => {\n\t\t\t\tif ( /^event(?:\\.(.+))?$/.test( ref ) ) {\n\t\t\t\t\t// on-click=\"foo(event.node)\"\n\t\t\t\t\treturn {\n\t\t\t\t\t\tevent: true,\n\t\t\t\t\t\tkeys: ref.length > 5 ? ref.slice( 6 ).split( '.' ) : [],\n\t\t\t\t\t\tunbind: noop\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tconst model = resolveReference( this.parentFragment, ref );\n\n\t\t\t\tif ( !model ) {\n\t\t\t\t\tconst resolver = this.parentFragment.resolve( ref, model => {\n\t\t\t\t\t\tthis.models[i] = model;\n\t\t\t\t\t\tremoveFromArray( this.resolvers, resolver );\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.resolvers.push( resolver );\n\t\t\t\t}\n\n\t\t\t\treturn model;\n\t\t\t});\n\n\t\t\tthis.argsFn = createFunction( template.a.s, template.a.r.length );\n\t\t}\n\n\t\telse {\n\t\t\t// TODO deprecate this style of directive\n\t\t\tthis.action = typeof template === 'string' ? // on-click='foo'\n\t\t\t\ttemplate :\n\t\t\t\ttypeof template.n === 'string' ? // on-click='{{dynamic}}'\n\t\t\t\t\ttemplate.n :\n\t\t\t\t\tnew Fragment({\n\t\t\t\t\t\towner: this,\n\t\t\t\t\t\ttemplate: template.n\n\t\t\t\t\t});\n\n\t\t\tthis.args = template.a ? // static arguments\n\t\t\t\t( typeof template.a === 'string' ? [ template.a ] : template.a ) :\n\t\t\t\ttemplate.d ? // dynamic arguments\n\t\t\t\t\tnew Fragment({\n\t\t\t\t\t\towner: this,\n\t\t\t\t\t\ttemplate: template.d\n\t\t\t\t\t}) :\n\t\t\t\t\t[]; // no arguments\n\t\t}\n\n\t\tif ( this.template.n && typeof this.template.n !== 'string' ) this.action.bind();\n\t\tif ( this.template.d ) this.args.bind();\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.owner.bubble();\n\t\t}\n\t}\n\n\tfire ( event ) {\n\t\t// augment event object\n\t\tevent.keypath = this.context.getKeypath();\n\t\tevent.context = this.context.get();\n\t\tevent.index = this.parentFragment.indexRefs;\n\n\t\tif ( this.method ) {\n\t\t\tif ( typeof this.ractive[ this.method ] !== 'function' ) {\n\t\t\t\tthrow new Error( `Attempted to call a non-existent method (\"${this.method}\")` );\n\t\t\t}\n\n\t\t\tconst values = this.models.map( model => {\n\t\t\t\tif ( !model ) return undefined;\n\n\t\t\t\tif ( model.event ) {\n\t\t\t\t\tlet obj = event;\n\t\t\t\t\tlet keys = model.keys.slice();\n\n\t\t\t\t\twhile ( keys.length ) obj = obj[ keys.shift() ];\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\n\t\t\t\tif ( model.wrapper ) {\n\t\t\t\t\treturn model.wrapper.value;\n\t\t\t\t}\n\n\t\t\t\treturn model.get();\n\t\t\t});\n\n\t\t\t// make event available as `this.event`\n\t\t\tconst oldEvent = this.ractive.event;\n\t\t\tthis.ractive.event = event;\n\n\t\t\tconst args = this.argsFn.apply( null, values );\n\t\t\tthis.ractive[ this.method ].apply( this.ractive, args );\n\n\t\t\tthis.ractive.event = oldEvent;\n\t\t}\n\n\t\telse {\n\t\t\tconst action = this.action.toString();\n\t\t\tconst args = this.template.d ? this.args.getArgsList() : this.args;\n\n\t\t\tevent.name = action;\n\n\t\t\tfireEvent( this.ractive, action, {\n\t\t\t\tevent,\n\t\t\t\targs\n\t\t\t});\n\t\t}\n\t}\n\n\trebind () {\n\t\tthrow new Error( 'EventHandler$rebind not yet implemented!' ); // TODO add tests\n\t}\n\n\trender () {\n\t\tthis.node = this.owner.node;\n\n\t\tconst fn = findInViewHierarchy( 'events', this.ractive, this.name );\n\n\t\tif ( fn ) {\n\t\t\tconst fire = event => this.fire( event );\n\t\t\tthis.customHandler = fn( this.node, fire );\n\t\t} else {\n\t\t\t// no plugin - most likely a standard DOM event\n\t\t\tif ( !( `on${this.name}` in this.node ) ) {\n\t\t\t\tmissingPlugin( this.name, 'events' );\n\t\t\t}\n\n\t\t\tthis.node._ractive.events[ this.name ] = this;\n\t\t\tthis.node.addEventListener( this.name, defaultHandler, false );\n\t\t}\n\t}\n\n\tunbind () {\n\t\tconst template = this.template;\n\n\t\tif ( template.m ) {\n\t\t\tthis.resolvers.forEach( unbind );\n\t\t\tthis.resolvers = [];\n\n\t\t\tthis.models.forEach( model => {\n\t\t\t\tif ( model ) model.unbind();\n\t\t\t});\n\t\t}\n\n\t\telse {\n\t\t\t// TODO this is brittle and non-explicit, fix it\n\t\t\tif ( this.action.unbind ) this.action.unbind();\n\t\t\tif ( this.args.unbind ) this.args.unbind();\n\t\t}\n\t}\n\n\tunrender () {\n\t\tif ( this.customHandler ) {\n\t\t\tthis.customHandler.teardown();\n\t\t} else {\n\t\t\tthis.node.removeEventListener( this.name, defaultHandler, false );\n\t\t\tthis.node._ractive.events[ this.name ] = null;\n\t\t}\n\t}\n\n\tupdate () {\n\t\tif ( this.method ) return; // nothing to do\n\n\t\t// ugh legacy\n\t\tif ( this.action.update ) this.action.update();\n\t\tif ( this.template.d ) this.args.update();\n\t}\n}\n","import { findInViewHierarchy } from 'shared/registry';\nimport { missingPlugin } from 'config/errors';\nimport Fragment from '../../Fragment';\nimport noop from 'utils/noop';\n\nconst missingDecorator = {\n\tupdate: noop,\n\tteardown: noop\n};\n\nexport default class Decorator {\n\tconstructor ( owner, template ) {\n\t\tthis.owner = owner;\n\t\tthis.template = template;\n\n\t\tthis.parentFragment = owner.parentFragment;\n\t\tthis.ractive = owner.ractive;\n\n\t\tthis.dynamicName = typeof template.n === 'object';\n\t\tthis.dynamicArgs = !!template.d;\n\n\t\tif ( this.dynamicName ) {\n\t\t\tthis.nameFragment = new Fragment({\n\t\t\t\towner: this,\n\t\t\t\ttemplate: template.n\n\t\t\t});\n\t\t} else {\n\t\t\tthis.name = template.n || template;\n\t\t}\n\n\t\tif ( this.dynamicArgs ) {\n\t\t\tthis.argsFragment = new Fragment({\n\t\t\t\towner: this,\n\t\t\t\ttemplate: template.d\n\t\t\t});\n\t\t} else {\n\t\t\tthis.args = template.a || [];\n\t\t}\n\n\t\tthis.node = null;\n\t\tthis.intermediary = null;\n\t}\n\n\tbind () {\n\t\tif ( this.dynamicName ) {\n\t\t\tthis.nameFragment.bind();\n\t\t\tthis.name = this.nameFragment.toString();\n\t\t}\n\n\t\tif ( this.dynamicArgs ) this.argsFragment.bind();\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.owner.bubble();\n\t\t}\n\t}\n\n\trebind () {\n\t\tif ( this.dynamicName ) this.nameFragment.rebind();\n\t\tif ( this.dynamicArgs ) this.argsFragment.rebind();\n\t}\n\n\trender () {\n\t\tconst fn = findInViewHierarchy( 'decorators', this.ractive, this.name );\n\n\t\tif ( !fn ) {\n\t\t\tmissingPlugin( this.name, 'decorators' );\n\t\t\tthis.intermediary = missingDecorator;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.node = this.owner.node;\n\n\t\tconst args = this.dynamicArgs ? this.argsFragment.getArgsList() : this.args;\n\t\tthis.intermediary = fn.apply( this.ractive, [ this.node ].concat( args ) );\n\n\t\tif ( !this.intermediary || !this.intermediary.teardown ) {\n\t\t\tthrow new Error( `The '${this.name}' decorator must return an object with a teardown method` );\n\t\t}\n\t}\n\n\tunbind () {\n\t\tif ( this.dynamicName ) this.nameFragment.unbind();\n\t\tif ( this.dynamicArgs ) this.argsFragment.unbind();\n\t}\n\n\tunrender () {\n\t\tthis.intermediary.teardown();\n\t}\n\n\tupdate () {\n\t\tif ( this.dynamicName ) {\n\t\t\tconst name = this.nameFragment.toString();\n\n\t\t\tif ( name !== this.name ) {\n\t\t\t\tthis.name = name;\n\t\t\t\tthis.unrender();\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\n\t\telse if ( this.intermediary.update ) {\n\t\t\tconst args = this.dynamicArgs ? this.argsFragment.getArgsList() : this.args;\n\t\t\tthis.intermediary.update.apply( this.ractive, args );\n\t\t}\n\n\t\telse {\n\t\t\tthis.unrender();\n\t\t\tthis.render();\n\t\t}\n\t}\n}\n","import { doc } from 'config/environment';\nimport { svg } from 'config/namespaces';\nimport { createElement } from 'utils/dom';\nimport { toArray } from 'utils/array';\nimport Fragment from 'view/Fragment';\nimport Item from '../shared/Item';\n\nconst div = doc ? createElement( 'div' ) : null;\n\nexport default class ConditionalAttribute extends Item {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\n\t\tthis.attributes = [];\n\n\t\tthis.owner = options.owner;\n\n\t\tthis.fragment = new Fragment({\n\t\t\tractive: this.ractive,\n\t\t\towner: this,\n\t\t\ttemplate: [ this.template ]\n\t\t});\n\n\t\tthis.dirty = false;\n\t}\n\n\tbind () {\n\t\tthis.fragment.bind();\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.owner.bubble();\n\t\t}\n\t}\n\n\trebind () {\n\t\tthrow new Error( 'ConditionalAttribute$rebind is not yet implemented' ); // TODO test\n\t}\n\n\trender () {\n\t\tthis.node = this.owner.node;\n\t\tthis.isSvg = this.node.namespaceURI === svg;\n\n\t\tthis.rendered = true;\n\t\tthis.dirty = true; // TODO this seems hacky, but necessary for tests to pass in browser AND node.js\n\t\tthis.update();\n\t}\n\n\ttoString () {\n\t\treturn this.fragment.toString();\n\t}\n\n\tunbind () {\n\t\tthis.fragment.unbind();\n\t}\n\n\tunrender () {\n\t\tthis.rendered = false;\n\t}\n\n\tupdate () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.fragment.update();\n\n\t\t\tif ( this.rendered ) {\n\t\t\t\tconst str = this.fragment.toString();\n\t\t\t\tconst attrs = parseAttributes( str, this.isSvg );\n\n\t\t\t\t// any attributes that previously existed but no longer do\n\t\t\t\t// must be removed\n\t\t\t\tthis.attributes.filter( a => notIn( attrs, a ) ).forEach( a => {\n\t\t\t\t\tthis.node.removeAttribute( a.name );\n\t\t\t\t});\n\n\t\t\t\tattrs.forEach( a => {\n\t\t\t\t\tthis.node.setAttribute( a.name, a.value );\n\t\t\t\t});\n\n\t\t\t\tthis.attributes = attrs;\n\t\t\t}\n\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n}\n\n\nfunction parseAttributes ( str, isSvg ) {\n\tconst tagName = isSvg ? 'svg' : 'div';\n\tdiv.innerHTML = `<${tagName} ${str}></${tagName}>`;\n\n\treturn toArray( div.childNodes[0].attributes );\n}\n\nfunction notIn ( haystack, needle ) {\n\tlet i = haystack.length;\n\n\twhile ( i-- ) {\n\t\tif ( haystack[i].name === needle.name ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n","import { INTERPOLATOR } from 'config/types';\nimport { html } from 'config/namespaces';\nimport Fragment from '../../Fragment';\nimport Item from '../shared/Item';\nimport getUpdateDelegate from './attribute/getUpdateDelegate';\nimport propertyNames from './attribute/propertyNames';\nimport { isArray } from 'utils/is';\nimport { safeToStringValue } from 'utils/dom';\nimport { booleanAttributes } from 'utils/html';\n\nexport default class Attribute extends Item {\n\tconstructor ( options ) {\n\t\tsuper( options );\n\n\t\tthis.name = options.name;\n\t\tthis.element = options.element;\n\t\tthis.parentFragment = options.element.parentFragment; // shared\n\t\tthis.ractive = this.parentFragment.ractive;\n\n\t\tthis.rendered = false;\n\t\tthis.updateDelegate = null;\n\t\tthis.fragment = null;\n\t\tthis.value = null;\n\n\t\tif ( !isArray( options.template ) ) {\n\t\t\tthis.value = options.template;\n\t\t\tif ( this.value === 0 ) {\n\t\t\t\tthis.value = '';\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fragment = new Fragment({\n\t\t\t\towner: this,\n\t\t\t\ttemplate: options.template\n\t\t\t});\n\t\t}\n\n\t\tthis.interpolator = this.fragment &&\n\t\t                    this.fragment.items.length === 1 &&\n\t\t                    this.fragment.items[0].type === INTERPOLATOR &&\n\t\t                    this.fragment.items[0];\n\t}\n\n\tbind () {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.bind();\n\t\t}\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.element.bubble();\n\t\t\tthis.dirty = true;\n\t\t}\n\t}\n\n\tgetString () {\n\t\treturn this.fragment ?\n\t\t\tthis.fragment.toString() :\n\t\t\tthis.value != null ? '' + this.value : '';\n\t}\n\n\t// TODO could getValue ever be called for a static attribute,\n\t// or can we assume that this.fragment exists?\n\tgetValue () {\n\t\treturn this.fragment ? this.fragment.valueOf() : booleanAttributes.test( this.name ) ? true : this.value;\n\t}\n\n\trebind () {\n\t\tthis.unbind();\n\t\tthis.bind();\n\t}\n\n\trender () {\n\t\tconst node = this.element.node;\n\t\tthis.node = node;\n\n\t\t// should we use direct property access, or setAttribute?\n\t\tif ( !node.namespaceURI || node.namespaceURI === html ) {\n\t\t\tconst propertyName = propertyNames[ this.name ] || this.name;\n\n\t\t\tif ( node[ propertyName ] !== undefined ) {\n\t\t\t\tthis.propertyName = propertyName;\n\t\t\t}\n\n\t\t\t// is attribute a boolean attribute or 'value'? If so we're better off doing e.g.\n\t\t\t// node.selected = true rather than node.setAttribute( 'selected', '' )\n\t\t\tif ( booleanAttributes.test( this.name ) || this.isTwoway ) {\n\t\t\t\tthis.useProperty = true;\n\t\t\t}\n\n\t\t\tif ( propertyName === 'value' ) {\n\t\t\t\tnode._ractive.value = this.value;\n\t\t\t}\n\t\t}\n\n\t\tthis.rendered = true;\n\t\tthis.updateDelegate = getUpdateDelegate( this );\n\t\tthis.updateDelegate();\n\t}\n\n\ttoString () {\n\t\tconst value = this.getValue();\n\n\t\t// Special case - select and textarea values (should not be stringified)\n\t\tif ( this.name === 'value' && ( this.element.getAttribute( 'contenteditable' ) !== undefined || ( this.element.name === 'select' || this.element.name === 'textarea' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Special case – bound radio `name` attributes\n\t\tif ( this.name === 'name' && this.element.name === 'input' && this.interpolator ) {\n\t\t\treturn `name=\"{{${this.interpolator.model.getKeypath()}}}\"`;\n\t\t}\n\n\t\tif ( booleanAttributes.test( this.name ) ) return value ? this.name : '';\n\t\tif ( value == null ) return '';\n\n\t\tconst str = safeToStringValue( this.getString() )\n\t\t\t.replace( /&/g, '&amp;' )\n\t\t\t.replace( /\"/g, '&quot;' )\n\t\t\t.replace( /'/g, '&#39;' );\n\n\t\treturn str ?\n\t\t\t`${this.name}=\"${str}\"` :\n\t\t\tthis.name;\n\t}\n\n\tunbind () {\n\t\tif ( this.fragment ) this.fragment.unbind();\n\t}\n\n\tupdate () {\n\t\tif ( this.dirty ) {\n\t\t\tif ( this.fragment ) this.fragment.update();\n\t\t\tif ( this.rendered ) this.updateDelegate();\n\t\t\tthis.dirty = false;\n\t\t}\n\t}\n}\n","export default {\n\t'accept-charset': 'acceptCharset',\n\t'accesskey': 'accessKey',\n\t'bgcolor': 'bgColor',\n\t'class': 'className',\n\t'codebase': 'codeBase',\n\t'colspan': 'colSpan',\n\t'contenteditable': 'contentEditable',\n\t'datetime': 'dateTime',\n\t'dirname': 'dirName',\n\t'for': 'htmlFor',\n\t'http-equiv': 'httpEquiv',\n\t'ismap': 'isMap',\n\t'maxlength': 'maxLength',\n\t'novalidate': 'noValidate',\n\t'pubdate': 'pubDate',\n\t'readonly': 'readOnly',\n\t'rowspan': 'rowSpan',\n\t'tabindex': 'tabIndex',\n\t'usemap': 'useMap'\n};\n","import { html } from 'config/namespaces';\nimport { safeToStringValue } from 'utils/dom';\nimport { arrayContains } from 'utils/array';\nimport { isArray } from 'utils/is';\nimport noop from 'utils/noop';\n\nexport default function getUpdateDelegate ( attribute ) {\n\tconst { element, name } = attribute;\n\n\tif ( name === 'id' ) return updateId;\n\n\tif ( name === 'value' ) {\n\t\t// special case - selects\n\t\tif ( element.name === 'select' && name === 'value' ) {\n\t\t\treturn element.getAttribute( 'multiple' ) ? updateMultipleSelectValue : updateSelectValue;\n\t\t}\n\n\t\tif ( element.name === 'textarea' ) return updateValue;\n\n\t\t// special case - contenteditable\n\t\tif ( element.getAttribute( 'contenteditable' ) != null ) return updateContentEditableValue;\n\n\t\t// special case - <input>\n\t\tif ( element.name === 'input' ) {\n\t\t\tconst type = element.getAttribute( 'type' );\n\n\t\t\t// type='file' value='{{fileList}}'>\n\t\t\tif ( type === 'file' ) return noop; // read-only\n\n\t\t\t// type='radio' name='{{twoway}}'\n\t\t\tif ( type === 'radio' && element.binding && element.binding.attribute.name === 'name' ) return updateRadioValue;\n\t\t}\n\n\t\treturn updateValue;\n\t}\n\n\tconst node = element.node;\n\n\t// special case - <input type='radio' name='{{twoway}}' value='foo'>\n\tif ( attribute.isTwoway && name === 'name' ) {\n\t\tif ( node.type === 'radio' ) return updateRadioName;\n\t\tif ( node.type === 'checkbox' ) return updateCheckboxName;\n\t}\n\n\t// special case - style attributes in Internet Exploder\n\tif ( name === 'style' && node.style.setAttribute ) return updateIEStyleAttribute;\n\n\t// special case - class names. IE fucks things up, again\n\tif ( name === 'class' && ( !node.namespaceURI || node.namespaceURI === html ) ) return updateClassName;\n\n\tif ( attribute.useProperty ) return updateProperty;\n\n\treturn updateAttribute;\n}\n\nfunction updateId () {\n\tconst { node } = this;\n\tconst value = this.getValue();\n\n\tdelete this.ractive.nodes[ node.id ];\n\tthis.ractive.nodes[ value ] = node;\n\n\tnode.id = value;\n}\n\nfunction updateMultipleSelectValue () {\n\tlet value = this.getValue();\n\n\tif ( !isArray( value ) ) value = [ value ];\n\n\tconst options = this.node.options;\n\tlet i = options.length;\n\n\twhile ( i-- ) {\n\t\tconst option = options[i];\n\t\tconst optionValue = option._ractive ?\n\t\t\toption._ractive.value :\n\t\t\toption.value; // options inserted via a triple don't have _ractive\n\n\t\toption.selected = arrayContains( value, optionValue );\n\t}\n}\n\nfunction updateSelectValue () {\n\tconst value = this.getValue();\n\n\tif ( !this.locked ) { // TODO is locked still a thing?\n\t\tthis.node._ractive.value = value;\n\n\t\tconst options = this.node.options;\n\t\tlet i = options.length;\n\n\t\twhile ( i-- ) {\n\t\t\tconst option = options[i];\n\t\t\tconst optionValue = option._ractive ?\n\t\t\t\toption._ractive.value :\n\t\t\t\toption.value; // options inserted via a triple don't have _ractive\n\n\t\t\tif ( optionValue == value ) { // double equals as we may be comparing numbers with strings\n\t\t\t\toption.selected = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// if we're still here, it means the new value didn't match any of the options...\n\t// TODO figure out what to do in this situation\n}\n\n\nfunction updateContentEditableValue () {\n\tconst value = this.getValue();\n\n\tif ( !this.locked ) {\n\t\tthis.node.innerHTML = value === undefined ? '' : value;\n\t}\n}\n\nfunction updateRadioValue () {\n\tconst node = this.node;\n\tconst wasChecked = node.checked;\n\n\tconst value = this.getValue();\n\n\t//node.value = this.element.getAttribute( 'value' );\n\tnode.value = this.node._ractive.value = value;\n\tnode.checked = value === this.element.getAttribute( 'name' );\n\n\t// This is a special case - if the input was checked, and the value\n\t// changed so that it's no longer checked, the twoway binding is\n\t// most likely out of date. To fix it we have to jump through some\n\t// hoops... this is a little kludgy but it works\n\tif ( wasChecked && !node.checked && this.element.binding && this.element.binding.rendered ) {\n\t\tthis.element.binding.group.model.set( this.element.binding.group.getValue() );\n\t}\n}\n\nfunction updateValue () {\n\tif ( !this.locked ) {\n\t\tconst value = this.getValue();\n\n\t\tthis.node.value = this.node._ractive.value = value;\n\t\tthis.node.setAttribute( 'value', value );\n\t}\n}\n\nfunction updateRadioName () {\n\tthis.node.checked = ( this.getValue() == this.node._ractive.value );\n}\n\nfunction updateCheckboxName () {\n\tconst { element, node } = this;\n\tconst binding = element.binding;\n\n\tconst value = this.getValue();\n\tconst valueAttribute = element.getAttribute( 'value' );\n\n\tif ( !isArray( value ) ) {\n\t\tbinding.isChecked = node.checked = ( value == valueAttribute );\n\t} else {\n\t\tlet i = value.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( valueAttribute == value[i] ) {\n\t\t\t\tbinding.isChecked = node.checked = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tbinding.isChecked = node.checked = false;\n\t}\n}\n\nfunction updateIEStyleAttribute () {\n\tthis.node.style.setAttribute( 'cssText', this.getValue() || '' );\n}\n\nfunction updateClassName () {\n\tthis.node.className = safeToStringValue( this.getValue() );\n}\n\nfunction updateProperty () {\n\t// with two-way binding, only update if the change wasn't initiated by the user\n\t// otherwise the cursor will often be sent to the wrong place\n\tif ( !this.locked ) {\n\t\tthis.node[ this.propertyName ] = this.getValue();\n\t}\n}\n\nfunction updateAttribute () {\n\tthis.node.setAttribute( this.name, safeToStringValue( this.getString() ) );\n}\n","import Item from './shared/Item';\n\nexport default class Doctype extends Item {\n\tbind () {\n\t\t// noop\n\t}\n\n\trender () {\n\t\t// noop\n\t}\n\n\tteardown () {\n\t\t// noop\n\t}\n\n\ttoString () {\n\t\treturn '<!DOCTYPE' + this.template.a + '>';\n\t}\n\n\tunbind () {\n\t\t// noop\n\t}\n\n\tunrender () {\n\t\t// noop\n\t}\n}\n","import runloop from 'global/runloop';\nimport { fatal, warnIfDebug, warnOnceIfDebug } from 'utils/log';\nimport { COMPONENT, INTERPOLATOR, YIELDER } from 'config/types';\nimport Item from './shared/Item';\nimport construct from 'Ractive/construct';\nimport initialise from 'Ractive/initialise';\nimport render from 'Ractive/render';\nimport { create } from 'utils/object';\nimport { removeFromArray } from 'utils/array';\nimport { isArray } from 'utils/is';\nimport resolve from '../resolvers/resolve';\nimport { cancel, rebind, unbind } from 'shared/methodCallers';\nimport Hook from 'events/Hook';\nimport Fragment from '../Fragment';\nimport parseJSON from 'utils/parseJSON';\nimport fireEvent from 'events/fireEvent';\nimport updateLiveQueries from './component/updateLiveQueries';\n\nfunction removeFromLiveComponentQueries ( component ) {\n\tlet instance = component.ractive;\n\n\twhile ( instance ) {\n\t\tconst query = instance._liveComponentQueries[ `_${component.name}` ];\n\t\tif ( query ) query.remove( component );\n\n\t\tinstance = instance.parent;\n\t}\n}\n\nfunction makeDirty ( query ) {\n\tquery.makeDirty();\n}\n\nconst teardownHook = new Hook( 'teardown' );\n\nexport default class Component extends Item {\n\tconstructor ( options, ComponentConstructor ) {\n\t\tsuper( options );\n\t\tthis.type = COMPONENT; // override ELEMENT from super\n\n\t\tconst instance = create( ComponentConstructor.prototype );\n\n\t\tthis.instance = instance;\n\t\tthis.name = options.template.e;\n\t\tthis.parentFragment = options.parentFragment;\n\t\tthis.complexMappings = [];\n\n\t\tthis.liveQueries = [];\n\n\t\tif ( instance.el ) {\n\t\t\twarnIfDebug( `The <${this.name}> component has a default 'el' property; it has been disregarded` );\n\t\t}\n\n\t\tlet partials = options.template.p || {};\n\t\tif ( !( 'content' in partials ) ) partials.content = options.template.f || [];\n\t\tthis._partials = partials; // TEMP\n\n\t\tthis.yielders = {};\n\n\t\tconstruct( this.instance, { partials });\n\n\t\t// find container\n\t\tlet fragment = options.parentFragment;\n\t\tlet container;\n\t\twhile ( fragment ) {\n\t\t\tif ( fragment.owner.type === YIELDER ) {\n\t\t\t\tcontainer = fragment.owner.container;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfragment = fragment.parent;\n\t\t}\n\n\t\t// add component-instance-specific properties\n\t\tinstance.parent = this.parentFragment.ractive;\n\t\tinstance.container = container || null;\n\t\tinstance.root = instance.parent.root;\n\t\tinstance.component = this;\n\n\t\t// for hackability, this could be an open option\n\t\t// for any ractive instance, but for now, just\n\t\t// for components and just for ractive...\n\t\tinstance._inlinePartials = partials;\n\n\t\tif ( this.template.v ) this.setupEvents();\n\t}\n\n\tbind () {\n\t\tconst viewmodel = this.instance.viewmodel;\n\t\tconst childData = viewmodel.value;\n\n\t\t// determine mappings\n\t\tif ( this.template.a ) {\n\t\t\tObject.keys( this.template.a ).forEach( localKey => {\n\t\t\t\tconst template = this.template.a[ localKey ];\n\n\t\t\t\tif ( template === 0 ) {\n\t\t\t\t\t// empty attributes are `true`\n\t\t\t\t\tviewmodel.joinKey( localKey ).set( true );\n\t\t\t\t}\n\n\t\t\t\telse if ( typeof template === 'string' ) {\n\t\t\t\t\tconst parsed = parseJSON( template );\n\t\t\t\t\tviewmodel.joinKey( localKey ).set( parsed ? parsed.value : template );\n\t\t\t\t}\n\n\t\t\t\telse if ( isArray( template ) ) {\n\t\t\t\t\tif ( template.length === 1 && template[0].t === INTERPOLATOR ) {\n\t\t\t\t\t\tlet model = resolve( this.parentFragment, template[0] );\n\n\t\t\t\t\t\tif ( !model ) {\n\t\t\t\t\t\t\twarnOnceIfDebug( `The ${localKey}='{{${template[0].r}}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity`, { ractive: this.instance }); // TODO add docs page explaining this\n\t\t\t\t\t\t\tthis.parentFragment.ractive.get( localKey ); // side-effect: create mappings as necessary\n\t\t\t\t\t\t\tmodel = this.parentFragment.findContext().joinKey( localKey );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tviewmodel.map( localKey, model );\n\n\t\t\t\t\t\tif ( model.get() === undefined && localKey in childData ) {\n\t\t\t\t\t\t\tmodel.set( childData[ localKey ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telse {\n\t\t\t\t\t\tconst fragment = new Fragment({\n\t\t\t\t\t\t\towner: this,\n\t\t\t\t\t\t\ttemplate\n\t\t\t\t\t\t}).bind();\n\n\t\t\t\t\t\tconst model = viewmodel.joinKey( localKey );\n\t\t\t\t\t\tmodel.set( fragment.valueOf() );\n\n\t\t\t\t\t\t// this is a *bit* of a hack\n\t\t\t\t\t\tfragment.bubble = () => {\n\t\t\t\t\t\t\tFragment.prototype.bubble.call( fragment );\n\t\t\t\t\t\t\tmodel.set( fragment.valueOf() );\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.complexMappings.push( fragment );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tinitialise( this.instance, {\n\t\t\tpartials: this._partials\n\t\t}, {\n\t\t\tindexRefs: this.instance.isolated ? {} : this.parentFragment.indexRefs,\n\t\t\tkeyRefs: this.instance.isolated ? {} : this.parentFragment.keyRefs,\n\t\t\tcssIds: this.parentFragment.cssIds\n\t\t});\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.parentFragment.bubble();\n\t\t}\n\t}\n\n\tcheckYielders () {\n\t\tObject.keys( this.yielders ).forEach( name => {\n\t\t\tif ( this.yielders[ name ].length > 1 ) {\n\t\t\t\trunloop.end();\n\t\t\t\tthrow new Error( `A component template can only have one {{yield${name ? ' ' + name : ''}}} declaration at a time` );\n\t\t\t}\n\t\t});\n\t}\n\n\tdetach () {\n\t\treturn this.instance.fragment.detach();\n\t}\n\n\tfind ( selector ) {\n\t\treturn this.instance.fragment.find( selector );\n\t}\n\n\tfindAll ( selector, query ) {\n\t\tthis.instance.fragment.findAll( selector, query );\n\t}\n\n\tfindComponent ( name ) {\n\t\tif ( !name || this.name === name ) return this.instance;\n\n\t\tif ( this.instance.fragment ) {\n\t\t\treturn this.instance.fragment.findComponent( name );\n\t\t}\n\t}\n\n\tfindAllComponents ( name, query ) {\n\t\tif ( query.test( this ) ) {\n\t\t\tquery.add( this.instance );\n\n\t\t\tif ( query.live ) {\n\t\t\t\tthis.liveQueries.push( query );\n\t\t\t}\n\t\t}\n\n\t\tthis.instance.fragment.findAllComponents( name, query );\n\t}\n\n\tfirstNode () {\n\t\treturn this.instance.fragment.firstNode();\n\t}\n\n\trebind () {\n\t\tthis.complexMappings.forEach( rebind );\n\n\t\tthis.liveQueries.forEach( makeDirty );\n\n\t\t// update relevant mappings\n\t\tif ( this.template.a ) {\n\t\t\tconst viewmodel = this.instance.viewmodel;\n\n\t\t\tObject.keys( this.template.a ).forEach( localKey => {\n\t\t\t\tconst template = this.template.a[ localKey ];\n\n\t\t\t\tif ( isArray( template ) && template.length === 1 && template[0].t === INTERPOLATOR ) {\n\t\t\t\t\tlet model = resolve( this.parentFragment, template[0] );\n\n\t\t\t\t\tif ( !model ) {\n\t\t\t\t\t\t// TODO is this even possible?\n\t\t\t\t\t\twarnOnceIfDebug( `The ${localKey}='{{${template[0].r}}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity`, { ractive: this.instance });\n\t\t\t\t\t\tthis.parentFragment.ractive.get( localKey ); // side-effect: create mappings as necessary\n\t\t\t\t\t\tmodel = this.parentFragment.findContext().joinKey( localKey );\n\t\t\t\t\t}\n\n\t\t\t\t\tviewmodel.map( localKey, model );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.instance.fragment.rebind( this.instance.viewmodel );\n\t}\n\n\trender ( target ) {\n\t\trender( this.instance, target, null );\n\n\t\tthis.checkYielders();\n\t\tupdateLiveQueries( this );\n\n\t\tthis.rendered = true;\n\t}\n\n\tsetupEvents () {\n\t\tObject.keys( this.template.v ).forEach( name => {\n\t\t\tconst template = this.template.v[ name ];\n\n\t\t\tif ( typeof template !== 'string' ) {\n\t\t\t\tfatal( 'Components currently only support simple events - you cannot include arguments. Sorry!' );\n\t\t\t}\n\n\t\t\tconst ractive = this.ractive;\n\n\t\t\tthis.instance.on( name, function () {\n\t\t\t\tlet event;\n\n\t\t\t\t// semi-weak test, but what else? tag the event obj ._isEvent ?\n\t\t\t\tif ( arguments.length && arguments[0] && arguments[0].node ) {\n\t\t\t\t\tevent = Array.prototype.shift.call( arguments );\n\t\t\t\t}\n\n\t\t\t\tconst args = Array.prototype.slice.call( arguments );\n\n\t\t\t\tfireEvent( ractive, template, { event, args });\n\n\t\t\t\t// cancel bubbling\n\t\t\t\treturn false;\n\t\t\t});\n\t\t});\n\t}\n\n\ttoString () {\n\t\treturn this.instance.toHTML();\n\t}\n\n\tunbind () {\n\t\tthis.complexMappings.forEach( unbind );\n\n\t\tconst instance = this.instance;\n\t\tinstance.viewmodel.teardown();\n\t\tinstance.fragment.unbind();\n\t\tinstance._observers.forEach( cancel );\n\n\t\tremoveFromLiveComponentQueries( this );\n\n\t\tif ( instance.fragment.rendered && instance.el.__ractive_instances__ ) {\n\t\t\tremoveFromArray( instance.el.__ractive_instances__, instance );\n\t\t}\n\n\t\tteardownHook.fire( instance );\n\t}\n\n\tunrender ( shouldDestroy ) {\n\t\tthis.shouldDestroy = shouldDestroy;\n\t\tthis.instance.unrender();\n\n\t\tthis.liveQueries.forEach( query => query.remove( this.instance ) );\n\t}\n\n\tupdate () {\n\t\tthis.instance.fragment.update();\n\t\tthis.checkYielders();\n\n\t\tthis.dirty = false;\n\t}\n}\n","// TODO it's unfortunate that this has to run every time a\n// component is rendered... is there a better way?\nexport default function updateLiveQueries ( component ) {\n\t// Does this need to be added to any live queries?\n\tlet instance = component.ractive;\n\n\tdo {\n\t\tconst liveQueries = instance._liveComponentQueries;\n\n\t\tlet i = liveQueries.length;\n\t\twhile ( i-- ) {\n\t\t\tconst name = liveQueries[i];\n\t\t\tconst query = liveQueries[ `_${name}` ];\n\n\t\t\tif ( query.test( component ) ) {\n\t\t\t\tquery.add( component.instance );\n\t\t\t\t// keep register of applicable selectors, for when we teardown\n\t\t\t\tcomponent.liveQueries.push( query );\n\t\t\t}\n\t\t}\n\t} while ( instance = instance.parent );\n}\n","import resolveReference from './resolveReference';\nimport ExpressionProxy from './ExpressionProxy';\nimport ReferenceExpressionProxy from './ReferenceExpressionProxy';\n\nexport default function resolve ( fragment, template ) {\n\tif ( template.r ) {\n\t\treturn resolveReference( fragment, template.r );\n\t}\n\n\telse if ( template.x ) {\n\t\treturn new ExpressionProxy( fragment, template.x );\n\t}\n\n\telse {\n\t\treturn new ReferenceExpressionProxy( fragment, template.rx );\n\t}\n}\n","import Model from 'model/Model';\nimport { REFERENCE } from 'config/types';\nimport ExpressionProxy from './ExpressionProxy';\nimport resolveReference from './resolveReference';\nimport resolve from './resolve';\nimport { unbind } from 'shared/methodCallers';\nimport { removeFromArray } from 'utils/array';\n\nexport default class ReferenceExpressionProxy extends Model {\n\tconstructor ( fragment, template ) {\n\t\tsuper( null, null );\n\t\tthis.root = fragment.ractive.viewmodel;\n\n\t\tthis.resolvers = [];\n\n\t\tthis.base = resolve( fragment, template );\n\n\t\tif ( !this.base ) {\n\t\t\tconst resolver = fragment.resolve( template.r, model => {\n\t\t\t\tthis.base = model;\n\t\t\t\tthis.bubble();\n\n\t\t\t\tremoveFromArray( this.resolvers, resolver );\n\t\t\t});\n\n\t\t\tthis.resolvers.push( resolver );\n\t\t}\n\n\t\tconst intermediary = {\n\t\t\thandleChange: () => this.bubble()\n\t\t};\n\n\t\tthis.members = template.m.map( ( template, i ) => {\n\t\t\tif ( typeof template === 'string' ) {\n\t\t\t\treturn { get: () => template };\n\t\t\t}\n\n\t\t\tlet model;\n\n\t\t\tif ( template.t === REFERENCE ) {\n\t\t\t\tmodel = resolveReference( fragment, template.n );\n\n\t\t\t\tif ( model ) {\n\t\t\t\t\tmodel.register( intermediary );\n\t\t\t\t} else {\n\t\t\t\t\tconst resolver = fragment.resolve( template.n, model => {\n\t\t\t\t\t\tthis.members[i] = model;\n\n\t\t\t\t\t\tmodel.register( intermediary );\n\t\t\t\t\t\tthis.bubble();\n\n\t\t\t\t\t\tremoveFromArray( this.resolvers, resolver );\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.resolvers.push( resolver );\n\t\t\t\t}\n\n\t\t\t\treturn model;\n\t\t\t}\n\n\t\t\tmodel = new ExpressionProxy( fragment, template );\n\t\t\tmodel.register( intermediary );\n\t\t\treturn model;\n\t\t});\n\n\t\tthis.isUnresolved = true;\n\t\tthis.bubble();\n\t}\n\n\tbubble () {\n\t\tif ( !this.base ) return;\n\n\t\t// if some members are not resolved, abort\n\t\tlet i = this.members.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( !this.members[i] || this.members[i].get() === undefined ) return;\n\t\t}\n\n\t\tthis.isUnresolved = false;\n\n\t\tconst keys = this.members.map( model => model.get() );\n\t\tconst model = this.base.joinAll( keys );\n\n\t\tif ( this.model ) {\n\t\t\tthis.model.unregister( this );\n\t\t\tthis.model.unregisterTwowayBinding( this );\n\t\t}\n\n\t\tthis.model = model;\n\t\tthis.parent = model.parent;\n\n\t\tmodel.register( this );\n\t\tmodel.registerTwowayBinding( this );\n\n\t\tif ( this.keypathModel ) this.keypathModel.handleChange();\n\n\t\tthis.mark();\n\t}\n\n\tforceResolution () {\n\t\tthis.resolvers.forEach( resolver => resolver.forceResolution() );\n\t\tthis.bubble();\n\t}\n\n\tget () {\n\t\treturn this.model ? this.model.get() : undefined;\n\t}\n\n\t// indirect two-way bindings\n\tgetValue () {\n\t\tlet i = this.bindings.length;\n\t\twhile ( i-- ) {\n\t\t\tconst value = this.bindings[i].getValue();\n\t\t\tif ( value !== this.value ) return value;\n\t\t}\n\n\t\treturn this.value;\n\t}\n\n\tgetKeypath () {\n\t\treturn this.model ? this.model.getKeypath() : '@undefined';\n\t}\n\n\thandleChange () {\n\t\tthis.mark();\n\t}\n\n\tretrieve () {\n\t\treturn this.get();\n\t}\n\n\tset ( value ) {\n\t\tif ( !this.model ) throw new Error( 'Unresolved reference expression. This should not happen!' );\n\t\tthis.model.set( value );\n\t}\n\n\tunbind () {\n\t\tthis.resolvers.forEach( unbind );\n\t}\n}\n","import Model from 'model/Model';\nimport { unbind } from 'shared/methodCallers';\nimport createFunction from 'shared/createFunction';\nimport resolveReference from './resolveReference';\nimport { removeFromArray } from 'utils/array';\nimport { defineProperty } from 'utils/object';\n\nfunction wrapFunction ( fn, ractive, uid ) {\n\tif ( fn.__ractive_nowrap ) return fn;\n\n\tconst prop = `__ractive_${uid}`;\n\n\tif ( fn[ prop ] ) return fn[ prop ];\n\n\tif ( !/\\bthis\\b/.test( fn ) ) {\n\t\tdefineProperty( fn, '__ractive_nowrap', {\n\t\t\tvalue: true\n\t\t});\n\t\treturn fn;\n\t}\n\n\tdefineProperty( fn, prop, {\n\t\tvalue: fn.bind( ractive ),\n\t\tconfigurable: true\n\t});\n\n\t// Add properties/methods to wrapped function\n\tfor ( let key in fn ) {\n\t\tif ( fn.hasOwnProperty( key ) ) {\n\t\t\tfn[ prop ][ key ] = fn[ key ];\n\t\t}\n\t}\n\n\tractive._boundFunctions.push({ fn, prop });\n\treturn fn[ prop ];\n}\n\nexport default class ExpressionProxy extends Model {\n\tconstructor ( fragment, template ) {\n\t\tsuper( fragment.ractive.viewmodel, null );\n\n\t\tthis.fragment = fragment;\n\t\tthis.template = template;\n\n\t\tthis.isReadonly = true;\n\n\t\tthis.fn = createFunction( template.s, template.r.length );\n\t\tthis.computation = null;\n\n\t\tthis.resolvers = [];\n\t\tthis.models = template.r.map( ( ref, index ) => {\n\t\t\tconst model = resolveReference( fragment, ref );\n\n\t\t\tif ( !model ) {\n\t\t\t\tconst resolver = fragment.resolve( ref, model => {\n\t\t\t\t\tremoveFromArray( this.resolvers, resolver );\n\t\t\t\t\tthis.models[ index ] = model;\n\t\t\t\t\tthis.bubble();\n\t\t\t\t});\n\n\t\t\t\tthis.resolvers.push( resolver );\n\t\t\t}\n\n\t\t\treturn model;\n\t\t});\n\n\t\tthis.bubble();\n\t}\n\n\tbubble () {\n\t\tconst ractive = this.fragment.ractive;\n\n\t\t// TODO the @ prevents computed props from shadowing keypaths, but the real\n\t\t// question is why it's a computed prop in the first place... (hint, it's\n\t\t// to do with {{else}} blocks)\n\t\tconst key = '@' + this.template.s.replace( /_(\\d+)/g, ( match, i ) => {\n\t\t\tif ( i >= this.models.length ) return match;\n\n\t\t\tconst model = this.models[i];\n\t\t\treturn model ? model.getKeypath() : '@undefined';\n\t\t});\n\n\t\t// TODO can/should we reuse computations?\n\t\tconst signature = {\n\t\t\tgetter: () => {\n\t\t\t\tconst values = this.models.map( model => {\n\t\t\t\t\tconst value = model.get( true );\n\n\t\t\t\t\tif ( typeof value === 'function' ) {\n\t\t\t\t\t\treturn wrapFunction( value, ractive, ractive._guid );\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn this.fn.apply( ractive, values );\n\t\t\t},\n\t\t\tgetterString: key\n\t\t};\n\n\t\tconst computation = ractive.viewmodel.compute( key, signature );\n\t\tcomputation.init();\n\n\t\tthis.value = computation.get(); // TODO should not need this, eventually\n\n\t\tif ( this.computation ) {\n\t\t\tthis.computation.unregister( this );\n\t\t\t// notify children...\n\t\t}\n\n\t\tthis.computation = computation;\n\t\tcomputation.register( this );\n\t}\n\n\tget () {\n\t\treturn this.computation.get();\n\t}\n\n\tgetKeypath () {\n\t\treturn this.computation ? this.computation.getKeypath() : '@undefined';\n\t}\n\n\thandleChange () {\n\t\tthis.mark();\n\t}\n\n\tretrieve () {\n\t\treturn this.get();\n\t}\n\n\tunbind () {\n\t\tthis.resolvers.forEach( unbind );\n\t}\n}\n","let functionCache = {};\n\nexport default function createFunction ( str, i ) {\n\tif ( functionCache[ str ] ) return functionCache[ str ];\n\n\tlet args = new Array( i );\n\twhile ( i-- ) args[i] = `_${i}`;\n\n\tconst fn = new Function( args.join( ',' ), `return (${str})` );\n\n\treturn ( functionCache[ str ] = fn );\n}\n","import { logIfDebug, warnIfDebug, warnOnceIfDebug } from 'utils/log';\nimport { getElement } from 'utils/dom';\nimport config from 'Ractive/config/config';\nimport Fragment from 'view/Fragment';\nimport Hook from 'events/Hook';\nimport HookQueue from 'events/HookQueue';\nimport Ractive from '../Ractive';\n\nlet configHook = new Hook( 'config' );\nlet initHook = new HookQueue( 'init' );\n\nexport default function initialise ( ractive, userOptions, options ) {\n\tObject.keys( ractive.viewmodel.computations ).forEach( key => {\n\t\tconst computation = ractive.viewmodel.computations[ key ];\n\n\t\tif ( ractive.viewmodel.value.hasOwnProperty( key ) ) {\n\t\t\tcomputation.set( ractive.viewmodel.value[ key ] );\n\t\t}\n\n\t\tcomputation.init();\n\t});\n\n\t// init config from Parent and options\n\tconfig.init( ractive.constructor, ractive, userOptions );\n\n\tconfigHook.fire( ractive );\n\tinitHook.begin( ractive );\n\n\t// Render virtual DOM\n\tif ( ractive.template ) { // TODO ractive.template is always truthy, because of the defaults...\n\t\tlet cssIds;\n\n\t\tif ( options.cssIds || ractive.cssId ) {\n\t\t\tcssIds = options.cssIds ? options.cssIds.slice() : [];\n\n\t\t\tif ( ractive.cssId ) {\n\t\t\t\tcssIds.push( ractive.cssId );\n\t\t\t}\n\t\t}\n\n\t\tractive.fragment = new Fragment({\n\t\t\towner: ractive,\n\t\t\ttemplate: ractive.template,\n\t\t\tcssIds,\n\t\t\tindexRefs: options.indexRefs || {},\n\t\t\tkeyRefs: options.keyRefs || {}\n\t\t});\n\t}\n\n\tinitHook.end( ractive );\n\n\t// TODO initHook moved to before binding... will this break\n\t// this.findComponent inside oninit? Is that a problem?\n\t// Should be onrender anyway, right?\n\tif ( ractive.fragment ) {\n\t\tractive.fragment.bind( ractive.viewmodel );\n\n\t\t// render automatically ( if `el` is specified )\n\t\tconst el = getElement( ractive.el );\n\t\tif ( el ) {\n\t\t\tlet promise = ractive.render( el, ractive.append );\n\n\t\t\tif ( Ractive.DEBUG_PROMISES ) {\n\t\t\t\tpromise.catch( err => {\n\t\t\t\t\twarnOnceIfDebug( 'Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\\n  Ractive.DEBUG_PROMISES = false;' );\n\t\t\t\t\twarnIfDebug( 'An error happened during rendering', { ractive });\n\t\t\t\t\terr.stack && logIfDebug( err.stack );\n\n\t\t\t\t\tthrow err;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","import Hook from './Hook';\n\nfunction getChildQueue ( queue, ractive ) {\n\treturn queue[ ractive._guid ] || ( queue[ ractive._guid ] = [] );\n}\n\nfunction fire ( hookQueue, ractive ) {\n\tvar childQueue = getChildQueue( hookQueue.queue, ractive );\n\n\thookQueue.hook.fire( ractive );\n\n\t// queue is \"live\" because components can end up being\n\t// added while hooks fire on parents that modify data values.\n\twhile ( childQueue.length ) {\n\t\tfire( hookQueue, childQueue.shift() );\n\t}\n\n\tdelete hookQueue.queue[ ractive._guid ];\n}\n\nexport default class HookQueue {\n\tconstructor ( event ) {\n\t\tthis.hook = new Hook( event );\n\t\tthis.inProcess = {};\n\t\tthis.queue = {};\n\t}\n\n\tbegin ( ractive ) {\n\t\tthis.inProcess[ ractive._guid ] = true;\n\t}\n\n\tend ( ractive ) {\n\t\tconst parent = ractive.parent;\n\n\t\t// If this is *isn't* a child of a component that's in process,\n\t\t// it should call methods or fire at this point\n\t\tif ( !parent || !this.inProcess[ parent._guid ] ) {\n\t\t\tfire( this, ractive );\n\t\t}\n\t\t// elsewise, handoff to parent to fire when ready\n\t\telse {\n\t\t\tgetChildQueue( this.queue, parent ).push( ractive );\n\t\t}\n\n\t\tdelete this.inProcess[ ractive._guid ];\n\t}\n}\n","import { fatal, welcome } from 'utils/log';\nimport { missingPlugin } from 'config/errors';\nimport { magic as magicSupported } from 'config/environment';\nimport { ensureArray } from 'utils/array';\nimport { findInViewHierarchy } from 'shared/registry';\nimport arrayAdaptor from 'Ractive/static/adaptors/array/index';\nimport magicAdaptor from 'Ractive/static/adaptors/magic';\nimport magicArrayAdaptor from 'Ractive/static/adaptors/magicArray';\nimport { create, defineProperty, extend } from 'utils/object';\nimport dataConfigurator from 'Ractive/config/custom/data';\nimport RootModel from 'model/RootModel';\nimport Hook from 'events/Hook';\nimport getComputationSignature from './helpers/getComputationSignature';\nimport Ractive from '../Ractive';\n\nconst constructHook = new Hook( 'construct' );\n\nconst registryNames = [\n\t'adaptors',\n\t'components',\n\t'decorators',\n\t'easing',\n\t'events',\n\t'interpolators',\n\t'partials',\n\t'transitions'\n];\n\nlet uid = 0;\n\nexport default function construct ( ractive, options ) {\n\tif ( Ractive.DEBUG ) welcome();\n\n\tinitialiseProperties( ractive );\n\n\t// TODO remove this, eventually\n\tdefineProperty( ractive, 'data', { get: deprecateRactiveData });\n\n\t// TODO don't allow `onconstruct` with `new Ractive()`, there's no need for it\n\tconstructHook.fire( ractive, options );\n\n\t// Add registries\n\tregistryNames.forEach( name => {\n\t\tractive[ name ] = extend( create( ractive.constructor[ name ] || null ), options[ name ] );\n\t});\n\n\t// Create a viewmodel\n\tconst viewmodel = new RootModel({\n\t\tadapt: getAdaptors( ractive, ractive.adapt, options ),\n\t\tdata: dataConfigurator.init( ractive.constructor, ractive, options ),\n\t\tractive\n\t});\n\n\tractive.viewmodel = viewmodel;\n\n\t// Add computed properties\n\tconst computed = extend( create( ractive.constructor.prototype.computed ), options.computed );\n\n\tfor ( let key in computed ) {\n\t\tconst signature = getComputationSignature( ractive, key, computed[ key ] );\n\t\tviewmodel.compute( key, signature );\n\t}\n}\n\nfunction combine ( a, b ) {\n\tvar c = a.slice(), i = b.length;\n\n\twhile ( i-- ) {\n\t\tif ( !~c.indexOf( b[i] ) ) {\n\t\t\tc.push( b[i] );\n\t\t}\n\t}\n\n\treturn c;\n}\n\nfunction getAdaptors ( ractive, protoAdapt, options ) {\n\tvar adapt, magic, modifyArrays;\n\n\tprotoAdapt = protoAdapt.map( lookup );\n\tadapt = ensureArray( options.adapt ).map( lookup );\n\n\tadapt = combine( protoAdapt, adapt );\n\n\tmagic = 'magic' in options ? options.magic : ractive.magic;\n\tmodifyArrays = 'modifyArrays' in options ? options.modifyArrays : ractive.modifyArrays;\n\n\tif ( magic ) {\n\t\tif ( !magicSupported ) {\n\t\t\tthrow new Error( 'Getters and setters (magic mode) are not supported in this browser' );\n\t\t}\n\n\t\tif ( modifyArrays ) {\n\t\t\tadapt.push( magicArrayAdaptor );\n\t\t}\n\n\t\tadapt.push( magicAdaptor );\n\t}\n\n\tif ( modifyArrays ) {\n\t\tadapt.push( arrayAdaptor );\n\t}\n\n\treturn adapt;\n\n\n\tfunction lookup ( adaptor ) {\n\t\tif ( typeof adaptor === 'string' ) {\n\t\t\tadaptor = findInViewHierarchy( 'adaptors', ractive, adaptor );\n\n\t\t\tif ( !adaptor ) {\n\t\t\t\tfatal( missingPlugin( adaptor, 'adaptor' ) );\n\t\t\t}\n\t\t}\n\n\t\treturn adaptor;\n\t}\n}\n\nfunction initialiseProperties ( ractive ) {\n\t// Generate a unique identifier, for places where you'd use a weak map if it\n\t// existed\n\tractive._guid = 'r-' + uid++;\n\n\t// events\n\tractive._subs = create( null );\n\n\t// storage for item configuration from instantiation to reset,\n\t// like dynamic functions or original values\n\tractive._config = {};\n\n\t// animations (so we can stop any in progress at teardown)\n\tractive._animations = [];\n\n\t// nodes registry\n\tractive.nodes = {};\n\n\t// events\n\tractive.event = null;\n\tractive._eventQueue = [];\n\n\t// live queries\n\tractive._liveQueries = [];\n\tractive._liveComponentQueries = [];\n\n\t// bound data functions\n\tractive._boundFunctions = [];\n\n\t// observers\n\tractive._observers = [];\n\n\t// these could be overridden if this is an inline component instance\n\tractive.root = ractive;\n\tractive.parent = ractive.container = null; // TODO container still applicable?\n}\n\nfunction deprecateRactiveData () {\n\tthrow new Error( 'Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead' );\n}\n","import { fatal } from 'utils/log';\n\nconst pattern = /\\$\\{([^\\}]+)\\}/g;\n\nfunction createFunctionFromString ( ractive, str ) {\n\tvar functionBody, hasThis, fn;\n\n\tfunctionBody = 'return (' + str.replace( pattern, ( match, keypath ) => {\n\t\thasThis = true;\n\t\treturn '__ractive.get(\"' + keypath + '\")';\n\t}) + ');';\n\n\tif ( hasThis ) {\n\t\tfunctionBody = 'var __ractive = this; ' + functionBody;\n\t}\n\n\tfn = new Function( functionBody );\n\treturn hasThis ? fn.bind( ractive ) : fn;\n}\n\nfunction bind ( fn, context ) {\n\treturn /this/.test( fn.toString() ) ? fn.bind( context ) : fn;\n}\n\nexport default function getComputationSignature ( ractive, key, signature ) {\n\tlet getter;\n\tlet setter;\n\n\t// useful for debugging\n\tlet getterString;\n\tlet getterUseStack;\n\tlet setterString;\n\n\tif ( typeof signature === 'function' ) {\n\t\tgetter = bind( signature, ractive );\n\t\tgetterString = signature.toString();\n\t\tgetterUseStack = true;\n\t}\n\n\tif ( typeof signature === 'string' ) {\n\t\tgetter = createFunctionFromString( ractive, signature );\n\t\tgetterString = signature;\n\t}\n\n\tif ( typeof signature === 'object' ) {\n\t\tif ( typeof signature.get === 'string' ) {\n\t\t\tgetter = createFunctionFromString( ractive, signature.get );\n\t\t\tgetterString = signature.get;\n\t\t} else if ( typeof signature.get === 'function' ) {\n\t\t\tgetter = bind( signature.get, ractive );\n\t\t\tgetterString = signature.get.toString();\n\t\t\tgetterUseStack = true;\n\t\t} else {\n\t\t\tfatal( '`%s` computation must have a `get()` method', key );\n\t\t}\n\n\t\tif ( typeof signature.set === 'function' ) {\n\t\t\tsetter = bind( signature.set, ractive );\n\t\t\tsetterString = signature.set.toString();\n\t\t}\n\t}\n\n\treturn {\n\t\tgetter,\n\t\tsetter,\n\t\tgetterString,\n\t\tsetterString,\n\t\tgetterUseStack\n\t};\n}\n","import { capture } from 'global/capture';\nimport { extend } from 'utils/object';\nimport Computation from './Computation';\nimport Model from './Model';\nimport { handleChange, mark } from 'shared/methodCallers';\n\nexport default class RootModel extends Model {\n\tconstructor ( options ) {\n\t\tsuper( null, null );\n\n\t\t// TODO deprecate this\n\t\tthis.changes = {};\n\n\t\tthis.isRoot = true;\n\t\tthis.root = this;\n\t\tthis.ractive = options.ractive; // TODO sever this link\n\n\t\tthis.value = options.data;\n\t\tthis.adaptors = options.adapt;\n\t\tthis.adapt();\n\n\t\tthis.mappings = {};\n\n\t\tthis.computationContext = options.ractive;\n\t\tthis.computations = {};\n\t}\n\n\tapplyChanges () {\n\t\tthis._changeHash = {};\n\t\tthis.flush();\n\n\t\treturn this._changeHash;\n\t}\n\n\tcompute ( key, signature ) {\n\t\tconst computation = new Computation( this, signature, key );\n\t\tthis.computations[ key ] = computation;\n\n\t\treturn computation;\n\t}\n\n\tget ( shouldCapture ) {\n\t\tif ( shouldCapture ) capture( this );\n\t\tlet result = extend( {}, this.value );\n\n\t\tObject.keys( this.mappings ).forEach( key => {\n\t\t\tresult[ key ] = this.mappings[ key ].value;\n\t\t});\n\n\t\tObject.keys( this.computations ).forEach( key => {\n\t\t\tif ( key[0] !== '@' ) { // exclude template expressions\n\t\t\t\tresult[ key ] = this.computations[ key ].value;\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tgetKeypath () {\n\t\treturn '';\n\t}\n\n\thas ( key ) {\n\t\treturn ( key in this.mappings ) || ( key in this.computations ) || super.has( key );\n\t}\n\n\tjoinKey ( key ) {\n\t\treturn this.mappings.hasOwnProperty( key ) ? this.mappings[ key ] :\n\t\t       this.computations.hasOwnProperty( key ) ? this.computations[ key ] :\n\t\t       super.joinKey( key );\n\t}\n\n\tmap ( localKey, origin ) {\n\t\t// TODO remapping\n\t\tthis.mappings[ localKey ] = origin;\n\t}\n\n\tset ( value ) {\n\t\t// TODO wrapping root node is a baaaad idea. We should prevent this\n\t\tconst wrapper = this.wrapper;\n\t\tif ( wrapper ) {\n\t\t\tconst shouldTeardown = !wrapper.reset || wrapper.reset( value ) === false;\n\n\t\t\tif ( shouldTeardown ) {\n\t\t\t\twrapper.teardown();\n\t\t\t\tthis.wrapper = null;\n\t\t\t\tthis.value = value;\n\t\t\t\tthis.adapt();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.value = value;\n\t\t\tthis.adapt();\n\t\t}\n\n\t\tthis.deps.forEach( handleChange );\n\t\tthis.children.forEach( mark );\n\t\tthis.clearUnresolveds(); // TODO do we need to do this with primitive values? if not, what about e.g. unresolved `length` property of null -> string?\n\t}\n\n\tretrieve () {\n\t\treturn this.value;\n\t}\n\n\tupdate () {\n\t\t// noop\n\t}\n\n\tupdateFromBindings ( cascade ) {\n\t\tsuper.updateFromBindings( cascade );\n\n\t\tif ( cascade ) {\n\t\t\t// TODO computations as well?\n\t\t\tObject.keys( this.mappings ).forEach( key => {\n\t\t\t\tconst model = this.mappings[ key ];\n\t\t\t\tmodel.updateFromBindings( cascade );\n\t\t\t});\n\t\t}\n\t}\n}\n","import { capture, startCapturing, stopCapturing } from 'global/capture';\nimport { warnIfDebug } from 'utils/log';\nimport Model from './Model';\nimport { removeFromArray } from 'utils/array';\nimport { isEqual } from 'utils/is';\nimport { handleChange, mark as markChild } from 'shared/methodCallers';\n\n// TODO `mark` appears to conflict with method name,\n// hence `markChild` - revert once bundler is fixed\n\n// TODO this is probably a bit anal, maybe we should leave it out\nfunction prettify ( fnBody ) {\n\tconst lines = fnBody\n\t\t.replace( /^\\t+/gm, tabs => tabs.split( '\\t' ).join( '  ' ) )\n\t\t.split( '\\n' );\n\n\tconst minIndent = lines.length < 2 ? 0 :\n\t\tlines.slice( 1 ).reduce( ( prev, line ) => {\n\t\t\treturn Math.min( prev, /^\\s*/.exec( line )[0].length );\n\t\t}, Infinity );\n\n\treturn lines.map( ( line, i ) => {\n\t\treturn '    ' + ( i ? line.substring( minIndent ) : line );\n\t}).join( '\\n' );\n}\n\n// Ditto. This function truncates the stack to only include app code\nfunction truncateStack ( stack ) {\n\tif ( !stack ) return '';\n\n\tconst lines = stack.split( '\\n' );\n\tconst name = Computation.name + '.getValue';\n\n\tlet truncated = [];\n\n\tconst len = lines.length;\n\tfor ( let i = 1; i < len; i += 1 ) {\n\t\tconst line = lines[i];\n\n\t\tif ( ~line.indexOf( name ) ) {\n\t\t\treturn truncated.join( '\\n' );\n\t\t} else {\n\t\t\ttruncated.push( line );\n\t\t}\n\t}\n}\n\nexport default class Computation extends Model {\n\tconstructor ( viewmodel, signature, key ) {\n\t\tsuper( null, null );\n\n\t\tthis.root = this.parent = viewmodel;\n\t\tthis.signature = signature;\n\t\tthis.key = key; // not actually used, but helps with debugging\n\n\t\tthis.isReadonly = !this.signature.setter;\n\n\t\tthis.context = viewmodel.computationContext;\n\n\t\tthis.dependencies = [];\n\n\t\tthis.children = [];\n\t\tthis.childByKey = {};\n\n\t\tthis.deps = [];\n\n\t\tthis.boundsSensitive = true;\n\t\tthis.dirty = true;\n\t}\n\n\tget ( shouldCapture ) {\n\t\tif ( shouldCapture ) capture( this );\n\n\t\tif ( this.dirty ) {\n\t\t\tthis.value = this.getValue();\n\t\t\tthis.adapt();\n\t\t\tthis.dirty = false;\n\t\t}\n\n\t\treturn this.value;\n\t}\n\n\tgetValue () {\n\t\tstartCapturing();\n\t\tlet result;\n\n\t\ttry {\n\t\t\tresult = this.signature.getter.call( this.context );\n\t\t} catch ( err ) {\n\t\t\twarnIfDebug( `Failed to compute ${this.getKeypath()}: ${err.message || err}` );\n\n\t\t\t// TODO this is all well and good in Chrome, but...\n\t\t\t// ...also, should encapsulate this stuff better, and only\n\t\t\t// show it if Ractive.DEBUG\n\t\t\tif ( console.groupCollapsed ) console.groupCollapsed( '%cshow details', 'color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;' );\n\t\t\tconst functionBody = prettify( this.signature.getterString );\n\t\t\tconst stack = this.signature.getterUseStack ? '\\n\\n' + truncateStack( err.stack ) : '';\n\t\t\tconsole.error( `${err.name}: ${err.message}\\n\\n${functionBody}${stack}` );\n\t\t\tif ( console.groupCollapsed ) console.groupEnd();\n\t\t}\n\n\t\tconst dependencies = stopCapturing();\n\t\tthis.setDependencies( dependencies );\n\n\t\treturn result;\n\t}\n\n\thandleChange () {\n\t\tthis.dirty = true;\n\n\t\tthis.deps.forEach( handleChange );\n\t\tthis.children.forEach( markChild ); // TODO rename to mark once bundling glitch fixed\n\t\tthis.clearUnresolveds(); // TODO same question as on Model - necessary for primitives?\n\t}\n\n\tinit () {\n\t}\n\n\tmark () {\n\t\tthis.handleChange();\n\t}\n\n\tregister ( dependant ) {\n\t\tthis.deps.push( dependant );\n\t}\n\n\tset ( value ) {\n\t\tif ( !this.signature.setter ) {\n\t\t\tthrow new Error( `Cannot set read-only computed property '${this.key}'` );\n\t\t}\n\n\t\tthis.signature.setter( value );\n\t}\n\n\tsetDependencies ( dependencies ) {\n\t\t// unregister any soft dependencies we no longer have\n\t\tlet i = this.dependencies.length;\n\t\twhile ( i-- ) {\n\t\t\tconst model = this.dependencies[i];\n\t\t\tif ( !~dependencies.indexOf( model ) ) model.unregister( this );\n\t\t}\n\n\t\t// and add any new ones\n\t\ti = dependencies.length;\n\t\twhile ( i-- ) {\n\t\t\tconst model = dependencies[i];\n\t\t\tif ( !~this.dependencies.indexOf( model ) ) model.register( this );\n\t\t}\n\n\t\tthis.dependencies = dependencies;\n\t}\n\n\tunregister ( dependant ) {\n\t\tremoveFromArray( this.deps, dependant );\n\t}\n}\n","import { capture } from 'global/capture';\nimport { isEqual, isNumeric } from 'utils/is';\nimport { removeFromArray } from 'utils/array';\nimport { handleChange, mark, teardown } from 'shared/methodCallers';\nimport getPrefixer from './helpers/getPrefixer';\nimport { isArray, isObject } from 'utils/is';\nimport KeyModel from './specials/KeyModel';\nimport KeypathModel from './specials/KeypathModel';\n\nconst hasProp = Object.prototype.hasOwnProperty;\n\nfunction updateFromBindings ( model ) {\n\tmodel.updateFromBindings( true );\n}\n\nfunction updateKeypathDependants ( model ) {\n\tmodel.updateKeypathDependants();\n}\n\nlet originatingModel = null;\n\nexport default class Model {\n\tconstructor ( parent, key ) {\n\t\tthis.deps = [];\n\n\t\tthis.children = [];\n\t\tthis.childByKey = {};\n\n\t\tthis.indexModels = [];\n\n\t\tthis.unresolved = [];\n\t\tthis.unresolvedByKey = {};\n\n\t\tthis.bindings = [];\n\n\t\tthis.value = undefined;\n\n\t\tif ( parent ) {\n\t\t\tthis.parent = parent;\n\t\t\tthis.root = parent.root;\n\t\t\tthis.key = key;\n\n\t\t\tif ( parent.value ) {\n\t\t\t\tthis.value = parent.value[ this.key ];\n\t\t\t\tthis.adapt();\n\t\t\t}\n\t\t}\n\t}\n\n\tadapt () {\n\t\tconst adaptors = this.root.adaptors;\n\t\tconst value = this.value;\n\t\tconst len = adaptors.length;\n\n\t\t// TODO remove this legacy nonsense\n\t\tconst ractive = this.root.ractive;\n\t\tconst keypath = this.getKeypath();\n\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst adaptor = adaptors[i];\n\t\t\tif ( adaptor.filter( value, keypath, ractive ) ) {\n\t\t\t\tthis.wrapper = adaptor.wrap( ractive, value, keypath, getPrefixer( keypath ) );\n\t\t\t\tthis.wrapper.value = this.value;\n\t\t\t\tthis.wrapper.__model = this; // massive temporary hack to enable array adaptor\n\n\t\t\t\tthis.value = this.wrapper.get();\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\taddUnresolved ( key, resolver ) {\n\t\tif ( !this.unresolvedByKey[ key ] ) {\n\t\t\tthis.unresolved.push( key );\n\t\t\tthis.unresolvedByKey[ key ] = [];\n\t\t}\n\n\t\tthis.unresolvedByKey[ key ].push( resolver );\n\t}\n\n\tclearUnresolveds ( specificKey ) {\n\t\tlet i = this.unresolved.length;\n\n\t\twhile ( i-- ) {\n\t\t\tconst key = this.unresolved[i];\n\n\t\t\tif ( specificKey && key !== specificKey ) continue;\n\n\t\t\tconst resolvers = this.unresolvedByKey[ key ];\n\t\t\tconst hasKey = this.has( key );\n\n\t\t\tlet j = resolvers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\tif ( hasKey ) resolvers[j].attemptResolution();\n\t\t\t\tif ( resolvers[j].resolved ) resolvers.splice( j, 1 );\n\t\t\t}\n\n\t\t\tif ( !resolvers.length ) {\n\t\t\t\tthis.unresolved.splice( i, 1 );\n\t\t\t\tthis.unresolvedByKey[ key ] = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateBranch ( key ) {\n\t\tconst branch = isNumeric( key ) ? [] : {};\n\t\tthis.set( branch );\n\n\t\treturn branch;\n\t}\n\n\tdiscard () {\n\t\tthis.deps.forEach( d => { if ( d.boundsSensitive ) this.unregister( d ); } );\n\t}\n\n\tfindMatches ( keys ) {\n\t\tconst len = keys.length;\n\n\t\tlet existingMatches = [ this ];\n\t\tlet matches;\n\t\tlet i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tconst key = keys[i];\n\n\t\t\tif ( key === '*' ) {\n\t\t\t\tmatches = [];\n\t\t\t\texistingMatches.forEach( model => {\n\t\t\t\t\tif ( isArray( model.value ) ) {\n\t\t\t\t\t\t// special case - array.length. This is a horrible kludge, but\n\t\t\t\t\t\t// it'll do for now. Alternatives welcome\n\t\t\t\t\t\tif ( originatingModel && originatingModel.parent === model && originatingModel.key === 'length' ) {\n\t\t\t\t\t\t\tmatches.push( originatingModel );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel.value.forEach( ( member, i ) => {\n\t\t\t\t\t\t\tmatches.push( model.joinKey( i ) );\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\telse if ( isObject( model.value ) || typeof model.value === 'function' ) {\n\t\t\t\t\t\tObject.keys( model.value ).forEach( key => {\n\t\t\t\t\t\t\tmatches.push( model.joinKey( key ) );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// special case - computed properties. TODO mappings also?\n\t\t\t\t\t\tif ( model.isRoot ) {\n\t\t\t\t\t\t\tObject.keys( model.computations ).forEach( key => {\n\t\t\t\t\t\t\t\tmatches.push( model.joinKey( key ) );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmatches = existingMatches.map( model => model.joinKey( key ) );\n\t\t\t}\n\n\t\t\texistingMatches = matches;\n\t\t}\n\n\t\treturn matches;\n\t}\n\n\tget ( shouldCapture ) {\n\t\tif ( shouldCapture ) capture( this );\n\t\treturn this.value;\n\t}\n\n\tgetIndexModel ( fragmentIndex ) {\n\t\tconst indexModels = this.parent.indexModels;\n\n\t\t// non-numeric keys are a special of a numeric index in a object iteration\n\t\tif ( typeof this.key === 'string' && fragmentIndex !== undefined ) {\n\t\t\treturn new KeyModel( fragmentIndex );\n\t\t} else if ( !indexModels[ this.key ] ) {\n\t\t\tindexModels[ this.key ] = new KeyModel( this.key );\n\t\t}\n\n\t\treturn indexModels[ this.key ];\n\t}\n\n\tgetKeyModel () {\n\t\t// TODO... different to IndexModel because key can never change\n\t\treturn new KeyModel( this.key );\n\t}\n\n\tgetKeypathModel () {\n\t\treturn this.keypathModel || ( this.keypathModel = new KeypathModel( this ) );\n\t}\n\n\tgetKeypath () {\n\t\t// TODO keypaths inside components... tricky\n\t\treturn this.parent.isRoot ? this.key : this.parent.getKeypath() + '.' + this.key;\n\t}\n\n\thas ( key ) {\n\t\treturn this.value && hasProp.call( this.value, key );\n\t}\n\n\tjoinKey ( key ) {\n\t\tif ( key === undefined || key === '' ) return this;\n\n\t\tif ( !this.childByKey.hasOwnProperty( key ) ) {\n\t\t\tconst child = new Model( this, key );\n\t\t\tthis.children.push( child );\n\t\t\tthis.childByKey[ key ] = child;\n\t\t}\n\n\t\treturn this.childByKey[ key ];\n\t}\n\n\tjoinAll ( keys ) {\n\t\tlet model = this;\n\t\tfor ( let i = 0; i < keys.length; i += 1 ) {\n\t\t\tmodel = model.joinKey( keys[i] );\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tmark () {\n\t\tconst value = this.retrieve();\n\n\t\tif ( !isEqual( value, this.value ) ) {\n\t\t\tthis.value = value;\n\n\t\t\tthis.children.forEach( mark );\n\n\t\t\tthis.deps.forEach( handleChange );\n\t\t\tthis.clearUnresolveds();\n\t\t}\n\t}\n\n\tmerge ( array, comparator ) {\n\t\tconst oldArray = comparator ? this.value.map( comparator ) : this.value;\n\t\tconst newArray = comparator ? array.map( comparator ) : array;\n\n\t\tconst oldLength = oldArray.length;\n\n\t\tlet usedIndices = {};\n\t\tlet firstUnusedIndex = 0;\n\n\t\tconst newIndices = oldArray.map( item => {\n\t\t\tlet index;\n\t\t\tlet start = firstUnusedIndex;\n\n\t\t\tdo {\n\t\t\t\tindex = newArray.indexOf( item, start );\n\n\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tstart = index + 1;\n\t\t\t} while ( ( usedIndices[ index ] === true ) && start < oldLength );\n\n\t\t\t// keep track of the first unused index, so we don't search\n\t\t\t// the whole of newArray for each item in oldArray unnecessarily\n\t\t\tif ( index === firstUnusedIndex ) {\n\t\t\t\tfirstUnusedIndex += 1;\n\t\t\t}\n\t\t\t// allow next instance of next \"equal\" to be found item\n\t\t\tusedIndices[ index ] = true;\n\t\t\treturn index;\n\t\t});\n\n\t\tthis.parent.value[ this.key ] = array;\n\t\tthis._merged = true;\n\t\tthis.shuffle( newIndices );\n\t}\n\n\tregister ( dep ) {\n\t\tthis.deps.push( dep );\n\t}\n\n\tregisterTwowayBinding ( binding ) {\n\t\tthis.bindings.push( binding );\n\t}\n\n\tretrieve () {\n\t\treturn this.parent.value ? this.parent.value[ this.key ] : undefined;\n\t}\n\n\tset ( value ) {\n\t\tif ( isEqual( value, this.value ) ) return;\n\n\t\t// TODO deprecate this nonsense\n\t\tthis.root.changes[ this.getKeypath() ] = value;\n\n\t\tif ( this.parent.wrapper && this.parent.wrapper.set ) {\n\t\t\tthis.parent.wrapper.set( this.key, value );\n\t\t\tthis.parent.value = this.parent.wrapper.get();\n\n\t\t\tthis.value = this.parent.value[ this.key ];\n\t\t\t// TODO should this value be adapted? probably\n\t\t} else if ( this.wrapper ) {\n\t\t\tconst shouldTeardown = !this.wrapper.reset || this.wrapper.reset( value ) === false;\n\n\t\t\tif ( shouldTeardown ) {\n\t\t\t\tthis.wrapper.teardown();\n\t\t\t\tthis.wrapper = null;\n\t\t\t\tthis.parent.value[ this.key ] = this.value = value;\n\t\t\t\tthis.adapt();\n\t\t\t} else {\n\t\t\t\tthis.value = this.wrapper.get();\n\t\t\t}\n\t\t} else {\n\t\t\tconst parentValue = this.parent.value || this.parent.createBranch( this.key );\n\t\t\tparentValue[ this.key ] = value;\n\n\t\t\tthis.value = value;\n\t\t\tthis.adapt();\n\t\t}\n\n\t\tthis.parent.clearUnresolveds();\n\t\tthis.clearUnresolveds();\n\n\t\t// notify dependants\n\t\tconst previousOriginatingModel = originatingModel; // for the array.length special case\n\t\toriginatingModel = this;\n\n\t\tthis.children.forEach( mark );\n\t\tthis.deps.forEach( handleChange );\n\n\t\tlet parent = this.parent;\n\t\twhile ( parent ) {\n\t\t\tparent.deps.forEach( handleChange );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\toriginatingModel = previousOriginatingModel;\n\t}\n\n\tshuffle ( newIndices ) {\n\t\tconst indexModels = [];\n\t\tlet max = 0, child;\n\n\t\tnewIndices.forEach( ( newIndex, oldIndex ) => {\n\t\t\tif ( newIndex > max ) max = newIndex;\n\n\t\t\tif ( !~newIndex ) return;\n\n\t\t\tconst model = this.indexModels[ oldIndex ];\n\n\t\t\tif ( !model ) return;\n\n\t\t\tindexModels[ newIndex ] = model;\n\n\t\t\tif ( newIndex !== oldIndex ) {\n\t\t\t\tmodel.rebind( newIndex );\n\t\t\t}\n\t\t});\n\n\t\t// some children, notably computations, need to be notified when they are\n\t\t// no longer attached to anything so they don't recompute\n\t\twhile ( ( child = this.childByKey[ ++max ] ) ) {\n\t\t\tif ( typeof child.discard === 'function' ) child.discard();\n\t\t}\n\n\t\tthis.indexModels = indexModels;\n\n\n\t\t// shuffles need to happen before marks...\n\t\tthis.deps.forEach( dep => {\n\t\t\tif ( dep.shuffle ) dep.shuffle( newIndices );\n\t\t});\n\n\t\tthis.updateKeypathDependants();\n\t\tthis.mark();\n\n\t\t// ...but handleChange must happen after (TODO document why)\n\t\tthis.deps.forEach( dep => {\n\t\t\tif ( !dep.shuffle ) dep.handleChange();\n\t\t});\n\t}\n\n\tteardown () {\n\t\tthis.children.forEach( teardown );\n\t\tif ( this.wrapper ) this.wrapper.teardown();\n\t}\n\n\tunregister ( dependant ) {\n\t\tremoveFromArray( this.deps, dependant );\n\t}\n\n\tunregisterTwowayBinding ( binding ) {\n\t\tremoveFromArray( this.bindings, binding );\n\t}\n\n\tupdateFromBindings ( cascade ) {\n\t\tlet i = this.bindings.length;\n\t\twhile ( i-- ) {\n\t\t\tconst value = this.bindings[i].getValue();\n\t\t\tif ( value !== this.value ) this.set( value );\n\t\t}\n\n\t\tif ( cascade ) {\n\t\t\tthis.children.forEach( updateFromBindings );\n\t\t}\n\t}\n\n\tupdateKeypathDependants () {\n\t\tthis.children.forEach( updateKeypathDependants );\n\t\tif ( this.keypathModel ) this.keypathModel.handleChange();\n\t}\n}\n","import { removeFromArray } from 'utils/array';\nimport { handleChange } from 'shared/methodCallers';\n\nexport default class KeypathModel {\n\tconstructor ( parent ) {\n\t\tthis.parent = parent;\n\t\tthis.value = parent.getKeypath();\n\t\tthis.dependants = [];\n\t}\n\n\tget () {\n\t\treturn this.value;\n\t}\n\n\thandleChange () {\n\t\tthis.value = this.parent.getKeypath();\n\t\tthis.dependants.forEach( handleChange );\n\t}\n\n\tregister ( dependant ) {\n\t\tthis.dependants.push( dependant );\n\t}\n\n\tunregister ( dependant ) {\n\t\tremoveFromArray( this.dependants, dependant );\n\t}\n}\n","import { removeFromArray } from 'utils/array';\nimport { handleChange } from 'shared/methodCallers';\n\nexport default class KeyModel {\n\tconstructor ( key ) {\n\t\tthis.value = key;\n\t\tthis.isReadonly = true;\n\t\tthis.dependants = [];\n\t}\n\n\tget () {\n\t\treturn this.value;\n\t}\n\n\tgetKeypath () {\n\t\treturn this.value;\n\t}\n\n\trebind ( key ) {\n\t\tthis.value = key;\n\t\tthis.dependants.forEach( handleChange );\n\t}\n\n\tregister ( dependant ) {\n\t\tthis.dependants.push( dependant );\n\t}\n\n\tunregister ( dependant ) {\n\t\tremoveFromArray( this.dependants, dependant );\n\t}\n}\n","let prefixers = {};\n\n// TODO this is legacy. sooner we can replace the old adaptor API the better\nfunction prefixKeypath ( obj, prefix ) {\n\tvar prefixed = {}, key;\n\n\tif ( !prefix ) {\n\t\treturn obj;\n\t}\n\n\tprefix += '.';\n\n\tfor ( key in obj ) {\n\t\tif ( obj.hasOwnProperty( key ) ) {\n\t\t\tprefixed[ prefix + key ] = obj[ key ];\n\t\t}\n\t}\n\n\treturn prefixed;\n}\n\nexport default function getPrefixer ( rootKeypath ) {\n\tvar rootDot;\n\n\tif ( !prefixers[ rootKeypath ] ) {\n\t\trootDot = rootKeypath ? rootKeypath + '.' : '';\n\n\t\tprefixers[ rootKeypath ] = function ( relativeKeypath, value ) {\n\t\t\tvar obj;\n\n\t\t\tif ( typeof relativeKeypath === 'string' ) {\n\t\t\t\tobj = {};\n\t\t\t\tobj[ rootDot + relativeKeypath ] = value;\n\t\t\t\treturn obj;\n\t\t\t}\n\n\t\t\tif ( typeof relativeKeypath === 'object' ) {\n\t\t\t\t// 'relativeKeypath' is in fact a hash, not a keypath\n\t\t\t\treturn rootDot ? prefixKeypath( relativeKeypath, rootKeypath ) : relativeKeypath;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn prefixers[ rootKeypath ];\n}\n","let stack = [];\nlet captureGroup;\n\nexport function startCapturing () {\n\tstack.push( captureGroup = [] );\n}\n\nexport function stopCapturing () {\n\treturn stack.pop();\n}\n\nexport function capture ( model ) {\n\tif ( captureGroup ) {\n\t\tcaptureGroup.push( model );\n\t}\n}\n","import magicAdaptor from './magic';\nimport arrayAdaptor from './array/index';\n\nvar magicArrayAdaptor, MagicArrayWrapper;\n\nif ( magicAdaptor ) {\n\tmagicArrayAdaptor = {\n\t\tfilter: function ( object, keypath, ractive ) {\n\t\t\treturn magicAdaptor.filter( object, keypath, ractive ) && arrayAdaptor.filter( object );\n\t\t},\n\n\t\twrap: function ( ractive, array, keypath ) {\n\t\t\treturn new MagicArrayWrapper( ractive, array, keypath );\n\t\t}\n\t};\n\n\tMagicArrayWrapper = function ( ractive, array, keypath ) {\n\t\tthis.value = array;\n\n\t\tthis.magic = true;\n\n\t\tthis.magicWrapper = magicAdaptor.wrap( ractive, array, keypath );\n\t\tthis.arrayWrapper = arrayAdaptor.wrap( ractive, array, keypath );\n\n\t\t// ugh, this really is a terrible hack\n\t\tObject.defineProperty( this, '__model', {\n\t\t\tget () {\n\t\t\t\treturn this.arrayWrapper.__model;\n\t\t\t},\n\t\t\tset ( model ) {\n\t\t\t\tthis.arrayWrapper.__model = model;\n\t\t\t}\n\t\t});\n\t};\n\n\tMagicArrayWrapper.prototype = {\n\t\tget: function () {\n\t\t\treturn this.value;\n\t\t},\n\t\tteardown: function () {\n\t\t\tthis.arrayWrapper.teardown();\n\t\t\tthis.magicWrapper.teardown();\n\t\t},\n\t\treset: function ( value ) {\n\t\t\treturn this.magicWrapper.reset( value );\n\t\t}\n\t};\n}\n\nexport default magicArrayAdaptor;\n","let magicAdaptor;\n\ntry {\n\tObject.defineProperty({}, 'test', { value: 0 });\n\n\tmagicAdaptor = {\n\t\tfilter ( value ) {\n\t\t\treturn value && typeof value === 'object';\n\t\t},\n\t\twrap ( ractive, value, keypath ) {\n\t\t\treturn new MagicWrapper( ractive, value, keypath );\n\t\t}\n\t};\n} catch ( err ) {\n\tmagicAdaptor = false;\n}\n\nexport default magicAdaptor;\n\nfunction createOrWrapDescriptor ( originalDescriptor, ractive, keypath ) {\n\tif ( originalDescriptor.set && originalDescriptor.set.__magic ) {\n\t\toriginalDescriptor.set.__magic.dependants.push({ ractive, keypath });\n\t\treturn originalDescriptor;\n\t}\n\n\tlet setting;\n\n\tlet dependants = [{ ractive, keypath }];\n\n\tconst descriptor = {\n\t\tget: () => {\n\t\t\treturn 'value' in originalDescriptor ? originalDescriptor.value : originalDescriptor.get();\n\t\t},\n\t\tset: value => {\n\t\t\tif ( setting ) return;\n\n\t\t\tif ( 'value' in originalDescriptor ) {\n\t\t\t\toriginalDescriptor.value = value;\n\t\t\t} else {\n\t\t\t\toriginalDescriptor.set( value );\n\t\t\t}\n\n\t\t\tsetting = true;\n\t\t\tdependants.forEach( ({ ractive, keypath }) => {\n\t\t\t\tractive.set( keypath, value );\n\t\t\t});\n\t\t\tsetting = false;\n\t\t},\n\t\tenumerable: true\n\t};\n\n\tdescriptor.set.__magic = { dependants, originalDescriptor };\n\n\treturn descriptor;\n}\n\nfunction revert ( descriptor, ractive, keypath ) {\n\tif ( !descriptor.set || !descriptor.set.__magic ) return true;\n\n\tlet dependants = descriptor.set.__magic;\n\tlet i = dependants.length;\n\twhile ( i-- ) {\n\t\tconst dependant = dependants[i];\n\t\tif ( dependant.ractive === ractive && dependant.keypath === keypath ) {\n\t\t\tdependants.splice( i, 1 );\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nclass MagicWrapper {\n\tconstructor ( ractive, value, keypath ) {\n\t\tthis.ractive = ractive;\n\t\tthis.value = value;\n\t\tthis.keypath = keypath;\n\n\t\tthis.originalDescriptors = {};\n\n\t\t// wrap all properties with getters\n\t\tObject.keys( value ).forEach( key => {\n\t\t\tconst originalDescriptor = Object.getOwnPropertyDescriptor( this.value, key );\n\t\t\tthis.originalDescriptors[ key ] = originalDescriptor;\n\n\t\t\tconst childKeypath = keypath ? `${keypath}.${key}` : key;\n\n\t\t\tconst descriptor = createOrWrapDescriptor( originalDescriptor, ractive, childKeypath );\n\n\n\n\t\t\tObject.defineProperty( this.value, key, descriptor );\n\t\t});\n\t}\n\n\tget () {\n\t\treturn this.value;\n\t}\n\n\treset () {\n\t\tthrow new Error( 'TODO magic adaptor reset' ); // does this ever happen?\n\t}\n\n\tset ( key, value ) {\n\t\tthis.value[ key ] = value;\n\t}\n\n\tteardown () {\n\t\tObject.keys( this.value ).forEach( key => {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor( this.value, key );\n\t\t\tif ( !descriptor.set || !descriptor.set.__magic ) return;\n\n\t\t\trevert( descriptor );\n\n\t\t\tif ( descriptor.set.__magic.dependants.length === 1 ) {\n\t\t\t\tObject.defineProperty( this.value, key, descriptor.set.__magic.originalDescriptor );\n\t\t\t}\n\t\t});\n\t}\n}\n","import { defineProperty } from 'utils/object';\nimport { isArray } from 'utils/is';\nimport patch from './patch';\n\nconst errorMessage = 'Something went wrong in a rather interesting way';\n\nexport default {\n\tfilter ( object ) {\n\t\t// wrap the array if a) b) it's an array, and b) either it hasn't been wrapped already,\n\t\t// or the array didn't trigger the get() itself\n\t\treturn isArray( object ) && ( !object._ractive || !object._ractive.setting );\n\t},\n\twrap ( ractive, array, keypath ) {\n\t\treturn new ArrayWrapper( ractive, array, keypath );\n\t}\n};\n\nclass ArrayWrapper {\n\tconstructor ( ractive, array ) {\n\t\tthis.root = ractive;\n\t\tthis.value = array;\n\t\tthis.__model = null; // filled in later\n\n\t\t// if this array hasn't already been ractified, ractify it\n\t\tif ( !array._ractive ) {\n\t\t\t// define a non-enumerable _ractive property to store the wrappers\n\t\t\tdefineProperty( array, '_ractive', {\n\t\t\t\tvalue: {\n\t\t\t\t\twrappers: [],\n\t\t\t\t\tinstances: [],\n\t\t\t\t\tsetting: false\n\t\t\t\t},\n\t\t\t\tconfigurable: true\n\t\t\t});\n\n\t\t\tpatch( array );\n\t\t}\n\n\t\t// store the ractive instance, so we can handle transitions later\n\t\tif ( !array._ractive.instances[ ractive._guid ] ) {\n\t\t\tarray._ractive.instances[ ractive._guid ] = 0;\n\t\t\tarray._ractive.instances.push( ractive );\n\t\t}\n\n\t\tarray._ractive.instances[ ractive._guid ] += 1;\n\t\tarray._ractive.wrappers.push( this );\n\t}\n\n\tget () {\n\t\treturn this.value;\n\t}\n\n\tteardown () {\n\t\tvar array, storage, wrappers, instances, index;\n\n\t\tarray = this.value;\n\t\tstorage = array._ractive;\n\t\twrappers = storage.wrappers;\n\t\tinstances = storage.instances;\n\n\t\t// if teardown() was invoked because we're clearing the cache as a result of\n\t\t// a change that the array itself triggered, we can save ourselves the teardown\n\t\t// and immediate setup\n\t\tif ( storage.setting ) {\n\t\t\treturn false; // so that we don't remove it from cached wrappers\n\t\t}\n\n\t\tindex = wrappers.indexOf( this );\n\t\tif ( index === -1 ) {\n\t\t\tthrow new Error( errorMessage );\n\t\t}\n\n\t\twrappers.splice( index, 1 );\n\n\t\t// if nothing else depends on this array, we can revert it to its\n\t\t// natural state\n\t\tif ( !wrappers.length ) {\n\t\t\tdelete array._ractive;\n\t\t\tpatch.unpatch( this.value );\n\t\t}\n\n\t\telse {\n\t\t\t// remove ractive instance if possible\n\t\t\tinstances[ this.root._guid ] -= 1;\n\t\t\tif ( !instances[ this.root._guid ] ) {\n\t\t\t\tindex = instances.indexOf( this.root );\n\n\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\tthrow new Error( errorMessage );\n\t\t\t\t}\n\n\t\t\t\tinstances.splice( index, 1 );\n\t\t\t}\n\t\t}\n\t}\n}\n","import runloop from 'global/runloop';\nimport { defineProperty } from 'utils/object';\nimport getNewIndices from 'shared/getNewIndices';\nimport processWrapper from './processWrapper';\n\nconst mutatorMethods = [ 'pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift' ];\nlet patchedArrayProto = [];\n\nmutatorMethods.forEach( function ( methodName ) {\n\tconst method = function ( ...args ) {\n\t\tconst newIndices = getNewIndices( this.length, methodName, args );\n\n\t\t// apply the underlying method\n\t\tconst result = Array.prototype[ methodName ].apply( this, arguments );\n\n\t\t// trigger changes\n\t\trunloop.start();\n\n\t\tthis._ractive.setting = true;\n\t\tlet i = this._ractive.wrappers.length;\n\t\twhile ( i-- ) {\n\t\t\tprocessWrapper( this._ractive.wrappers[i], this, methodName, newIndices );\n\t\t}\n\n\t\trunloop.end();\n\n\t\tthis._ractive.setting = false;\n\t\treturn result;\n\t};\n\n\tdefineProperty( patchedArrayProto, methodName, {\n\t\tvalue: method\n\t});\n});\n\nlet patchArrayMethods;\nlet unpatchArrayMethods;\n\n// can we use prototype chain injection?\n// http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/#wrappers_prototype_chain_injection\nif ( ({}).__proto__ ) {\n\t// yes, we can\n\tpatchArrayMethods = array => array.__proto__ = patchedArrayProto;\n\tunpatchArrayMethods = array => array.__proto__ = Array.prototype;\n}\n\nelse {\n\t// no, we can't\n\tpatchArrayMethods = array => {\n\t\tlet i = mutatorMethods.length;\n\t\twhile ( i-- ) {\n\t\t\tconst methodName = mutatorMethods[i];\n\t\t\tdefineProperty( array, methodName, {\n\t\t\t\tvalue: patchedArrayProto[ methodName ],\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t};\n\n\tunpatchArrayMethods = array => {\n\t\tlet i = mutatorMethods.length;\n\t\twhile ( i-- ) {\n\t\t\tdelete array[ mutatorMethods[i] ];\n\t\t}\n\t};\n}\n\npatchArrayMethods.unpatch = unpatchArrayMethods; // TODO export separately?\nexport default patchArrayMethods;\n","export default function ( wrapper, array, methodName, newIndices ) {\n\tvar { __model } = wrapper;\n\n\tif ( !!newIndices ) {\n\t\t__model.shuffle( newIndices );\n\t} else {\n\t\t// If this is a sort or reverse, we just do root.set()...\n\t\t// TODO use merge logic?\n\t\t//root.viewmodel.mark( keypath );\n\t}\n}\n","export default class Item {\n\tconstructor ( options ) {\n\t\tthis.parentFragment = options.parentFragment;\n\t\tthis.ractive = options.parentFragment.ractive;\n\n\t\tthis.template = options.template;\n\t\tthis.index = options.index;\n\t\tthis.type = options.template.t;\n\n\t\tthis.dirty = false;\n\t}\n\n\tbubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.parentFragment.bubble();\n\t\t}\n\t}\n\n\tfind () {\n\t\treturn null;\n\t}\n\n\tfindAll () {\n\t\t// noop\n\t}\n\n\tfindComponent () {\n\t\treturn null;\n\t}\n\n\tfindAllComponents () {\n\t\t// noop;\n\t}\n\n\tfindNextNode () {\n\t\treturn this.parentFragment.findNextNode( this );\n\t}\n}\n","import { isArray } from 'utils/is';\nimport runloop from 'global/runloop';\nimport { PARTIAL, COMPONENT, ELEMENT } from 'config/types';\n\nfunction collect( source, name, dest ) {\n\tsource.forEach( item => {\n\t\t// queue to rerender if the item is a partial and the current name matches\n\t\tif ( item.type === PARTIAL && item.name === name ) {\n\t\t\tdest.push( item );\n\t\t\treturn; // go no further\n\t\t}\n\n\t\t// if it has a fragment, process its items\n\t\tif ( item.fragment ) {\n\t\t\tcollect( item.fragment.iterations || item.fragment.items, name, dest );\n\t\t}\n\n\t\t// or if it is itself a fragment, process its items\n\t\telse if ( isArray( item.items ) ) {\n\t\t\tcollect( item.items, name, dest );\n\t\t}\n\n\t\t// or if it is a component, step in and process its items\n\t\telse if ( item.type === COMPONENT && item.instance ) {\n\t\t\t// ...unless the partial is shadowed\n\t\t\tif ( item.instance.partials[ name ] ) return;\n\t\t\tcollect( item.instance.fragment.items, name, dest );\n\t\t}\n\n\t\t// if the item is an element, process its attributes too\n\t\tif ( item.type === ELEMENT ) {\n\t\t\tif ( isArray( item.attributes ) ) {\n\t\t\t\tcollect( item.attributes, name, dest );\n\t\t\t}\n\n\t\t\tif ( isArray( item.conditionalAttributes ) ) {\n\t\t\t\tcollect( item.conditionalAttributes, name, dest );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction forceResetTemplate ( partial ) {\n\tpartial.forceResetTemplate();\n}\n\nexport default function ( name, partial ) {\n\tlet collection = [];\n\tcollect( this.fragment.items, name, collection );\n\n\tconst promise = runloop.start( this, true );\n\n\tthis.partials[ name ] = partial;\n\tcollection.forEach( forceResetTemplate );\n\n\trunloop.end();\n\n\treturn promise;\n}\n","import config from 'Ractive/config/config';\nimport Hook from 'events/Hook';\nimport runloop from 'global/runloop';\nimport dataConfigurator from 'Ractive/config/custom/data';\n\nconst shouldRerender = [ 'template', 'partials', 'components', 'decorators', 'events' ];\n\nconst completeHook = new Hook( 'complete' );\nconst resetHook = new Hook( 'reset' );\nconst renderHook = new Hook( 'render' );\nconst unrenderHook = new Hook( 'unrender' );\n\nexport default function Ractive$reset ( data ) {\n\tdata = data || {};\n\n\tif ( typeof data !== 'object' ) {\n\t\tthrow new Error( 'The reset method takes either no arguments, or an object containing new data' );\n\t}\n\n\t// TEMP need to tidy this up\n\tdata = dataConfigurator.init( this.constructor, this, { data });\n\n\tlet promise = runloop.start( this, true );\n\n\t// If the root object is wrapped, try and use the wrapper's reset value\n\tconst wrapper = this.viewmodel.wrapper;\n\tif ( wrapper && wrapper.reset ) {\n\t\tif ( wrapper.reset( data ) === false ) {\n\t\t\t// reset was rejected, we need to replace the object\n\t\t\tthis.viewmodel.set( data );\n\t\t}\n\t} else {\n\t\tthis.viewmodel.set( data );\n\t}\n\n\t// reset config items and track if need to rerender\n\tconst changes = config.reset( this );\n\tlet rerender;\n\n\tlet i = changes.length;\n\twhile ( i-- ) {\n\t\tif ( shouldRerender.indexOf( changes[i] ) > -1 ) {\n\t\t\trerender = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif ( rerender ) {\n\t\tunrenderHook.fire( this );\n\t\tthis.fragment.resetTemplate( this.template );\n\t\trenderHook.fire( this );\n\t\tcompleteHook.fire( this );\n\t}\n\n\trunloop.end();\n\n\tresetHook.fire( this, data );\n\n\treturn promise;\n}\n","import { warnIfDebug } from 'utils/log';\nimport adaptConfigurator from './custom/adapt';\nimport cssConfigurator from './custom/css/css';\nimport dataConfigurator from './custom/data';\nimport templateConfigurator from './custom/template/template';\nimport defaults from './defaults';\nimport registries from './registries';\nimport wrapPrototype from './wrapPrototypeMethod';\nimport deprecate from './deprecate';\n\nvar config, order, defaultKeys, custom, isBlacklisted, isStandardKey;\n\ncustom = {\n\tadapt: adaptConfigurator,\n\tcss: cssConfigurator,\n\tdata: dataConfigurator,\n\ttemplate: templateConfigurator\n};\n\ndefaultKeys = Object.keys( defaults );\n\nisStandardKey = makeObj( defaultKeys.filter( key => !custom[ key ] ) );\n\n// blacklisted keys that we don't double extend\nisBlacklisted = makeObj( defaultKeys.concat( registries.map( r => r.name ) ) );\n\norder = [].concat(\n\tdefaultKeys.filter( key => !registries[ key ] && !custom[ key ] ),\n\tregistries,\n\t//custom.data,\n\tcustom.template,\n\tcustom.css\n);\n\nconfig = {\n\textend: ( Parent, proto, options ) => configure( 'extend', Parent, proto, options ),\n\n\tinit: ( Parent, ractive, options ) => configure( 'init', Parent, ractive, options ),\n\n\treset: ractive => {\n\t\treturn order.filter( c => {\n\t\t\treturn c.reset && c.reset( ractive );\n\t\t}).map( c => c.name );\n\t},\n\n\t// this defines the order. TODO this isn't used anywhere in the codebase,\n\t// only in the test suite - should get rid of it\n\torder\n};\n\nfunction configure ( method, Parent, target, options ) {\n\tdeprecate( options );\n\n\tfor ( let key in options ) {\n\t\tif ( isStandardKey.hasOwnProperty( key ) ) {\n\t\t\tlet value = options[ key ];\n\n\t\t\t// warn the developer if they passed a function and ignore its value\n\n\t\t\t// NOTE: we allow some functions on \"el\" because we duck type element lists\n\t\t\t// and some libraries or ef'ed-up virtual browsers (phantomJS) return a\n\t\t\t// function object as the result of querySelector methods\n\t\t\tif ( key !== 'el' && typeof value === 'function' ) {\n\t\t\t\twarnIfDebug( `${ key } is a Ractive option that does not expect a function and will be ignored`,\n\t\t\t\t\tmethod === 'init' ? target : null );\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget[ key ] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tregistries.forEach( registry => {\n\t\tregistry[ method ]( Parent, target, options );\n\t});\n\n\tadaptConfigurator[ method ]( Parent, target, options );\n\ttemplateConfigurator[ method ]( Parent, target, options );\n\tcssConfigurator[ method ]( Parent, target, options );\n\n\textendOtherMethods( Parent.prototype, target, options );\n}\n\nfunction extendOtherMethods ( parent, target, options ) {\n\tfor ( let key in options ) {\n\t\tif ( !isBlacklisted[ key ] && options.hasOwnProperty( key ) ) {\n\t\t\tlet member = options[ key ];\n\n\t\t\t// if this is a method that overwrites a method, wrap it:\n\t\t\tif ( typeof member === 'function' ) {\n\t\t\t\tmember = wrapPrototype( parent, key, member );\n\t\t\t}\n\n\t\t\ttarget[ key ] = member;\n\t\t}\n\t}\n}\n\nfunction makeObj ( array ) {\n\tvar obj = {};\n\tarray.forEach( x => obj[x] = true );\n\treturn obj;\n}\n\nexport default config;\n","import { warnIfDebug } from 'utils/log';\nimport { isArray } from 'utils/is';\n\nfunction getMessage( deprecated, correct, isError ) {\n\treturn `options.${deprecated} has been deprecated in favour of options.${correct}.`\n\t\t+ ( isError ? ` You cannot specify both options, please use options.${correct}.` : '' );\n}\n\nfunction deprecateOption ( options, deprecatedOption, correct ) {\n\tif ( deprecatedOption in options ) {\n\t\tif( !( correct in options ) ) {\n\t\t\twarnIfDebug( getMessage( deprecatedOption, correct ) );\n\t\t\toptions[ correct ] = options[ deprecatedOption ];\n\t\t} else {\n\t\t\tthrow new Error( getMessage( deprecatedOption, correct, true ) );\n\t\t}\n\t}\n}\n\nexport default function deprecate ( options ) {\n\tdeprecateOption( options, 'beforeInit', 'onconstruct' );\n\tdeprecateOption( options, 'init', 'onrender' );\n\tdeprecateOption( options, 'complete', 'oncomplete' );\n\tdeprecateOption( options, 'eventDefinitions', 'events' );\n\n\t// Using extend with Component instead of options,\n\t// like Human.extend( Spider ) means adaptors as a registry\n\t// gets copied to options. So we have to check if actually an array\n\tif ( isArray( options.adaptors ) ) {\n\t\tdeprecateOption( options, 'adaptors', 'adapt' );\n\t}\n}\n","import noop from 'utils/noop';\n\nexport default function wrap ( parent, name, method ) {\n\tif ( !/_super/.test( method ) ) {\n\t\treturn method;\n\t}\n\n\tvar wrapper = function wrapSuper () {\n\t\tvar superMethod = getSuperMethod( wrapper._parent, name ),\n\t\t\thasSuper = ( '_super' in this ),\n\t\t\toldSuper = this._super,\n\t\t\tresult;\n\n\t\tthis._super = superMethod;\n\n\t\tresult = method.apply( this, arguments );\n\n\t\tif ( hasSuper ) {\n\t\t\tthis._super = oldSuper;\n\t\t} else {\n\t\t\tdelete this._super;\n\t\t}\n\n\t\treturn result;\n\t};\n\n\twrapper._parent = parent;\n\twrapper._method = method;\n\n\treturn wrapper;\n}\n\nfunction getSuperMethod ( parent, name ) {\n\tvar value, method;\n\n\tif ( name in parent ) {\n\t\tvalue = parent[name];\n\n\t\tif ( typeof value === 'function' ) {\n\t\t\tmethod = value;\n\t\t} else {\n\t\t\tmethod = function returnValue () {\n\t\t\t\treturn value;\n\t\t\t};\n\t\t}\n\t} else {\n\t\tmethod = noop;\n\t}\n\n\treturn method;\n}\n","import { create } from 'utils/object';\nimport 'legacy';\n\nvar registryNames, Registry, registries;\n\nregistryNames = [\n\t'adaptors',\n\t'components',\n\t'computed',\n\t'decorators',\n\t'easing',\n\t'events',\n\t'interpolators',\n\t'partials',\n\t'transitions'\n];\n\nRegistry = function ( name, useDefaults ) {\n\tthis.name = name;\n\tthis.useDefaults = useDefaults;\n};\n\nRegistry.prototype = {\n\tconstructor: Registry,\n\n \textend: function ( Parent, proto, options ) {\n\t\tthis.configure(\n\t\t\tthis.useDefaults ? Parent.defaults : Parent,\n\t\t\tthis.useDefaults ? proto : proto.constructor,\n\t\t\toptions );\n\t},\n\n\tinit: function () {\n\t\t/*this.configure(\n\t\t\tthis.useDefaults ? Parent.defaults : Parent,\n\t\t\tractive,\n\t\t\toptions );*/\n\t},\n\n\tconfigure: function ( Parent, target, options ) {\n\t\tvar name = this.name, option = options[ name ], registry;\n\n\t\tregistry = create( Parent[name] );\n\n\t\tfor ( let key in option ) {\n\t\t\tregistry[ key ] = option[ key ];\n\t\t}\n\n\t\ttarget[ name ] = registry;\n\t},\n\n\treset: function ( ractive ) {\n\t\tvar registry = ractive[ this.name ];\n\t\tvar changed = false;\n\t\tObject.keys( registry ).forEach( key => {\n\t\t\tvar item = registry[key];\n\t\t\tif ( item._fn ) {\n\t\t\t\tif ( item._fn.isOwner ) {\n\t\t\t\t\tregistry[key] = item._fn;\n\t\t\t\t} else {\n\t\t\t\t\tdelete registry[key];\n\t\t\t\t}\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\treturn changed;\n\t}\n};\n\nregistries = registryNames.map( name => new Registry( name, name === 'computed' ) );\n\nexport default registries;\n","import { TEMPLATE_VERSION } from 'config/template';\nimport { create } from 'utils/object';\nimport parser from './parser';\nimport parse from 'parse/_parse';\n\nvar templateConfigurator = {\n\tname: 'template',\n\n\textend: function extend ( Parent, proto, options ) {\n\t\tvar template;\n\n\t\t// only assign if exists\n\t\tif ( 'template' in options ) {\n\t\t\ttemplate = options.template;\n\n\t\t\tif ( typeof template === 'function' ) {\n\t\t\t\tproto.template = template;\n\t\t\t} else {\n\t\t\t\tproto.template = parseIfString( template, proto );\n\t\t\t}\n\t\t}\n\t},\n\n\tinit: function init ( Parent, ractive, options ) {\n\t\tvar template, fn;\n\n\t\t// TODO because of prototypal inheritance, we might just be able to use\n\t\t// ractive.template, and not bother passing through the Parent object.\n\t\t// At present that breaks the test mocks' expectations\n\t\ttemplate = 'template' in options ? options.template : Parent.prototype.template;\n\n\t\tif ( typeof template === 'function' ) {\n\t\t\tfn = template;\n\t\t\ttemplate = getDynamicTemplate( ractive, fn );\n\n\t\t\tractive._config.template = {\n\t\t\t\tfn: fn,\n\t\t\t\tresult: template\n\t\t\t};\n\t\t}\n\n\t\ttemplate = parseIfString( template, ractive );\n\n\t\t// TODO the naming of this is confusing - ractive.template refers to [...],\n\t\t// but Component.prototype.template refers to {v:1,t:[],p:[]}...\n\t\t// it's unnecessary, because the developer never needs to access\n\t\t// ractive.template\n\t\tractive.template = template.t;\n\n\t\tif ( template.p ) {\n\t\t\textendPartials( ractive.partials, template.p );\n\t\t}\n\t},\n\n\treset: function ( ractive ) {\n\t\tvar result = resetValue( ractive ), parsed;\n\n\t\tif ( result ) {\n\t\t\tparsed = parseIfString( result, ractive );\n\n\t\t\tractive.template = parsed.t;\n\t\t\textendPartials( ractive.partials, parsed.p, true );\n\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\nfunction resetValue ( ractive ) {\n\tvar initial = ractive._config.template, result;\n\n\t// If this isn't a dynamic template, there's nothing to do\n\tif ( !initial || !initial.fn ) {\n\t\treturn;\n\t}\n\n\tresult = getDynamicTemplate( ractive, initial.fn );\n\n\t// TODO deep equality check to prevent unnecessary re-rendering\n\t// in the case of already-parsed templates\n\tif ( result !== initial.result ) {\n\t\tinitial.result = result;\n\t\tresult = parseIfString( result, ractive );\n\t\treturn result;\n\t}\n}\n\nfunction getDynamicTemplate ( ractive, fn ) {\n\tvar helper = createHelper( parser.getParseOptions( ractive ) );\n\treturn fn.call( ractive, helper );\n}\n\nfunction createHelper ( parseOptions ) {\n\tvar helper = create( parser );\n\thelper.parse = function ( template, options ){\n\t\treturn parser.parse( template, options || parseOptions );\n\t};\n\treturn helper;\n}\n\nfunction parseIfString ( template, ractive ) {\n\tif ( typeof template === 'string' ) {\n\t\t// ID of an element containing the template?\n\t\tif ( template[0] === '#' ) {\n\t\t\ttemplate = parser.fromId( template );\n\t\t}\n\n\t\ttemplate = parse( template, parser.getParseOptions( ractive ) );\n\t}\n\n\t// Check that the template even exists\n\telse if ( template == undefined ) {\n\t\tthrow new Error( `The template cannot be ${template}.` );\n\t}\n\n\t// Check the parsed template has a version at all\n\telse if ( typeof template.v !== 'number' ) {\n\t\tthrow new Error( 'The template parser was passed a non-string template, but the template doesn\\'t have a version.  Make sure you\\'re passing in the template you think you are.' );\n\t}\n\n\t// Check we're using the correct version\n\telse if ( template.v !== TEMPLATE_VERSION ) {\n\t\tthrow new Error( `Mismatched template version (expected ${TEMPLATE_VERSION}, got ${template.v}) Please ensure you are using the latest version of Ractive.js in your build process as well as in your app` );\n\t}\n\n\treturn template;\n}\n\nfunction extendPartials ( existingPartials, newPartials, overwrite ) {\n\tif ( !newPartials ) return;\n\n\t// TODO there's an ambiguity here - we need to overwrite in the `reset()`\n\t// case, but not initially...\n\n\tfor ( let key in newPartials ) {\n\t\tif ( overwrite || !existingPartials.hasOwnProperty( key ) ) {\n\t\t\texistingPartials[ key ] = newPartials[ key ];\n\t\t}\n\t}\n}\n\nexport default templateConfigurator;\n","import { doc } from 'config/environment';\nimport parse from 'parse/_parse';\nimport { create } from 'utils/object';\n\nvar parseOptions = [\n \t'preserveWhitespace',\n\t'sanitize',\n\t'stripComments',\n\t'delimiters',\n\t'tripleDelimiters',\n\t'interpolate'\n];\n\nvar parser = {\n\tfromId, isHashedId, isParsed, getParseOptions, createHelper,\n\tparse: doParse\n};\n\nfunction createHelper ( parseOptions ) {\n\tvar helper = create( parser );\n\thelper.parse = ( template, options ) => doParse( template, options || parseOptions );\n\treturn helper;\n}\n\nfunction doParse ( template, parseOptions ) {\n\tif ( !parse ) {\n\t\tthrow new Error( 'Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser' );\n\t}\n\n\treturn parse( template, parseOptions || this.options );\n}\n\nfunction fromId ( id, options ) {\n\tvar template;\n\n\tif ( !doc ) {\n\t\tif ( options && options.noThrow ) { return; }\n\t\tthrow new Error( `Cannot retrieve template #${id} as Ractive is not running in a browser.` );\n\t}\n\n\tif ( isHashedId( id ) ) {\n\t\tid = id.substring( 1 );\n\t}\n\n\tif ( !( template = doc.getElementById( id ) )) {\n\t\tif ( options && options.noThrow ) { return; }\n\t\tthrow new Error( `Could not find template element with id #${id}` );\n\t}\n\n\tif ( template.tagName.toUpperCase() !== 'SCRIPT' ) {\n\t\tif ( options && options.noThrow ) { return; }\n\t\tthrow new Error( `Template element with id #${id}, must be a <script> element` );\n\t}\n\n\treturn ( 'textContent' in template ? template.textContent : template.innerHTML );\n}\n\nfunction isHashedId ( id ) {\n\treturn ( id && id[0] === '#' );\n}\n\nfunction isParsed ( template) {\n\treturn !( typeof template === 'string' );\n}\n\nfunction getParseOptions ( ractive ) {\n\t// Could be Ractive or a Component\n\tif ( ractive.defaults ) { ractive = ractive.defaults; }\n\n\treturn parseOptions.reduce( ( val, key ) => {\n\t\tval[ key ] = ractive[ key ];\n\t\treturn val;\n\t}, {});\n}\n\nexport default parser;\n","import { TEMPLATE_VERSION } from 'config/template';\nimport { create } from 'utils/object';\nimport { READERS, PARTIAL_READERS } from '../_parse';\nimport cleanup from '../utils/cleanup';\n\nexport default function readTemplate ( parser ) {\n\tlet fragment = [];\n\tlet partials = create( null );\n\tlet hasPartials = false;\n\n\tlet preserveWhitespace = parser.preserveWhitespace;\n\n\twhile ( parser.pos < parser.str.length ) {\n\t\tlet pos = parser.pos, item, partial;\n\n\t\tif ( partial = parser.read( PARTIAL_READERS ) ) {\n\t\t\tif ( partials[ partial.n ] ) {\n\t\t\t\tparser.pos = pos;\n\t\t\t\tparser.error( 'Duplicated partial definition' );\n\t\t\t}\n\n\t\t\tcleanup( partial.f, parser.stripComments, preserveWhitespace, !preserveWhitespace, !preserveWhitespace );\n\n\t\t\tpartials[ partial.n ] = partial.f;\n\t\t\thasPartials = true;\n\t\t} else if ( item = parser.read( READERS ) ) {\n\t\t\tfragment.push( item );\n\t\t} else  {\n\t\t\tparser.error( 'Unexpected template content' );\n\t\t}\n\t}\n\n\tlet result = {\n\t\tv: TEMPLATE_VERSION,\n\t\tt: fragment\n\t};\n\n\tif ( hasPartials ) {\n\t\tresult.p = partials;\n\t}\n\n\treturn result;\n}\n","import { INLINE_PARTIAL } from 'config/types';\nimport { READERS } from '../_parse';\nimport readClosing from './mustache/section/readClosing';\n\nvar partialDefinitionSectionPattern = /^#\\s*partial\\s+/;\n\nexport default function readPartialDefinitionSection ( parser ) {\n\tvar start, name, content, child, closed;\n\n\tstart = parser.pos;\n\n\tlet delimiters = parser.standardDelimiters;\n\n\tif ( !parser.matchString( delimiters[0] ) ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchPattern( partialDefinitionSectionPattern ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tname = parser.matchPattern( /^[a-zA-Z_$][a-zA-Z_$0-9\\-\\/]*/ );\n\n\tif ( !name ) {\n\t\tparser.error( 'expected legal partial name' );\n\t}\n\n\tif ( !parser.matchString( delimiters[1] ) ) {\n\t\tparser.error( `Expected closing delimiter '${delimiters[1]}'` );\n\t}\n\n\tcontent = [];\n\n\tdo {\n\t\t// TODO clean this up\n\t\tif ( child = readClosing( parser, { open: parser.standardDelimiters[0], close: parser.standardDelimiters[1] }) ) {\n\t\t\tif ( !child.r === 'partial' ) {\n\t\t\t\tparser.error( `Expected ${delimiters[0]}/partial${delimiters[1]}` );\n\t\t\t}\n\n\t\t\tclosed = true;\n\t\t}\n\n\t\telse {\n\t\t\tchild = parser.read( READERS );\n\n\t\t\tif ( !child ) {\n\t\t\t\tparser.error( `Expected ${delimiters[0]}/partial${delimiters[1]}` );\n\t\t\t}\n\n\t\t\tcontent.push( child );\n\t\t}\n\t} while ( !closed );\n\n\treturn {\n\t\tt: INLINE_PARTIAL,\n\t\tn: name,\n\t\tf: content\n\t};\n}\n","import { INLINE_PARTIAL } from 'config/types';\nimport { warnOnceIfDebug } from 'utils/log';\nimport { READERS } from '../_parse';\nimport escapeRegExp from 'utils/escapeRegExp';\n\nexport default readPartialDefinitionComment;\n\nvar startPattern = /^<!--\\s*/,\n    namePattern = /s*>\\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\\s*/,\n    finishPattern = /\\s*-->/,\n    child;\n\nfunction readPartialDefinitionComment ( parser ) {\n\tlet firstPos = parser.pos,\n\t    open = parser.standardDelimiters[0],\n\t    close = parser.standardDelimiters[1],\n\t    content,\n\t    closed;\n\n\tif ( !parser.matchPattern( startPattern ) || !parser.matchString( open ) ) {\n\t\tparser.pos = firstPos;\n\t\treturn null;\n\t}\n\n\tlet name = parser.matchPattern( namePattern );\n\n\twarnOnceIfDebug( `Inline partial comments are deprecated.\nUse this...\n  {{#partial ${name}}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>${name}}} --> ... <!-- {{/${name}}} -->'` );\n\n\t// make sure the rest of the comment is in the correct place\n\tif ( !parser.matchString( close ) || !parser.matchPattern( finishPattern ) ) {\n\t\tparser.pos = firstPos;\n\t\treturn null;\n\t}\n\n\tcontent = [];\n\n\tlet endPattern = new RegExp('^<!--\\\\s*' + escapeRegExp( open ) + '\\\\s*\\\\/\\\\s*' + name + '\\\\s*' + escapeRegExp( close ) + '\\\\s*-->');\n\n\tdo {\n\t\tif ( parser.matchPattern( endPattern ) ) {\n\t\t\tclosed = true;\n\t\t}\n\n\t\telse {\n\t\t\tchild = parser.read( READERS );\n\t\t\tif ( !child ) {\n\t\t\t\tparser.error( `expected closing comment ('<!-- ${open}/${name}${close} -->')` );\n\t\t\t}\n\n\t\t\tcontent.push( child );\n\t\t}\n\t} while ( !closed );\n\n\treturn {\n\t\tt: INLINE_PARTIAL,\n\t\tf: content,\n\t\tn: name\n\t};\n}\n","var pattern = /[-/\\\\^$*+?.()|[\\]{}]/g;\n\nexport default function escapeRegExp ( str ) {\n\treturn str.replace( pattern, '\\\\$&' );\n}\n","import getLowestIndex from './utils/getLowestIndex';\nimport { decodeCharacterReferences } from 'utils/html';\n\nexport default function readText ( parser ) {\n\tvar index, remaining, disallowed, barrier;\n\n\tremaining = parser.remaining();\n\n\tbarrier = parser.inside ? '</' + parser.inside : '<';\n\n\tif ( parser.inside && !parser.interpolate[ parser.inside ] ) {\n\t\tindex = remaining.indexOf( barrier );\n\t} else {\n\t\tdisallowed = parser.tags.map( t => t.open );\n\t\tdisallowed = disallowed.concat( parser.tags.map( t => '\\\\' + t.open ) );\n\n\t\t// http://developers.whatwg.org/syntax.html#syntax-attributes\n\t\tif ( parser.inAttribute === true ) {\n\t\t\t// we're inside an unquoted attribute value\n\t\t\tdisallowed.push( '\"', \"'\", '=', '<', '>', '`' );\n\t\t} else if ( parser.inAttribute ) {\n\t\t\t// quoted attribute value\n\t\t\tdisallowed.push( parser.inAttribute );\n\t\t} else {\n\t\t\tdisallowed.push( barrier );\n\t\t}\n\n\t\tindex = getLowestIndex( remaining, disallowed );\n\t}\n\n\tif ( !index ) {\n\t\treturn null;\n\t}\n\n\tif ( index === -1 ) {\n\t\tindex = remaining.length;\n\t}\n\n\tparser.pos += index;\n\n\treturn parser.inside ? remaining.substr( 0, index ) : decodeCharacterReferences( remaining.substr( 0, index ) );\n}\n","import { DOCTYPE, ELEMENT } from 'config/types';\nimport { voidElementNames } from 'utils/html';\nimport { create } from 'utils/object';\nimport { READERS, PARTIAL_READERS } from '../_parse';\nimport cleanup from '../utils/cleanup';\nimport readMustache from './readMustache';\nimport readClosing from './mustache/section/readClosing';\nimport readClosingTag from './element/readClosingTag';\nimport readAttribute from './element/readAttribute';\nimport processDirective from './element/processDirective';\n\nvar tagNamePattern = /^[a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*/,\n\tvalidTagNameFollower = /^[\\s\\n\\/>]/,\n\tonPattern = /^on/,\n\tproxyEventPattern = /^on-([a-zA-Z\\\\*\\\\.$_][a-zA-Z\\\\*\\\\.$_0-9\\-]+)$/,\n\treservedEventNames = /^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,\n\tdirectives = { 'intro-outro': 't0', intro: 't1', outro: 't2', decorator: 'o' },\n\texclude = { exclude: true },\n\tdisallowedContents;\n\n// based on http://developers.whatwg.org/syntax.html#syntax-tag-omission\ndisallowedContents = {\n\tli: [ 'li' ],\n\tdt: [ 'dt', 'dd' ],\n\tdd: [ 'dt', 'dd' ],\n\tp: 'address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul'.split( ' ' ),\n\trt: [ 'rt', 'rp' ],\n\trp: [ 'rt', 'rp' ],\n\toptgroup: [ 'optgroup' ],\n\toption: [ 'option', 'optgroup' ],\n\tthead: [ 'tbody', 'tfoot' ],\n\ttbody: [ 'tbody', 'tfoot' ],\n\ttfoot: [ 'tbody' ],\n\ttr: [ 'tr', 'tbody' ],\n\ttd: [ 'td', 'th', 'tr' ],\n\tth: [ 'td', 'th', 'tr' ]\n};\n\nexport default readElement;\n\nfunction readElement ( parser ) {\n\tvar start,\n\t\telement,\n\t\tdirectiveName,\n\t\tmatch,\n\t\taddProxyEvent,\n\t\tattribute,\n\t\tdirective,\n\t\tselfClosing,\n\t\tchildren,\n\t\tpartials,\n\t\thasPartials,\n\t\tchild,\n\t\tclosed,\n\t\tpos,\n\t\tremaining,\n\t\tclosingTag;\n\n\tstart = parser.pos;\n\n\tif ( parser.inside || parser.inAttribute ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( '<' ) ) {\n\t\treturn null;\n\t}\n\n\t// if this is a closing tag, abort straight away\n\tif ( parser.nextChar() === '/' ) {\n\t\treturn null;\n\t}\n\n\telement = {};\n\tif ( parser.includeLinePositions ) {\n\t\telement.p = parser.getLinePos( start );\n\t}\n\n\tif ( parser.matchString( '!' ) ) {\n\t\telement.t = DOCTYPE;\n\t\tif ( !parser.matchPattern( /^doctype/i ) ) {\n\t\t\tparser.error( 'Expected DOCTYPE declaration' );\n\t\t}\n\n\t\telement.a = parser.matchPattern( /^(.+?)>/ );\n\t\treturn element;\n\t}\n\n\telement.t = ELEMENT;\n\n\t// element name\n\telement.e = parser.matchPattern( tagNamePattern );\n\tif ( !element.e ) {\n\t\treturn null;\n\t}\n\n\t// next character must be whitespace, closing solidus or '>'\n\tif ( !validTagNameFollower.test( parser.nextChar() ) ) {\n\t\tparser.error( 'Illegal tag name' );\n\t}\n\n\taddProxyEvent = function ( name, directive ) {\n\t\tvar directiveName = directive.n || directive;\n\n\t\tif ( reservedEventNames.test( directiveName ) ) {\n\t\t\tparser.pos -= directiveName.length;\n\t\t\tparser.error( 'Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)' );\n\t\t}\n\n\t\telement.v[ name ] = directive;\n\t};\n\n\tparser.allowWhitespace();\n\n\t// directives and attributes\n\twhile ( attribute = readMustache( parser ) || readAttribute( parser ) ) {\n\t\t// regular attributes\n\t\tif ( attribute.name ) {\n\t\t\t// intro, outro, decorator\n\t\t\tif ( directiveName = directives[ attribute.name ] ) {\n\t\t\t\telement[ directiveName ] = processDirective( attribute.value, parser );\n\t\t\t}\n\n\t\t\t// on-click etc\n\t\t\telse if ( match = proxyEventPattern.exec( attribute.name ) ) {\n\t\t\t\tif ( !element.v ) element.v = {};\n\t\t\t\tdirective = processDirective( attribute.value, parser );\n\t\t\t\taddProxyEvent( match[1], directive );\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tif ( !parser.sanitizeEventAttributes || !onPattern.test( attribute.name ) ) {\n\t\t\t\t\tif ( !element.a ) element.a = {};\n\t\t\t\t\telement.a[ attribute.name ] = attribute.value || ( attribute.value === '' ? '' : 0 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// {{#if foo}}class='foo'{{/if}}\n\t\telse {\n\t\t\tif ( !element.m ) element.m = [];\n\t\t\telement.m.push( attribute );\n\t\t}\n\n\t\tparser.allowWhitespace();\n\t}\n\n\t// allow whitespace before closing solidus\n\tparser.allowWhitespace();\n\n\t// self-closing solidus?\n\tif ( parser.matchString( '/' ) ) {\n\t\tselfClosing = true;\n\t}\n\n\t// closing angle bracket\n\tif ( !parser.matchString( '>' ) ) {\n\t\treturn null;\n\t}\n\n\tlet lowerCaseName = element.e.toLowerCase();\n\tlet preserveWhitespace = parser.preserveWhitespace;\n\n\tif ( !selfClosing && !voidElementNames.test( element.e ) ) {\n\t\tparser.elementStack.push( lowerCaseName );\n\n\t\t// Special case - if we open a script element, further tags should\n\t\t// be ignored unless they're a closing script element\n\t\tif ( lowerCaseName === 'script' || lowerCaseName === 'style' ) {\n\t\t\tparser.inside = lowerCaseName;\n\t\t}\n\n\t\tchildren = [];\n\t\tpartials = create( null );\n\n\t\tdo {\n\t\t\tpos = parser.pos;\n\t\t\tremaining = parser.remaining();\n\n\t\t\t// if for example we're in an <li> element, and we see another\n\t\t\t// <li> tag, close the first so they become siblings\n\t\t\tif ( !canContain( lowerCaseName, remaining ) ) {\n\t\t\t\tclosed = true;\n\t\t\t}\n\n\t\t\t// closing tag\n\t\t\telse if ( closingTag = readClosingTag( parser ) ) {\n\t\t\t\tclosed = true;\n\n\t\t\t\tlet closingTagName = closingTag.e.toLowerCase();\n\n\t\t\t\t// if this *isn't* the closing tag for the current element...\n\t\t\t\tif ( closingTagName !== lowerCaseName ) {\n\t\t\t\t\t// rewind parser\n\t\t\t\t\tparser.pos = pos;\n\n\t\t\t\t\t// if it doesn't close a parent tag, error\n\t\t\t\t\tif ( !~parser.elementStack.indexOf( closingTagName ) ) {\n\t\t\t\t\t\tlet errorMessage = 'Unexpected closing tag';\n\n\t\t\t\t\t\t// add additional help for void elements, since component names\n\t\t\t\t\t\t// might clash with them\n\t\t\t\t\t\tif ( voidElementNames.test( closingTagName ) ) {\n\t\t\t\t\t\t\terrorMessage += ` (<${closingTagName}> is a void element - it cannot contain children)`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparser.error( errorMessage );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// implicit close by closing section tag. TODO clean this up\n\t\t\telse if ( child = readClosing( parser, { open: parser.standardDelimiters[0], close: parser.standardDelimiters[1] } ) ) {\n\t\t\t\tclosed = true;\n\t\t\t\tparser.pos = pos;\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tif ( child = parser.read( PARTIAL_READERS ) ) {\n\t\t\t\t\tif ( partials[ child.n ] ) {\n\t\t\t\t\t\tparser.pos = pos;\n\t\t\t\t\t\tparser.error( 'Duplicate partial definition' );\n\t\t\t\t\t}\n\n\t\t\t\t\tcleanup( child.f, parser.stripComments, preserveWhitespace, !preserveWhitespace, !preserveWhitespace );\n\n\t\t\t\t\tpartials[ child.n ] = child.f;\n\t\t\t\t\thasPartials = true;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tif ( child = parser.read( READERS ) ) {\n\t\t\t\t\t\tchildren.push( child );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclosed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( !closed );\n\n\t\tif ( children.length ) {\n\t\t\telement.f = children;\n\t\t}\n\n\t\tif ( hasPartials ) {\n\t\t\telement.p = partials;\n\t\t}\n\n\t\tparser.elementStack.pop();\n\t}\n\n\tparser.inside = null;\n\n\tif ( parser.sanitizeElements && parser.sanitizeElements.indexOf( lowerCaseName ) !== -1 ) {\n\t\treturn exclude;\n\t}\n\n\treturn element;\n}\n\nfunction canContain ( name, remaining ) {\n\tvar match, disallowed;\n\n\tmatch = /^<([a-zA-Z][a-zA-Z0-9]*)/.exec( remaining );\n\tdisallowed = disallowedContents[ name ];\n\n\tif ( !match || !disallowed ) {\n\t\treturn true;\n\t}\n\n\treturn !~disallowed.indexOf( match[1].toLowerCase() );\n}\n","import Parser from 'parse/Parser';\nimport readExpression from 'parse/converters/readExpression';\nimport flattenExpression from 'parse/utils/flattenExpression';\nimport parseJSON from 'utils/parseJSON';\n\nvar methodCallPattern = /^([a-zA-Z_$][a-zA-Z_$0-9]*)\\(/,\n\tmethodCallExcessPattern = /\\)\\s*$/,\n\tExpressionParser;\n\nExpressionParser = Parser.extend({\n\tconverters: [ readExpression ]\n});\n\n// TODO clean this up, it's shocking\nexport default function processDirective ( tokens, parentParser ) {\n\tvar result,\n\t\tmatch,\n\t\tparser,\n\t\targs,\n\t\ttoken,\n\t\tcolonIndex,\n\t\tdirectiveName,\n\t\tdirectiveArgs,\n\t\tparsed;\n\n\tif ( typeof tokens === 'string' ) {\n\t\tif ( match = methodCallPattern.exec( tokens ) ) {\n\t\t\tlet end = tokens.lastIndexOf(')');\n\n\t\t\t// check for invalid method calls\n\t\t\tif ( !methodCallExcessPattern.test( tokens ) ) {\n\t\t\t\tparentParser.error( `Invalid input after method call expression '${tokens.slice(end + 1)}'` );\n\t\t\t}\n\n\t\t\tresult = { m: match[1] };\n\t\t\targs = '[' + tokens.slice( result.m.length + 1, end ) + ']';\n\n\t\t\tparser = new ExpressionParser( args );\n\t\t\tresult.a = flattenExpression( parser.result[0] );\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif ( tokens.indexOf( ':' ) === -1 ) {\n\t\t\treturn tokens.trim();\n\t\t}\n\n\t\ttokens = [ tokens ];\n\t}\n\n\tresult = {};\n\n\tdirectiveName = [];\n\tdirectiveArgs = [];\n\n\tif ( tokens ) {\n\t\twhile ( tokens.length ) {\n\t\t\ttoken = tokens.shift();\n\n\t\t\tif ( typeof token === 'string' ) {\n\t\t\t\tcolonIndex = token.indexOf( ':' );\n\n\t\t\t\tif ( colonIndex === -1 ) {\n\t\t\t\t\tdirectiveName.push( token );\n\t\t\t\t} else {\n\t\t\t\t\t// is the colon the first character?\n\t\t\t\t\tif ( colonIndex ) {\n\t\t\t\t\t\t// no\n\t\t\t\t\t\tdirectiveName.push( token.substr( 0, colonIndex ) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// if there is anything after the colon in this token, treat\n\t\t\t\t\t// it as the first token of the directiveArgs fragment\n\t\t\t\t\tif ( token.length > colonIndex + 1 ) {\n\t\t\t\t\t\tdirectiveArgs[0] = token.substring( colonIndex + 1 );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tdirectiveName.push( token );\n\t\t\t}\n\t\t}\n\n\t\tdirectiveArgs = directiveArgs.concat( tokens );\n\t}\n\n\tif ( !directiveName.length ) {\n\t\tresult = '';\n\t} else if ( directiveArgs.length || typeof directiveName !== 'string' ) {\n\t\tresult = {\n\t\t\t// TODO is this really necessary? just use the array\n\t\t\tn: ( directiveName.length === 1 && typeof directiveName[0] === 'string' ? directiveName[0] : directiveName )\n\t\t};\n\n\t\tif ( directiveArgs.length === 1 && typeof directiveArgs[0] === 'string' ) {\n\t\t\tparsed = parseJSON( '[' + directiveArgs[0] + ']' );\n\t\t\tresult.a = parsed ? parsed.value : [ directiveArgs[0].trim() ];\n\t\t}\n\n\t\telse {\n\t\t\tresult.d = directiveArgs;\n\t\t}\n\t} else {\n\t\tresult = directiveName;\n\t}\n\n\treturn result;\n}\n","import Parser from 'parse/Parser';\nimport readStringLiteral from 'parse/converters/expressions/primary/literal/readStringLiteral';\nimport readKey from 'parse/converters/expressions/shared/readKey';\n\n// simple JSON parser, without the restrictions of JSON parse\n// (i.e. having to double-quote keys).\n//\n// If passed a hash of values as the second argument, ${placeholders}\n// will be replaced with those values\n\nvar JsonParser, specials, specialsPattern, numberPattern, placeholderPattern, placeholderAtStartPattern, onlyWhitespace;\n\nspecials = {\n\t'true': true,\n\t'false': false,\n\t'undefined': undefined,\n\t'null': null\n};\n\nspecialsPattern = new RegExp( '^(?:' + Object.keys( specials ).join( '|' ) + ')' );\nnumberPattern = /^(?:[+-]?)(?:(?:(?:0|[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;\nplaceholderPattern = /\\$\\{([^\\}]+)\\}/g;\nplaceholderAtStartPattern = /^\\$\\{([^\\}]+)\\}/;\nonlyWhitespace = /^\\s*$/;\n\nJsonParser = Parser.extend({\n\tinit: function ( str, options ) {\n\t\tthis.values = options.values;\n\t\tthis.allowWhitespace();\n\t},\n\n\tpostProcess: function ( result ) {\n\t\tif ( result.length !== 1 || !onlyWhitespace.test( this.leftover ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn { value: result[0].v };\n\t},\n\n\tconverters: [\n\t\tfunction getPlaceholder ( parser ) {\n\t\t\tvar placeholder;\n\n\t\t\tif ( !parser.values ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tplaceholder = parser.matchPattern( placeholderAtStartPattern );\n\n\t\t\tif ( placeholder && ( parser.values.hasOwnProperty( placeholder ) ) ) {\n\t\t\t\treturn { v: parser.values[ placeholder ] };\n\t\t\t}\n\t\t},\n\n\t\tfunction getSpecial ( parser ) {\n\t\t\tvar special;\n\n\t\t\tif ( special = parser.matchPattern( specialsPattern ) ) {\n\t\t\t\treturn { v: specials[ special ] };\n\t\t\t}\n\t\t},\n\n\t\tfunction getNumber ( parser ) {\n\t\t\tvar number;\n\n\t\t\tif ( number = parser.matchPattern( numberPattern ) ) {\n\t\t\t\treturn { v: +number };\n\t\t\t}\n\t\t},\n\n\t\tfunction getString ( parser ) {\n\t\t\tvar stringLiteral = readStringLiteral( parser ), values;\n\n\t\t\tif ( stringLiteral && ( values = parser.values ) ) {\n\t\t\t\treturn {\n\t\t\t\t\tv: stringLiteral.v.replace( placeholderPattern, function ( match, $1 ) {\n\t\t\t\t\t\treturn ( $1 in values ? values[ $1 ] : $1 );\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn stringLiteral;\n\t\t},\n\n\t\tfunction getObject ( parser ) {\n\t\t\tvar result, pair;\n\n\t\t\tif ( !parser.matchString( '{' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tresult = {};\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( parser.matchString( '}' ) ) {\n\t\t\t\treturn { v: result };\n\t\t\t}\n\n\t\t\twhile ( pair = getKeyValuePair( parser ) ) {\n\t\t\t\tresult[ pair.key ] = pair.value;\n\n\t\t\t\tparser.allowWhitespace();\n\n\t\t\t\tif ( parser.matchString( '}' ) ) {\n\t\t\t\t\treturn { v: result };\n\t\t\t\t}\n\n\t\t\t\tif ( !parser.matchString( ',' ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tfunction getArray ( parser ) {\n\t\t\tvar result, valueToken;\n\n\t\t\tif ( !parser.matchString( '[' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tresult = [];\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( parser.matchString( ']' ) ) {\n\t\t\t\treturn { v: result };\n\t\t\t}\n\n\t\t\twhile ( valueToken = parser.read() ) {\n\t\t\t\tresult.push( valueToken.v );\n\n\t\t\t\tparser.allowWhitespace();\n\n\t\t\t\tif ( parser.matchString( ']' ) ) {\n\t\t\t\t\treturn { v: result };\n\t\t\t\t}\n\n\t\t\t\tif ( !parser.matchString( ',' ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tparser.allowWhitespace();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t]\n});\n\nfunction getKeyValuePair ( parser ) {\n\tvar key, valueToken, pair;\n\n\tparser.allowWhitespace();\n\n\tkey = readKey( parser );\n\n\tif ( !key ) {\n\t\treturn null;\n\t}\n\n\tpair = { key: key };\n\n\tparser.allowWhitespace();\n\tif ( !parser.matchString( ':' ) ) {\n\t\treturn null;\n\t}\n\tparser.allowWhitespace();\n\n\tvalueToken = parser.read();\n\tif ( !valueToken ) {\n\t\treturn null;\n\t}\n\n\tpair.value = valueToken.v;\n\n\treturn pair;\n}\n\nexport default function ( str, values ) {\n\tvar parser = new JsonParser( str, {\n\t\tvalues: values\n\t});\n\n\treturn parser.result;\n}\n","import getLowestIndex from '../utils/getLowestIndex';\nimport readMustache from '../readMustache';\nimport { decodeCharacterReferences } from 'utils/html';\n\nvar attributeNamePattern = /^[^\\s\"'>\\/=]+/,\n\tunquotedAttributeValueTextPattern = /^[^\\s\"'=<>`]+/;\n\nexport default function readAttribute ( parser ) {\n\tvar attr, name, value;\n\n\tparser.allowWhitespace();\n\n\tname = parser.matchPattern( attributeNamePattern );\n\tif ( !name ) {\n\t\treturn null;\n\t}\n\n\tattr = { name };\n\n\tvalue = readAttributeValue( parser );\n\tif ( value != null ) { // not null/undefined\n\t\tattr.value = value;\n\t}\n\n\treturn attr;\n}\n\nfunction readAttributeValue ( parser ) {\n\tvar start, valueStart, startDepth, value;\n\n\tstart = parser.pos;\n\n\t// next character must be `=`, `/`, `>` or whitespace\n\tif ( !/[=\\/>\\s]/.test( parser.nextChar() ) ) {\n\t\tparser.error( 'Expected `=`, `/`, `>` or whitespace' );\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '=' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tvalueStart = parser.pos;\n\tstartDepth = parser.sectionDepth;\n\n\tvalue = readQuotedAttributeValue( parser, \"'\" ) ||\n\t\t\treadQuotedAttributeValue( parser, '\"' ) ||\n\t\t\treadUnquotedAttributeValue( parser );\n\n\tif ( value === null ) {\n\t\tparser.error( 'Expected valid attribute value' );\n\t}\n\n\tif ( parser.sectionDepth !== startDepth ) {\n\t\tparser.pos = valueStart;\n\t\tparser.error( 'An attribute value must contain as many opening section tags as closing section tags' );\n\t}\n\n\tif ( !value.length ) {\n\t\treturn '';\n\t}\n\n\tif ( value.length === 1 && typeof value[0] === 'string' ) {\n\t\treturn decodeCharacterReferences( value[0] );\n\t}\n\n\treturn value;\n}\n\nfunction readUnquotedAttributeValueToken ( parser ) {\n\tvar start, text, haystack, needles, index;\n\n\tstart = parser.pos;\n\n\ttext = parser.matchPattern( unquotedAttributeValueTextPattern );\n\n\tif ( !text ) {\n\t\treturn null;\n\t}\n\n\thaystack = text;\n\tneedles = parser.tags.map( t => t.open ); // TODO refactor... we do this in readText.js as well\n\n\tif ( ( index = getLowestIndex( haystack, needles ) ) !== -1 ) {\n\t\ttext = text.substr( 0, index );\n\t\tparser.pos = start + text.length;\n\t}\n\n\treturn text;\n}\n\nfunction readUnquotedAttributeValue ( parser ) {\n\tvar tokens, token;\n\n\tparser.inAttribute = true;\n\n\ttokens = [];\n\n\ttoken = readMustache( parser ) || readUnquotedAttributeValueToken( parser );\n\twhile ( token !== null ) {\n\t\ttokens.push( token );\n\t\ttoken = readMustache( parser ) || readUnquotedAttributeValueToken( parser );\n\t}\n\n\tif ( !tokens.length ) {\n\t\treturn null;\n\t}\n\n\tparser.inAttribute = false;\n\treturn tokens;\n}\n\nfunction readQuotedAttributeValue ( parser, quoteMark ) {\n\tvar start, tokens, token;\n\n\tstart = parser.pos;\n\n\tif ( !parser.matchString( quoteMark ) ) {\n\t\treturn null;\n\t}\n\n\tparser.inAttribute = quoteMark;\n\n\ttokens = [];\n\n\ttoken = readMustache( parser ) || readQuotedStringToken( parser, quoteMark );\n\twhile ( token !== null ) {\n\t\ttokens.push( token );\n\t\ttoken = readMustache( parser ) || readQuotedStringToken( parser, quoteMark );\n\t}\n\n\tif ( !parser.matchString( quoteMark ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.inAttribute = false;\n\n\treturn tokens;\n}\n\nfunction readQuotedStringToken ( parser, quoteMark ) {\n\tvar start, index, haystack, needles;\n\n\tstart = parser.pos;\n\thaystack = parser.remaining();\n\n\tneedles = parser.tags.map( t => t.open ); // TODO refactor... we do this in readText.js as well\n\tneedles.push( quoteMark );\n\n\tindex = getLowestIndex( haystack, needles );\n\n\tif ( index === -1 ) {\n\t\tparser.error( 'Quoted attribute value must have a closing quote' );\n\t}\n\n\tif ( !index ) {\n\t\treturn null;\n\t}\n\n\tparser.pos += index;\n\treturn haystack.substr( 0, index );\n}\n","export default function ( haystack, needles ) {\n\tvar i, index, lowest;\n\n\ti = needles.length;\n\twhile ( i-- ) {\n\t\tindex = haystack.indexOf( needles[i] );\n\n\t\t// short circuit\n\t\tif ( !index ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif ( index === -1 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( !lowest || ( index < lowest ) ) {\n\t\t\tlowest = index;\n\t\t}\n\t}\n\n\treturn lowest || -1;\n}\n","import { CLOSING_TAG } from 'config/types';\n\nvar closingTagPattern = /^([a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*)\\s*\\>/;\n\nexport default function readClosingTag ( parser ) {\n\tvar start, tag;\n\n\tstart = parser.pos;\n\n\t// are we looking at a closing tag?\n\tif ( !parser.matchString( '</' ) ) {\n\t\treturn null;\n\t}\n\n\tif ( tag = parser.matchPattern( closingTagPattern ) ) {\n\t\tif ( parser.inside && tag !== parser.inside ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tt: CLOSING_TAG,\n\t\t\te: tag\n\t\t};\n\t}\n\n\t// We have an illegal closing tag, report it\n\tparser.pos -= 2;\n\tparser.error( 'Illegal closing tag' );\n}\n","import { COMMENT, ELEMENT } from 'config/types';\nimport { isArray } from 'utils/is';\nimport stripStandalones from './stripStandalones';\nimport trimWhitespace from './trimWhitespace';\n\nlet contiguousWhitespace = /[ \\t\\f\\r\\n]+/g;\nlet preserveWhitespaceElements = /^(?:pre|script|style|textarea)$/i;\nlet leadingWhitespace = /^[ \\t\\f\\r\\n]+/;\nlet trailingWhitespace = /[ \\t\\f\\r\\n]+$/;\nlet leadingNewLine = /^(?:\\r\\n|\\r|\\n)/;\nlet trailingNewLine = /(?:\\r\\n|\\r|\\n)$/;\n\nexport default function cleanup ( items, stripComments, preserveWhitespace, removeLeadingWhitespace, removeTrailingWhitespace ) {\n\tvar i,\n\t\titem,\n\t\tpreviousItem,\n\t\tnextItem,\n\t\tpreserveWhitespaceInsideFragment,\n\t\tremoveLeadingWhitespaceInsideFragment,\n\t\tremoveTrailingWhitespaceInsideFragment,\n\t\tkey;\n\n\t// First pass - remove standalones and comments etc\n\tstripStandalones( items );\n\n\ti = items.length;\n\twhile ( i-- ) {\n\t\titem = items[i];\n\n\t\t// Remove delimiter changes, unsafe elements etc\n\t\tif ( item.exclude ) {\n\t\t\titems.splice( i, 1 );\n\t\t}\n\n\t\t// Remove comments, unless we want to keep them\n\t\telse if ( stripComments && item.t === COMMENT ) {\n\t\t\titems.splice( i, 1 );\n\t\t}\n\t}\n\n\t// If necessary, remove leading and trailing whitespace\n\ttrimWhitespace( items, removeLeadingWhitespace ? leadingWhitespace : null, removeTrailingWhitespace ? trailingWhitespace : null );\n\n\ti = items.length;\n\twhile ( i-- ) {\n\t\titem = items[i];\n\n\t\t// Recurse\n\t\tif ( item.f ) {\n\t\t\tlet isPreserveWhitespaceElement = item.t === ELEMENT && preserveWhitespaceElements.test( item.e );\n\t\t\tpreserveWhitespaceInsideFragment = preserveWhitespace || isPreserveWhitespaceElement;\n\n\t\t\tif ( !preserveWhitespace && isPreserveWhitespaceElement ) {\n\t\t\t\ttrimWhitespace( item.f, leadingNewLine, trailingNewLine );\n\t\t\t}\n\n\t\t\tif ( !preserveWhitespaceInsideFragment ) {\n\t\t\t\tpreviousItem = items[ i - 1 ];\n\t\t\t\tnextItem = items[ i + 1 ];\n\n\t\t\t\t// if the previous item was a text item with trailing whitespace,\n\t\t\t\t// remove leading whitespace inside the fragment\n\t\t\t\tif ( !previousItem || ( typeof previousItem === 'string' && trailingWhitespace.test( previousItem ) ) ) {\n\t\t\t\t\tremoveLeadingWhitespaceInsideFragment = true;\n\t\t\t\t}\n\n\t\t\t\t// and vice versa\n\t\t\t\tif ( !nextItem || ( typeof nextItem === 'string' && leadingWhitespace.test( nextItem ) ) ) {\n\t\t\t\t\tremoveTrailingWhitespaceInsideFragment = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcleanup( item.f, stripComments, preserveWhitespaceInsideFragment, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t}\n\n\t\t// Split if-else blocks into two (an if, and an unless)\n\t\tif ( item.l ) {\n\t\t\tcleanup( item.l.f, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\n\t\t\titems.splice( i + 1, 0, item.l );\n\t\t\tdelete item.l; // TODO would be nice if there was a way around this\n\t\t}\n\n\t\t// Clean up element attributes\n\t\tif ( item.a ) {\n\t\t\tfor ( key in item.a ) {\n\t\t\t\tif ( item.a.hasOwnProperty( key ) && typeof item.a[ key ] !== 'string' ) {\n\t\t\t\t\tcleanup( item.a[ key ], stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Clean up conditional attributes\n\t\tif ( item.m ) {\n\t\t\tcleanup( item.m, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t}\n\n\t\t// Clean up event handlers\n\t\tif ( item.v ) {\n\t\t\tfor ( key in item.v ) {\n\t\t\t\tif ( item.v.hasOwnProperty( key ) ) {\n\t\t\t\t\t// clean up names\n\t\t\t\t\tif ( isArray( item.v[ key ].n ) ) {\n\t\t\t\t\t\tcleanup( item.v[ key ].n, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t\t\t\t}\n\n\t\t\t\t\t// clean up params\n\t\t\t\t\tif ( isArray( item.v[ key ].d ) ) {\n\t\t\t\t\t\tcleanup( item.v[ key ].d, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// final pass - fuse text nodes together\n\ti = items.length;\n\twhile ( i-- ) {\n\t\tif ( typeof items[i] === 'string' ) {\n\t\t\tif ( typeof items[i+1] === 'string' ) {\n\t\t\t\titems[i] = items[i] + items[i+1];\n\t\t\t\titems.splice( i + 1, 1 );\n\t\t\t}\n\n\t\t\tif ( !preserveWhitespace ) {\n\t\t\t\titems[i] = items[i].replace( contiguousWhitespace, ' ' );\n\t\t\t}\n\n\t\t\tif ( items[i] === '' ) {\n\t\t\t\titems.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t}\n}\n","import { lastItem } from 'utils/array';\n\nexport default function ( items, leadingPattern, trailingPattern ) {\n\tvar item;\n\n\tif ( leadingPattern ) {\n\t\titem = items[0];\n\t\tif ( typeof item === 'string' ) {\n\t\t\titem = item.replace( leadingPattern, '' );\n\n\t\t\tif ( !item ) {\n\t\t\t\titems.shift();\n\t\t\t} else {\n\t\t\t\titems[0] = item;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( trailingPattern ) {\n\t\titem = lastItem( items );\n\t\tif ( typeof item === 'string' ) {\n\t\t\titem = item.replace( trailingPattern, '' );\n\n\t\t\tif ( !item ) {\n\t\t\t\titems.pop();\n\t\t\t} else {\n\t\t\t\titems[ items.length - 1 ] = item;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { COMMENT, DELIMCHANGE, SECTION, INVERTED } from 'config/types';\nimport { lastItem } from 'utils/array';\n\nvar leadingLinebreak = /^\\s*\\r?\\n/,\n\ttrailingLinebreak = /\\r?\\n\\s*$/;\n\nexport default function ( items ) {\n\tvar i, current, backOne, backTwo, lastSectionItem;\n\n\tfor ( i=1; i<items.length; i+=1 ) {\n\t\tcurrent = items[i];\n\t\tbackOne = items[i-1];\n\t\tbackTwo = items[i-2];\n\n\t\t// if we're at the end of a [text][comment][text] sequence...\n\t\tif ( isString( current ) && isComment( backOne ) && isString( backTwo ) ) {\n\n\t\t\t// ... and the comment is a standalone (i.e. line breaks either side)...\n\t\t\tif ( trailingLinebreak.test( backTwo ) && leadingLinebreak.test( current ) ) {\n\n\t\t\t\t// ... then we want to remove the whitespace after the first line break\n\t\t\t\titems[i-2] = backTwo.replace( trailingLinebreak, '\\n' );\n\n\t\t\t\t// and the leading line break of the second text token\n\t\t\t\titems[i] = current.replace( leadingLinebreak, '' );\n\t\t\t}\n\t\t}\n\n\t\t// if the current item is a section, and it is preceded by a linebreak, and\n\t\t// its first item is a linebreak...\n\t\tif ( isSection( current ) && isString( backOne ) ) {\n\t\t\tif ( trailingLinebreak.test( backOne ) && isString( current.f[0] ) && leadingLinebreak.test( current.f[0] ) ) {\n\t\t\t\titems[i-1] = backOne.replace( trailingLinebreak, '\\n' );\n\t\t\t\tcurrent.f[0] = current.f[0].replace( leadingLinebreak, '' );\n\t\t\t}\n\t\t}\n\n\t\t// if the last item was a section, and it is followed by a linebreak, and\n\t\t// its last item is a linebreak...\n\t\tif ( isString( current ) && isSection( backOne ) ) {\n\t\t\tlastSectionItem = lastItem( backOne.f );\n\n\t\t\tif ( isString( lastSectionItem ) && trailingLinebreak.test( lastSectionItem ) && leadingLinebreak.test( current ) ) {\n\t\t\t\tbackOne.f[ backOne.f.length - 1 ] = lastSectionItem.replace( trailingLinebreak, '\\n' );\n\t\t\t\titems[i] = current.replace( leadingLinebreak, '' );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn items;\n}\n\nfunction isString ( item ) {\n\treturn typeof item === 'string';\n}\n\nfunction isComment ( item ) {\n\treturn item.t === COMMENT || item.t === DELIMCHANGE;\n}\n\nfunction isSection ( item ) {\n\treturn ( item.t === SECTION || item.t === INVERTED ) && item.f;\n}\n","import 'legacy';\n\n// https://github.com/kangax/html-minifier/issues/63#issuecomment-37763316\nexport const booleanAttributes = /^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;\nexport const voidElementNames = /^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;\n\nconst htmlEntities = { quot: 34, amp: 38, apos: 39, lt: 60, gt: 62, nbsp: 160, iexcl: 161, cent: 162, pound: 163, curren: 164, yen: 165, brvbar: 166, sect: 167, uml: 168, copy: 169, ordf: 170, laquo: 171, not: 172, shy: 173, reg: 174, macr: 175, deg: 176, plusmn: 177, sup2: 178, sup3: 179, acute: 180, micro: 181, para: 182, middot: 183, cedil: 184, sup1: 185, ordm: 186, raquo: 187, frac14: 188, frac12: 189, frac34: 190, iquest: 191, Agrave: 192, Aacute: 193, Acirc: 194, Atilde: 195, Auml: 196, Aring: 197, AElig: 198, Ccedil: 199, Egrave: 200, Eacute: 201, Ecirc: 202, Euml: 203, Igrave: 204, Iacute: 205, Icirc: 206, Iuml: 207, ETH: 208, Ntilde: 209, Ograve: 210, Oacute: 211, Ocirc: 212, Otilde: 213, Ouml: 214, times: 215, Oslash: 216, Ugrave: 217, Uacute: 218, Ucirc: 219, Uuml: 220, Yacute: 221, THORN: 222, szlig: 223, agrave: 224, aacute: 225, acirc: 226, atilde: 227, auml: 228, aring: 229, aelig: 230, ccedil: 231, egrave: 232, eacute: 233, ecirc: 234, euml: 235, igrave: 236, iacute: 237, icirc: 238, iuml: 239, eth: 240, ntilde: 241, ograve: 242, oacute: 243, ocirc: 244, otilde: 245, ouml: 246, divide: 247, oslash: 248, ugrave: 249, uacute: 250, ucirc: 251, uuml: 252, yacute: 253, thorn: 254, yuml: 255, OElig: 338, oelig: 339, Scaron: 352, scaron: 353, Yuml: 376, fnof: 402, circ: 710, tilde: 732, Alpha: 913, Beta: 914, Gamma: 915, Delta: 916, Epsilon: 917, Zeta: 918, Eta: 919, Theta: 920, Iota: 921, Kappa: 922, Lambda: 923, Mu: 924, Nu: 925, Xi: 926, Omicron: 927, Pi: 928, Rho: 929, Sigma: 931, Tau: 932, Upsilon: 933, Phi: 934, Chi: 935, Psi: 936, Omega: 937, alpha: 945, beta: 946, gamma: 947, delta: 948, epsilon: 949, zeta: 950, eta: 951, theta: 952, iota: 953, kappa: 954, lambda: 955, mu: 956, nu: 957, xi: 958, omicron: 959, pi: 960, rho: 961, sigmaf: 962, sigma: 963, tau: 964, upsilon: 965, phi: 966, chi: 967, psi: 968, omega: 969, thetasym: 977, upsih: 978, piv: 982, ensp: 8194, emsp: 8195, thinsp: 8201, zwnj: 8204, zwj: 8205, lrm: 8206, rlm: 8207, ndash: 8211, mdash: 8212, lsquo: 8216, rsquo: 8217, sbquo: 8218, ldquo: 8220, rdquo: 8221, bdquo: 8222, dagger: 8224, Dagger: 8225, bull: 8226, hellip: 8230, permil: 8240, prime: 8242, Prime: 8243, lsaquo: 8249, rsaquo: 8250, oline: 8254, frasl: 8260, euro: 8364, image: 8465, weierp: 8472, real: 8476, trade: 8482, alefsym: 8501, larr: 8592, uarr: 8593, rarr: 8594, darr: 8595, harr: 8596, crarr: 8629, lArr: 8656, uArr: 8657, rArr: 8658, dArr: 8659, hArr: 8660, forall: 8704, part: 8706, exist: 8707, empty: 8709, nabla: 8711, isin: 8712, notin: 8713, ni: 8715, prod: 8719, sum: 8721, minus: 8722, lowast: 8727, radic: 8730, prop: 8733, infin: 8734, ang: 8736, and: 8743, or: 8744, cap: 8745, cup: 8746, 'int': 8747, there4: 8756, sim: 8764, cong: 8773, asymp: 8776, ne: 8800, equiv: 8801, le: 8804, ge: 8805, sub: 8834, sup: 8835, nsub: 8836, sube: 8838, supe: 8839, oplus: 8853, otimes: 8855, perp: 8869, sdot: 8901, lceil: 8968, rceil: 8969, lfloor: 8970, rfloor: 8971, lang: 9001, rang: 9002, loz: 9674, spades: 9824, clubs: 9827, hearts: 9829, diams: 9830\t};\nconst controlCharacters = [ 8364, 129, 8218, 402, 8222, 8230, 8224, 8225, 710, 8240, 352, 8249, 338, 141, 381, 143, 144, 8216, 8217, 8220, 8221, 8226, 8211, 8212, 732, 8482, 353, 8250, 339, 157, 382, 376 ];\nconst entityPattern = new RegExp( '&(#?(?:x[\\\\w\\\\d]+|\\\\d+|' + Object.keys( htmlEntities ).join( '|' ) + '));?', 'g' );\n\nexport function decodeCharacterReferences ( html ) {\n\treturn html.replace( entityPattern, function ( match, entity ) {\n\t\tvar code;\n\n\t\t// Handle named entities\n\t\tif ( entity[0] !== '#' ) {\n\t\t\tcode = htmlEntities[ entity ];\n\t\t} else if ( entity[1] === 'x' ) {\n\t\t\tcode = parseInt( entity.substring( 2 ), 16 );\n\t\t} else {\n\t\t\tcode = parseInt( entity.substring( 1 ), 10 );\n\t\t}\n\n\t\tif ( !code ) {\n\t\t\treturn match;\n\t\t}\n\n\t\treturn String.fromCharCode( validateCode( code ) );\n\t});\n}\n\nconst lessThan = /</g;\nconst greaterThan = />/g;\nconst amp = /&/g;\n\nexport function escapeHtml ( str ) {\n\treturn str\n\t\t.replace( amp, '&amp;' )\n\t\t.replace( lessThan, '&lt;' )\n\t\t.replace( greaterThan, '&gt;' );\n}\n\n// some code points are verboten. If we were inserting HTML, the browser would replace the illegal\n// code points with alternatives in some cases - since we're bypassing that mechanism, we need\n// to replace them ourselves\n//\n// Source: http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Illegal_characters\nfunction validateCode ( code ) {\n\tif ( !code ) {\n\t\treturn 65533;\n\t}\n\n\t// line feed becomes generic whitespace\n\tif ( code === 10 ) {\n\t\treturn 32;\n\t}\n\n\t// ASCII range. (Why someone would use HTML entities for ASCII characters I don't know, but...)\n\tif ( code < 128 ) {\n\t\treturn code;\n\t}\n\n\t// code points 128-159 are dealt with leniently by browsers, but they're incorrect. We need\n\t// to correct the mistake or we'll end up with missing € signs and so on\n\tif ( code <= 159 ) {\n\t\treturn controlCharacters[ code - 128 ];\n\t}\n\n\t// basic multilingual plane\n\tif ( code < 55296 ) {\n\t\treturn code;\n\t}\n\n\t// UTF-16 surrogate halves\n\tif ( code <= 57343 ) {\n\t\treturn 65533;\n\t}\n\n\t// rest of the basic multilingual plane\n\tif ( code <= 65535 ) {\n\t\treturn code;\n\t}\n\n\treturn 65533;\n}\n","import { COMMENT } from 'config/types';\n\nvar OPEN_COMMENT = '<!--',\n\tCLOSE_COMMENT = '-->';\n\nexport default function readHtmlComment ( parser ) {\n\tvar start, content, remaining, endIndex, comment;\n\n\tstart = parser.pos;\n\n\tif ( !parser.matchString( OPEN_COMMENT ) ) {\n\t\treturn null;\n\t}\n\n\tremaining = parser.remaining();\n\tendIndex = remaining.indexOf( CLOSE_COMMENT );\n\n\tif ( endIndex === -1 ) {\n\t\tparser.error( 'Illegal HTML - expected closing comment sequence (\\'-->\\')' );\n\t}\n\n\tcontent = remaining.substr( 0, endIndex );\n\tparser.pos += endIndex + 3;\n\n\tcomment = {\n\t\tt: COMMENT,\n\t\tc: content\n\t};\n\n\tif ( parser.includeLinePositions ) {\n\t\tcomment.p = parser.getLinePos( start );\n\t}\n\n\treturn comment;\n}\n","import { SECTION, SECTION_IF, SECTION_UNLESS, SECTION_WITH, SECTION_IF_WITH, PREFIX_OPERATOR, INFIX_OPERATOR, BRACKETED } from 'config/types';\nimport { READERS } from '../../_parse';\nimport readClosing from './section/readClosing';\nimport readElse from './section/readElse';\nimport readElseIf from './section/readElseIf';\nimport handlebarsBlockCodes from './handlebarsBlockCodes';\nimport readExpression from 'parse/converters/readExpression';\nimport flattenExpression from 'parse/utils/flattenExpression';\nimport refineExpression from 'parse/utils/refineExpression';\n\nvar indexRefPattern = /^\\s*:\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,\n\tkeyIndexRefPattern = /^\\s*,\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,\n\thandlebarsBlockPattern = new RegExp( '^(' + Object.keys( handlebarsBlockCodes ).join( '|' ) + ')\\\\b' );\n\nexport default function readSection ( parser, tag ) {\n\tvar start, expression, section, child, children, hasElse, block, unlessBlock, conditions, closed, i, expectedClose;\n\n\tstart = parser.pos;\n\n\tif ( parser.matchString( '^' ) ) {\n\t\tsection = { t: SECTION, f: [], n: SECTION_UNLESS };\n\t} else if ( parser.matchString( '#' ) ) {\n\t\tsection = { t: SECTION, f: [] };\n\n\t\tif ( parser.matchString( 'partial' ) ) {\n\t\t\tparser.pos = start - parser.standardDelimiters[0].length;\n\t\t\tparser.error( 'Partial definitions can only be at the top level of the template, or immediately inside components' );\n\t\t}\n\n\t\tif ( block = parser.matchPattern( handlebarsBlockPattern ) ) {\n\t\t\texpectedClose = block;\n\t\t\tsection.n = handlebarsBlockCodes[ block ];\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\texpression = readExpression( parser );\n\n\tif ( !expression ) {\n\t\tparser.error( 'Expected expression' );\n\t}\n\n\t// optional index and key references\n\tif ( i = parser.matchPattern( indexRefPattern ) ) {\n\t\tlet extra;\n\n\t\tif ( extra = parser.matchPattern( keyIndexRefPattern ) ) {\n\t\t\tsection.i = i + ',' + extra;\n\t\t} else {\n\t\t\tsection.i = i;\n\t\t}\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t}\n\n\tparser.sectionDepth += 1;\n\tchildren = section.f;\n\n\tconditions = [];\n\n\tdo {\n\t\tif ( child = readClosing( parser, tag ) ) {\n\t\t\tif ( expectedClose && child.r !== expectedClose ) {\n\t\t\t\tparser.error( `Expected ${tag.open}/${expectedClose}${tag.close}` );\n\t\t\t}\n\n\t\t\tparser.sectionDepth -= 1;\n\t\t\tclosed = true;\n\t\t}\n\n\t\telse if ( child = readElseIf( parser, tag ) ) {\n\t\t\tif ( section.n === SECTION_UNLESS ) {\n\t\t\t\tparser.error( '{{else}} not allowed in {{#unless}}' );\n\t\t\t}\n\n\t\t\tif ( hasElse ) {\n\t\t\t\tparser.error( 'illegal {{elseif...}} after {{else}}' );\n\t\t\t}\n\n\t\t\tif ( !unlessBlock ) {\n\t\t\t\tunlessBlock = createUnlessBlock( expression, section.n );\n\t\t\t}\n\n\t\t\tunlessBlock.f.push({\n\t\t\t\tt: SECTION,\n\t\t\t\tn: SECTION_IF,\n\t\t\t\tx: flattenExpression( combine( conditions.concat( child.x ) ) ),\n\t\t\t\tf: children = []\n\t\t\t});\n\n\t\t\tconditions.push( invert( child.x ) );\n\t\t}\n\n\t\telse if ( child = readElse( parser, tag ) ) {\n\t\t\tif ( section.n === SECTION_UNLESS ) {\n\t\t\t\tparser.error( '{{else}} not allowed in {{#unless}}' );\n\t\t\t}\n\n\t\t\tif ( hasElse ) {\n\t\t\t\tparser.error( 'there can only be one {{else}} block, at the end of a section' );\n\t\t\t}\n\n\t\t\thasElse = true;\n\n\t\t\t// use an unless block if there's no elseif\n\t\t\tif ( !unlessBlock ) {\n\t\t\t\tunlessBlock = createUnlessBlock( expression, section.n );\n\t\t\t\tchildren = unlessBlock.f;\n\t\t\t} else {\n\t\t\t\tunlessBlock.f.push({\n\t\t\t\t\tt: SECTION,\n\t\t\t\t\tn: SECTION_IF,\n\t\t\t\t\tx: flattenExpression( combine( conditions ) ),\n\t\t\t\t\tf: children = []\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tchild = parser.read( READERS );\n\n\t\t\tif ( !child ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tchildren.push( child );\n\t\t}\n\t} while ( !closed );\n\n\tif ( unlessBlock ) {\n\t\t// special case - `with` should become `if-with` (TODO is this right?\n\t\t// seems to me that `with` ought to behave consistently, regardless\n\t\t// of the presence/absence of `else`. In other words should always\n\t\t// be `if-with`\n\t\tif ( section.n === SECTION_WITH ) {\n\t\t\tsection.n = SECTION_IF_WITH;\n\t\t}\n\n\t\tsection.l = unlessBlock;\n\t}\n\n\trefineExpression( expression, section );\n\n\t// TODO if a section is empty it should be discarded. Don't do\n\t// that here though - we need to clean everything up first, as\n\t// it may contain removeable whitespace. As a temporary measure,\n\t// to pass the existing tests, remove empty `f` arrays\n\tif ( !section.f.length ) {\n\t\tdelete section.f;\n\t}\n\n\treturn section;\n}\n\nfunction createUnlessBlock ( expression, sectionType ) {\n\tlet unlessBlock = {\n\t\tt: SECTION,\n\t\tn: SECTION_UNLESS,\n\t\tf: []\n\t};\n\n\trefineExpression( expression, unlessBlock );\n\n\treturn unlessBlock;\n}\n\nfunction invert ( expression ) {\n\tif ( expression.t === PREFIX_OPERATOR && expression.s === '!' ) {\n\t\treturn expression.o;\n\t}\n\n\treturn {\n\t\tt: PREFIX_OPERATOR,\n\t\ts: '!',\n\t\to: parensIfNecessary( expression )\n\t};\n}\n\nfunction combine ( expressions ) {\n\tif ( expressions.length === 1 ) {\n\t\treturn expressions[0];\n\t}\n\n\treturn {\n\t\tt: INFIX_OPERATOR,\n\t\ts: '&&',\n\t\to: [\n\t\t\tparensIfNecessary( expressions[0] ),\n\t\t\tparensIfNecessary( combine( expressions.slice( 1 ) ) )\n\t\t]\n\t};\n}\n\nfunction parensIfNecessary ( expression ) {\n\t// TODO only wrap if necessary\n\treturn {\n\t\tt: BRACKETED,\n\t\tx: expression\n\t};\n}\n","import { SECTION_EACH, SECTION_IF, SECTION_IF_WITH, SECTION_WITH, SECTION_UNLESS } from 'config/types';\n\nexport default {\n\t'each':    SECTION_EACH,\n\t'if':      SECTION_IF,\n\t'if-with': SECTION_IF_WITH,\n\t'with':    SECTION_WITH,\n\t'unless':  SECTION_UNLESS\n};\n","import { ELSEIF } from 'config/types';\nimport readExpression from 'parse/converters/readExpression';\n\nvar elsePattern = /^\\s*elseif\\s+/;\n\nexport default function readElseIf ( parser, tag ) {\n\tconst start = parser.pos;\n\n\tif ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchPattern( elsePattern ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tconst expression = readExpression( parser );\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t}\n\n\treturn {\n\t\tt: ELSEIF,\n\t\tx: expression\n\t};\n}\n","import { ELSE } from 'config/types';\n\nvar elsePattern = /^\\s*else\\s*/;\n\nexport default function readElse ( parser, tag ) {\n\tvar start = parser.pos;\n\n\tif ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchPattern( elsePattern ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t}\n\n\treturn {\n\t\tt: ELSE\n\t};\n}","import { CLOSING } from 'config/types';\n\nexport default function readClosing ( parser, tag ) {\n\tvar start, remaining, index, closing;\n\n\tstart = parser.pos;\n\n\tif ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '/' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tremaining = parser.remaining();\n\tindex = remaining.indexOf( tag.close );\n\n\tif ( index !== -1 ) {\n\t\tclosing = {\n\t\t\tt: CLOSING,\n\t\t\tr: remaining.substr( 0, index ).split( ' ' )[0]\n\t\t};\n\n\t\tparser.pos += index;\n\n\t\tif ( !parser.matchString( tag.close ) ) {\n\t\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t\t}\n\n\t\treturn closing;\n\t}\n\n\tparser.pos = start;\n\treturn null;\n}\n","import { YIELDER } from 'config/types';\n\nvar yieldPattern = /^yield\\s*/;\n\nexport default function readYielder ( parser, tag ) {\n\tvar start, name, yielder;\n\n\tif ( !parser.matchPattern( yieldPattern ) ) {\n\t\treturn null;\n\t}\n\n\tstart = parser.pos;\n\tname = parser.matchPattern( /^[a-zA-Z_$][a-zA-Z_$0-9\\-]*/ );\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `expected legal partial name` );\n\t}\n\n\tyielder = { t: YIELDER };\n\n\tif ( name ) {\n\t\tyielder.n = name;\n\t}\n\n\treturn yielder;\n}","import { INTERPOLATOR } from 'config/types';\nimport readExpressionOrReference from 'parse/converters/readExpressionOrReference';\nimport refineExpression from 'parse/utils/refineExpression';\n\nexport default function readInterpolator ( parser, tag ) {\n\tvar start, expression, interpolator, err;\n\n\tstart = parser.pos;\n\n\t// TODO would be good for perf if we could do away with the try-catch\n\ttry {\n\t\texpression = readExpressionOrReference( parser, [ tag.close ]);\n\t} catch ( e ) {\n\t\terr = e;\n\t}\n\n\tif ( !expression ) {\n\t\tif ( parser.str.charAt( start ) === '!' ) {\n\t\t\t// special case - comment\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( err ) {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}' after reference` );\n\n\t\tif ( !expression ) {\n\t\t\t// special case - comment\n\t\t\tif ( parser.nextChar() === '!' ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tparser.error( `Expected expression or legal reference` );\n\t\t}\n\t}\n\n\tinterpolator = { t: INTERPOLATOR };\n\trefineExpression( expression, interpolator ); // TODO handle this differently - it's mysterious\n\n\treturn interpolator;\n}\n","import readExpression from './readExpression';\nimport readReference from './expressions/primary/readReference';\n\nexport default function readExpressionOrReference ( parser, expectedFollowers ) {\n\tvar start, expression, i;\n\n\tstart = parser.pos;\n\texpression = readExpression( parser );\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tfor ( i = 0; i < expectedFollowers.length; i += 1 ) {\n\t\tif ( parser.remaining().substr( 0, expectedFollowers[i].length ) === expectedFollowers[i] ) {\n\t\t\treturn expression;\n\t\t}\n\t}\n\n\tparser.pos = start;\n\treturn readReference( parser );\n}","import { COMMENT } from 'config/types';\n\nexport default function readComment ( parser, tag ) {\n\tvar index;\n\n\tif ( !parser.matchString( '!' ) ) {\n\t\treturn null;\n\t}\n\n\tindex = parser.remaining().indexOf( tag.close );\n\n\tif ( index !== -1 ) {\n\t\tparser.pos += index + tag.close.length;\n\t\treturn { t: COMMENT };\n\t}\n}\n","import { PARTIAL, SECTION, SECTION_WITH } from 'config/types';\nimport readExpression from 'parse/converters/readExpression';\nimport refineExpression from 'parse/utils/refineExpression';\n\nexport default function readPartial ( parser, tag ) {\n\tvar start, nameStart, expression, context, partial;\n\n\tstart = parser.pos;\n\n\tif ( !parser.matchString( '>' ) ) {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\tnameStart = parser.pos;\n\n\t// Partial names can include hyphens, so we can't use readExpression\n\t// blindly. Instead, we use the `relaxedNames` flag to indicate that\n\t// `foo-bar` should be read as a single name, rather than 'subtract\n\t// bar from foo'\n\tparser.relaxedNames = true;\n\texpression = readExpression( parser );\n\tparser.relaxedNames = false;\n\n\tparser.allowWhitespace();\n\tcontext = readExpression( parser );\n\tparser.allowWhitespace();\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tpartial = { t: PARTIAL };\n\trefineExpression( expression, partial ); // TODO...\n\n\tparser.allowWhitespace();\n\n\t// if we have another expression - e.g. `{{>foo bar}}` - then\n\t// we turn it into `{{#with bar}}{{>foo}}{{/with}}`\n\tif ( context ) {\n\t\tpartial = {\n\t\t\tt: SECTION,\n\t\t\tn: SECTION_WITH,\n\t\t\tf: [ partial ]\n\t\t};\n\n\t\trefineExpression( context, partial );\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t}\n\n\treturn partial;\n}","import { TRIPLE } from 'config/types';\nimport readExpression from 'parse/converters/readExpression';\nimport refineExpression from 'parse/utils/refineExpression';\n\nexport default function readUnescaped ( parser, tag ) {\n\tvar expression, triple;\n\n\tif ( !parser.matchString( '&' ) ) {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\texpression = readExpression( parser );\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t}\n\n\ttriple = { t: TRIPLE };\n\trefineExpression( expression, triple ); // TODO handle this differently - it's mysterious\n\n\treturn triple;\n}","import { TRIPLE } from 'config/types';\nimport readExpression from 'parse/converters/readExpression';\nimport refineExpression from 'parse/utils/refineExpression';\n\nexport default function readTriple ( parser, tag ) {\n\tvar expression = readExpression( parser ), triple;\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( `Expected closing delimiter '${tag.close}'` );\n\t}\n\n\ttriple = { t: TRIPLE };\n\trefineExpression( expression, triple ); // TODO handle this differently - it's mysterious\n\n\treturn triple;\n}","import { REFERENCE, BRACKETED, NUMBER_LITERAL, MEMBER, REFINEMENT } from 'config/types';\nimport flattenExpression from './flattenExpression';\n\nvar arrayMemberPattern = /^[0-9][1-9]*$/;\n\nexport default function refineExpression ( expression, mustache ) {\n\tvar referenceExpression;\n\n\tif ( expression ) {\n\t\twhile ( expression.t === BRACKETED && expression.x ) {\n\t\t\texpression = expression.x;\n\t\t}\n\n\t\t// special case - integers should be treated as array members references,\n\t\t// rather than as expressions in their own right\n\t\tif ( expression.t === REFERENCE ) {\n\t\t\tmustache.r = expression.n;\n\t\t} else {\n\t\t\tif ( expression.t === NUMBER_LITERAL && arrayMemberPattern.test( expression.v ) ) {\n\t\t\t\tmustache.r = expression.v;\n\t\t\t} else if ( referenceExpression = getReferenceExpression( expression ) ) {\n\t\t\t\tmustache.rx = referenceExpression;\n\t\t\t} else {\n\t\t\t\tmustache.x = flattenExpression( expression );\n\t\t\t}\n\t\t}\n\n\t\treturn mustache;\n\t}\n}\n\n// TODO refactor this! it's bewildering\nfunction getReferenceExpression ( expression ) {\n\tvar members = [], refinement;\n\n\twhile ( expression.t === MEMBER && expression.r.t === REFINEMENT ) {\n\t\trefinement = expression.r;\n\n\t\tif ( refinement.x ) {\n\t\t\tif ( refinement.x.t === REFERENCE ) {\n\t\t\t\tmembers.unshift( refinement.x );\n\t\t\t} else {\n\t\t\t\tmembers.unshift( flattenExpression( refinement.x ) );\n\t\t\t}\n\t\t} else {\n\t\t\tmembers.unshift( refinement.n );\n\t\t}\n\n\t\texpression = expression.x;\n\t}\n\n\tif ( expression.t !== REFERENCE ) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tr: expression.n,\n\t\tm: members\n\t};\n}","import { REFERENCE, BOOLEAN_LITERAL, GLOBAL, NUMBER_LITERAL, REGEXP_LITERAL, STRING_LITERAL, ARRAY_LITERAL, OBJECT_LITERAL, KEY_VALUE_PAIR, PREFIX_OPERATOR, INFIX_OPERATOR, INVOCATION, BRACKETED, MEMBER, REFINEMENT, CONDITIONAL } from 'config/types';\nimport { isObject } from 'utils/is';\n\nexport default function flattenExpression ( expression ) {\n\tvar refs;\n\n\textractRefs( expression, refs = [] );\n\n\treturn {\n\t\tr: refs,\n\t\ts: stringify( expression )\n\t};\n\n\tfunction stringify ( node ) {\n\t\tswitch ( node.t ) {\n\t\t\tcase BOOLEAN_LITERAL:\n\t\t\tcase GLOBAL:\n\t\t\tcase NUMBER_LITERAL:\n\t\t\tcase REGEXP_LITERAL:\n\t\t\treturn node.v;\n\n\t\t\tcase STRING_LITERAL:\n\t\t\treturn JSON.stringify( String( node.v ) );\n\n\t\t\tcase ARRAY_LITERAL:\n\t\t\treturn '[' + ( node.m ? node.m.map( stringify ).join( ',' ) : '' ) + ']';\n\n\t\t\tcase OBJECT_LITERAL:\n\t\t\treturn '{' + ( node.m ? node.m.map( stringify ).join( ',' ) : '' ) + '}';\n\n\t\t\tcase KEY_VALUE_PAIR:\n\t\t\treturn node.k + ':' + stringify( node.v );\n\n\t\t\tcase PREFIX_OPERATOR:\n\t\t\treturn ( node.s === 'typeof' ? 'typeof ' : node.s ) + stringify( node.o );\n\n\t\t\tcase INFIX_OPERATOR:\n\t\t\treturn stringify( node.o[0] ) + ( node.s.substr( 0, 2 ) === 'in' ? ' ' + node.s + ' ' : node.s ) + stringify( node.o[1] );\n\n\t\t\tcase INVOCATION:\n\t\t\treturn stringify( node.x ) + '(' + ( node.o ? node.o.map( stringify ).join( ',' ) : '' ) + ')';\n\n\t\t\tcase BRACKETED:\n\t\t\treturn '(' + stringify( node.x ) + ')';\n\n\t\t\tcase MEMBER:\n\t\t\treturn stringify( node.x ) + stringify( node.r );\n\n\t\t\tcase REFINEMENT:\n\t\t\treturn ( node.n ? '.' + node.n : '[' + stringify( node.x ) + ']' );\n\n\t\t\tcase CONDITIONAL:\n\t\t\treturn stringify( node.o[0] ) + '?' + stringify( node.o[1] ) + ':' + stringify( node.o[2] );\n\n\t\t\tcase REFERENCE:\n\t\t\treturn '_' + refs.indexOf( node.n );\n\n\t\t\tdefault:\n\t\t\tthrow new Error( 'Expected legal JavaScript' );\n\t\t}\n\t}\n}\n\n// TODO maybe refactor this?\nfunction extractRefs ( node, refs ) {\n\tvar i, list;\n\n\tif ( node.t === REFERENCE ) {\n\t\tif ( refs.indexOf( node.n ) === -1 ) {\n\t\t\trefs.unshift( node.n );\n\t\t}\n\t}\n\n\tlist = node.o || node.m;\n\tif ( list ) {\n\t\tif ( isObject( list ) ) {\n\t\t\textractRefs( list, refs );\n\t\t} else {\n\t\t\ti = list.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\textractRefs( list[i], refs );\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( node.x ) {\n\t\textractRefs( node.x, refs );\n\t}\n\n\tif ( node.r ) {\n\t\textractRefs( node.r, refs );\n\t}\n\n\tif ( node.v ) {\n\t\textractRefs( node.v, refs );\n\t}\n}\n\n","import readConditional from './expressions/readConditional';\n\nexport default function readExpression ( parser ) {\n\t// The conditional operator is the lowest precedence operator (except yield,\n\t// assignment operators, and commas, none of which are supported), so we\n\t// start there. If it doesn't match, it 'falls through' to progressively\n\t// higher precedence operators, until it eventually matches (or fails to\n\t// match) a 'primary' - a literal or a reference. This way, the abstract syntax\n\t// tree has everything in its proper place, i.e. 2 + 3 * 4 === 14, not 20.\n\treturn readConditional( parser );\n}","import { CONDITIONAL } from 'config/types';\nimport readLogicalOr from './readLogicalOr';\nimport { expectedExpression } from './shared/errors';\nimport readExpression from 'parse/converters/readExpression';\n\n// The conditional operator is the lowest precedence operator, so we start here\nexport default function getConditional ( parser ) {\n\tvar start, expression, ifTrue, ifFalse;\n\n\texpression = readLogicalOr( parser );\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tstart = parser.pos;\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '?' ) ) {\n\t\tparser.pos = start;\n\t\treturn expression;\n\t}\n\n\tparser.allowWhitespace();\n\n\tifTrue = readExpression( parser );\n\tif ( !ifTrue ) {\n\t\tparser.error( expectedExpression );\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( ':' ) ) {\n\t\tparser.error( 'Expected \":\"' );\n\t}\n\n\tparser.allowWhitespace();\n\n\tifFalse = readExpression( parser );\n\tif ( !ifFalse ) {\n\t\tparser.error( expectedExpression );\n\t}\n\n\treturn {\n\t\tt: CONDITIONAL,\n\t\to: [ expression, ifTrue, ifFalse ]\n\t};\n}\n","import { INFIX_OPERATOR } from 'config/types';\nimport readTypeof from './readTypeof';\n\nvar readLogicalOr, makeInfixSequenceMatcher;\n\nmakeInfixSequenceMatcher = function ( symbol, fallthrough ) {\n\treturn function ( parser ) {\n\t\tvar start, left, right;\n\n\t\tleft = fallthrough( parser );\n\t\tif ( !left ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Loop to handle left-recursion in a case like `a * b * c` and produce\n\t\t// left association, i.e. `(a * b) * c`.  The matcher can't call itself\n\t\t// to parse `left` because that would be infinite regress.\n\t\twhile ( true ) {\n\t\t\tstart = parser.pos;\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( !parser.matchString( symbol ) ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn left;\n\t\t\t}\n\n\t\t\t// special case - in operator must not be followed by [a-zA-Z_$0-9]\n\t\t\tif ( symbol === 'in' && /[a-zA-Z_$0-9]/.test( parser.remaining().charAt( 0 ) ) ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn left;\n\t\t\t}\n\n\t\t   parser.allowWhitespace();\n\n\t\t\t// right operand must also consist of only higher-precedence operators\n\t\t\tright = fallthrough( parser );\n\t\t\tif ( !right ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn left;\n\t\t\t}\n\n\t\t\tleft = {\n\t\t\t\tt: INFIX_OPERATOR,\n\t\t\t\ts: symbol,\n\t\t\t\to: [ left, right ]\n\t\t\t};\n\n\t\t\t// Loop back around.  If we don't see another occurrence of the symbol,\n\t\t\t// we'll return left.\n\t\t}\n\t};\n};\n\n// create all infix sequence matchers, and return readLogicalOr\n(function() {\n\tvar i, len, matcher, infixOperators, fallthrough;\n\n\t// All the infix operators on order of precedence (source: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)\n\t// Each sequence matcher will initially fall through to its higher precedence\n\t// neighbour, and only attempt to match if one of the higher precedence operators\n\t// (or, ultimately, a literal, reference, or bracketed expression) already matched\n\tinfixOperators = '* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||'.split( ' ' );\n\n\t// A typeof operator is higher precedence than multiplication\n\tfallthrough = readTypeof;\n\tfor ( i = 0, len = infixOperators.length; i < len; i += 1 ) {\n\t\tmatcher = makeInfixSequenceMatcher( infixOperators[i], fallthrough );\n\t\tfallthrough = matcher;\n\t}\n\n\t// Logical OR is the fallthrough for the conditional matcher\n\treadLogicalOr = fallthrough;\n}());\n\nexport default readLogicalOr;\n","import { PREFIX_OPERATOR } from 'config/types';\nimport { expectedExpression } from './shared/errors';\nimport readMemberOrInvocation from './readMemberOrInvocation';\nimport readExpression from 'parse/converters/readExpression';\n\nvar readTypeOf, makePrefixSequenceMatcher;\n\nmakePrefixSequenceMatcher = function ( symbol, fallthrough ) {\n\treturn function ( parser ) {\n\t\tvar expression;\n\n\t\tif ( expression = fallthrough( parser ) ) {\n\t\t\treturn expression;\n\t\t}\n\n\t\tif ( !parser.matchString( symbol ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tparser.allowWhitespace();\n\n\t\texpression = readExpression( parser );\n\t\tif ( !expression ) {\n\t\t\tparser.error( expectedExpression );\n\t\t}\n\n\t\treturn {\n\t\t\ts: symbol,\n\t\t\to: expression,\n\t\t\tt: PREFIX_OPERATOR\n\t\t};\n\t};\n};\n\n// create all prefix sequence matchers, return readTypeOf\n(function() {\n\tvar i, len, matcher, prefixOperators, fallthrough;\n\n\tprefixOperators = '! ~ + - typeof'.split( ' ' );\n\n\tfallthrough = readMemberOrInvocation;\n\tfor ( i = 0, len = prefixOperators.length; i < len; i += 1 ) {\n\t\tmatcher = makePrefixSequenceMatcher( prefixOperators[i], fallthrough );\n\t\tfallthrough = matcher;\n\t}\n\n\t// typeof operator is higher precedence than multiplication, so provides the\n\t// fallthrough for the multiplication sequence matcher we're about to create\n\t// (we're skipping void and delete)\n\treadTypeOf = fallthrough;\n}());\n\nexport default readTypeOf;\n","import { MEMBER, INVOCATION } from 'config/types';\nimport readPrimary from './readPrimary';\nimport readExpressionList from './shared/readExpressionList';\nimport readRefinement from './shared/readRefinement';\nimport { expectedParen } from './shared/errors';\n\nexport default function ( parser ) {\n\tvar current, expression, refinement, expressionList;\n\n\texpression = readPrimary( parser );\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\twhile ( expression ) {\n\t\tcurrent = parser.pos;\n\n\t\tif ( refinement = readRefinement( parser ) ) {\n\t\t\texpression = {\n\t\t\t\tt: MEMBER,\n\t\t\t\tx: expression,\n\t\t\t\tr: refinement\n\t\t\t};\n\t\t}\n\n\t\telse if ( parser.matchString( '(' ) ) {\n\t\t\tparser.allowWhitespace();\n\t\t\texpressionList = readExpressionList( parser );\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( !parser.matchString( ')' ) ) {\n\t\t\t\tparser.error( expectedParen );\n\t\t\t}\n\n\t\t\texpression = {\n\t\t\t\tt: INVOCATION,\n\t\t\t\tx: expression\n\t\t\t};\n\n\t\t\tif ( expressionList ) {\n\t\t\t\texpression.o = expressionList;\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn expression;\n}\n","import { REFINEMENT } from 'config/types';\nimport { expectedExpression } from './errors';\nimport { name as namePattern } from './patterns';\nimport readExpression from 'parse/converters/readExpression';\n\nexport default function readRefinement ( parser ) {\n\tvar start, name, expr;\n\n\tstart = parser.pos;\n\n\tparser.allowWhitespace();\n\n\t// \".\" name\n\tif ( parser.matchString( '.' ) ) {\n\t\tparser.allowWhitespace();\n\n\t\tif ( name = parser.matchPattern( namePattern ) ) {\n\t\t\treturn {\n\t\t\t\tt: REFINEMENT,\n\t\t\t\tn: name\n\t\t\t};\n\t\t}\n\n\t\tparser.error( 'Expected a property name' );\n\t}\n\n\t// \"[\" expression \"]\"\n\tif ( parser.matchString( '[' ) ) {\n\t\tparser.allowWhitespace();\n\n\t\texpr = readExpression( parser );\n\t\tif ( !expr ) {\n\t\t\tparser.error( expectedExpression );\n\t\t}\n\n\t\tparser.allowWhitespace();\n\n\t\tif ( !parser.matchString( ']' ) ) {\n\t\t\tparser.error( 'Expected \\']\\'' );\n\t\t}\n\n\t\treturn {\n\t\t\tt: REFINEMENT,\n\t\t\tx: expr\n\t\t};\n\t}\n\n\treturn null;\n}\n","import readLiteral from './primary/readLiteral';\nimport readReference from './primary/readReference';\nimport readBracketedExpression from './primary/readBracketedExpression';\n\nexport default function ( parser ) {\n\treturn readLiteral( parser )\n\t\t|| readReference( parser )\n\t\t|| readBracketedExpression( parser );\n}\n","import { BRACKETED } from 'config/types';\nimport { expectedExpression, expectedParen } from '../shared/errors';\nimport readExpression from 'parse/converters/readExpression';\n\nexport default function readBracketedExpression ( parser ) {\n\tvar start, expr;\n\n\tstart = parser.pos;\n\n\tif ( !parser.matchString( '(' ) ) {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\texpr = readExpression( parser );\n\tif ( !expr ) {\n\t\tparser.error( expectedExpression );\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( ')' ) ) {\n\t\tparser.error( expectedParen );\n\t}\n\n\treturn {\n\t\tt: BRACKETED,\n\t\tx: expr\n\t};\n}\n","import { GLOBAL, REFERENCE } from 'config/types';\nimport { normalise } from 'shared/keypaths';\n\nvar prefixPattern = /^(?:~\\/|(?:\\.\\.\\/)+|\\.\\/(?:\\.\\.\\/)*|\\.)/,\n\tglobals,\n\tkeywords;\n\n// if a reference is a browser global, we don't deference it later, so it needs special treatment\nglobals = /^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\\b/;\n\n// keywords are not valid references, with the exception of `this`\nkeywords = /^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;\n\nvar legalReference = /^[a-zA-Z$_0-9]+(?:(?:\\.[a-zA-Z$_0-9]+)|(?:\\[[0-9]+\\]))*/;\nvar relaxedName = /^[a-zA-Z_$][-\\/a-zA-Z_$0-9]*/;\n\nexport default function readReference ( parser ) {\n\tvar startPos, prefix, name, global, reference, lastDotIndex;\n\n\tstartPos = parser.pos;\n\n\tname = parser.matchPattern( /^@(?:keypath|index|key)/ );\n\n\tif ( !name ) {\n\t\tprefix = parser.matchPattern( prefixPattern ) || '';\n\t\tname = ( !prefix && parser.relaxedNames && parser.matchPattern( relaxedName ) ) ||\n\t\t       parser.matchPattern( legalReference );\n\n\t\tif ( !name && prefix === '.' ) {\n\t\t\tprefix = '';\n\t\t\tname = '.';\n\t\t}\n\t}\n\n\tif ( !name ) {\n\t\treturn null;\n\t}\n\n\t// bug out if it's a keyword (exception for ancestor/restricted refs - see https://github.com/ractivejs/ractive/issues/1497)\n\tif ( !prefix && !parser.relaxedNames && keywords.test( name ) ) {\n\t\tparser.pos = startPos;\n\t\treturn null;\n\t}\n\n\t// if this is a browser global, stop here\n\tif ( !prefix && globals.test( name ) ) {\n\t\tglobal = globals.exec( name )[0];\n\t\tparser.pos = startPos + global.length;\n\n\t\treturn {\n\t\t\tt: GLOBAL,\n\t\t\tv: global\n\t\t};\n\t}\n\n\treference = ( prefix || '' ) + normalise( name );\n\n\tif ( parser.matchString( '(' ) ) {\n\t\t// if this is a method invocation (as opposed to a function) we need\n\t\t// to strip the method name from the reference combo, else the context\n\t\t// will be wrong\n\t\tlastDotIndex = reference.lastIndexOf( '.' );\n\t\tif ( lastDotIndex !== -1 ) {\n\t\t\treference = reference.substr( 0, lastDotIndex );\n\t\t\tparser.pos = startPos + reference.length;\n\t\t} else {\n\t\t\tparser.pos -= 1;\n\t\t}\n\t}\n\n\treturn {\n\t\tt: REFERENCE,\n\t\tn: reference.replace( /^this\\./, './' ).replace( /^this$/, '.' )\n\t};\n}\n","import readNumberLiteral from './literal/readNumberLiteral';\nimport readBooleanLiteral from './literal/readBooleanLiteral';\nimport readStringLiteral from './literal/readStringLiteral';\nimport readObjectLiteral from './literal/readObjectLiteral';\nimport readArrayLiteral from './literal/readArrayLiteral';\nimport readRegexpLiteral from './literal/readRegexpLiteral';\n\nexport default function readLiteral ( parser ) {\n\treturn readNumberLiteral( parser )  ||\n\t       readBooleanLiteral( parser ) ||\n\t       readStringLiteral( parser )  ||\n\t       readObjectLiteral( parser )  ||\n\t       readArrayLiteral( parser )   ||\n\t       readRegexpLiteral( parser );\n}\n","import { ARRAY_LITERAL } from 'config/types';\nimport readExpressionList from '../../shared/readExpressionList';\n\nexport default function ( parser ) {\n\tvar start, expressionList;\n\n\tstart = parser.pos;\n\n\t// allow whitespace before '['\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '[' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\texpressionList = readExpressionList( parser );\n\n\tif ( !parser.matchString( ']' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tt: ARRAY_LITERAL,\n\t\tm: expressionList\n\t};\n}\n","import { expectedExpression } from './errors';\nimport readExpression from 'parse/converters/readExpression';\n\nexport default function readExpressionList ( parser ) {\n\tvar start, expressions, expr, next;\n\n\tstart = parser.pos;\n\n\tparser.allowWhitespace();\n\n\texpr = readExpression( parser );\n\n\tif ( expr === null ) {\n\t\treturn null;\n\t}\n\n\texpressions = [ expr ];\n\n\t// allow whitespace between expression and ','\n\tparser.allowWhitespace();\n\n\tif ( parser.matchString( ',' ) ) {\n\t\tnext = readExpressionList( parser );\n\t\tif ( next === null ) {\n\t\t\tparser.error( expectedExpression );\n\t\t}\n\n\t\tnext.forEach( append );\n\t}\n\n\tfunction append ( expression ) {\n\t\texpressions.push( expression );\n\t}\n\n\treturn expressions;\n}\n","import { OBJECT_LITERAL } from 'config/types';\nimport readKeyValuePairs from './objectLiteral/keyValuePairs';\n\nexport default function ( parser ) {\n\tvar start, keyValuePairs;\n\n\tstart = parser.pos;\n\n\t// allow whitespace\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '{' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tkeyValuePairs = readKeyValuePairs( parser );\n\n\t// allow whitespace between final value and '}'\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '}' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tt: OBJECT_LITERAL,\n\t\tm: keyValuePairs\n\t};\n}\n","import getKeyValuePair from './keyValuePair';\n\nexport default function readKeyValuePairs ( parser ) {\n\tvar start, pairs, pair, keyValuePairs;\n\n\tstart = parser.pos;\n\n\tpair = getKeyValuePair( parser );\n\tif ( pair === null ) {\n\t\treturn null;\n\t}\n\n\tpairs = [ pair ];\n\n\tif ( parser.matchString( ',' ) ) {\n\t\tkeyValuePairs = readKeyValuePairs( parser );\n\n\t\tif ( !keyValuePairs ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn pairs.concat( keyValuePairs );\n\t}\n\n\treturn pairs;\n}\n","import { KEY_VALUE_PAIR } from 'config/types';\nimport readKey from '../../../shared/readKey';\nimport readExpression from 'parse/converters/readExpression';\n\nexport default function readKeyValuePair ( parser ) {\n\tvar start, key, value;\n\n\tstart = parser.pos;\n\n\t// allow whitespace between '{' and key\n\tparser.allowWhitespace();\n\n\tkey = readKey( parser );\n\tif ( key === null ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace between key and ':'\n\tparser.allowWhitespace();\n\n\t// next character must be ':'\n\tif ( !parser.matchString( ':' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace between ':' and value\n\tparser.allowWhitespace();\n\n\t// next expression must be a, well... expression\n\tvalue = readExpression( parser );\n\tif ( value === null ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tt: KEY_VALUE_PAIR,\n\t\tk: key,\n\t\tv: value\n\t};\n}\n","import readStringLiteral from '../primary/literal/readStringLiteral';\nimport readNumberLiteral from '../primary/literal/readNumberLiteral';\nimport { name as namePattern } from './patterns';\n\nvar identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n// http://mathiasbynens.be/notes/javascript-properties\n// can be any name, string literal, or number literal\nexport default function readKey ( parser ) {\n\tvar token;\n\n\tif ( token = readStringLiteral( parser ) ) {\n\t\treturn identifier.test( token.v ) ? token.v : '\"' + token.v.replace( /\"/g, '\\\\\"' ) + '\"';\n\t}\n\n\tif ( token = readNumberLiteral( parser ) ) {\n\t\treturn token.v;\n\t}\n\n\tif ( token = parser.matchPattern( namePattern ) ) {\n\t\treturn token;\n\t}\n}\n","export var name = /^[a-zA-Z_$][a-zA-Z_$0-9]*/;\n","import { STRING_LITERAL } from 'config/types';\nimport makeQuotedStringMatcher from './stringLiteral/makeQuotedStringMatcher';\n\nvar getSingleQuotedString = makeQuotedStringMatcher( '\"' );\nvar getDoubleQuotedString = makeQuotedStringMatcher( \"'\" );\n\nexport default function ( parser ) {\n\tvar start, string;\n\n\tstart = parser.pos;\n\n\tif ( parser.matchString( '\"' ) ) {\n\t\tstring = getDoubleQuotedString( parser );\n\n\t\tif ( !parser.matchString( '\"' ) ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tt: STRING_LITERAL,\n\t\t\tv: string\n\t\t};\n\t}\n\n\tif ( parser.matchString( \"'\" ) ) {\n\t\tstring = getSingleQuotedString( parser );\n\n\t\tif ( !parser.matchString( \"'\" ) ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tt: STRING_LITERAL,\n\t\t\tv: string\n\t\t};\n\t}\n\n\treturn null;\n}\n","var stringMiddlePattern, escapeSequencePattern, lineContinuationPattern;\n\n// Match one or more characters until: \", ', \\, or EOL/EOF.\n// EOL/EOF is written as (?!.) (meaning there's no non-newline char next).\nstringMiddlePattern = /^(?=.)[^\"'\\\\]+?(?:(?!.)|(?=[\"'\\\\]))/;\n\n// Match one escape sequence, including the backslash.\nescapeSequencePattern = /^\\\\(?:['\"\\\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;\n\n// Match one ES5 line continuation (backslash + line terminator).\nlineContinuationPattern = /^\\\\(?:\\r\\n|[\\u000A\\u000D\\u2028\\u2029])/;\n\n// Helper for defining getDoubleQuotedString and getSingleQuotedString.\nexport default function ( okQuote ) {\n\treturn function ( parser ) {\n\t\tvar start, literal, done, next;\n\n\t\tstart = parser.pos;\n\t\tliteral = '\"';\n\t\tdone = false;\n\n\t\twhile ( !done ) {\n\t\t\tnext = ( parser.matchPattern( stringMiddlePattern ) || parser.matchPattern( escapeSequencePattern ) ||\n\t\t\t\tparser.matchString( okQuote ) );\n\t\t\tif ( next ) {\n\t\t\t\tif ( next === '\"' ) {\n\t\t\t\t\tliteral += '\\\\\"';\n\t\t\t\t} else if ( next === \"\\\\'\" ) {\n\t\t\t\t\tliteral += \"'\";\n\t\t\t\t} else {\n\t\t\t\t\tliteral += next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnext = parser.matchPattern( lineContinuationPattern );\n\t\t\t\tif ( next ) {\n\t\t\t\t\t// convert \\(newline-like) into a \\u escape, which is allowed in JSON\n\t\t\t\t\tliteral += '\\\\u' + ( '000' + next.charCodeAt(1).toString(16) ).slice( -4 );\n\t\t\t\t} else {\n\t\t\t\t\tdone = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tliteral += '\"';\n\n\t\t// use JSON.parse to interpret escapes\n\t\treturn JSON.parse( literal );\n\t};\n}","import { BOOLEAN_LITERAL } from 'config/types';\n\nexport default function readBooleanLiteral ( parser ) {\n\tvar remaining = parser.remaining();\n\n\tif ( remaining.substr( 0, 4 ) === 'true' ) {\n\t\tparser.pos += 4;\n\t\treturn {\n\t\t\tt: BOOLEAN_LITERAL,\n\t\t\tv: 'true'\n\t\t};\n\t}\n\n\tif ( remaining.substr( 0, 5 ) === 'false' ) {\n\t\tparser.pos += 5;\n\t\treturn {\n\t\t\tt: BOOLEAN_LITERAL,\n\t\t\tv: 'false'\n\t\t};\n\t}\n\n\treturn null;\n}\n","import { NUMBER_LITERAL } from 'config/types';\n\n// bulletproof number regex from https://gist.github.com/Rich-Harris/7544330\nvar numberPattern = /^(?:[+-]?)0*(?:(?:(?:[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;\n\nexport default function readNumberLiteral ( parser ) {\n\tvar result;\n\n\tif ( result = parser.matchPattern( numberPattern ) ) {\n\t\treturn {\n\t\t\tt: NUMBER_LITERAL,\n\t\t\tv: result\n\t\t};\n\t}\n\n\treturn null;\n}\n","export var expectedExpression = 'Expected a JavaScript expression';\nexport var expectedParen = 'Expected closing paren';\n","import { DELIMCHANGE } from 'config/types';\nimport readDelimiterChange from './mustache/readDelimiterChange';\nimport readRegexpLiteral from './expressions/primary/literal/readRegexpLiteral';\n\nvar delimiterChangeToken = { t: DELIMCHANGE, exclude: true };\n\nexport default function readMustache ( parser ) {\n\tvar mustache, i;\n\n\t// If we're inside a <script> or <style> tag, and we're not\n\t// interpolating, bug out\n\tif ( parser.interpolate[ parser.inside ] === false ) {\n\t\treturn null;\n\t}\n\n\tfor ( i = 0; i < parser.tags.length; i += 1 ) {\n\t\tif ( mustache = readMustacheOfType( parser, parser.tags[i] ) ) {\n\t\t\treturn mustache;\n\t\t}\n\t}\n}\n\nfunction readMustacheOfType ( parser, tag ) {\n\tvar start, mustache, reader, i;\n\n\tstart = parser.pos;\n\n\tif ( parser.matchString( '\\\\' + tag.open ) ) {\n\t\tif ( start === 0 || parser.str[ start - 1 ] !== '\\\\' ) {\n\t\t\treturn tag.open;\n\t\t}\n\t} else if ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\t// delimiter change?\n\tif ( mustache = readDelimiterChange( parser ) ) {\n\t\t// find closing delimiter or abort...\n\t\tif ( !parser.matchString( tag.close ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// ...then make the switch\n\t\ttag.open = mustache[0];\n\t\ttag.close = mustache[1];\n\t\tparser.sortMustacheTags();\n\n\t\treturn delimiterChangeToken;\n\t}\n\n\tparser.allowWhitespace();\n\n\t// illegal section closer\n\tif ( parser.matchString( '/' ) ) {\n\t\tparser.pos -= 1;\n\t\tlet rewind = parser.pos;\n\t\tif ( !readRegexpLiteral( parser ) ) {\n\t\t\tparser.pos = rewind - ( tag.close.length );\n\t\t\tparser.error( 'Attempted to close a section that wasn\\'t open' );\n\t\t} else {\n\t\t\tparser.pos = rewind;\n\t\t}\n\t}\n\n\tfor ( i = 0; i < tag.readers.length; i += 1 ) {\n\t\treader = tag.readers[i];\n\n\t\tif ( mustache = reader( parser, tag ) ) {\n\t\t\tif ( tag.isStatic ) {\n\t\t\t\tmustache.s = true; // TODO make this `1` instead - more compact\n\t\t\t}\n\n\t\t\tif ( parser.includeLinePositions ) {\n\t\t\t\tmustache.p = parser.getLinePos( start );\n\t\t\t}\n\n\t\t\treturn mustache;\n\t\t}\n\t}\n\n\tparser.pos = start;\n\treturn null;\n}\n","import { REGEXP_LITERAL } from 'config/types';\n\nvar regexpPattern = /^(\\/(?:[^\\n\\r\\u2028\\u2029/\\\\[]|\\\\.|\\[(?:[^\\n\\r\\u2028\\u2029\\]\\\\]|\\\\.)*])+\\/(?:([gimuy])(?![a-z]*\\2))*(?![a-zA-Z_$0-9]))/;\n\nexport default function readNumberLiteral ( parser ) {\n\tvar result;\n\n\tif ( result = parser.matchPattern( regexpPattern ) ) {\n\t\treturn {\n\t\t\tt: REGEXP_LITERAL,\n\t\t\tv: result\n\t\t};\n\t}\n\n\treturn null;\n}\n","var delimiterChangePattern = /^[^\\s=]+/, whitespacePattern = /^\\s+/;\n\nexport default function readDelimiterChange ( parser ) {\n\tvar start, opening, closing;\n\n\tif ( !parser.matchString( '=' ) ) {\n\t\treturn null;\n\t}\n\n\tstart = parser.pos;\n\n\t// allow whitespace before new opening delimiter\n\tparser.allowWhitespace();\n\n\topening = parser.matchPattern( delimiterChangePattern );\n\tif ( !opening ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace (in fact, it's necessary...)\n\tif ( !parser.matchPattern( whitespacePattern ) ) {\n\t\treturn null;\n\t}\n\n\tclosing = parser.matchPattern( delimiterChangePattern );\n\tif ( !closing ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace before closing '='\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '=' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn [ opening, closing ];\n}\n","export var TEXT              = 1;\nexport var INTERPOLATOR      = 2;\nexport var TRIPLE            = 3;\nexport var SECTION           = 4;\nexport var INVERTED          = 5;\nexport var CLOSING           = 6;\nexport var ELEMENT           = 7;\nexport var PARTIAL           = 8;\nexport var COMMENT           = 9;\nexport var DELIMCHANGE       = 10;\nexport var ATTRIBUTE         = 13;\nexport var CLOSING_TAG       = 14;\nexport var COMPONENT         = 15;\nexport var YIELDER           = 16;\nexport var INLINE_PARTIAL    = 17;\nexport var DOCTYPE           = 18;\n\nexport var NUMBER_LITERAL    = 20;\nexport var STRING_LITERAL    = 21;\nexport var ARRAY_LITERAL     = 22;\nexport var OBJECT_LITERAL    = 23;\nexport var BOOLEAN_LITERAL   = 24;\nexport var REGEXP_LITERAL    = 25;\n\nexport var GLOBAL            = 26;\nexport var KEY_VALUE_PAIR    = 27;\n\n\nexport var REFERENCE         = 30;\nexport var REFINEMENT        = 31;\nexport var MEMBER            = 32;\nexport var PREFIX_OPERATOR   = 33;\nexport var BRACKETED         = 34;\nexport var CONDITIONAL       = 35;\nexport var INFIX_OPERATOR    = 36;\n\nexport var INVOCATION        = 40;\n\nexport var SECTION_IF        = 50;\nexport var SECTION_UNLESS    = 51;\nexport var SECTION_EACH      = 52;\nexport var SECTION_WITH      = 53;\nexport var SECTION_IF_WITH   = 54;\n\nexport var ELSE              = 60;\nexport var ELSEIF            = 61;\n","import { create, hasOwn } from 'utils/object';\n\nvar Parser, ParseError, leadingWhitespace = /^\\s+/;\n\nParseError = function ( message ) {\n\tthis.name = 'ParseError';\n\tthis.message = message;\n\ttry {\n\t\tthrow new Error(message);\n\t} catch (e) {\n\t\tthis.stack = e.stack;\n\t}\n};\n\nParseError.prototype = Error.prototype;\n\nParser = function ( str, options ) {\n\tvar items, item, lineStart = 0;\n\n\tthis.str = str;\n\tthis.options = options || {};\n\tthis.pos = 0;\n\n\tthis.lines = this.str.split( '\\n' );\n\tthis.lineEnds = this.lines.map( line => {\n\t\tvar lineEnd = lineStart + line.length + 1; // +1 for the newline\n\n\t\tlineStart = lineEnd;\n\t\treturn lineEnd;\n\t}, 0 );\n\n\t// Custom init logic\n\tif ( this.init ) this.init( str, options );\n\n\titems = [];\n\n\twhile ( ( this.pos < this.str.length ) && ( item = this.read() ) ) {\n\t\titems.push( item );\n\t}\n\n\tthis.leftover = this.remaining();\n\tthis.result = this.postProcess ? this.postProcess( items, options ) : items;\n};\n\nParser.prototype = {\n\tread: function ( converters ) {\n\t\tvar pos, i, len, item;\n\n\t\tif ( !converters ) converters = this.converters;\n\n\t\tpos = this.pos;\n\n\t\tlen = converters.length;\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tthis.pos = pos; // reset for each attempt\n\n\t\t\tif ( item = converters[i]( this ) ) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tgetLinePos: function ( char ) {\n\t\tvar lineNum = 0, lineStart = 0, columnNum;\n\n\t\twhile ( char >= this.lineEnds[ lineNum ] ) {\n\t\t\tlineStart = this.lineEnds[ lineNum ];\n\t\t\tlineNum += 1;\n\t\t}\n\n\t\tcolumnNum = char - lineStart;\n\t\treturn [ lineNum + 1, columnNum + 1, char ]; // line/col should be one-based, not zero-based!\n\t},\n\n\terror: function ( message ) {\n\t\tlet pos = this.getLinePos( this.pos );\n\t\tlet lineNum = pos[0];\n\t\tlet columnNum = pos[1];\n\n\t\tlet line = this.lines[ pos[0] - 1 ];\n\t\tlet numTabs = 0;\n\t\tlet annotation = line.replace( /\\t/g, ( match, char ) => {\n\t\t\tif ( char < pos[1] ) {\n\t\t\t\tnumTabs += 1;\n\t\t\t}\n\n\t\t\treturn '  ';\n\t\t}) + '\\n' + new Array( pos[1] + numTabs ).join( ' ' ) + '^----';\n\n\t\tlet error = new ParseError( `${message} at line ${lineNum} character ${columnNum}:\\n${annotation}` );\n\n\t\terror.line = pos[0];\n\t\terror.character = pos[1];\n\t\terror.shortMessage = message;\n\n\t\tthrow error;\n\t},\n\n\tmatchString: function ( string ) {\n\t\tif ( this.str.substr( this.pos, string.length ) === string ) {\n\t\t\tthis.pos += string.length;\n\t\t\treturn string;\n\t\t}\n\t},\n\n\tmatchPattern: function ( pattern ) {\n\t\tvar match;\n\n\t\tif ( match = pattern.exec( this.remaining() ) ) {\n\t\t\tthis.pos += match[0].length;\n\t\t\treturn match[1] || match[0];\n\t\t}\n\t},\n\n\tallowWhitespace: function () {\n\t\tthis.matchPattern( leadingWhitespace );\n\t},\n\n\tremaining: function () {\n\t\treturn this.str.substring( this.pos );\n\t},\n\n\tnextChar: function () {\n\t\treturn this.str.charAt( this.pos );\n\t}\n};\n\nParser.extend = function ( proto ) {\n\tvar Parent = this, Child, key;\n\n\tChild = function ( str, options ) {\n\t\tParser.call( this, str, options );\n\t};\n\n\tChild.prototype = create( Parent.prototype );\n\n\tfor ( key in proto ) {\n\t\tif ( hasOwn.call( proto, key ) ) {\n\t\t\tChild.prototype[ key ] = proto[ key ];\n\t\t}\n\t}\n\n\tChild.extend = Parser.extend;\n\treturn Child;\n};\n\nexport default Parser;\n","import { fatal, warnIfDebug, warnOnceIfDebug } from 'utils/log';\nimport { isObject, isArray } from 'utils/is';\n\nfunction validate ( data ) {\n\t// Warn if userOptions.data is a non-POJO\n\tif ( data && data.constructor !== Object ) {\n\t\tif ( typeof data === 'function' ) {\n\t\t\t// TODO do we need to support this in the new Ractive() case?\n\t\t} else if ( typeof data !== 'object' ) {\n\t\t\tfatal( `data option must be an object or a function, \\`${data}\\` is not valid` );\n\t\t} else {\n\t\t\twarnIfDebug( 'If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged' );\n\t\t}\n\t}\n}\n\nvar dataConfigurator = {\n\tname: 'data',\n\n\textend: ( Parent, proto, options ) => {\n\t\tlet key, value;\n\n\t\t// check for non-primitives, which could cause mutation-related bugs\n\t\tif ( options.data && isObject( options.data ) ) {\n\t\t\tfor ( key in options.data ) {\n\t\t\t\tvalue = options.data[ key ];\n\n\t\t\t\tif ( value && typeof value === 'object' ) {\n\t\t\t\t\tif ( isObject( value ) || isArray( value ) ) {\n\t\t\t\t\t\twarnIfDebug( `Passing a \\`data\\` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tproto.data = combine( proto.data, options.data );\n\t},\n\n\tinit: ( Parent, ractive, options ) => {\n\t\tvar result = combine( Parent.prototype.data, options.data );\n\n\t\tif ( typeof result === 'function' ) {\n\t\t\tresult = result.call( ractive );\n\t\t}\n\n\t\treturn result || {};\n\t},\n\n\treset: function ( ractive ) {\n\t\tvar result = this.init( ractive.constructor, ractive, ractive.viewmodel );\n\t\tractive.viewmodel.root.set( result );\n\t\treturn true;\n\t}\n};\n\nexport default dataConfigurator;\n\nfunction combine ( parentValue, childValue ) {\n\tvalidate( childValue );\n\n\tlet parentIsFn = typeof parentValue === 'function';\n\tlet childIsFn = typeof childValue === 'function';\n\n\t// Very important, otherwise child instance can become\n\t// the default data object on Ractive or a component.\n\t// then ractive.set() ends up setting on the prototype!\n\tif ( !childValue && !parentIsFn ) {\n\t\tchildValue = {};\n\t}\n\n\t// Fast path, where we just need to copy properties from\n\t// parent to child\n\tif ( !parentIsFn && !childIsFn ) {\n\t\treturn fromProperties( childValue, parentValue );\n\t}\n\n\treturn function () {\n\t\tlet child = childIsFn ? callDataFunction( childValue, this ) : childValue;\n\t\tlet parent = parentIsFn ? callDataFunction( parentValue, this ) : parentValue;\n\n\t\treturn fromProperties( child, parent );\n\t};\n}\n\nfunction callDataFunction ( fn, context ) {\n\tlet data = fn.call( context );\n\n\tif ( !data ) return;\n\n\tif ( typeof data !== 'object' ) {\n\t\tfatal( 'Data function must return an object' );\n\t}\n\n\tif ( data.constructor !== Object ) {\n\t\twarnOnceIfDebug( 'Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged' );\n\t}\n\n\treturn data;\n}\n\nfunction fromProperties ( primary, secondary ) {\n\tif ( primary && secondary ) {\n\t\tfor ( let key in secondary ) {\n\t\t\tif ( !( key in primary ) ) {\n\t\t\t\tprimary[ key ] = secondary[ key ];\n\t\t\t}\n\t\t}\n\n\t\treturn primary;\n\t}\n\n\treturn primary || secondary;\n}\n","import css from 'global/css';\nimport transformCss from './transform';\n\nlet uid = 1;\n\nvar cssConfigurator = {\n\tname: 'css',\n\n\textend: ( Parent, proto, options ) => {\n\t\tif ( options.css ) {\n\t\t\tlet id = uid++;\n\t\t\tlet styles = options.noCssTransform ? options.css : transformCss( options.css, id );\n\n\t\t\tproto.cssId = id;\n\t\t\tcss.add({ id, styles });\n\t\t}\n\t},\n\n\tinit: () => {}\n};\n\nexport default cssConfigurator;\n","var selectorsPattern = /(?:^|\\})?\\s*([^\\{\\}]+)\\s*\\{/g,\n\tcommentsPattern = /\\/\\*.*?\\*\\//g,\n\tselectorUnitPattern = /((?:(?:\\[[^\\]+]\\])|(?:[^\\s\\+\\>\\~:]))+)((?::[^\\s\\+\\>\\~\\(]+(?:\\([^\\)]+\\))?)?\\s*[\\s\\+\\>\\~]?)\\s*/g,\n\tmediaQueryPattern = /^@media/,\n\tdataRvcGuidPattern = /\\[data-ractive-css~=\"\\{[a-z0-9-]+\\}\"]/g;\n\nexport default function transformCss( css, id ) {\n\tvar transformed, dataAttr, addGuid;\n\n\tdataAttr = `[data-ractive-css~=\"{${id}}\"]`;\n\n\taddGuid = function ( selector ) {\n\t\tvar selectorUnits, match, unit, base, prepended, appended, i, transformed = [];\n\n\t\tselectorUnits = [];\n\n\t\twhile ( match = selectorUnitPattern.exec( selector ) ) {\n\t\t\tselectorUnits.push({\n\t\t\t\tstr: match[0],\n\t\t\t\tbase: match[1],\n\t\t\t\tmodifiers: match[2]\n\t\t\t});\n\t\t}\n\n\t\t// For each simple selector within the selector, we need to create a version\n\t\t// that a) combines with the id, and b) is inside the id\n\t\tbase = selectorUnits.map( extractString );\n\n\t\ti = selectorUnits.length;\n\t\twhile ( i-- ) {\n\t\t\tappended = base.slice();\n\n\t\t\t// Pseudo-selectors should go after the attribute selector\n\t\t\tunit = selectorUnits[i];\n\t\t\tappended[i] = unit.base + dataAttr + unit.modifiers || '';\n\n\t\t\tprepended = base.slice();\n\t\t\tprepended[i] = dataAttr + ' ' + prepended[i];\n\n\t\t\ttransformed.push( appended.join( ' ' ), prepended.join( ' ' ) );\n\t\t}\n\n\t\treturn transformed.join( ', ' );\n\t};\n\n\tif ( dataRvcGuidPattern.test( css ) ) {\n\t\ttransformed = css.replace( dataRvcGuidPattern, dataAttr );\n\t} else {\n\t\ttransformed = css\n\t\t.replace( commentsPattern, '' )\n\t\t.replace( selectorsPattern, function ( match, $1 ) {\n\t\t\tvar selectors, transformed;\n\n\t\t\t// don't transform media queries!\n\t\t\tif ( mediaQueryPattern.test( $1 ) ) return match;\n\n\t\t\tselectors = $1.split( ',' ).map( trim );\n\t\t\ttransformed = selectors.map( addGuid ).join( ', ' ) + ' ';\n\n\t\t\treturn match.replace( $1, transformed );\n\t\t});\n\t}\n\n\treturn transformed;\n}\n\nfunction trim ( str ) {\n\tif ( str.trim ) {\n\t\treturn str.trim();\n\t}\n\n\treturn str.replace( /^\\s+/, '' ).replace( /\\s+$/, '' );\n}\n\nfunction extractString ( unit ) {\n\treturn unit.str;\n}\n","import { ensureArray } from 'utils/array';\n\nvar adaptConfigurator = {\n\textend: ( Parent, proto, options ) => {\n\t\tproto.adapt = combine( proto.adapt, ensureArray( options.adapt ) );\n\t},\n\n\tinit () {}\n};\n\nexport default adaptConfigurator;\n\nfunction combine ( a, b ) {\n\tvar c = a.slice(), i = b.length;\n\n\twhile ( i-- ) {\n\t\tif ( !~c.indexOf( b[i] ) ) {\n\t\t\tc.push( b[i] );\n\t\t}\n\t}\n\n\treturn c;\n}","import { getElement } from 'utils/dom';\nimport render from '../render';\nimport { teardown } from 'shared/methodCallers';\n\nexport default function Ractive$render ( target, anchor ) {\n\ttarget = getElement( target ) || this.el;\n\n\tif ( !this.append && target ) {\n\t\t// Teardown any existing instances *before* trying to set up the new one -\n\t\t// avoids certain weird bugs\n\t\tlet others = target.__ractive_instances__;\n\t\tif ( others && others.length ) {\n\t\t\tremoveOtherInstances( others );\n\t\t}\n\n\t\t// make sure we are the only occupants\n\t\ttarget.innerHTML = ''; // TODO is this quicker than removeChild? Initial research inconclusive\n\t}\n\n\treturn render( this, target, anchor );\n}\n\nfunction removeOtherInstances ( others ) {\n\tothers.splice( 0, others.length ).forEach( teardown );\n}\n","import { doc } from 'config/environment';\nimport css from 'global/css';\nimport Hook from 'events/Hook';\nimport { getElement } from 'utils/dom';\nimport runloop from 'global/runloop';\n\nconst renderHook = new Hook( 'render' );\nconst completeHook = new Hook( 'complete' );\n\nexport default function render ( ractive, target, anchor ) {\n\t// if `noIntro` is `true`, temporarily disable transitions\n\tconst transitionsEnabled = ractive.transitionsEnabled;\n\tif ( ractive.noIntro ) ractive.transitionsEnabled = false;\n\n\tconst promise = runloop.start( ractive, true );\n\trunloop.scheduleTask( () => renderHook.fire( ractive ), true );\n\n\tif ( ractive.fragment.rendered ) {\n\t\tthrow new Error( 'You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first' );\n\t}\n\n\tanchor = getElement( anchor ) || ractive.anchor;\n\n\tractive.el = target;\n\tractive.anchor = anchor;\n\n\t// ensure encapsulated CSS is up-to-date\n\tif ( ractive.cssId ) css.apply();\n\n\tif ( target ) {\n\t\t( target.__ractive_instances__ || ( target.__ractive_instances__ = [] ) ).push( ractive );\n\n\t\tif ( anchor ) {\n\t\t\tconst docFrag = doc.createDocumentFragment();\n\t\t\tractive.fragment.render( docFrag );\n\t\t\ttarget.insertBefore( docFrag, anchor );\n\t\t} else {\n\t\t\tractive.fragment.render( target );\n\t\t}\n\t}\n\n\trunloop.end();\n\tractive.transitionsEnabled = transitionsEnabled;\n\n\treturn promise.then( () => completeHook.fire( ractive ) );\n}\n","import { doc } from 'config/environment';\nimport noop from 'utils/noop';\n\nvar css,\n\tupdate,\n\tstyleElement,\n\thead,\n\tstyleSheet,\n\tinDom,\n\tprefix = '/* Ractive.js component styles */\\n',\n\tstyles = [],\n\tdirty = false;\n\nif ( !doc ) {\n\t// TODO handle encapsulated CSS in server-rendered HTML!\n\tcss = {\n\t\tadd: noop,\n\t\tapply: noop\n\t};\n} else {\n\tstyleElement = doc.createElement( 'style' );\n\tstyleElement.type = 'text/css';\n\n\thead = doc.getElementsByTagName( 'head' )[0];\n\n\tinDom = false;\n\n\t// Internet Exploder won't let you use styleSheet.innerHTML - we have to\n\t// use styleSheet.cssText instead\n\tstyleSheet = styleElement.styleSheet;\n\n\tupdate = function () {\n\t\tlet css = prefix + styles.map( s => `\\n/* {${s.id}} */\\n${s.styles}` ).join( '\\n' );\n\n\t\tif ( styleSheet ) {\n\t\t\tstyleSheet.cssText = css;\n\t\t} else {\n\t\t\tstyleElement.innerHTML = css;\n\t\t}\n\n\t\tif ( !inDom ) {\n\t\t\thead.appendChild( styleElement );\n\t\t\tinDom = true;\n\t\t}\n\t};\n\n\tcss = {\n\t\tadd ( s ) {\n\t\t\tstyles.push( s );\n\t\t\tdirty = true;\n\t\t},\n\n\t\tapply () {\n\t\t\tif ( dirty ) {\n\t\t\t\tupdate();\n\t\t\t\tdirty = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default css;\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'push' );\n","import makeArrayMethod from './shared/makeArrayMethod';\nexport default makeArrayMethod( 'pop' );\n","import { isArray } from 'utils/is';\nimport { normalise } from 'shared/keypaths';\nimport runloop from 'global/runloop';\nimport getNewIndices from 'shared/getNewIndices';\n\nvar arrayProto = Array.prototype;\n\nexport default function ( methodName ) {\n\treturn function ( keypath, ...args ) {\n\t\tconst model = this.viewmodel.joinAll( normalise( keypath ).split( '.' ) );\n\t\tconst array = model.get();\n\n\t\tif ( !isArray( array ) ) {\n\t\t\tthrow new Error( `shuffle array method ${methodName} called on non-array at ${keypath.getKeypath()}` );\n\t\t}\n\n\t\tconst newIndices = getNewIndices( array.length, methodName, args );\n\t\tconst result = arrayProto[ methodName ].apply( array, args );\n\n\t\tconst promise = runloop.start( this, true ).then( () => result );\n\n\t\tif ( newIndices ) {\n\t\t\tmodel.shuffle( newIndices );\n\t\t} else {\n\t\t\tmodel.set( result );\n\t\t}\n\n\t\trunloop.end();\n\n\t\treturn promise;\n\t};\n}\n","// This function takes an array, the name of a mutator method, and the\n// arguments to call that mutator method with, and returns an array that\n// maps the old indices to their new indices.\n\n// So if you had something like this...\n//\n//     array = [ 'a', 'b', 'c', 'd' ];\n//     array.push( 'e' );\n//\n// ...you'd get `[ 0, 1, 2, 3 ]` - in other words, none of the old indices\n// have changed. If you then did this...\n//\n//     array.unshift( 'z' );\n//\n// ...the indices would be `[ 1, 2, 3, 4, 5 ]` - every item has been moved\n// one higher to make room for the 'z'. If you removed an item, the new index\n// would be -1...\n//\n//     array.splice( 2, 2 );\n//\n// ...this would result in [ 0, 1, -1, -1, 2, 3 ].\n//\n// This information is used to enable fast, non-destructive shuffling of list\n// sections when you do e.g. `ractive.splice( 'items', 2, 2 );\n\nexport default function getNewIndices ( length, methodName, args ) {\n\tvar spliceArguments, newIndices = [], removeStart, removeEnd, balance, i;\n\n\tspliceArguments = getSpliceEquivalent( length, methodName, args );\n\n\tif ( !spliceArguments ) {\n\t\treturn null; // TODO support reverse and sort?\n\t}\n\n\tbalance = ( spliceArguments.length - 2 ) - spliceArguments[1];\n\n\tremoveStart = Math.min( length, spliceArguments[0] );\n\tremoveEnd = removeStart + spliceArguments[1];\n\n\tfor ( i = 0; i < removeStart; i += 1 ) {\n\t\tnewIndices.push( i );\n\t}\n\n\tfor ( ; i < removeEnd; i += 1 ) {\n\t\tnewIndices.push( -1 );\n\t}\n\n\tfor ( ; i < length; i += 1 ) {\n\t\tnewIndices.push( i + balance );\n\t}\n\n\t// there is a net shift for the rest of the array starting with index + balance\n\tif ( balance !== 0 ) {\n\t\tnewIndices.touchedFrom = spliceArguments[0];\n\t} else {\n\t\tnewIndices.touchedFrom = length;\n\t}\n\n\treturn newIndices;\n}\n\n\n// The pop, push, shift an unshift methods can all be represented\n// as an equivalent splice\nfunction getSpliceEquivalent ( length, methodName, args ) {\n\tswitch ( methodName ) {\n\t\tcase 'splice':\n\t\t\tif ( args[0] !== undefined && args[0] < 0 ) {\n\t\t\t\targs[0] = length + Math.max( args[0], -length );\n\t\t\t}\n\n\t\t\twhile ( args.length < 2 ) {\n\t\t\t\targs.push( length - args[0] );\n\t\t\t}\n\n\t\t\t// ensure we only remove elements that exist\n\t\t\targs[1] = Math.min( args[1], length - args[0] );\n\n\t\t\treturn args;\n\n\t\tcase 'sort':\n\t\tcase 'reverse':\n\t\t\treturn null;\n\n\t\tcase 'pop':\n\t\t\tif ( length ) {\n\t\t\t\treturn [ length - 1, 1 ];\n\t\t\t}\n\t\t\treturn [ 0, 0 ];\n\n\t\tcase 'push':\n\t\t\treturn [ length, 0 ].concat( args );\n\n\t\tcase 'shift':\n\t\t\treturn [ 0, length ? 1 : 0 ];\n\n\t\tcase 'unshift':\n\t\t\treturn [ 0, 0 ].concat( args );\n\t}\n}\n","export default function Ractive$once ( eventName, handler ) {\n\n\tvar listener = this.on( eventName, function () {\n\t\thandler.apply( this, arguments );\n\t\tlistener.cancel();\n\t});\n\n\t// so we can still do listener.cancel() manually\n\treturn listener;\n}\n","import trim from './shared/trim';\nimport notEmptyString from './shared/notEmptyString';\n\nexport default function Ractive$on ( eventName, callback ) {\n\tvar listeners, n, eventNames;\n\n\t// allow mutliple listeners to be bound in one go\n\tif ( typeof eventName === 'object' ) {\n\t\tlisteners = [];\n\n\t\tfor ( n in eventName ) {\n\t\t\tif ( eventName.hasOwnProperty( n ) ) {\n\t\t\t\tlisteners.push( this.on( n, eventName[ n ] ) );\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcancel: function () {\n\t\t\t\tvar listener;\n\n\t\t\t\twhile ( listener = listeners.pop() ) {\n\t\t\t\t\tlistener.cancel();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t// Handle multiple space-separated event names\n\teventNames = eventName.split( ' ' ).map( trim ).filter( notEmptyString );\n\n\teventNames.forEach( eventName => {\n\t\t( this._subs[ eventName ] || ( this._subs[ eventName ] = [] ) ).push( callback );\n\t});\n\n\treturn {\n\t\tcancel: () => this.off( eventName, callback )\n\t};\n}\n","import trim from './shared/trim';\nimport notEmptyString from './shared/notEmptyString';\n\nexport default function Ractive$off ( eventName, callback ) {\n\tvar eventNames;\n\n\t// if no arguments specified, remove all callbacks\n\tif ( !eventName ) {\n\t\t// TODO use this code instead, once the following issue has been resolved\n\t\t// in PhantomJS (tests are unpassable otherwise!)\n\t\t// https://github.com/ariya/phantomjs/issues/11856\n\t\t// defineProperty( this, '_subs', { value: create( null ), configurable: true });\n\t\tfor ( eventName in this._subs ) {\n\t\t\tdelete this._subs[ eventName ];\n\t\t}\n\t}\n\n\telse {\n\t\t// Handle multiple space-separated event names\n\t\teventNames = eventName.split( ' ' ).map( trim ).filter( notEmptyString );\n\n\t\teventNames.forEach( eventName => {\n\t\t\tvar subscribers, index;\n\n\t\t\t// If we have subscribers for this event...\n\t\t\tif ( subscribers = this._subs[ eventName ] ) {\n\t\t\t\t// ...if a callback was specified, only remove that\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tindex = subscribers.indexOf( callback );\n\t\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\t\tsubscribers.splice( index, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// ...otherwise remove all callbacks\n\t\t\t\telse {\n\t\t\t\t\tthis._subs[ eventName ] = [];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\treturn this;\n}\n","export default str => str !== '';\n","export default str => str.trim();\n","import { isObject } from 'utils/is';\nimport { extend } from 'utils/object';\n\nconst onceOptions = { init: false, once: true };\n\nexport default function observeOnce ( keypath, callback, options ) {\n\tif ( isObject( keypath ) || typeof keypath === 'function' ) {\n\t\toptions = extend( callback || {}, onceOptions );\n\t\treturn this.observe( keypath, options );\n\t}\n\n\toptions = extend( options || {}, onceOptions );\n\treturn this.observe( keypath, callback, options );\n}\n","import { splitKeypath } from 'shared/keypaths';\nimport { isArray } from 'utils/is';\n\nexport default function observeList ( keypath, callback, options ) {\n\tif ( typeof keypath !== 'string' ) {\n\t\tthrow new Error( 'ractive.observeList() must be passed a string as its first argument' );\n\t}\n\n\tconst model = this.viewmodel.joinAll( splitKeypath( keypath ) );\n\tconst observer = new ListObserver( this, model, callback, options || {} );\n\n\t// add observer to the Ractive instance, so it can be\n\t// cancelled on ractive.teardown()\n\tthis._observers.push( observer );\n\n\treturn {\n\t\tcancel () {\n\t\t\tobserver.cancel();\n\t\t}\n\t};\n}\n\nfunction negativeOne () {\n\treturn -1;\n}\n\nclass ListObserver {\n\tconstructor ( context, model, callback, options ) {\n\t\tthis.context = context;\n\t\tthis.model = model;\n\t\tthis.keypath = model.getKeypath();\n\t\tthis.callback = callback;\n\n\t\tthis.pending = null;\n\n\t\tmodel.register( this );\n\n\t\tif ( options.init !== false ) {\n\t\t\tthis.sliced = [];\n\t\t\tthis.shuffle([]);\n\t\t\tthis.handleChange();\n\t\t} else {\n\t\t\tthis.sliced = this.slice();\n\t\t}\n\t}\n\n\thandleChange () {\n\t\tif ( this.pending ) {\n\t\t\t// post-shuffle\n\t\t\tthis.callback( this.pending );\n\t\t\tthis.pending = null;\n\t\t}\n\n\t\telse {\n\t\t\t// entire array changed\n\t\t\tthis.shuffle( this.sliced.map( negativeOne ) );\n\t\t\tthis.handleChange();\n\t\t}\n\t}\n\n\tshuffle ( newIndices ) {\n\t\tconst newValue = this.slice();\n\n\t\tlet inserted = [];\n\t\tlet deleted = [];\n\t\tlet start;\n\n\t\tlet hadIndex = {};\n\n\t\tnewIndices.forEach( ( newIndex, oldIndex ) => {\n\t\t\thadIndex[ newIndex ] = true;\n\n\t\t\tif ( newIndex !== oldIndex && start === undefined ) {\n\t\t\t\tstart = oldIndex;\n\t\t\t}\n\n\t\t\tif ( newIndex === -1 ) {\n\t\t\t\tdeleted.push( this.sliced[ oldIndex ] );\n\t\t\t}\n\t\t});\n\n\t\tif ( start === undefined ) start = newIndices.length;\n\n\t\tlet len = newValue.length;\n\t\tfor ( let i = 0; i < len; i += 1 ) {\n\t\t\tif ( !hadIndex[i] ) inserted.push( newValue[i] );\n\t\t}\n\n\t\tthis.pending = { inserted, deleted, start };\n\t\tthis.sliced = newValue;\n\t}\n\n\tslice () {\n\t\tconst value = this.model.get();\n\t\treturn isArray( value ) ? value.slice() : [];\n\t}\n}\n","import runloop from 'global/runloop';\nimport { isEqual, isObject } from 'utils/is';\nimport { splitKeypath } from 'shared/keypaths';\nimport { cancel } from 'shared/methodCallers';\nimport resolveReference from 'view/resolvers/resolveReference';\n\nexport default function observe ( keypath, callback, options ) {\n\tlet observers = [];\n\n\tif ( isObject( keypath ) ) {\n\t\tconst map = keypath;\n\t\toptions = callback || {};\n\n\t\tObject.keys( map ).forEach( keypath => {\n\t\t\tconst callback = map[ keypath ];\n\n\t\t\tkeypath.split( ' ' ).forEach( keypath => {\n\t\t\t\tobservers.push( createObserver( this, keypath, callback, options ) );\n\t\t\t});\n\t\t});\n\t}\n\n\telse {\n\t\tlet keypaths;\n\n\t\tif ( typeof keypath === 'function' ) {\n\t\t\toptions = callback;\n\t\t\tcallback = keypath;\n\t\t\tkeypaths = [ '' ];\n\t\t} else {\n\t\t\tkeypaths = keypath.split( ' ' );\n\t\t}\n\n\t\tkeypaths.forEach( keypath => {\n\t\t\tobservers.push( createObserver( this, keypath, callback, options || {} ) );\n\t\t});\n\t}\n\n\t// add observers to the Ractive instance, so they can be\n\t// cancelled on ractive.teardown()\n\tthis._observers.push.apply( this._observers, observers );\n\n\treturn {\n\t\tcancel () {\n\t\t\tobservers.forEach( cancel );\n\t\t}\n\t};\n}\n\nfunction createObserver ( ractive, keypath, callback, options ) {\n\tconst viewmodel = ractive.viewmodel;\n\n\tconst keys = splitKeypath( keypath );\n\tconst wildcardIndex = keys.indexOf( '*' );\n\n\t// normal keypath - no wildcards\n\tif ( !~wildcardIndex ) {\n\t\tconst key = keys[0];\n\n\t\tif ( !viewmodel.has( key ) ) {\n\t\t\t// if this is an inline component, we may need to create an implicit mapping\n\t\t\tif ( ractive.component ) {\n\t\t\t\tconst model = resolveReference( ractive.component.parentFragment, key );\n\t\t\t\tif ( model ) viewmodel.map( key, model );\n\t\t\t}\n\t\t}\n\n\t\tconst model = viewmodel.joinAll( keys );\n\t\treturn new Observer( ractive, model, callback, options );\n\t}\n\n\t// pattern observers - more complex case\n\tconst baseModel = wildcardIndex === 0 ?\n\t\tviewmodel :\n\t\tviewmodel.joinAll( keys.slice( 0, wildcardIndex ) );\n\n\treturn new PatternObserver( ractive, baseModel, keys.splice( wildcardIndex ), callback, options );\n}\n\nclass Observer {\n\tconstructor ( context, model, callback, options ) {\n\t\tthis.context = context;\n\t\tthis.model = model;\n\t\tthis.keypath = model.getKeypath();\n\t\tthis.callback = callback;\n\n\t\tthis.oldValue = undefined;\n\t\tthis.newValue = model.get();\n\n\t\tthis.defer = options.defer;\n\t\tthis.once = options.once;\n\t\tthis.strict = options.strict;\n\n\t\tthis.dirty = false;\n\n\t\tif ( options.init !== false ) {\n\t\t\tthis.dispatch();\n\t\t} else {\n\t\t\tthis.oldValue = this.newValue;\n\t\t}\n\n\t\tmodel.register( this );\n\t}\n\n\tcancel () {\n\t\tthis.model.unregister( this );\n\t}\n\n\tdispatch () {\n\t\tthis.callback.call( this.context, this.newValue, this.oldValue, this.keypath );\n\t\tthis.oldValue = this.newValue;\n\t\tthis.dirty = false;\n\t}\n\n\thandleChange () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.newValue = this.model.get();\n\n\t\t\tif ( this.strict && this.newValue === this.oldValue ) return;\n\n\t\t\trunloop.addObserver( this, this.defer );\n\t\t\tthis.dirty = true;\n\n\t\t\tif ( this.once ) this.cancel();\n\t\t}\n\t}\n}\n\nclass PatternObserver {\n\tconstructor ( context, baseModel, keys, callback, options ) {\n\t\tthis.context = context;\n\t\tthis.baseModel = baseModel;\n\t\tthis.keys = keys;\n\t\tthis.callback = callback;\n\n\t\tconst pattern = keys.join( '\\\\.' ).replace( /\\*/g, '(.+)' );\n\t\tconst baseKeypath = baseModel.getKeypath();\n\t\tthis.pattern = new RegExp( `^${baseKeypath ? baseKeypath + '.' : ''}${pattern}$` );\n\n\t\tthis.oldValues = {};\n\t\tthis.newValues = {};\n\n\t\tthis.defer = options.defer;\n\t\tthis.once = options.once;\n\t\tthis.strict = options.strict;\n\n\t\tthis.dirty = false;\n\n\t\tthis.baseModel.findMatches( this.keys ).forEach( model => {\n\t\t\tthis.newValues[ model.getKeypath() ] = model.get();\n\t\t});\n\n\t\tif ( options.init !== false ) {\n\t\t\tthis.dispatch();\n\t\t} else {\n\t\t\tthis.oldValues = this.newValues;\n\t\t}\n\n\t\tbaseModel.register( this );\n\t}\n\n\tcancel () {\n\t\tthis.baseModel.unregister( this );\n\t}\n\n\tdispatch () {\n\t\tObject.keys( this.newValues ).forEach( keypath => {\n\t\t\tconst newValue = this.newValues[ keypath ];\n\t\t\tconst oldValue = this.oldValues[ keypath ];\n\n\t\t\tif ( this.strict && newValue === oldValue ) return;\n\t\t\tif ( isEqual( newValue, oldValue ) ) return;\n\n\t\t\tconst wildcards = this.pattern.exec( keypath ).slice( 1 );\n\t\t\tconst args = [ newValue, oldValue, keypath ].concat( wildcards );\n\n\t\t\tthis.callback.apply( this.context, args );\n\t\t});\n\n\t\tthis.oldValues = this.newValues;\n\t\tthis.dirty = false;\n\t}\n\n\thandleChange () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.newValues = {};\n\n\t\t\t// handle case where previously extant keypath no longer exists -\n\t\t\t// observer should still fire, with undefined as new value\n\t\t\t// TODO huh. according to the test suite that's not the case...\n\t\t\t// Object.keys( this.oldValues ).forEach( keypath => {\n\t\t\t// \tthis.newValues[ keypath ] = undefined;\n\t\t\t// });\n\n\t\t\tthis.baseModel.findMatches( this.keys ).forEach( model => {\n\t\t\t\tconst keypath = model.getKeypath();\n\t\t\t\tthis.newValues[ keypath ] = model.get();\n\t\t\t});\n\n\t\t\trunloop.addObserver( this, this.defer );\n\t\t\tthis.dirty = true;\n\n\t\t\tif ( this.once ) this.cancel();\n\t\t}\n\t}\n}\n","import { isArray } from 'utils/is';\nimport { splitKeypath } from 'shared/keypaths';\nimport runloop from 'global/runloop';\n\nlet comparators = {};\n\nfunction getComparator ( option ) {\n\tif ( !option ) return null; // use existing arrays\n\tif ( option === true ) return JSON.stringify;\n\tif ( typeof option === 'function' ) return option;\n\n\tif ( typeof option === 'string' ) {\n\t\treturn comparators[ option ] || ( comparators[ option ] = thing => thing[ option ] );\n\t}\n\n\tthrow new Error( 'If supplied, options.compare must be a string, function, or `true`' ); // TODO link to docs\n}\n\nexport default function Ractive$merge ( keypath, array, options ) {\n\tconst model = this.viewmodel.joinAll( splitKeypath( keypath ) );\n\tconst promise = runloop.start( this, true );\n\tconst value = model.get();\n\n\tif ( array === value ) {\n\t\tthrow new Error( 'You cannot merge an array with itself' ); // TODO link to docs\n\t} else if ( !isArray( value ) || !isArray( array ) ) {\n\t\tthrow new Error( 'You cannot merge an array with a non-array' );\n\t}\n\n\tconst comparator = getComparator( options && options.compare );\n\tmodel.merge( array, comparator );\n\n\trunloop.end();\n\treturn promise;\n}\n","import Hook from 'events/Hook';\nimport { getElement } from 'utils/dom';\n\nvar insertHook = new Hook( 'insert' );\n\nexport default function Ractive$insert ( target, anchor ) {\n\tif ( !this.fragment.rendered ) {\n\t\t// TODO create, and link to, documentation explaining this\n\t\tthrow new Error( 'The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.' );\n\t}\n\n\ttarget = getElement( target );\n\tanchor = getElement( anchor ) || null;\n\n\tif ( !target ) {\n\t\tthrow new Error( 'You must specify a valid target to insert into' );\n\t}\n\n\ttarget.insertBefore( this.detach(), anchor );\n\tthis.el = target;\n\n\t( target.__ractive_instances__ || ( target.__ractive_instances__ = [] ) ).push( this );\n\tthis.isDetached = false;\n\n\tfireInsertHook( this );\n}\n\nfunction fireInsertHook( ractive ) {\n\tinsertHook.fire( ractive );\n\n\tractive.findAllComponents('*').forEach( child => {\n\t\tfireInsertHook( child.instance );\n\t});\n}\n","import { splitKeypath } from 'shared/keypaths';\nimport resolveReference from 'view/resolvers/resolveReference';\n\nexport default function Ractive$get ( keypath ) {\n\tif ( !keypath ) return this.viewmodel.get( true );\n\n\tconst keys = splitKeypath( keypath );\n\tconst key = keys[0];\n\n\tlet model;\n\n\tif ( !this.viewmodel.has( key ) ) {\n\t\t// if this is an inline component, we may need to create\n\t\t// an implicit mapping\n\t\tif ( this.component ) {\n\t\t\tmodel = resolveReference( this.component.parentFragment, key );\n\n\t\t\tif ( model ) {\n\t\t\t\tthis.viewmodel.map( key, model );\n\t\t\t}\n\t\t}\n\t}\n\n\tmodel = this.viewmodel.joinAll( keys );\n\treturn model.get( true );\n}\n","import resolveAmbiguousReference from './resolveAmbiguousReference';\n\nexport default function resolveReference ( fragment, ref ) {\n\tlet context = fragment.findContext();\n\n\t// special references\n\t// TODO does `this` become `.` at parse time?\n\tif ( ref === '.' || ref === 'this' ) return context;\n\tif ( ref === '@keypath' ) return context.getKeypathModel();\n\tif ( ref === '@index' ) {\n\t\tconst repeater = fragment.findRepeatingFragment();\n\t\treturn repeater.context.getIndexModel( repeater.index );\n\t}\n\tif ( ref === '@key' ) return fragment.findRepeatingFragment().context.getKeyModel();\n\n\t// ancestor references\n\tif ( ref[0] === '~' ) return context.root.joinAll( ref.slice( 2 ).split( '.' ) );\n\tif ( ref[0] === '.' ) {\n\t\tconst parts = ref.split( '/' );\n\n\t\twhile ( parts[0] === '.' || parts[0] === '..' ) {\n\t\t\tconst part = parts.shift();\n\n\t\t\tif ( part === '..' ) {\n\t\t\t\tcontext = context.parent;\n\t\t\t}\n\t\t}\n\n\t\tref = parts.join( '/' );\n\n\t\t// special case - `{{.foo}}` means the same as `{{./foo}}`\n\t\tif ( ref[0] === '.' ) ref = ref.slice( 1 );\n\t\treturn context.joinAll( ref.split( '.' ) );\n\t}\n\n\treturn resolveAmbiguousReference( fragment, ref );\n}\n","function badReference ( key ) {\n\tthrow new Error( `An index or key reference (${key}) cannot have child properties` );\n}\n\nexport default function resolveAmbiguousReference ( fragment, ref ) {\n\tconst localViewmodel = fragment.findContext().root;\n\tconst keys = ref.split( '.' );\n\tconst key = keys[0];\n\n\t// TODO what if there are two component boundaries to cross - does this still work?\n\tconst base = localViewmodel.mappings.hasOwnProperty( key ) ?\n\t\tlocalViewmodel.mappings[ key ] :\n\t\tlocalViewmodel.computations.hasOwnProperty( key ) ?\n\t\t\tlocalViewmodel.computations[ key ] :\n\t\t\tnull;\n\n\tif ( base ) {\n\t\treturn keys.length > 1 ?\n\t\t\tbase.joinAll( keys.slice( 1 ) ) :\n\t\t\tbase;\n\t}\n\n\tlet hasContextChain;\n\tlet crossedComponentBoundary;\n\n\twhile ( fragment ) {\n\t\t// repeated fragments\n\t\tif ( fragment.isIteration ) {\n\t\t\tif ( key === fragment.parent.keyRef ) {\n\t\t\t\tif ( keys.length > 1 ) badReference( key );\n\t\t\t\treturn fragment.context.getKeyModel();\n\t\t\t}\n\n\t\t\tif ( key === fragment.parent.indexRef ) {\n\t\t\t\tif ( keys.length > 1 ) badReference( key );\n\t\t\t\treturn fragment.context.getIndexModel( fragment.index );\n\t\t\t}\n\t\t}\n\n\t\tif ( fragment.context ) {\n\t\t\t// TODO better encapsulate the component check\n\t\t\tif ( !fragment.isRoot || fragment.ractive.component ) hasContextChain = true;\n\n\t\t\tif ( fragment.context.has( key ) ) {\n\t\t\t\tif ( crossedComponentBoundary ) {\n\t\t\t\t\tlocalViewmodel.map( key, fragment.context.joinKey( key ) );\n\t\t\t\t}\n\n\t\t\t\treturn fragment.context.joinAll( keys );\n\t\t\t}\n\t\t}\n\n\t\tif ( fragment.componentParent && !fragment.ractive.isolated ) {\n\t\t\t// ascend through component boundary\n\t\t\tfragment = fragment.componentParent;\n\t\t\tcrossedComponentBoundary = true;\n\t\t} else {\n\t\t\tfragment = fragment.parent;\n\t\t}\n\t}\n\n\tif ( !hasContextChain ) {\n\t\treturn localViewmodel.joinAll( keys );\n\t}\n}\n","import fireEvent from 'events/fireEvent';\n\nexport default function Ractive$fire ( eventName, ...args ) {\n\tfireEvent( this, eventName, { args });\n}\n","import { enqueue, dequeue } from './eventStack';\nimport getPotentialWildcardMatches from 'utils/getPotentialWildcardMatches';\n\nvar wildcardCache = {};\n\nexport default function fireEvent ( ractive, eventName, options = {} ) {\n\tif ( !eventName ) { return; }\n\n\tif ( !options.event ) {\n\t\toptions.event = {\n\t\t\tname: eventName,\n\t\t\t// until event not included as argument default\n\t\t\t_noArg: true\n\t\t};\n\t} else {\n\t\toptions.event.name = eventName;\n\t}\n\n\tvar eventNames = getWildcardNames( eventName );\n\n\tfireEventAs( ractive, eventNames, options.event, options.args, true );\n}\n\nfunction getWildcardNames ( eventName ) {\n\tif ( wildcardCache.hasOwnProperty( eventName ) ) {\n\t\treturn wildcardCache[ eventName ];\n\t} else {\n\t\treturn wildcardCache[ eventName ] = getPotentialWildcardMatches( eventName );\n\t}\n}\n\nfunction fireEventAs  ( ractive, eventNames, event, args, initialFire = false ) {\n\n\tvar subscribers, i, bubble = true;\n\n\tenqueue( ractive, event );\n\n\tfor ( i = eventNames.length; i >= 0; i-- ) {\n\t\tsubscribers = ractive._subs[ eventNames[ i ] ];\n\n\t\tif ( subscribers ) {\n\t\t\tbubble = notifySubscribers( ractive, subscribers, event, args ) && bubble;\n\t\t}\n\t}\n\n\tdequeue( ractive );\n\n\tif ( ractive.parent && bubble ) {\n\n\t\tif ( initialFire && ractive.component ) {\n\t\t\tlet fullName = ractive.component.name + '.' + eventNames[ eventNames.length-1 ];\n\t\t\teventNames = getWildcardNames( fullName );\n\n\t\t\tif( event ) {\n\t\t\t\tevent.component = ractive;\n\t\t\t}\n\t\t}\n\n\t\tfireEventAs( ractive.parent, eventNames, event, args );\n\t}\n}\n\nfunction notifySubscribers ( ractive, subscribers, event, args ) {\n\tvar originalEvent = null, stopEvent = false;\n\n\tif ( event && !event._noArg ) {\n\t\targs = [ event ].concat( args );\n\t}\n\n\t// subscribers can be modified inflight, e.g. \"once\" functionality\n\t// so we need to copy to make sure everyone gets called\n\tsubscribers = subscribers.slice();\n\n\tfor ( let i = 0, len = subscribers.length; i < len; i += 1 ) {\n\t\tif ( subscribers[ i ].apply( ractive, args ) === false ) {\n\t\t\tstopEvent = true;\n\t\t}\n\t}\n\n\tif ( event && !event._noArg && stopEvent && ( originalEvent = event.original ) ) {\n\t\toriginalEvent.preventDefault && originalEvent.preventDefault();\n\t\toriginalEvent.stopPropagation && originalEvent.stopPropagation();\n\t}\n\n\treturn !stopEvent;\n}\n","var starMaps = {};\n\n// This function takes a keypath such as 'foo.bar.baz', and returns\n// all the variants of that keypath that include a wildcard in place\n// of a key, such as 'foo.bar.*', 'foo.*.baz', 'foo.*.*' and so on.\n// These are then checked against the dependants map (ractive.viewmodel.depsMap)\n// to see if any pattern observers are downstream of one or more of\n// these wildcard keypaths (e.g. 'foo.bar.*.status')\nexport default function getPotentialWildcardMatches ( keypath ) {\n\tvar keys, starMap, mapper, i, result, wildcardKeypath;\n\n\tkeys = keypath.split( '.' );\n\tif( !( starMap = starMaps[ keys.length ]) ) {\n\t\tstarMap = getStarMap( keys.length );\n\t}\n\n\tresult = [];\n\n\tmapper = function ( star, i ) {\n\t\treturn star ? '*' : keys[i];\n\t};\n\n\ti = starMap.length;\n\twhile ( i-- ) {\n\t\twildcardKeypath = starMap[i].map( mapper ).join( '.' );\n\n\t\tif ( !result.hasOwnProperty( wildcardKeypath ) ) {\n\t\t\tresult.push( wildcardKeypath );\n\t\t\tresult[ wildcardKeypath ] = true;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n// This function returns all the possible true/false combinations for\n// a given number - e.g. for two, the possible combinations are\n// [ true, true ], [ true, false ], [ false, true ], [ false, false ].\n// It does so by getting all the binary values between 0 and e.g. 11\nfunction getStarMap ( num ) {\n\tvar ones = '', max, binary, starMap, mapper, i, j, l, map;\n\n\tif ( !starMaps[ num ] ) {\n\t\tstarMap = [];\n\n\t\twhile ( ones.length < num ) {\n\t\t\tones += 1;\n\t\t}\n\n\t\tmax = parseInt( ones, 2 );\n\n\t\tmapper = function ( digit ) {\n\t\t\treturn digit === '1';\n\t\t};\n\n\t\tfor ( i = 0; i <= max; i += 1 ) {\n\t\t\tbinary = i.toString( 2 );\n\t\t\twhile ( binary.length < num ) {\n\t\t\t\tbinary = '0' + binary;\n\t\t\t}\n\n\t\t\tmap = [];\n\t\t\tl = binary.length;\n\t\t\tfor (j = 0; j < l; j++) {\n\t\t\t\tmap.push( mapper( binary[j] ) );\n\t\t\t}\n\t\t\tstarMap[i] = map;\n\t\t}\n\n\t\tstarMaps[ num ] = starMap;\n\t}\n\n\treturn starMaps[ num ];\n}\n\n\n\n","export function enqueue ( ractive, event ) {\n\tif ( ractive.event ) {\n\t\tractive._eventQueue.push( ractive.event );\n\t}\n\n\tractive.event = event;\n}\n\nexport function dequeue ( ractive ) {\n\tif ( ractive._eventQueue.length ) {\n\t\tractive.event = ractive._eventQueue.pop();\n\t} else {\n\t\tractive.event = null;\n\t}\n}\n","export default function Ractive$findParent ( selector ) {\n\n\tif ( this.parent ) {\n\t\tif ( this.parent.component && this.parent.component.name === selector ) {\n\t\t\treturn this.parent;\n\t\t} else {\n\t\t\treturn this.parent.findParent ( selector );\n\t\t}\n\t}\n\n\treturn null;\n}\n","export default function Ractive$findContainer ( selector ) {\n\tif ( this.container ) {\n\t\tif ( this.container.component && this.container.component.name === selector ) {\n\t\t\treturn this.container;\n\t\t} else {\n\t\t\treturn this.container.findContainer( selector );\n\t\t}\n\t}\n\n\treturn null;\n}","export default function Ractive$findComponent ( selector ) {\n\treturn this.fragment.findComponent( selector );\n}\n","import Query from './shared/Query';\n\nexport default function Ractive$findAllComponents ( selector, options ) {\n\tvar liveQueries, query;\n\n\toptions = options || {};\n\tliveQueries = this._liveComponentQueries;\n\n\t// Shortcut: if we're maintaining a live query with this\n\t// selector, we don't need to traverse the parallel DOM\n\tif ( query = liveQueries[ selector ] ) {\n\n\t\t// Either return the exact same query, or (if not live) a snapshot\n\t\treturn ( options && options.live ) ? query : query.slice();\n\t}\n\n\tquery = new Query( this, selector, !!options.live, true );\n\n\t// Add this to the list of live queries Ractive needs to maintain,\n\t// if applicable\n\tif ( query.live ) {\n\t\tliveQueries.push( selector );\n\t\tliveQueries[ '_' + selector ] = query;\n\t}\n\n\tthis.fragment.findAllComponents( selector, query );\n\n\tquery.init();\n\treturn query.result;\n}\n","import Query from './shared/Query';\n\nexport default function Ractive$findAll ( selector, options ) {\n\tvar liveQueries, query;\n\n\tif ( !this.el ) {\n\t\treturn [];\n\t}\n\n\toptions = options || {};\n\tliveQueries = this._liveQueries;\n\n\t// Shortcut: if we're maintaining a live query with this\n\t// selector, we don't need to traverse the parallel DOM\n\tif ( query = liveQueries[ selector ] ) {\n\n\t\t// Either return the exact same query, or (if not live) a snapshot\n\t\treturn ( options && options.live ) ? query : query.slice();\n\t}\n\n\tquery = new Query( this, selector, !!options.live, false );\n\n\t// Add this to the list of live queries Ractive needs to maintain,\n\t// if applicable\n\tif ( query.live ) {\n\t\tliveQueries.push( selector );\n\t\tliveQueries[ '_' + selector ] = query;\n\t}\n\n\tthis.fragment.findAll( selector, query );\n\n\tquery.init();\n\treturn query.result;\n}\n","import runloop from 'global/runloop';\nimport { lastItem } from 'utils/array';\nimport { matches } from 'utils/dom';\n\nfunction sortByDocumentPosition ( node, otherNode ) {\n\tif ( node.compareDocumentPosition ) {\n\t\tconst bitmask = node.compareDocumentPosition( otherNode );\n\t\treturn ( bitmask & 2 ) ? 1 : -1;\n\t}\n\n\t// In old IE, we can piggy back on the mechanism for\n\t// comparing component positions\n\treturn sortByItemPosition( node, otherNode );\n}\n\nfunction sortByItemPosition ( a, b ) {\n\tconst ancestryA = getAncestry( a.component || a._ractive.proxy );\n\tconst ancestryB = getAncestry( b.component || b._ractive.proxy );\n\n\tlet oldestA = lastItem( ancestryA );\n\tlet oldestB = lastItem( ancestryB );\n\tlet mutualAncestor;\n\n\t// remove items from the end of both ancestries as long as they are identical\n\t// - the final one removed is the closest mutual ancestor\n\twhile ( oldestA && ( oldestA === oldestB ) ) {\n\t\tancestryA.pop();\n\t\tancestryB.pop();\n\n\t\tmutualAncestor = oldestA;\n\n\t\toldestA = lastItem( ancestryA );\n\t\toldestB = lastItem( ancestryB );\n\t}\n\n\t// now that we have the mutual ancestor, we can find which is earliest\n\toldestA = oldestA.component || oldestA;\n\toldestB = oldestB.component || oldestB;\n\n\tconst fragmentA = oldestA.parentFragment;\n\tconst fragmentB = oldestB.parentFragment;\n\n\t// if both items share a parent fragment, our job is easy\n\tif ( fragmentA === fragmentB ) {\n\t\tconst indexA = fragmentA.items.indexOf( oldestA );\n\t\tconst indexB = fragmentB.items.indexOf( oldestB );\n\n\t\t// if it's the same index, it means one contains the other,\n\t\t// so we see which has the longest ancestry\n\t\treturn ( indexA - indexB ) || ancestryA.length - ancestryB.length;\n\t}\n\n\t// if mutual ancestor is a section, we first test to see which section\n\t// fragment comes first\n\tconst fragments = mutualAncestor.iterations;\n\tif ( fragments ) {\n\t\tconst indexA = fragments.indexOf( fragmentA );\n\t\tconst indexB = fragments.indexOf( fragmentB );\n\n\t\treturn ( indexA - indexB ) || ancestryA.length - ancestryB.length;\n\t}\n\n\tthrow new Error( 'An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!' );\n}\n\nfunction getParent ( item ) {\n\tvar parentFragment;\n\n\tif ( parentFragment = item.parentFragment ) {\n\t\treturn parentFragment.owner;\n\t}\n\n\tif ( item.component && ( parentFragment = item.component.parentFragment ) ) {\n\t\treturn parentFragment.owner;\n\t}\n}\n\nfunction getAncestry ( item ) {\n\tvar ancestry, ancestor;\n\n\tancestry = [ item ];\n\n\tancestor = getParent( item );\n\n\twhile ( ancestor ) {\n\t\tancestry.push( ancestor );\n\t\tancestor = getParent( ancestor );\n\t}\n\n\treturn ancestry;\n}\n\n\nexport default class Query {\n\tconstructor ( ractive, selector, live, isComponentQuery ) {\n\t\tthis.ractive = ractive;\n\t\tthis.selector = selector;\n\t\tthis.live = live;\n\t\tthis.isComponentQuery = isComponentQuery;\n\n\t\tthis.result = [];\n\n\t\tthis.dirty = true;\n\t}\n\n\tadd ( item ) {\n\t\tthis.result.push( item );\n\t\tthis.makeDirty();\n\t}\n\n\tcancel () {\n\t\tvar liveQueries, selector, index;\n\n\t\tliveQueries = this._root[ this.isComponentQuery ? 'liveComponentQueries' : 'liveQueries' ];\n\t\tselector = this.selector;\n\n\t\tindex = liveQueries.indexOf( selector );\n\n\t\tif ( index !== -1 ) {\n\t\t\tliveQueries.splice( index, 1 );\n\t\t\tliveQueries[ selector ] = null;\n\t\t}\n\t}\n\n\tinit () {\n\t\tthis.dirty = false;\n\t}\n\n\tmakeDirty () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\n\t\t\t// Once the DOM has been updated, ensure the query\n\t\t\t// is correctly ordered\n\t\t\trunloop.scheduleTask( () => this.update() );\n\t\t}\n\t}\n\n\tremove ( nodeOrComponent ) {\n\t\tvar index = this.result.indexOf( this.isComponentQuery ? nodeOrComponent.instance : nodeOrComponent );\n\n\t\tif ( index !== -1 ) {\n\t\t\tthis.result.splice( index, 1 );\n\t\t}\n\t}\n\n\tupdate () {\n\t\tthis.result.sort( this.isComponentQuery ? sortByItemPosition : sortByDocumentPosition );\n\t\tthis.dirty = false;\n\t}\n\n\ttest ( item ) {\n\t\treturn this.isComponentQuery ?\n\t\t\t( !this.selector || item.name === this.selector ) :\n\t\t\t( item ? matches( item, this.selector ) : null );\n\t}\n}\n","export default function Ractive$find ( selector ) {\n\tif ( !this.el ) {\n\t\treturn null;\n\t}\n\n\treturn this.fragment.find( selector );\n}\n","import Hook from 'events/Hook';\nimport { removeFromArray } from 'utils/array';\n\nvar detachHook = new Hook( 'detach' );\n\nexport default function Ractive$detach () {\n\tif ( this.isDetached ) {\n\t\treturn this.el;\n\t}\n\n\tif ( this.el ) {\n\t\tremoveFromArray( this.el.__ractive_instances__, this );\n\t}\n\n\tthis.el = this.fragment.detach();\n\tthis.isDetached = true;\n\n\tdetachHook.fire( this );\n\treturn this.el;\n}\n","import animations from 'shared/animations';\nimport Animation from './animate/Animation';\nimport { isEqual } from 'utils/is';\nimport { normalise } from 'shared/keypaths';\nimport Promise from 'utils/Promise';\nimport noop from 'utils/noop';\n\nvar noAnimation = { stop: noop };\n\nexport default function Ractive$animate ( keypath, to, options ) {\n\tvar promise,\n\t\tfulfilPromise,\n\t\tk,\n\t\tanimation,\n\t\tanimations,\n\t\teasing,\n\t\tduration,\n\t\tstep,\n\t\tcomplete,\n\t\tmakeValueCollector,\n\t\tcurrentValues,\n\t\tcollectValue,\n\t\tdummy,\n\t\tdummyOptions;\n\n\tpromise = new Promise( fulfil => fulfilPromise = fulfil );\n\n\t// animate multiple keypaths\n\tif ( typeof keypath === 'object' ) {\n\t\toptions = to || {};\n\t\teasing = options.easing;\n\t\tduration = options.duration;\n\n\t\tanimations = [];\n\n\t\t// we don't want to pass the `step` and `complete` handlers, as they will\n\t\t// run for each animation! So instead we'll store the handlers and create\n\t\t// our own...\n\t\tstep = options.step;\n\t\tcomplete = options.complete;\n\n\t\tif ( step || complete ) {\n\t\t\tcurrentValues = {};\n\n\t\t\toptions.step = null;\n\t\t\toptions.complete = null;\n\n\t\t\tmakeValueCollector = function ( keypath ) {\n\t\t\t\treturn function ( t, value ) {\n\t\t\t\t\tcurrentValues[ keypath ] = value;\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\n\t\tfor ( k in keypath ) {\n\t\t\tif ( keypath.hasOwnProperty( k ) ) {\n\t\t\t\tif ( step || complete ) {\n\t\t\t\t\tcollectValue = makeValueCollector( k );\n\t\t\t\t\toptions = { easing, duration };\n\n\t\t\t\t\tif ( step ) {\n\t\t\t\t\t\toptions.step = collectValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toptions.complete = complete ? collectValue : noop;\n\t\t\t\tanimations.push( animate( this, k, keypath[k], options ) );\n\t\t\t}\n\t\t}\n\n\t\t// Create a dummy animation, to facilitate step/complete\n\t\t// callbacks, and Promise fulfilment\n\t\tdummyOptions = { easing, duration };\n\n\t\tif ( step ) {\n\t\t\tdummyOptions.step = t => step( t, currentValues );\n\t\t}\n\n\t\tif ( complete ) {\n\t\t\tpromise.then( t => complete( t, currentValues ) );\n\t\t}\n\n\t\tdummyOptions.complete = fulfilPromise;\n\n\t\tdummy = animate( this, null, null, dummyOptions );\n\t\tanimations.push( dummy );\n\n\t\tpromise.stop = () => {\n\t\t\tvar animation;\n\n\t\t\twhile ( animation = animations.pop() ) {\n\t\t\t\tanimation.stop();\n\t\t\t}\n\n\t\t\tif ( dummy ) {\n\t\t\t\tdummy.stop();\n\t\t\t}\n\t\t};\n\n\t\treturn promise;\n\t}\n\n\t// animate a single keypath\n\toptions = options || {};\n\n\tif ( options.complete ) {\n\t\tpromise.then( options.complete );\n\t}\n\n\toptions.complete = fulfilPromise;\n\tanimation = animate( this, keypath, to, options );\n\n\tpromise.stop = () => animation.stop();\n\treturn promise;\n}\n\nfunction animate ( root, keypath, to, options ) {\n\tvar easing, duration, animation, from;\n\n\tlet model;\n\n\tif ( keypath ) {\n\t\t// TODO revisit 'dummy' approach to handling multiple\n\t\t// animations? this seems kind of hokey\n\t\tmodel = root.viewmodel.joinAll( normalise( keypath ).split( '.' ) );\n\t\tfrom = model.get();\n\n\t\t// cancel any existing animation\n\t\t// TODO what about upstream/downstream keypaths?\n\t\tanimations.abort( model, root );\n\t}\n\n\t// don't bother animating values that stay the same\n\tif ( isEqual( from, to ) ) {\n\t\tif ( options.complete ) {\n\t\t\toptions.complete( options.to );\n\t\t}\n\n\t\treturn noAnimation;\n\t}\n\n\t// easing function\n\tif ( options.easing ) {\n\t\tif ( typeof options.easing === 'function' ) {\n\t\t\teasing = options.easing;\n\t\t}\n\n\t\telse {\n\t\t\teasing = root.easing[ options.easing ];\n\t\t}\n\n\t\tif ( typeof easing !== 'function' ) {\n\t\t\teasing = null;\n\t\t}\n\t}\n\n\t// duration\n\tduration = ( options.duration === undefined ? 400 : options.duration );\n\n\t// TODO store keys, use an internal set method\n\tanimation = new Animation({\n\t\tmodel,\n\t\tfrom,\n\t\tto,\n\t\troot,\n\t\tduration,\n\t\teasing,\n\t\tinterpolator: options.interpolator,\n\n\t\t// TODO wrap callbacks if necessary, to use instance as context\n\t\tstep: options.step,\n\t\tcomplete: options.complete\n\t});\n\n\tanimations.add( animation );\n\troot._animations.push( animation );\n\n\treturn animation;\n}\n","import { warnIfDebug } from 'utils/log';\nimport runloop from 'global/runloop';\nimport interpolate from 'shared/interpolate';\n\nvar Animation = function ( options ) {\n\tvar key;\n\n\tthis.startTime = Date.now();\n\n\t// from and to\n\tfor ( key in options ) {\n\t\tif ( options.hasOwnProperty( key ) ) {\n\t\t\tthis[ key ] = options[ key ];\n\t\t}\n\t}\n\n\tthis.interpolator = interpolate( this.from, this.to, this.root, this.interpolator );\n\tthis.running = true;\n\n\tthis.tick();\n};\n\nAnimation.prototype = {\n\ttick: function () {\n\t\tvar elapsed, t, value, timeNow, index, keypath;\n\n\t\tkeypath = this.keypath;\n\n\t\tif ( this.running ) {\n\t\t\ttimeNow = Date.now();\n\t\t\telapsed = timeNow - this.startTime;\n\n\t\t\tif ( elapsed >= this.duration ) {\n\t\t\t\tif ( keypath !== null ) {\n\t\t\t\t\trunloop.start( this.root );\n\n\t\t\t\t\tif ( this.model ) {\n\t\t\t\t\t\tthis.model.set( this.to );\n\t\t\t\t\t}\n\n\t\t\t\t\trunloop.end();\n\t\t\t\t}\n\n\t\t\t\tif ( this.step ) {\n\t\t\t\t\tthis.step( 1, this.to );\n\t\t\t\t}\n\n\t\t\t\tthis.complete( this.to );\n\n\t\t\t\tindex = this.root._animations.indexOf( this );\n\n\t\t\t\t// TODO investigate why this happens\n\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\twarnIfDebug( 'Animation was not found' );\n\t\t\t\t}\n\n\t\t\t\tthis.root._animations.splice( index, 1 );\n\n\t\t\t\tthis.running = false;\n\t\t\t\treturn false; // remove from the stack\n\t\t\t}\n\n\t\t\tt = this.easing ? this.easing ( elapsed / this.duration ) : ( elapsed / this.duration );\n\n\t\t\tif ( keypath !== null ) {\n\t\t\t\tvalue = this.interpolator( t );\n\t\t\t\trunloop.start( this.root );\n\n\t\t\t\tif ( this.model ) {\n\t\t\t\t\tthis.model.set( value );\n\t\t\t\t}\n\n\t\t\t\trunloop.end();\n\t\t\t}\n\n\t\t\tif ( this.step ) {\n\t\t\t\tthis.step( t, value );\n\t\t\t}\n\n\t\t\treturn true; // keep in the stack\n\t\t}\n\n\t\treturn false; // remove from the stack\n\t},\n\n\tstop: function () {\n\t\tvar index;\n\n\t\tthis.running = false;\n\n\t\tindex = this.root._animations.indexOf( this );\n\n\t\t// TODO investigate why this happens\n\t\tif ( index === -1 ) {\n\t\t\twarnIfDebug( 'Animation was not found' );\n\t\t}\n\n\t\tthis.root._animations.splice( index, 1 );\n\t}\n};\n\nexport default Animation;\n","import rAF from 'utils/requestAnimationFrame';\nimport getTime from 'utils/getTime';\nimport runloop from 'global/runloop';\n\nvar queue = [];\n\nvar animations = {\n\ttick: function () {\n\t\tvar i, animation, now;\n\n\t\tnow = getTime();\n\n\t\trunloop.start();\n\n\t\tfor ( i=0; i<queue.length; i+=1 ) {\n\t\t\tanimation = queue[i];\n\n\t\t\tif ( !animation.tick( now ) ) {\n\t\t\t\t// animation is complete, remove it from the stack, and decrement i so we don't miss one\n\t\t\t\tqueue.splice( i--, 1 );\n\t\t\t}\n\t\t}\n\n\t\trunloop.end();\n\n\t\tif ( queue.length ) {\n\t\t\trAF( animations.tick );\n\t\t} else {\n\t\t\tanimations.running = false;\n\t\t}\n\t},\n\n\tadd: function ( animation ) {\n\t\tqueue.push( animation );\n\n\t\tif ( !animations.running ) {\n\t\t\tanimations.running = true;\n\t\t\trAF( animations.tick );\n\t\t}\n\t},\n\n\t// TODO optimise this\n\tabort: function ( model, root ) {\n\t\tvar i = queue.length, animation;\n\n\t\twhile ( i-- ) {\n\t\t\tanimation = queue[i];\n\n\t\t\tif ( animation.root === root && animation.model === model ) {\n\t\t\t\tanimation.stop();\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default animations;\n","import Hook from 'events/Hook';\nimport { addToArray } from 'utils/array';\nimport Promise from 'utils/Promise';\nimport TransitionManager from './TransitionManager';\n\nconst changeHook = new Hook( 'change' );\n\nlet batch;\n\nconst runloop = {\n\tstart ( instance, returnPromise ) {\n\t\tvar promise, fulfilPromise;\n\n\t\tif ( returnPromise ) {\n\t\t\tpromise = new Promise( f => ( fulfilPromise = f ) );\n\t\t}\n\n\t\tbatch = {\n\t\t\tpreviousBatch: batch,\n\t\t\ttransitionManager: new TransitionManager( fulfilPromise, batch && batch.transitionManager ),\n\t\t\tfragments: [],\n\t\t\ttasks: [],\n\t\t\timmediateObservers: [],\n\t\t\tdeferredObservers: [],\n\t\t\tinstance: instance\n\t\t};\n\n\t\treturn promise;\n\t},\n\n\tend () {\n\t\tflushChanges();\n\n\t\tbatch.transitionManager.init();\n\t\tbatch = batch.previousBatch;\n\t},\n\n\taddFragment ( fragment ) {\n\t\taddToArray( batch.fragments, fragment );\n\t},\n\n\taddObserver ( observer, defer ) {\n\t\taddToArray( defer ? batch.deferredObservers : batch.immediateObservers, observer );\n\t},\n\n\tregisterTransition ( transition ) {\n\t\ttransition._manager = batch.transitionManager;\n\t\tbatch.transitionManager.add( transition );\n\t},\n\n\tregisterDecorator ( decorator ) {\n\t\tbatch.transitionManager.addDecorator( decorator );\n\t},\n\n\t// synchronise node detachments with transition ends\n\tdetachWhenReady ( thing ) {\n\t\tbatch.transitionManager.detachQueue.push( thing );\n\t},\n\n\tscheduleTask ( task, postRender ) {\n\t\tvar _batch;\n\n\t\tif ( !batch ) {\n\t\t\ttask();\n\t\t} else {\n\t\t\t_batch = batch;\n\t\t\twhile ( postRender && _batch.previousBatch ) {\n\t\t\t\t// this can't happen until the DOM has been fully updated\n\t\t\t\t// otherwise in some situations (with components inside elements)\n\t\t\t\t// transitions and decorators will initialise prematurely\n\t\t\t\t_batch = _batch.previousBatch;\n\t\t\t}\n\n\t\t\t_batch.tasks.push( task );\n\t\t}\n\t}\n};\n\nexport default runloop;\n\nfunction dispatch ( observer ) {\n\tobserver.dispatch();\n}\n\nfunction flushChanges () {\n\tvar i, thing, changeHash;\n\n\tbatch.immediateObservers.forEach( dispatch );\n\n\t// Now that changes have been fully propagated, we can update the DOM\n\t// and complete other tasks\n\ti = batch.fragments.length;\n\twhile ( i-- ) {\n\t\tthing = batch.fragments[i];\n\n\t\t// TODO deprecate this. It's annoying and serves no useful function\n\t\tconst ractive = thing.ractive;\n\t\tchangeHook.fire( ractive, ractive.viewmodel.changes );\n\t\tractive.viewmodel.changes = {};\n\n\t\tthing.update();\n\t}\n\tbatch.fragments.length = 0;\n\n\tbatch.transitionManager.start();\n\n\tbatch.deferredObservers.forEach( dispatch );\n\n\tconst tasks = batch.tasks;\n\tbatch.tasks = [];\n\n\tfor ( i = 0; i < tasks.length; i += 1 ) {\n\t\ttasks[i]();\n\t}\n\n\t// If updating the view caused some model blowback - e.g. a triple\n\t// containing <option> elements caused the binding on the <select>\n\t// to update - then we start over\n\tif ( batch.fragments.length ) return flushChanges();\n}\n","import { removeFromArray } from 'utils/array';\nimport { teardown } from 'shared/methodCallers';\n\nexport default class TransitionManager {\n\tconstructor ( callback, parent ) {\n\t\tthis.callback = callback;\n\t\tthis.parent = parent;\n\n\t\tthis.intros = [];\n\t\tthis.outros = [];\n\n\t\tthis.children = [];\n\t\tthis.totalChildren = this.outroChildren = 0;\n\n\t\tthis.detachQueue = [];\n\t\tthis.decoratorQueue = [];\n\t\tthis.outrosComplete = false;\n\n\t\tif ( parent ) {\n\t\t\tparent.addChild( this );\n\t\t}\n\t}\n\n\tadd ( transition ) {\n\t\tvar list = transition.isIntro ? this.intros : this.outros;\n\t\tlist.push( transition );\n\t}\n\n\taddChild ( child ) {\n\t\tthis.children.push( child );\n\n\t\tthis.totalChildren += 1;\n\t\tthis.outroChildren += 1;\n\t}\n\n\t// TODO can we move decorator stuff to element detach() methods?\n\taddDecorator ( decorator ) {\n\t\tthis.decoratorQueue.push( decorator );\n\t}\n\n\tdecrementOutros () {\n\t\tthis.outroChildren -= 1;\n\t\tcheck( this );\n\t}\n\n\tdecrementTotal () {\n\t\tthis.totalChildren -= 1;\n\t\tcheck( this );\n\t}\n\n\tdetachNodes () {\n\t\tthis.decoratorQueue.forEach( teardown );\n\t\tthis.detachQueue.forEach( detach );\n\t\tthis.children.forEach( detachNodes );\n\t}\n\n\tinit () {\n\t\tthis.ready = true;\n\t\tcheck( this );\n\t}\n\n\tremove ( transition ) {\n\t\tvar list = transition.isIntro ? this.intros : this.outros;\n\t\tremoveFromArray( list, transition );\n\t\tcheck( this );\n\t}\n\n\tstart () {\n\t\tthis.intros.concat( this.outros ).forEach( t => t.start() );\n\t}\n}\n\nfunction detach ( element ) {\n\telement.detach();\n}\n\nfunction detachNodes ( tm ) {\n\ttm.detachNodes();\n}\n\nfunction check ( tm ) {\n\tif ( !tm.ready || tm.outros.length || tm.outroChildren ) return;\n\n\t// If all outros are complete, and we haven't already done this,\n\t// we notify the parent if there is one, otherwise\n\t// start detaching nodes\n\tif ( !tm.outrosComplete ) {\n\t\tif ( tm.parent ) {\n\t\t\ttm.parent.decrementOutros( tm );\n\t\t} else {\n\t\t\ttm.detachNodes();\n\t\t}\n\n\t\ttm.outrosComplete = true;\n\t}\n\n\t// Once everything is done, we can notify parent transition\n\t// manager and call the callback\n\tif ( !tm.intros.length && !tm.totalChildren ) {\n\t\tif ( typeof tm.callback === 'function' ) {\n\t\t\ttm.callback();\n\t\t}\n\n\t\tif ( tm.parent ) {\n\t\t\ttm.parent.decrementTotal();\n\t\t}\n\t}\n}\n","export function bind               ( x ) { x.bind(); }\nexport function cancel             ( x ) { x.cancel(); }\nexport function handleChange       ( x ) { x.handleChange(); }\nexport function mark               ( x ) { x.mark(); }\nexport function render             ( x ) { x.render(); }\nexport function rebind             ( x ) { x.rebind(); }\nexport function teardown           ( x ) { x.teardown(); }\nexport function unbind             ( x ) { x.unbind(); }\nexport function unrender           ( x ) { x.unrender(); }\nexport function unrenderAndDestroy ( x ) { x.unrender( true ); }\nexport function update             ( x ) { x.update(); }\nexport function toString           ( x ) { return x.toString(); }\nexport function toEscapedString    ( x ) { return x.toString( true ); }\n","var _Promise,\n\tPENDING = {},\n\tFULFILLED = {},\n\tREJECTED = {};\n\nif ( typeof Promise === 'function' ) {\n\t// use native Promise\n\t_Promise = Promise;\n} else {\n\t_Promise = function ( callback ) {\n\t\tvar fulfilledHandlers = [],\n\t\t\trejectedHandlers = [],\n\t\t\tstate = PENDING,\n\n\t\t\tresult,\n\t\t\tdispatchHandlers,\n\t\t\tmakeResolver,\n\t\t\tfulfil,\n\t\t\treject,\n\n\t\t\tpromise;\n\n\t\tmakeResolver = function ( newState ) {\n\t\t\treturn function ( value ) {\n\t\t\t\tif ( state !== PENDING ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult = value;\n\t\t\t\tstate = newState;\n\n\t\t\t\tdispatchHandlers = makeDispatcher( ( state === FULFILLED ? fulfilledHandlers : rejectedHandlers ), result );\n\n\t\t\t\t// dispatch onFulfilled and onRejected handlers asynchronously\n\t\t\t\twait( dispatchHandlers );\n\t\t\t};\n\t\t};\n\n\t\tfulfil = makeResolver( FULFILLED );\n\t\treject = makeResolver( REJECTED );\n\n\t\ttry {\n\t\t\tcallback( fulfil, reject );\n\t\t} catch ( err ) {\n\t\t\treject( err );\n\t\t}\n\n\t\tpromise = {\n\t\t\t// `then()` returns a Promise - 2.2.7\n\t\t\tthen: function ( onFulfilled, onRejected ) {\n\t\t\t\tvar promise2 = new _Promise( function ( fulfil, reject ) {\n\n\t\t\t\t\tvar processResolutionHandler = function ( handler, handlers, forward ) {\n\n\t\t\t\t\t\t// 2.2.1.1\n\t\t\t\t\t\tif ( typeof handler === 'function' ) {\n\t\t\t\t\t\t\thandlers.push( function ( p1result ) {\n\t\t\t\t\t\t\t\tvar x;\n\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tx = handler( p1result );\n\t\t\t\t\t\t\t\t\tresolve( promise2, x, fulfil, reject );\n\t\t\t\t\t\t\t\t} catch ( err ) {\n\t\t\t\t\t\t\t\t\treject( err );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Forward the result of promise1 to promise2, if resolution handlers\n\t\t\t\t\t\t\t// are not given\n\t\t\t\t\t\t\thandlers.push( forward );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// 2.2\n\t\t\t\t\tprocessResolutionHandler( onFulfilled, fulfilledHandlers, fulfil );\n\t\t\t\t\tprocessResolutionHandler( onRejected, rejectedHandlers, reject );\n\n\t\t\t\t\tif ( state !== PENDING ) {\n\t\t\t\t\t\t// If the promise has resolved already, dispatch the appropriate handlers asynchronously\n\t\t\t\t\t\twait( dispatchHandlers );\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\treturn promise2;\n\t\t\t}\n\t\t};\n\n\t\tpromise[ 'catch' ] = function ( onRejected ) {\n\t\t\treturn this.then( null, onRejected );\n\t\t};\n\n\t\treturn promise;\n\t};\n\n\t_Promise.all = function ( promises ) {\n\t\treturn new _Promise( function ( fulfil, reject ) {\n\t\t\tvar result = [], pending, i, processPromise;\n\n\t\t\tif ( !promises.length ) {\n\t\t\t\tfulfil( result );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprocessPromise = ( promise, i ) => {\n\t\t\t\tif ( promise && typeof promise.then === 'function' ) {\n\t\t\t\t\tpromise.then( value => {\n\t\t\t\t\t\tresult[i] = value;\n\t\t\t\t\t\t--pending || fulfil( result );\n\t\t\t\t\t}, reject );\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tresult[i] = promise;\n\t\t\t\t\t--pending || fulfil( result );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tpending = i = promises.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tprocessPromise( promises[i], i );\n\t\t\t}\n\t\t});\n\t};\n\n\t_Promise.resolve = function ( value ) {\n\t\treturn new _Promise( function ( fulfil ) {\n\t\t\tfulfil( value );\n\t\t});\n\t};\n\n\t_Promise.reject = function ( reason ) {\n\t\treturn new _Promise( function ( fulfil, reject ) {\n\t\t\treject( reason );\n\t\t});\n\t};\n}\n\nexport default _Promise;\n\n// TODO use MutationObservers or something to simulate setImmediate\nfunction wait ( callback ) {\n\tsetTimeout( callback, 0 );\n}\n\nfunction makeDispatcher ( handlers, result ) {\n\treturn function () {\n\t\tvar handler;\n\n\t\twhile ( handler = handlers.shift() ) {\n\t\t\thandler( result );\n\t\t}\n\t};\n}\n\nfunction resolve ( promise, x, fulfil, reject ) {\n\t// Promise Resolution Procedure\n\tvar then;\n\n\t// 2.3.1\n\tif ( x === promise ) {\n\t\tthrow new TypeError( 'A promise\\'s fulfillment handler cannot return the same promise' );\n\t}\n\n\t// 2.3.2\n\tif ( x instanceof _Promise ) {\n\t\tx.then( fulfil, reject );\n\t}\n\n\t// 2.3.3\n\telse if ( x && ( typeof x === 'object' || typeof x === 'function' ) ) {\n\t\ttry {\n\t\t\tthen = x.then; // 2.3.3.1\n\t\t} catch ( e ) {\n\t\t\treject( e ); // 2.3.3.2\n\t\t\treturn;\n\t\t}\n\n\t\t// 2.3.3.3\n\t\tif ( typeof then === 'function' ) {\n\t\t\tvar called, resolvePromise, rejectPromise;\n\n\t\t\tresolvePromise = function ( y ) {\n\t\t\t\tif ( called ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcalled = true;\n\t\t\t\tresolve( promise, y, fulfil, reject );\n\t\t\t};\n\n\t\t\trejectPromise = function ( r ) {\n\t\t\t\tif ( called ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcalled = true;\n\t\t\t\treject( r );\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tthen.call( x, resolvePromise, rejectPromise );\n\t\t\t} catch ( e ) {\n\t\t\t\tif ( !called ) { // 2.3.3.3.4.1\n\t\t\t\t\treject( e ); // 2.3.3.3.4.2\n\t\t\t\t\tcalled = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tfulfil( x );\n\t\t}\n\t}\n\n\telse {\n\t\tfulfil( x );\n\t}\n}\n","import { isArray } from 'utils/is';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\nif (!Array.prototype.find) {\n\tArray.prototype.find = function(predicate) {\n\t\tif (this == null) {\n\t\tthrow new TypeError('Array.prototype.find called on null or undefined');\n\t\t}\n\t\tif (typeof predicate !== 'function') {\n\t\tthrow new TypeError('predicate must be a function');\n\t\t}\n\t\tvar list = Object(this);\n\t\tvar length = list.length >>> 0;\n\t\tvar thisArg = arguments[1];\n\t\tvar value;\n\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tif (i in list) {\n\t\t\t\tvalue = list[i];\n\t\t\t\tif (predicate.call(thisArg, value, i, list)) {\n\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t};\n}\n\nexport function addToArray ( array, value ) {\n\tvar index = array.indexOf( value );\n\n\tif ( index === -1 ) {\n\t\tarray.push( value );\n\t}\n}\n\nexport function arrayContains ( array, value ) {\n\tfor ( let i = 0, c = array.length; i < c; i++ ) {\n\t\tif ( array[i] == value ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n    return false;\n}\n\nexport function arrayContentsMatch ( a, b ) {\n\tvar i;\n\n\tif ( !isArray( a ) || !isArray( b ) ) {\n\t\treturn false;\n\t}\n\n\tif ( a.length !== b.length ) {\n\t\treturn false;\n\t}\n\n\ti = a.length;\n\twhile ( i-- ) {\n\t\tif ( a[i] !== b[i] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport function ensureArray ( x ) {\n\tif ( typeof x === 'string' ) {\n\t\treturn [ x ];\n\t}\n\n\tif ( x === undefined ) {\n\t\treturn [];\n\t}\n\n\treturn x;\n}\n\nexport function lastItem ( array ) {\n\treturn array[ array.length - 1 ];\n}\n\nexport function removeFromArray ( array, member ) {\n\tif ( !array ) {\n\t\treturn;\n\t}\n\n\tconst index = array.indexOf( member );\n\n\tif ( index !== -1 ) {\n\t\tarray.splice( index, 1 );\n\t}\n}\n\nexport function toArray ( arrayLike ) {\n\tvar array = [], i = arrayLike.length;\n\twhile ( i-- ) {\n\t\tarray[i] = arrayLike[i];\n\t}\n\n\treturn array;\n}\n","import { warnIfDebug } from 'utils/log';\n\n// TODO: deprecate in future release\nconst deprecations = {\n\tconstruct: {\n\t\tdeprecated: 'beforeInit',\n\t\treplacement: 'onconstruct'\n\t},\n\trender: {\n\t\tdeprecated: 'init',\n\t\tmessage: 'The \"init\" method has been deprecated ' +\n\t\t\t'and will likely be removed in a future release. ' +\n\t\t\t'You can either use the \"oninit\" method which will fire ' +\n\t\t\t'only once prior to, and regardless of, any eventual ractive ' +\n\t\t\t'instance being rendered, or if you need to access the ' +\n\t\t\t'rendered DOM, use \"onrender\" instead. ' +\n\t\t\t'See http://docs.ractivejs.org/latest/migrating for more information.'\n\t},\n\tcomplete: {\n\t\tdeprecated: 'complete',\n\t\treplacement: 'oncomplete'\n\t}\n};\n\nexport default class Hook {\n\tconstructor ( event ) {\n\t\tthis.event = event;\n\t\tthis.method = 'on' + event;\n\t\tthis.deprecate = deprecations[ event ];\n\t}\n\n\tcall ( method, ractive, arg ) {\n\t\tif ( ractive[ method ] ) {\n\t\t\targ ? ractive[ method ]( arg ) : ractive[ method ]();\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tfire ( ractive, arg ) {\n\t\tthis.call( this.method, ractive, arg );\n\n\t\t// handle deprecations\n\t\tif ( !ractive[ this.method ] && this.deprecate && this.call( this.deprecate.deprecated, ractive, arg ) ) {\n\t\t\tif ( this.deprecate.message ) {\n\t\t\t\twarnIfDebug( this.deprecate.message );\n\t\t\t} else {\n\t\t\t\twarnIfDebug( 'The method \"%s\" has been deprecated in favor of \"%s\" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.', this.deprecate.deprecated, this.deprecate.replacement );\n\t\t\t}\n\t\t}\n\n\t\t// TODO should probably use internal method, in case ractive.fire was overwritten\n\t\targ ? ractive.fire( this.event, arg ) : ractive.fire( this.event );\n\t}\n}\n","import { win } from 'config/environment';\n\nconst getTime = ( win && win.performance && typeof win.performance.now === 'function' ) ?\n\t() => win.performance.now() :\n\t() => Date.now();\n\nexport default getTime;\n","import { vendors, win } from 'config/environment';\n\nvar requestAnimationFrame;\n\n// If window doesn't exist, we don't need requestAnimationFrame\nif ( !win ) {\n\trequestAnimationFrame = null;\n} else {\n\t// https://gist.github.com/paulirish/1579671\n\t(function(vendors, lastTime, win) {\n\n\t\tvar x, setTimeout;\n\n\t\tif ( win.requestAnimationFrame ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( x = 0; x < vendors.length && !win.requestAnimationFrame; ++x ) {\n\t\t\twin.requestAnimationFrame = win[vendors[x]+'RequestAnimationFrame'];\n\t\t}\n\n\t\tif ( !win.requestAnimationFrame ) {\n\t\t\tsetTimeout = win.setTimeout;\n\n\t\t\twin.requestAnimationFrame = function(callback) {\n\t\t\t\tvar currTime, timeToCall, id;\n\n\t\t\t\tcurrTime = Date.now();\n\t\t\t\ttimeToCall = Math.max( 0, 16 - (currTime - lastTime ) );\n\t\t\t\tid = setTimeout( function() { callback(currTime + timeToCall); }, timeToCall );\n\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t\t};\n\t\t}\n\n\t}( vendors, 0, win ));\n\n\trequestAnimationFrame = win.requestAnimationFrame;\n}\n\nexport default requestAnimationFrame;\n","import add from './shared/add';\n\nexport default function Ractive$add ( keypath, d ) {\n\treturn add( this, keypath, ( d === undefined ? 1 : +d ) );\n}\n","import { isNumeric } from 'utils/is';\nimport { splitKeypath } from 'shared/keypaths';\n\nconst errorMessage = 'Cannot add to a non-numeric value';\n\nexport default function add ( ractive, keypath, d ) {\n\tif ( typeof keypath !== 'string' || !isNumeric( d ) ) {\n\t\tthrow new Error( 'Bad arguments' );\n\t}\n\n\tif ( /\\*/.test( keypath ) ) {\n\t\tlet changes = {};\n\n\t\tractive.viewmodel.findMatches( splitKeypath( keypath ) ).forEach( model => {\n\t\t\tconst value = model.get();\n\n\t\t\tif ( !isNumeric( value ) ) throw new Error( errorMessage );\n\n\t\t\tchanges[ model.getKeypath() ] = value + d;\n\t\t});\n\n\t\treturn ractive.set( changes );\n\t}\n\n\tconst value = ractive.get( keypath );\n\n\tif ( !isNumeric( value ) ) {\n\t\tthrow new Error( errorMessage );\n\t}\n\n\treturn ractive.set( keypath, +value + d );\n}\n","let refPattern = /\\[\\s*(\\*|[0-9]|[1-9][0-9]+)\\s*\\]/g;\n\nexport function normalise ( ref ) {\n\treturn ref ? ref.replace( refPattern, '.$1' ) : '';\n}\n\nexport function splitKeypath ( keypath ) {\n\treturn normalise( keypath ).split( '.' );\n}\n","import { hasOwn } from 'utils/object';\nimport { isArray, isObject, isNumeric } from 'utils/is';\nimport interpolate from 'shared/interpolate';\n\nvar interpolators = {\n\tnumber: function ( from, to ) {\n\t\tvar delta;\n\n\t\tif ( !isNumeric( from ) || !isNumeric( to ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tfrom = +from;\n\t\tto = +to;\n\n\t\tdelta = to - from;\n\n\t\tif ( !delta ) {\n\t\t\treturn function () { return from; };\n\t\t}\n\n\t\treturn function ( t ) {\n\t\t\treturn from + ( t * delta );\n\t\t};\n\t},\n\n\tarray: function ( from, to ) {\n\t\tvar intermediate, interpolators, len, i;\n\n\t\tif ( !isArray( from ) || !isArray( to ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tintermediate = [];\n\t\tinterpolators = [];\n\n\t\ti = len = Math.min( from.length, to.length );\n\t\twhile ( i-- ) {\n\t\t\tinterpolators[i] = interpolate( from[i], to[i] );\n\t\t}\n\n\t\t// surplus values - don't interpolate, but don't exclude them either\n\t\tfor ( i=len; i<from.length; i+=1 ) {\n\t\t\tintermediate[i] = from[i];\n\t\t}\n\n\t\tfor ( i=len; i<to.length; i+=1 ) {\n\t\t\tintermediate[i] = to[i];\n\t\t}\n\n\t\treturn function ( t ) {\n\t\t\tvar i = len;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tintermediate[i] = interpolators[i]( t );\n\t\t\t}\n\n\t\t\treturn intermediate;\n\t\t};\n\t},\n\n\tobject: function ( from, to ) {\n\t\tvar properties, len, interpolators, intermediate, prop;\n\n\t\tif ( !isObject( from ) || !isObject( to ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tproperties = [];\n\t\tintermediate = {};\n\t\tinterpolators = {};\n\n\t\tfor ( prop in from ) {\n\t\t\tif ( hasOwn.call( from, prop ) ) {\n\t\t\t\tif ( hasOwn.call( to, prop ) ) {\n\t\t\t\t\tproperties.push( prop );\n\t\t\t\t\tinterpolators[ prop ] = interpolate( from[ prop ], to[ prop ] );\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tintermediate[ prop ] = from[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor ( prop in to ) {\n\t\t\tif ( hasOwn.call( to, prop ) && !hasOwn.call( from, prop ) ) {\n\t\t\t\tintermediate[ prop ] = to[ prop ];\n\t\t\t}\n\t\t}\n\n\t\tlen = properties.length;\n\n\t\treturn function ( t ) {\n\t\t\tvar i = len, prop;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tprop = properties[i];\n\n\t\t\t\tintermediate[ prop ] = interpolators[ prop ]( t );\n\t\t\t}\n\n\t\t\treturn intermediate;\n\t\t};\n\t}\n};\n\nexport default interpolators;\n","import { fatal } from 'utils/log';\nimport { missingPlugin } from 'config/errors';\nimport interpolators from 'Ractive/static/interpolators';\nimport { findInViewHierarchy } from 'shared/registry';\n\nvar interpolate = function ( from, to, ractive, type ) {\n\tif ( from === to ) {\n\t\treturn snap( to );\n\t}\n\n\tif ( type ) {\n\n\t\tlet interpol = findInViewHierarchy( 'interpolators', ractive, type );\n\t\tif ( interpol ) {\n\t\t\treturn interpol( from, to ) || snap( to );\n\t\t}\n\n\t\tfatal( missingPlugin( type, 'interpolator' ) );\n\t}\n\n\treturn interpolators.number( from, to ) ||\n\t       interpolators.array( from, to ) ||\n\t       interpolators.object( from, to ) ||\n\t       snap( to );\n};\n\nexport default interpolate;\n\nfunction snap ( to ) {\n\treturn () => to;\n}\n","export function findInViewHierarchy ( registryName, ractive, name ) {\n\tvar instance = findInstance( registryName, ractive, name );\n\treturn instance ? instance[ registryName ][ name ] : null;\n}\n\nexport function findInstance ( registryName, ractive, name ) {\n\twhile ( ractive ) {\n\t\tif ( name in ractive[ registryName ] ) {\n\t\t\treturn ractive;\n\t\t}\n\n\t\tif ( ractive.isolated ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tractive = ractive.parent;\n\t}\n}","// Error messages that are used (or could be) in multiple places\nexport var badArguments = 'Bad arguments';\nexport var noRegistryFunctionReturn = 'A function was specified for \"%s\" %s, but no %s was returned';\nexport var missingPlugin = ( name, type ) => `Missing \"${name}\" ${type} plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#${type}s`;\n","/* global console */\nimport { hasConsole } from 'config/environment';\nimport Ractive from 'Ractive';\nimport noop from 'utils/noop';\n\nvar alreadyWarned = {}, log, printWarning, welcome;\n\nif ( hasConsole ) {\n\tlet welcomeIntro = [\n\t\t`%cRactive.js %c<@version@> %cin debug mode, %cmore...`,\n\t\t'color: rgb(114, 157, 52); font-weight: normal;',\n\t\t'color: rgb(85, 85, 85); font-weight: normal;',\n\t\t'color: rgb(85, 85, 85); font-weight: normal;',\n\t\t'color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;'\n\t];\n\tlet welcomeMessage = `You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n`;\n\n\twelcome = () => {\n\t\tlet hasGroup = !!console.groupCollapsed;\n\t\tconsole[ hasGroup ? 'groupCollapsed' : 'log' ].apply( console, welcomeIntro );\n\t\tconsole.log( welcomeMessage );\n\t\tif ( hasGroup ) {\n\t\t\tconsole.groupEnd( welcomeIntro );\n\t\t}\n\n\t\twelcome = noop;\n\t};\n\n\tprintWarning = ( message, args ) => {\n\t\twelcome();\n\n\t\t// extract information about the instance this message pertains to, if applicable\n\t\tif ( typeof args[ args.length - 1 ] === 'object' ) {\n\t\t\tlet options = args.pop();\n\t\t\tlet ractive = options ? options.ractive : null;\n\n\t\t\tif ( ractive ) {\n\t\t\t\t// if this is an instance of a component that we know the name of, add\n\t\t\t\t// it to the message\n\t\t\t\tlet name;\n\t\t\t\tif ( ractive.component && ( name = ractive.component.name ) ) {\n\t\t\t\t\tmessage = `<${name}> ${message}`;\n\t\t\t\t}\n\n\t\t\t\tlet node;\n\t\t\t\tif ( node = ( options.node || ( ractive.fragment && ractive.fragment.rendered && ractive.find( '*' ) ) ) ) {\n\t\t\t\t\targs.push( node );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconsole.warn.apply( console, [ '%cRactive.js: %c' + message, 'color: rgb(114, 157, 52);', 'color: rgb(85, 85, 85);' ].concat( args ) );\n\t};\n\n\tlog = function () {\n\t\tconsole.log.apply( console, arguments );\n\t};\n} else {\n\tprintWarning = log = welcome = noop;\n}\n\nfunction format ( message, args ) {\n\treturn message.replace( /%s/g, () => args.shift() );\n}\n\nfunction fatal ( message, ...args ) {\n\tmessage = format( message, args );\n\tthrow new Error( message );\n}\n\nfunction logIfDebug () {\n\tif ( Ractive.DEBUG ) {\n\t\tlog.apply( null, arguments );\n\t}\n}\n\nfunction warn ( message, ...args ) {\n\tmessage = format( message, args );\n\tprintWarning( message, args );\n}\n\nfunction warnOnce ( message, ...args ) {\n\tmessage = format( message, args );\n\n\tif ( alreadyWarned[ message ] ) {\n\t\treturn;\n\t}\n\n\talreadyWarned[ message ] = true;\n\tprintWarning( message, args );\n}\n\nfunction warnIfDebug () {\n\tif ( Ractive.DEBUG ) {\n\t\twarn.apply( null, arguments );\n\t}\n}\n\nfunction warnOnceIfDebug () {\n\tif ( Ractive.DEBUG ) {\n\t\twarnOnce.apply( null, arguments );\n\t}\n}\n\nexport { fatal, log, logIfDebug, warn, warnOnce, warnIfDebug, warnOnceIfDebug, welcome };\n","var toString = Object.prototype.toString,\n\tarrayLikePattern = /^\\[object (?:Array|FileList)\\]$/;\n\n// thanks, http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/\nexport function isArray ( thing ) {\n\treturn toString.call( thing ) === '[object Array]';\n}\n\nexport function isArrayLike ( obj ) {\n\treturn arrayLikePattern.test( toString.call( obj ) );\n}\n\nexport function isEqual ( a, b ) {\n\tif ( a === null && b === null ) {\n\t\treturn true;\n\t}\n\n\tif ( typeof a === 'object' || typeof b === 'object' ) {\n\t\treturn false;\n\t}\n\n\treturn a === b;\n}\n\n// http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric\nexport function isNumeric ( thing ) {\n\treturn !isNaN( parseFloat( thing ) ) && isFinite( thing );\n}\n\nexport function isObject ( thing ) {\n\treturn ( thing && toString.call( thing ) === '[object Object]' );\n}\n","import { doc } from 'config/environment';\nimport { createElement } from 'utils/dom';\nimport 'legacy';\n\nvar create, defineProperty, defineProperties;\n\ntry {\n\tObject.defineProperty({}, 'test', { value: 0 });\n\n\tif ( doc ) {\n\t\tObject.defineProperty( createElement( 'div' ), 'test', { value: 0 });\n\t}\n\n\tdefineProperty = Object.defineProperty;\n} catch ( err ) {\n\t// Object.defineProperty doesn't exist, or we're in IE8 where you can\n\t// only use it with DOM objects (what were you smoking, MSFT?)\n\tdefineProperty = function ( obj, prop, desc ) {\n\t\tobj[ prop ] = desc.value;\n\t};\n}\n\ntry {\n\ttry {\n\t\tObject.defineProperties({}, { test: { value: 0 } });\n\t} catch ( err ) {\n\t\t// TODO how do we account for this? noMagic = true;\n\t\tthrow err;\n\t}\n\n\tif ( doc ) {\n\t\tObject.defineProperties( createElement( 'div' ), { test: { value: 0 } });\n\t}\n\n\tdefineProperties = Object.defineProperties;\n} catch ( err ) {\n\tdefineProperties = function ( obj, props ) {\n\t\tvar prop;\n\n\t\tfor ( prop in props ) {\n\t\t\tif ( props.hasOwnProperty( prop ) ) {\n\t\t\t\tdefineProperty( obj, prop, props[ prop ] );\n\t\t\t}\n\t\t}\n\t};\n}\n\ntry {\n\tObject.create( null );\n\n\tcreate = Object.create;\n} catch ( err ) {\n\t// sigh\n\tcreate = (function () {\n\t\tvar F = function () {};\n\n\t\treturn function ( proto, props ) {\n\t\t\tvar obj;\n\n\t\t\tif ( proto === null ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tF.prototype = proto;\n\t\t\tobj = new F();\n\n\t\t\tif ( props ) {\n\t\t\t\tObject.defineProperties( obj, props );\n\t\t\t}\n\n\t\t\treturn obj;\n\t\t};\n\t}());\n}\n\nexport { create, defineProperty, defineProperties };\n\nexport function extend ( target, ...sources ) {\n\tvar prop, source;\n\n\twhile ( source = sources.shift() ) {\n\t\tfor ( prop in source ) {\n\t\t\tif ( hasOwn.call( source, prop ) ) {\n\t\t\t\ttarget[ prop ] = source[ prop ];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn target;\n}\n\nexport function fillGaps ( target, ...sources ) {\n\tsources.forEach( s => {\n\t\tfor ( let key in s ) {\n\t\t\tif ( s.hasOwnProperty( key ) && !( key in target ) ) {\n\t\t\t\ttarget[ key ] = s[ key ];\n\t\t\t}\n\t\t}\n\t});\n\n\treturn target;\n}\n\nexport var hasOwn = Object.prototype.hasOwnProperty;\n","export default null;","import { isClient, svg, vendors, win, doc } from 'config/environment';\nimport { html } from 'config/namespaces';\n\nvar createElement, matches, div, methodNames, unprefixed, prefixed, i, j, makeFunction;\n\n// Test for SVG support\nif ( !svg ) {\n\tcreateElement = function ( type, ns ) {\n\t\tif ( ns && ns !== html ) {\n\t\t\tthrow 'This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you\\'re trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information';\n\t\t}\n\n\t\treturn doc.createElement( type );\n\t};\n} else {\n\tcreateElement = function ( type, ns ) {\n\t\tif ( !ns || ns === html ) {\n\t\t\treturn doc.createElement( type );\n\t\t}\n\n\t\treturn doc.createElementNS( ns, type );\n\t};\n}\n\nexport function createDocumentFragment () {\n\treturn doc.createDocumentFragment();\n}\n\nfunction getElement ( input ) {\n\tvar output;\n\n\tif ( !input || typeof input === 'boolean' ) { return; }\n\n\tif ( !win || !doc || !input ) {\n\t\treturn null;\n\t}\n\n\t// We already have a DOM node - no work to do. (Duck typing alert!)\n\tif ( input.nodeType ) {\n\t\treturn input;\n\t}\n\n\t// Get node from string\n\tif ( typeof input === 'string' ) {\n\t\t// try ID first\n\t\toutput = doc.getElementById( input );\n\n\t\t// then as selector, if possible\n\t\tif ( !output && doc.querySelector ) {\n\t\t\toutput = doc.querySelector( input );\n\t\t}\n\n\t\t// did it work?\n\t\tif ( output && output.nodeType ) {\n\t\t\treturn output;\n\t\t}\n\t}\n\n\t// If we've been given a collection (jQuery, Zepto etc), extract the first item\n\tif ( input[0] && input[0].nodeType ) {\n\t\treturn input[0];\n\t}\n\n\treturn null;\n}\n\nif ( !isClient ) {\n\tmatches = null;\n} else {\n\tdiv = createElement( 'div' );\n\tmethodNames = [ 'matches', 'matchesSelector' ];\n\n\tmakeFunction = function ( methodName ) {\n\t\treturn function ( node, selector ) {\n\t\t\treturn node[ methodName ]( selector );\n\t\t};\n\t};\n\n\ti = methodNames.length;\n\n\twhile ( i-- && !matches ) {\n\t\tunprefixed = methodNames[i];\n\n\t\tif ( div[ unprefixed ] ) {\n\t\t\tmatches = makeFunction( unprefixed );\n\t\t} else {\n\t\t\tj = vendors.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\tprefixed = vendors[i] + unprefixed.substr( 0, 1 ).toUpperCase() + unprefixed.substring( 1 );\n\n\t\t\t\tif ( div[ prefixed ] ) {\n\t\t\t\t\tmatches = makeFunction( prefixed );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// IE8...\n\tif ( !matches ) {\n\t\tmatches = function ( node, selector ) {\n\t\t\tvar nodes, parentNode, i;\n\n\t\t\tparentNode = node.parentNode;\n\n\t\t\tif ( !parentNode ) {\n\t\t\t\t// empty dummy <div>\n\t\t\t\tdiv.innerHTML = '';\n\n\t\t\t\tparentNode = div;\n\t\t\t\tnode = node.cloneNode();\n\n\t\t\t\tdiv.appendChild( node );\n\t\t\t}\n\n\t\t\tnodes = parentNode.querySelectorAll( selector );\n\n\t\t\ti = nodes.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( nodes[i] === node ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nfunction detachNode ( node ) {\n\tif ( node && typeof node.parentNode !== 'unknown' && node.parentNode ) {\n\t\tnode.parentNode.removeChild( node );\n\t}\n\n\treturn node;\n}\n\nfunction safeToStringValue( value ) {\n\treturn ( value == null || !value.toString ) ? '' : '' + value;\n}\n\nexport { createElement, detachNode, getElement, matches, safeToStringValue };\n","export const html   = 'http://www.w3.org/1999/xhtml';\nexport const mathml = 'http://www.w3.org/1998/Math/MathML';\nexport const svg    = 'http://www.w3.org/2000/svg';\nexport const xlink  = 'http://www.w3.org/1999/xlink';\nexport const xml    = 'http://www.w3.org/XML/1998/namespace';\nexport const xmlns  = 'http://www.w3.org/2000/xmlns/';\n","/*global console, navigator */\n\nconst win = typeof window !== 'undefined' ? window : null;\nconst doc = win ? document : null;\n\nconst isClient = !!doc;\nconst isJsdom = ( typeof navigator !== 'undefined' && /jsDom/.test( navigator.appName ) );\nconst hasConsole = ( typeof console !== 'undefined' && typeof console.warn === 'function' && typeof console.warn.apply === 'function' );\n\nlet magic;\ntry {\n\tObject.defineProperty({}, 'test', { value: 0 });\n\tmagic = true;\n} catch ( e ) {\n\tmagic = false;\n}\n\nconst svg = doc ?\n\tdoc.implementation.hasFeature( 'http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1' ) :\n\tfalse;\n\nconst vendors = [ 'o', 'ms', 'moz', 'webkit' ];\n\nexport { win, doc, isClient, isJsdom, hasConsole, magic, svg, vendors };\n","// These are a subset of the easing equations found at\n// https://raw.github.com/danro/easing-js - license info\n// follows:\n\n// --------------------------------------------------\n// easing.js v0.5.4\n// Generic set of easing functions with AMD support\n// https://github.com/danro/easing-js\n// This code may be freely distributed under the MIT license\n// http://danro.mit-license.org/\n// --------------------------------------------------\n// All functions adapted from Thomas Fuchs & Jeremy Kahn\n// Easing Equations (c) 2003 Robert Penner, BSD license\n// https://raw.github.com/danro/easing-js/master/LICENSE\n// --------------------------------------------------\n\n// In that library, the functions named easeIn, easeOut, and\n// easeInOut below are named easeInCubic, easeOutCubic, and\n// (you guessed it) easeInOutCubic.\n//\n// You can add additional easing functions to this list, and they\n// will be globally available.\n\n\nexport default {\n\tlinear: function ( pos ) { return pos; },\n\teaseIn: function ( pos ) { return Math.pow( pos, 3 ); },\n\teaseOut: function ( pos ) { return ( Math.pow( ( pos - 1 ), 3 ) + 1 ); },\n\teaseInOut: function ( pos ) {\n\t\tif ( ( pos /= 0.5 ) < 1 ) { return ( 0.5 * Math.pow( pos, 3 ) ); }\n\t\treturn ( 0.5 * ( Math.pow( ( pos - 2 ), 3 ) + 2 ) );\n\t}\n};\n","import { TEMPLATE_VERSION } from 'config/template';\n\nvar defaultOptions = {\n\n\t// render placement:\n\tel:                 void 0,\n\tappend:\t\t\t\tfalse,\n\n\t// template:\n\ttemplate:           { v: TEMPLATE_VERSION, t: [] },\n\n\t// parse:     // TODO static delimiters?\n\tpreserveWhitespace: false,\n\tsanitize:           false,\n\tstripComments:      true,\n\tdelimiters:         [ '{{', '}}' ],\n\ttripleDelimiters:   [ '{{{', '}}}' ],\n\tinterpolate:        false,\n\n\t// data & binding:\n\tdata:               {},\n\tcomputed:           {},\n\tmagic:              false,\n\tmodifyArrays:       true,\n\tadapt:              [],\n\tisolated:           false,\n\ttwoway:             true,\n\tlazy:               false,\n\n\t// transitions:\n\tnoIntro:            false,\n\ttransitionsEnabled: true,\n\tcomplete:           void 0,\n\n\t// css:\n\tcss:                null,\n\tnoCssTransform:     false\n};\n\nexport default defaultOptions;\n","export var TEMPLATE_VERSION = 3;"],"names":[],"mappings":";;;;;;;;;;;;;;;;A8NAO,EAAA,IAAI,mBAAmB;;ADA9B,EAEA,IAAI,iBAAiB;;AAFrB;AAAA,EAKC,CAAD,IAAqB,KAAK;AAL1B,EAMC,CAAD,QAAY;;AANZ;AAAA,EASC,CAAD,UAAqB,EAAE,GAAG,kBAAkB,GAAG;;AAT/C;AAAA,EAYC,CAAD,oBAAqB;AAZrB,EAaC,CAAD,UAAqB;AAbrB,EAcC,CAAD,eAAqB;AAdrB,EAeC,CAAD,YAAqB,CAAE,MAAM;AAf7B,EAgBC,CAAD,kBAAqB,CAAE,OAAO;AAhB9B,EAiBC,CAAD,aAAqB;;AAjBrB;AAAA,EAoBC,CAAD,MAAqB;AApBrB,EAqBC,CAAD,UAAqB;AArBrB,EAsBC,CAAD,OAAqB;AAtBrB,EAuBC,CAAD,cAAqB;AAvBrB,EAwBC,CAAD,OAAqB;AAxBrB,EAyBC,CAAD,UAAqB;AAzBrB,EA0BC,CAAD,QAAqB;AA1BrB,EA2BC,CAAD,MAAqB;;AA3BrB;AAAA,EA8BC,CAAD,SAAqB;AA9BrB,EA+BC,CAAD,oBAAqB;AA/BrB,EAgCC,CAAD,UAAqB,KAAK;;AAhC1B;AAAA,EAmCC,CAAD,KAAqB;AAnCrB,EAoCC,CAAD,gBAAqB;AApCrB;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;sBDwBe;EACd,CAAD,QAAS,UAAW,KAAM;EAAE,EAA5B,OAAmC;EAAnC;EACC,CAAD,QAAS,UAAW,KAAM;EAAE,EAA5B,OAAmC,KAAK,IAAK,KAAK;EAAlD;EACC,CAAD,SAAU,UAAW,KAAM;EAAE,EAA7B,OAAsC,KAAK,IAAO,MAAM,GAAK,KAAM;EAAnE;EACC,CAAD,WAAY,UAAW,KAAM;EAC3B,EAAF,IAAO,CAAE,OAAO,OAAQ,GAAI;EAAE,GAA9B,OAAuC,MAAM,KAAK,IAAK,KAAK;EAA5D;EACE,EAAF,OAAW,OAAQ,KAAK,IAAO,MAAM,GAAK,KAAM;EAChD;EACA;;;;ED9BA,IAAM,MAAM,OAAO,WAAW,cAAc,SAAS;EACrD,IAAM,MAAM,MAAM,WAAW;;EAE7B,IAAM,WAAW,CAAC,CAAC;EACnB,IAAM,UAAY,OAAO,cAAc,eAAe,QAAQ,KAAM,UAAU;EAC9E,IAAM,aAAe,OAAO,YAAY,eAAe,OAAO,QAAQ,SAAS,cAAc,OAAO,QAAQ,KAAK,UAAU;;EAE3H,sBAAS,GAAT;EACA,IAAI;EACH,CAAD,OAAQ,eAAe,IAAI,QAAQ,EAAE,OAAO;EAC3C,mBAAK,GAAG;EACT,EAAE,OAAQ,GAAI;EACb,mBAAK,GAAG;EACT;;EAEA,oBAAS,GAAG,MACX,IAAI,eAAe,WAAY,qDAAqD,SACpF;;EAED,IAAM,UAAU,CAAE,KAAK,MAAM,OAAO;;;EDnBpC,IAAM,SAAN;;EAIA,IAAM,QAAN;;EAIA,IAAI,QAAJ;;EDPA,IAAI,eAAe,iBAAY,EAAE,aAAa,YAAY,gBAAW,EAAE,GAAG;;;EAG1E,IAAK,iBAAI,EAAG;EACX,CAAD,gBAAiB,UAAW,MAAM,IAAK;EACrC,EAAF,IAAO,MAAM,OAAO,MAAO;EACxB,GAAH,MAAS;EACT;;EAEE,EAAF,OAAS,IAAI,cAAe;EAC5B;EACA,OAAO;EACN,CAAD,gBAAiB,UAAW,MAAM,IAAK;EACrC,EAAF,IAAO,CAAC,MAAM,OAAO,MAAO;EACzB,GAAH,OAAU,IAAI,cAAe;EAC7B;;EAEE,EAAF,OAAS,IAAI,gBAAiB,IAAI;EAClC;EACA;;EAEO,SAAS,yBAA0B;EACzC,CAAD,OAAQ,IAAI;EACZ;;EAEA,SAAS,WAAa,OAAQ;EAC7B,CAAD,IAAK;;EAEJ,CAAD,IAAM,CAAC,SAAS,OAAO,UAAU,WAAY;EAAE,EAA/C;EAAA;;EAEC,CAAD,IAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAQ;EAC7B,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,MAAM,UAAW;EACrB,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,OAAO,UAAU,UAAW;;EAEhC,EAAF,SAAW,IAAI,eAAgB;;;EAG7B,EAAF,IAAO,CAAC,UAAU,IAAI,eAAgB;EACnC,GAAH,SAAY,IAAI,cAAe;EAC/B;;;EAGE,EAAF,IAAO,UAAU,OAAO,UAAW;EAChC,GAAH,OAAU;EACV;EACA;;;EAGC,CAAD,IAAM,MAAM,MAAM,MAAM,GAAG,UAAW;EACpC,EAAF,OAAS,MAAM;EACf;;EAEC,CAAD,OAAQ;EACR;;EAEA,IAAK,CAAC,UAAW;EAChB,CAAD,UAAW;EACX,OAAO;EACN,SAAG,GAAG,cAAe;EACrB,CAAD,cAAe,CAAE,WAAW;;EAE3B,CAAD,eAAgB,UAAW,YAAa;EACtC,EAAF,OAAS,UAAW,MAAM,UAAW;EAClC,GAAH,OAAU,KAAM,YAAc;EAC9B;EACA;;EAEC,OAAC,GAAG,YAAY;;EAEhB,CAAD,aAAU,MAAM,CAAC,SAAU;EACzB,EAAF,aAAe,kBAAa;;EAE1B,EAAF,YAAU,CAAE,aAAe;EACxB,GAAH,UAAa,aAAc;EAC3B,SAAS;EACN,GAAH,IAAO,QAAQ;EACZ,GAAH,OAAW,KAAM;EACb,IAAJ,WAAe,cAAS,IAAI,WAAW,OAAQ,GAAG,GAAI,gBAAgB,WAAW,UAAW;;EAExF,IAAJ,YAAY,CAAE,WAAa;EACtB,KAAL,UAAe,aAAc;EACxB,KAAL;EACA;EACA;EACA;EACA;;;EAGC,CAAD,IAAM,CAAC,SAAU;EACf,EAAF,UAAY,UAAW,MAAM,UAAW;EACrC,GAAH,IAAO,OAAO,YAAY;;EAEvB,GAAH,aAAgB,KAAK;;EAElB,GAAH,IAAQ,CAAC,YAAa;;EAElB,YAAG,CAAC,YAAY;;EAEhB,IAAJ,qBAAoB;EAChB,IAAJ,OAAW,KAAK;;EAEZ,YAAG,CAAC,YAAa;EACrB;;EAEG,GAAH,QAAW,WAAW,iBAAkB;;EAErC,GAAH,IAAO,MAAM;EACV,GAAH,OAAW,KAAM;EACb,IAAJ,IAAS,MAAM,OAAO,MAAO;EACxB,KAAL,OAAY;EACZ;EACA;;EAEG,GAAH,OAAU;EACV;EACA;EACA;;EAEA,SAAS,WAAa,MAAO;EAC5B,CAAD,IAAM,QAAQ,OAAO,KAAK,eAAe,aAAa,KAAK,YAAa;EACtE,EAAF,KAAO,WAAW,YAAa;EAC/B;;EAEC,CAAD,OAAQ;EACR;;EAEA,SAAS,kBAAmB,OAAQ;EACnC,CAAD,OAAQ,SAAW,QAAQ,CAAC,MAAM,WAAa,KAAK,KAAK;EACzD;;AD3IA,eAAe;;EDIf,IAAI,QAAQ,gBAAgB;;EAE5B,IAAI;EACH,CAAD,OAAQ,eAAe,IAAI,QAAQ,EAAE,OAAO;;EAE3C,CAAD,IAAM,KAAM;EACV,EAAF,OAAS,eAAgB,cAAe,QAAS,QAAQ,EAAE,OAAO;EAClE;;EAEC,CAAD,iBAAkB,OAAO;EACzB,EAAE,OAAQ,KAAM;;;EAGf,CAAD,iBAAkB,UAAW,KAAK,MAAM,MAAO;EAC7C,EAAF,IAAO,QAAS,KAAK;EACrB;EACA;;EAEA,IAAI;EACH,CAAD,IAAK;EACH,EAAF,OAAS,iBAAiB,IAAI,EAAE,MAAM,EAAE,OAAO;EAC/C,GAAG,OAAQ,KAAM;;EAEf,EAAF,MAAQ;EACR;;EAEC,CAAD,IAAM,KAAM;EACV,EAAF,OAAS,iBAAkB,cAAe,QAAS,EAAE,MAAM,EAAE,OAAO;EACpE;;EAEC,CAAD,mBAAoB,OAAO;EAC3B,EAAE,OAAQ,KAAM;EACf,CAAD,mBAAoB,UAAW,KAAK,OAAQ;EAC1C,EAAF,IAAM;;EAEJ,EAAF,KAAQ,QAAQ,OAAQ;EACrB,GAAH,IAAQ,MAAM,eAAgB,OAAS;EACnC,IAAJ,eAAoB,KAAK,MAAM,MAAO;EACtC;EACA;EACA;EACA;;EAEA,IAAI;EACH,CAAD,OAAQ,OAAQ;;EAEf,CAAD,SAAU,OAAO;EACjB,EAAE,OAAQ,KAAM;;EAEf,CAAD,SAAW,CAAA,YAAY;EACrB,EAAF,IAAM,IAAI,YAAY;;EAEpB,EAAF,OAAS,UAAW,OAAO,OAAQ;EAChC,GAAH,IAAO;;EAEJ,GAAH,IAAQ,UAAU,MAAO;EACrB,IAAJ,OAAW;EACX;;EAEG,GAAH,EAAK,YAAY;EACd,GAAH,MAAS,IAAI;;EAEV,GAAH,IAAQ,OAAQ;EACZ,IAAJ,OAAW,iBAAkB,KAAK;EAClC;;EAEG,GAAH,OAAU;EACV;EACA;EACA;;EAIO,6BAAe,CAAG,QAAqB;EAC7C,CAAD,IAAK,MAAM;;EADX,CAAA,KAAA,IAAA,OAAA,UAAA,QAAoC,UAApC,MAAA,OAAA,IAAA,OAAA,IAAA,IAAA,OAAA,GAAA,OAAA,MAAA,QAAA;EAAoC,EAApC,QAAA,OAAA,KAAA,UAAA;;;EAGC,CAAD,OAAS,SAAS,QAAQ,SAAU;EAClC,EAAF,KAAQ,QAAQ,QAAS;EACtB,GAAH,IAAQ,OAAO,KAAM,QAAQ,OAAS;EAClC,IAAJ,OAAY,QAAS,OAAQ;EAC7B;EACA;EACA;;EAEC,CAAD,OAAQ;EACR;;EAEO,SAAS,SAAW,QAAqB;EAAhD,CAAA,KAAA,IAAA,QAAA,UAAA,QAAsC,UAAtC,MAAA,QAAA,IAAA,QAAA,IAAA,IAAA,QAAA,GAAA,QAAA,OAAA,SAAA;EAAsC,EAAtC,QAAA,QAAA,KAAA,UAAA;;;EACC,CAAD,QAAS,QAAS,UAAA,GAAK;EACrB,EAAF,KAAQ,IAAI,OAAO,GAAI;EACpB,GAAH,IAAQ,EAAE,eAAgB,QAAS,EAAG,OAAO,SAAW;EACpD,IAAJ,OAAY,OAAQ,EAAG;EACvB;EACA;EACA;;EAEC,CAAD,OAAQ;EACR;;EAEO,IAAI,SAAS,OAAO,UAAU;;EDvGrC,gBAAY,GAAG,OAAO,UAAU;EAChC,IAAC,mBAAmB;;;;EAGb,SAAS,QAAU,OAAQ;EACjC,CAAD,mBAAgB,CAAC,KAAM,WAAY;EACnC;;EAEO,SAAS,YAAc,KAAM;EACnC,CAAD,OAAQ,iBAAiB,iBAAc,CAAC,KAAM;EAC9C;;EAEO,SAAS,QAAU,GAAG,GAAI;EAChC,CAAD,IAAM,MAAM,QAAQ,MAAM,MAAO;EAC/B,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,OAAO,MAAM,YAAY,OAAO,MAAM,UAAW;EACrD,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ,MAAM;EACd;;;;EAGO,SAAS,UAAY,OAAQ;EACnC,CAAD,OAAQ,CAAC,MAAO,WAAY,WAAa,SAAU;EACnD;;EAEO,SAAS,SAAW,OAAQ;EAClC,CAAD,OAAU,qBAAiB,CAAC,KAAM,WAAY;EAC9C;;;;;ED1BA,IAAI,gBAAgB;EAApB,IAAwB;EAAxB,IAA6B;EAA7B,IAA2C;;EAE3C,IAAK,YAAa;;EACjB,EAAD,IAAK,eAAe,CAApB,wDAAA,kDAAA,gDAAA,gDAAA;EAOC,EAAD,IAAK,iBAAL;;EAmBC,EAAD,UAAW,YAAM;EACf,GAAF,IAAM,WAAW,CAAC,CAAC,QAAQ;EACzB,GAAF,QAAW,WAAW,mBAAmB,OAAQ,MAAO,SAAS;EAC/D,GAAF,QAAU,IAAK;EACb,GAAF,IAAO,UAAW;EACf,IAAH,QAAW,SAAU;EACrB;;EAEE,GAAF,UAAY;EACZ;;EAEC,EAAD,eAAgB,UAAE,SAAS,MAAU;EACnC,GAAF;;;EAGE,GAAF,IAAO,OAAO,KAAM,KAAK,SAAS,OAAQ,UAAW;EAClD,IAAH,IAAO,UAAU,KAAK;EACnB,IAAH,IAAO,UAAU,UAAU,QAAQ,UAAU;;EAE1C,IAAH,IAAQ,SAAU;;;EAGd,KAAJ,IAAQ,QAAR;EACI,KAAJ,IAAS,QAAQ,cAAe,QAAO,QAAQ,UAAU,OAAS;EAC7D,MAAL,UAAA,MAAmB,QAAnB,OAA4B;EAC5B;;EAEI,KAAJ,IAAQ,OAAR;EACI,KAAJ,IAAS,OAAS,QAAQ,QAAU,QAAQ,YAAY,QAAQ,SAAS,YAAY,QAAQ,KAAM,MAAY;EAC1G,MAAL,KAAU,KAAM;EAChB;EACA;EACA;;EAEE,GAAF,QAAU,KAAK,MAAO,SAAS,CAAE,qBAAqB,SAAS,6BAA6B,2BAA4B,OAAQ;EAChI;;EAEC,EAAD,MAAO,YAAY;EACjB,GAAF,QAAU,IAAI,MAAO,SAAS;EAC9B;;EACA,OAAO;EACN,CAAD,eAAgB,MAAM,UAAU;EAChC;;EAEA,SAAS,OAAS,SAAS,MAAO;EACjC,CAAD,OAAQ,QAAQ,QAAS,OAAO,YAAhC;EAAA,EAAA,OAAsC,KAAK;EAA3C;EACA;;EAEA,SAAS,MAAQ,SAAmB;EAApC,CAAA,KAAA,IAAA,OAAA,UAAA,QAA6B,OAA7B,MAAA,OAAA,IAAA,OAAA,IAAA,IAAA,OAAA,GAAA,OAAA,MAAA,QAAA;EAA6B,EAA7B,KAAA,OAAA,KAAA,UAAA;;;EACC,CAAD,UAAW,OAAQ,SAAS;EAC3B,CAAD,MAAO,IAAI,MAAO;EAClB;;EAEA,SAAS,aAAc;EACtB,CAAD,IAAM,QAAQ,OAAQ;EACpB,EAAF,IAAM,MAAO,MAAM;EACnB;EACA;;EAEA,SAAS,KAAO,SAAmB;EAAnC,CAAA,KAAA,IAAA,QAAA,UAAA,QAA4B,OAA5B,MAAA,QAAA,IAAA,QAAA,IAAA,IAAA,QAAA,GAAA,QAAA,OAAA,SAAA;EAA4B,EAA5B,KAAA,QAAA,KAAA,UAAA;;;EACC,CAAD,UAAW,OAAQ,SAAS;EAC3B,CAAD,aAAe,SAAS;EACxB;;EAEA,SAAS,SAAW,SAAmB;EAAvC,CAAA,KAAA,IAAA,QAAA,UAAA,QAAgC,OAAhC,MAAA,QAAA,IAAA,QAAA,IAAA,IAAA,QAAA,GAAA,QAAA,OAAA,SAAA;EAAgC,EAAhC,KAAA,QAAA,KAAA,UAAA;;;EACC,CAAD,UAAW,OAAQ,SAAS;;EAE3B,CAAD,IAAM,cAAe,UAAY;EAC/B,EAAF;EACA;;EAEC,CAAD,cAAgB,WAAY;EAC3B,CAAD,aAAe,SAAS;EACxB;;EAEA,SAAS,cAAe;EACvB,CAAD,IAAM,QAAQ,OAAQ;EACpB,EAAF,KAAO,MAAO,MAAM;EACpB;EACA;;EAEA,SAAS,kBAAmB;EAC3B,CAAD,IAAM,QAAQ,OAAQ;EACpB,EAAF,SAAW,MAAO,MAAM;EACxB;EACA;;;EDtHO,IAAI,eAAe;EACnB,IAAI,2BAA2B;EAC/B,IAAI,gBAAgB,UAAE,MAAM,MAAnC;EAAA,EAAA,OAAA,cAAyD,OAAzD,OAAkE,OAAlE,6FAAiK,OAAjK;EAAA;;EDHO,SAAS,oBAAsB,cAAc,SAAS,MAAO;EACnE,CAAD,IAAK,WAAW,aAAc,cAAc,SAAS;EACpD,CAAD,OAAQ,WAAW,SAAU,cAAgB,QAAS;EACtD;;EAEO,SAAS,aAAe,cAAc,SAAS,MAAO;EAC5D,CAAD,OAAS,SAAU;EACjB,EAAF,IAAO,QAAQ,QAAS,eAAiB;EACtC,GAAH,OAAU;EACV;;EAEE,EAAF,IAAO,QAAQ,UAAW;EACvB,GAAH,OAAU;EACV;;EAEE,EAAF,UAAY,QAAQ;EACpB;EACA;;ADjBA,EAKA,IAAI,cAAc,UAAW,MAAM,IAAI,SAAS,MAAO;AALvD,EAMC,CAAD,IAAM,SAAS,IAAK;AANpB,EAOE,EAAF,OAAS,KAAM;AAPf,EAQA;;AARA,EAUC,CAAD,IAAM,MAAO;;AAVb,EAYE,EAAF,IAAM,WAAW,oBAAqB,iBAAiB,SAAS;AAZhE,EAaE,EAAF,IAAO,UAAW;AAblB,EAcG,GAAH,OAAU,SAAU,MAAM,OAAQ,KAAM;AAdxC,EAeA;;AAfA,EAiBE,EAAF,MAAS,cAAe,MAAM;AAjB9B,EAkBA;;AAlBA,EAoBC,CAAD,OApBA,oBAoBqB,CAAC,OAAQ,MAAM,OApBpC,oBAqBqB,CAAC,MAAO,MAAM,OArBnC,oBAsBqB,CAAC,OAAQ,MAAM,OAC5B,KAAM;AAvBd,EAwBA;;;;AAxBA,EA4BA,SAAS,KAAO,IAAK;AA5BrB,EA6BC,CAAD,OAAQ,YAAR;AA7BA,EA6BA,EAAA,OAAc;AA7Bd,EA6BA;AA7BA,EA8BA;;AD9BA,EAIA,IAAI,gBAAgB;AAJpB,EAKC,CAAD,QAAS,UAAW,MAAM,IAAK;AAL/B,EAME,EAAF,IAAM;;AANN,EAQE,EAAF,IAAO,CAAC,UAAW,SAAU,CAAC,UAAW,KAAO;AARhD,EASG,GAAH,OAAU;AATV,EAUA;;AAVA,EAYE,EAAF,OAAS,CAAC;AAZV,EAaE,EAAF,KAAO,CAAC;;AAbR,EAeE,EAAF,QAAU,KAAK;;AAff,EAiBE,EAAF,IAAO,CAAC,OAAQ;AAjBhB,EAkBG,GAAH,OAAU,YAAY;AAlBtB,EAkBwB,IAAxB,OAA+B;AAlB/B,EAkBA;AAlBA,EAmBA;;AAnBA,EAqBE,EAAF,OAAS,UAAW,GAAI;AArBxB,EAsBG,GAAH,OAAU,OAAS,IAAI;AAtBvB,EAuBA;AAvBA,EAwBA;;AAxBA,EA0BC,CAAD,OAAQ,UAAW,MAAM,IAAK;AA1B9B,EA2BE,EAAF,IAAM,cAAc,eAAe,KAAK;;AA3BxC,EA6BE,EAAF,IAAO,CAAC,QAAS,SAAU,CAAC,QAAS,KAAO;AA7B5C,EA8BG,GAAH,OAAU;AA9BV,EA+BA;;AA/BA,EAiCE,EAAF,eAAiB;AAjCjB,EAkCE,EAAF,gBAAkB;;AAlClB,EAoCE,EAAF,IAAM,MAAM,KAAK,IAAK,KAAK,QAAQ,GAAG;AApCtC,EAqCE,EAAF,OAAU,KAAM;AArChB,EAsCG,GAAH,cAAiB,KAAK,YAAa,KAAK,IAAI,GAAG;AAtC/C,EAuCA;;AAvCA;AAAA,EA0CE,EAAF,KAAQ,IAAE,KAAK,IAAE,KAAK,QAAQ,KAAG,GAAI;AA1CrC,EA2CG,GAAH,aAAgB,KAAK,KAAK;AA3C1B,EA4CA;;AA5CA,EA8CE,EAAF,KAAQ,IAAE,KAAK,IAAE,GAAG,QAAQ,KAAG,GAAI;AA9CnC,EA+CG,GAAH,aAAgB,KAAK,GAAG;AA/CxB,EAgDA;;AAhDA,EAkDE,EAAF,OAAS,UAAW,GAAI;AAlDxB,EAmDG,GAAH,IAAO,IAAI;;AAnDX,EAqDG,GAAH,OAAW,KAAM;AArDjB,EAsDI,IAAJ,aAAiB,KAAK,cAAc,GAAI;AAtDxC,EAuDA;;AAvDA,EAyDG,GAAH,OAAU;AAzDV,EA0DA;AA1DA,EA2DA;;AA3DA,EA6DC,CAAD,QAAS,UAAW,MAAM,IAAK;AA7D/B,EA8DE,EAAF,IAAM,YAAY,KAAK,eAAe,cAAc;;AA9DpD,EAgEE,EAAF,IAAO,CAAC,SAAU,SAAU,CAAC,SAAU,KAAO;AAhE9C,EAiEG,GAAH,OAAU;AAjEV,EAkEA;;AAlEA,EAoEE,EAAF,aAAe;AApEf,EAqEE,EAAF,eAAiB;AArEjB,EAsEE,EAAF,gBAAkB;;AAtElB,EAwEE,EAAF,KAAQ,QAAQ,MAAO;AAxEvB,EAyEG,GAAH,IAAQ,OAAO,KAAM,MAAM,OAAS;AAzEpC,EA0EI,IAAJ,IAAS,OAAO,KAAM,IAAI,OAAS;AA1EnC,EA2EK,KAAL,WAAgB,KAAM;AA3EtB,EA4EK,KAAL,cAAoB,QAAS,YAAa,KAAM,OAAQ,GAAI;AA5E5D,EA6EA,WAES;AA/ET,EAgFK,KAAL,aAAmB,QAAS,KAAM;AAhFlC,EAiFA;AAjFA,EAkFA;AAlFA,EAmFA;;AAnFA,EAqFE,EAAF,KAAQ,QAAQ,IAAK;AArFrB,EAsFG,GAAH,IAAQ,OAAO,KAAM,IAAI,SAAU,CAAC,OAAO,KAAM,MAAM,OAAS;AAtFhE,EAuFI,IAAJ,aAAkB,QAAS,GAAI;AAvF/B,EAwFA;AAxFA,EAyFA;;AAzFA,EA2FE,EAAF,MAAQ,WAAW;;AA3FnB,EA6FE,EAAF,OAAS,UAAW,GAAI;AA7FxB,EA8FG,GAAH,IAAO,IAAI;AA9FX,EA8FA,OAAgB;;AA9FhB,EAgGG,GAAH,OAAW,KAAM;AAhGjB,EAiGI,IAAJ,OAAW,WAAW;;AAjGtB,EAmGI,IAAJ,aAAkB,QAAS,cAAe,MAAQ;AAnGlD,EAoGA;;AApGA,EAsGG,GAAH,OAAU;AAtGV,EAuGA;AAvGA,EAwGA;AAxGA;;AAAA;;EDAA,IAAI,aAAa;;EAEV,SAAS,UAAY,KAAM;EACjC,CAAD,OAAQ,MAAM,IAAI,QAAS,YAAY,SAAU;EACjD;;EAEO,SAAS,aAAe,SAAU;EACxC,CAAD,OAAQ,UAAW,SAAU,MAAO;EACpC;;;EDLA,4BAAkB,GAAG;EAEN,SAAS,IAAM,SAAS,SAAS,GAAI;EACnD,CAAD,IAAM,OAAO,YAAY,YAAY,CAAC,UAAW,IAAM;EACrD,EAAF,MAAQ,IAAI,MAAO;EACnB;;EAEC,CAAD,IAAM,KAAK,KAAM,UAAY;;EAC3B,GAAF,IAAM,UAAU;;EAEd,GAAF,QAAU,UAAU,YAAa,aAAc,UAAY,QAAS,UAAA,OAAS;EAC1E,IAAH,IAAS,QAAQ,MAAM;;EAEpB,IAAH,IAAQ,CAAC,UAAW,QAAU,MAAM,IAAI,8BAAmB;;EAExD,IAAH,QAAY,MAAM,gBAAiB,QAAQ;EAC3C;;EAEE,GAAF,OAAA;EAAA,IAAA,GAAS,QAAQ,IAAK;EAAtB;;;;EACA;;EAEC,CAAD,IAAO,QAAQ,QAAQ,IAAK;;EAE3B,CAAD,IAAM,CAAC,UAAW,QAAU;EAC1B,EAAF,MAAQ,IAAI,8BAAmB;EAC/B;;EAEC,CAAD,OAAQ,QAAQ,IAAK,SAAS,CAAC,QAAQ;EACvC;;;ED7Be,SAAS,YAAc,SAAS,GAAI;EAClD,CAAD,iBAAW,CAAE,MAAM,SAAW,MAAM,YAAY,IAAI,CAAC;EACrD;;ADJA,EAEA,IAAI;;AAFJ;AAAA,EAKA,IAAK,CAAC,KAAM;AALZ,EAMC,CAAD,wBAAyB;AANzB,EAOA,OAAO;AAPP;AAAA,EASC,CAAD,CAAE,UAAS,SAAS,UAAU,KAAK;;AATnC,EAWE,EAAF,IAAM,GAAG;;AAXT,EAaE,EAAF,IAAO,IAAI,uBAAwB;AAbnC,EAcG,GAAH;AAdA,EAeA;;AAfA,EAiBE,EAAF,KAAQ,IAAI,GAAG,IAAI,QAAQ,UAAU,CAAC,IAAI,uBAAuB,EAAE,GAAI;AAjBvE,EAkBG,GAAH,IAAO,wBAAwB,IAAI,QAAQ,KAAG;AAlB9C,EAmBA;;AAnBA,EAqBE,EAAF,IAAO,CAAC,IAAI,uBAAwB;AArBpC,EAsBG,GAAH,aAAgB,IAAI;;AAtBpB,EAwBG,GAAH,IAAO,wBAAwB,UAAS,UAAU;AAxBlD,EAyBI,IAAJ,IAAQ,UAAU,YAAY;;AAzB9B,EA2BI,IAAJ,WAAe,KAAK;AA3BpB,EA4BI,IAAJ,aAAiB,KAAK,IAAK,GAAG,MAAM,WAAW;AA5B/C,EA6BI,IAAJ,KAAS,WAAY,YAAW;AA7BhC,EA6BkC,KAAlC,SAA2C,WAAW;AA7BtD,EA6BA,OAAsE;;AA7BtE,EA+BI,IAAJ,WAAe,WAAW;AA/B1B,EAgCI,IAAJ,OAAW;AAhCX,EAiCA;AAjCA,EAkCA;AAlCA,EAoCA,IAAI,SAAS,GAAG;;AApChB,EAsCC,CAAD,wBAAyB,IAAI;AAtC7B;;AAAA;;ADAA,EAEA,IAAM,UAAU,OAAS,IAAI,eAAe,OAAO,IAAI,YAAY,QAAQ,aAC1E,YADD;AAFA,EAGA,CAAA,OAAO,IAAI,YAAY;AAHvB,EAGA,IACC,YADD;AAHA,EAIA,CAAA,OAAO,KAAK;AAJZ,EAIA;;;;;EDDA,IAAM,eAAe;EACpB,CAAD,WAAY;EACV,EAAF,YAAc;EACZ,EAAF,aAAe;EACf;EACC,CAAD,QAAS;EACP,EAAF,YAAc;EACZ,EAAF,SAAW,2CACR,qDACA,4DACA,iEACA,2DACA,2CACA;EACH;EACC,CAAD,UAAW;EACT,EAAF,YAAc;EACZ,EAAF,aAAe;EACf;EACA;;EAEA,IAAqB,OAArB,CAAA,YAAA;EACa,CAAb,SADqB,KACN,OAAQ;EADvB,uBAAA,CAAA,MAAqB;;EAEnB,EAAF,KAAO,QAAQ;EACb,EAAF,KAAO,SAAS,OAAO;EACrB,EAAF,KAAO,YAAY,aAAc;EACjC;;EALqB,CAArB,KAAA,UAOC,OAAK,SAPN,KAOQ,QAAQ,SAAS,KAAM;EAC7B,EAAF,IAAO,QAAS,SAAW;EACxB,GAAH,MAAS,QAAS,QAAU,OAAQ,QAAS;EAC1C,GAAH,OAAU;EACV;EACA;;EAZqB,CAArB,KAAA,UAcC,OAAK,SAdN,KAcQ,SAAS,KAAM;EACrB,EAAF,KAAO,KAAM,KAAK,QAAQ,SAAS;;;EAGjC,EAAF,IAAO,CAAC,QAAS,KAAK,WAAY,KAAK,aAAa,KAAK,KAAM,KAAK,UAAU,YAAY,SAAS,MAAQ;EACxG,GAAH,IAAQ,KAAK,UAAU,SAAU;EAC7B,IAAJ,YAAiB,KAAK,UAAU;EAChC,UAAU;EACN,IAAJ,YAAiB,6KAA6K,KAAK,UAAU,YAAY,KAAK,UAAU;EACxO;EACA;;;EAGE,EAAF,MAAQ,QAAQ,KAAM,KAAK,OAAO,OAAQ,QAAQ,KAAM,KAAK;EAC7D;;EA5BA,CAAA,OAAqB;;;;EDrBrB,IAAI,CAAC,MAAM,UAAU,MAAM;EAC1B,CAAD,MAAO,UAAU,OAAO,UAAS,WAAW;EAC1C,EAAF,IAAM,QAAQ,MAAM;EAClB,GAAF,MAAQ,IAAI,UAAU;EACtB;EACE,EAAF,IAAM,OAAO,cAAc,YAAY;EACrC,GAAF,MAAQ,IAAI,UAAU;EACtB;EACE,EAAF,IAAM,OAAO,OAAO;EAClB,EAAF,IAAM,SAAS,KAAK,WAAW;EAC7B,EAAF,IAAM,UAAU,UAAU;EACxB,EAAF,IAAM;;EAEJ,EAAF,KAAO,IAAI,IAAI,GAAG,IAAI,QAAQ,KAAK;EAChC,GAAH,IAAO,KAAK,MAAM;EACd,IAAJ,QAAY,KAAK;EACb,IAAJ,IAAQ,UAAU,KAAK,SAAS,OAAO,GAAG,OAAO;EAC7C,KAAJ,OAAW;EACX;EACA;EACA;EACE,EAAF,OAAS;EACT;EACA;;EAEO,SAAS,WAAa,OAAO,OAAQ;EAC3C,CAAD,IAAK,QAAQ,MAAM,QAAS;;EAE3B,CAAD,IAAM,UAAU,CAAC,GAAI;EACnB,EAAF,MAAQ,KAAM;EACd;EACA;;EAEO,SAAS,cAAgB,OAAO,OAAQ;EAC9C,CAAD,KAAO,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAM;EAC/C,EAAF,IAAO,MAAM,MAAM,OAAQ;EACxB,GAAH,OAAU;EACV;EACA;;EAEI,CAAJ,OAAW;EACX;;EAEO,SAAS,mBAAqB,GAAG,GAAI;EAC3C,CAAD,IAAK;;EAEJ,CAAD,IAAM,CAAC,QAAS,MAAO,CAAC,QAAS,IAAM;EACrC,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,EAAE,WAAW,EAAE,QAAS;EAC5B,EAAF,OAAS;EACT;;EAEC,CAAD,IAAK,EAAE;EACN,CAAD,OAAS,KAAM;EACb,EAAF,IAAO,EAAE,OAAO,EAAE,IAAK;EACpB,GAAH,OAAU;EACV;EACA;;EAEC,CAAD,OAAQ;EACR;;EAEO,SAAS,YAAc,GAAI;EACjC,CAAD,IAAM,OAAO,MAAM,UAAW;EAC5B,EAAF,OAAS,CAAE;EACX;;EAEC,CAAD,IAAM,MAAM,WAAY;EACtB,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;EACR;;EAEO,SAAS,SAAW,OAAQ;EAClC,CAAD,OAAQ,MAAO,MAAM,SAAS;EAC9B;;EAEO,SAAS,gBAAkB,OAAO,QAAS;EACjD,CAAD,IAAM,CAAC,OAAQ;EACb,EAAF;EACA;;EAEC,CAAD,IAAO,QAAQ,MAAM,QAAS;;EAE7B,CAAD,IAAM,UAAU,CAAC,GAAI;EACnB,EAAF,MAAQ,OAAQ,OAAO;EACvB;EACA;;EAEO,SAAS,QAAU,WAAY;EACrC,CAAD,IAAK,QAAQ;EAAb,KAAiB,IAAI,UAAU;EAC9B,CAAD,OAAS,KAAM;EACb,EAAF,MAAQ,KAAK,UAAU;EACvB;;EAEC,CAAD,OAAQ;EACR;;ADtGA,EAAA,IAAI;AAAJ,EACA,IAAC,UAAU;AADX,EAEA,IAAC,YAAY;AAFb,EAGA,IAAC,WAAW;;AAHZ,EAKA,IAAK,OAAO,YAAY,YAAa;AALrC;AAAA,EAOC,CAAD,WAAY;AAPZ,EAQA,OAAO;AARP,EASC,CAAD,WAAY,UAAW,UAAW;AATlC,EAUE,EAAF,IAAM,oBAAoB;AAV1B,EAWA,MAAG,mBAAmB;AAXtB,EAYA,MAAG,QAAQ;AAZX,EAcA,MAAG;AAdH,EAeA,MAAG;AAfH,EAgBA,MAAG;AAhBH,EAiBA,MAAG;AAjBH,EAkBA,MAAG;AAlBH,EAoBA,MAAG;;AApBH,EAsBE,EAAF,eAAiB,UAAW,UAAW;AAtBvC,EAuBG,GAAH,OAAU,UAAW,OAAQ;AAvB7B,EAwBI,IAAJ,IAAS,UAAU,SAAU;AAxB7B,EAyBK,KAAL;AAzBA,EA0BA;;AA1BA,EA4BI,IAAJ,SAAa;AA5Bb,EA6BI,IAAJ,QAAY;;AA7BZ,EA+BI,IAAJ,mBAAuB,eAAkB,UAAU,YAAY,oBAAoB,kBAAoB;;AA/BvG;AAAA,EAkCI,IAAJ,KAAU;AAlCV,EAmCA;AAnCA,EAoCA;;AApCA,EAsCE,EAAF,SAAW,aAAc;AAtCzB,EAuCE,EAAF,SAAW,aAAc;;AAvCzB,EAyCE,EAAF,IAAM;AAzCN,EA0CG,GAAH,SAAa,QAAQ;AA1CrB,EA2CA,IAAI,OAAQ,KAAM;AA3ClB,EA4CG,GAAH,OAAW;AA5CX,EA6CA;;AA7CA,EA+CE,EAAF,UAAY;AA/CZ;AAAA,EAiDG,GAAH,MAAS,UAAW,aAAa,YAAa;AAjD9C,EAkDI,IAAJ,IAAQ,WAAW,IAAI,SAAU,UAAW,QAAQ,QAAS;;AAlD7D,EAoDK,KAAL,IAAS,2BAA2B,UAAW,SAAS,UAAU,SAAU;;AApD5E;AAAA,EAuDM,MAAN,IAAW,OAAO,YAAY,YAAa;AAvD3C,EAwDO,OAAP,SAAgB,KAAM,UAAW,UAAW;AAxD5C,EAyDQ,QAAR,IAAY;;AAzDZ,EA2DQ,QAAR,IAAY;AA3DZ,EA4DS,SAAT,IAAa,QAAS;AA5DtB,EA6DS,SA7DT,sBA6DgB,CAAE,UAAU,GAAG,QAAQ;AA7DvC,EA8DA,UAAU,OAAQ,KAAM;AA9DxB,EA+DS,SAAT,OAAiB;AA/DjB,EAgEA;AAhEA,EAiEA;AAjEA,EAkEA,aAAa;AAlEb;AAAA;AAAA,EAqEO,OAAP,SAAgB,KAAM;AArEtB,EAsEA;AAtEA,EAuEA;;AAvEA;AAAA,EA0EK,KAAL,yBAA+B,aAAa,mBAAmB;AA1E/D,EA2EK,KAAL,yBAA+B,YAAY,kBAAkB;;AA3E7D,EA6EK,KAAL,IAAU,UAAU,SAAU;AA7E9B;AAAA,EA+EM,MAAN,KAAY;AA/EZ,EAgFA;AAhFA,EAkFA;;AAlFA,EAoFI,IAAJ,OAAW;AApFX,EAqFA;AArFA,EAsFA;;AAtFA,EAwFE,EAAF,QAAW,WAAY,UAAW,YAAa;AAxF/C,EAyFG,GAAH,OAAU,KAAK,KAAM,MAAM;AAzF3B,EA0FA;;AA1FA,EA4FE,EAAF,OAAS;AA5FT,EA6FA;;AA7FA,EA+FC,CAAD,SAAU,MAAM,UAAW,UAAW;AA/FtC,EAgGE,EAAF,OAAS,IAAI,SAAU,UAAW,QAAQ,QAAS;AAhGnD,EAiGG,GAAH,IAAO,SAAS;AAjGhB,EAiGA,OAAoB;AAjGpB,EAiGA,OAA6B;AAjG7B,EAiGA,OAAgC;;AAjGhC,EAmGG,GAAH,IAAQ,CAAC,SAAS,QAAS;AAnG3B,EAoGI,IAAJ,OAAY;AApGZ,EAqGI,IAAJ;AArGA,EAsGA;;AAtGA,EAwGG,GAAH,iBAAoB,UAAE,SAAS,GAAO;AAxGtC,EAyGI,IAAJ,IAAS,WAAW,OAAO,QAAQ,SAAS,YAAa;AAzGzD,EA0GK,KAAL,QAAa,KAAM,UAAA,OAAS;AA1G5B,EA2GM,MAAN,OAAa,KAAK;AA3GlB,EA4GM,MAAN,EAAQ,WAAW,OAAQ;AA5G3B,EA6GA,QAAQ;AA7GR,EA8GA,WAES;AAhHT,EAiHK,KAAL,OAAY,KAAK;AAjHjB,EAkHK,KAAL,EAAO,WAAW,OAAQ;AAlH1B,EAmHA;AAnHA,EAoHA;;AApHA,EAsHG,GAAH,UAAa,IAAI,SAAS;AAtH1B,EAuHG,GAAH,OAAW,KAAM;AAvHjB,EAwHI,IAAJ,eAAoB,SAAS,IAAI;AAxHjC,EAyHA;AAzHA,EA0HA;AA1HA,EA2HA;;AA3HA,EA6HC,CAAD,SAAU,UAAU,UAAW,OAAQ;AA7HvC,EA8HE,EAAF,OAAS,IAAI,SAAU,UAAW,QAAS;AA9H3C,EA+HG,GAAH,OAAW;AA/HX,EAgIA;AAhIA,EAiIA;;AAjIA,EAmIC,CAAD,SAAU,SAAS,UAAW,QAAS;AAnIvC,EAoIE,EAAF,OAAS,IAAI,SAAU,UAAW,QAAQ,QAAS;AApInD,EAqIG,GAAH,OAAW;AArIX,EAsIA;AAtIA,EAuIA;AAvIA,EAwIA;;AAxIA;;AAAA;AAAA,EA6IA,SAAS,KAAO,UAAW;AA7I3B,EA8IC,CAAD,WAAa,UAAU;AA9IvB,EA+IA;;AA/IA,EAiJA,SAAS,eAAiB,UAAU,QAAS;AAjJ7C,EAkJC,CAAD,OAAQ,YAAY;AAlJpB,EAmJE,EAAF,IAAM;;AAnJN,EAqJE,EAAF,OAAU,UAAU,SAAS,SAAU;AArJvC,EAsJG,GAAH,QAAY;AAtJZ,EAuJA;AAvJA,EAwJA;AAxJA,EAyJA;;AAzJA,EA2JA,SA3JA,sBA2JgB,CAAG,SAAS,GAAG,QAAQ,QAAS;AA3JhD;AAAA,EA6JC,CAAD,IAAK;;AA7JL;AAAA,EAgKC,CAAD,IAAM,MAAM,SAAU;AAhKtB,EAiKE,EAAF,MAAQ,IAAI,UAAW;AAjKvB,EAkKA;;AAlKA;AAAA,EAqKC,CAAD,IAAM,aAAa,UAAW;AArK9B,EAsKE,EAAF,EAAI,KAAM,QAAQ;AAtKlB,EAuKA;;AAvKA;AAAA,EA0KA,MAAM,IAAK,MAAO,OAAO,MAAM,YAAY,OAAO,MAAM,aAAe;AA1KvE,EA2KE,GAAF,IAAM;AA3KN,EA4KG,IAAH,OAAU,EAAE;AA5KZ,EA6KA,KAAI,OAAQ,GAAI;AA7KhB,EA8KG,IAAH,OAAW;AA9KX,EA+KG,IAAH;AA/KA,EAgLA;;AAhLA;AAAA,EAmLE,GAAF,IAAO,OAAO,SAAS,YAAa;AAnLpC,EAoLG,IAAH,IAAO,QAAQ,gBAAgB;;AApL/B,EAsLG,IAAH,iBAAoB,UAAW,GAAI;AAtLnC,EAuLI,KAAJ,IAAS,QAAS;AAvLlB,EAwLK,MAAL;AAxLA,EAyLA;AAzLA,EA0LI,KAAJ,SAAa;AA1Lb,EA2LI,KA3LJ,sBA2LW,CAAE,SAAS,GAAG,QAAQ;AA3LjC,EA4LA;;AA5LA,EA8LG,IAAH,gBAAmB,UAAW,GAAI;AA9LlC,EA+LI,KAAJ,IAAS,QAAS;AA/LlB,EAgMK,MAAL;AAhMA,EAiMA;AAjMA,EAkMI,KAAJ,SAAa;AAlMb,EAmMI,KAAJ,OAAY;AAnMZ,EAoMA;;AApMA,EAsMG,IAAH,IAAO;AAtMP,EAuMI,KAAJ,KAAS,KAAM,GAAG,gBAAgB;AAvMlC,EAwMA,MAAK,OAAQ,GAAI;AAxMjB,EAyMI,KAAJ,IAAS,CAAC,QAAS;AAzMnB;AAAA,EA0MK,MAAL,OAAa;AA1Mb,EA2MK,MAAL,SAAc;AA3Md,EA4MK,MAAL;AA5MA,EA6MA;AA7MA,EA8MA;AA9MA,EA+MA,UAEO;AAjNP,EAkNG,IAAH,OAAW;AAlNX,EAmNA;AAnNA,EAoNA,SAEM;AAtNN,EAuNE,GAAF,OAAU;AAvNV,EAwNA;AAxNA,EAyNA;;EDzNO,4BAAa,CAAiB,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,SAAS,OAAqB,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,oCAAqB,CAAS,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,4BAAa,CAAiB,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,8BAAe,CAAe,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,8BAAe,CAAe,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,gCAAiB,CAAa,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,8BAAe,CAAe,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,gCAAiB,CAAa,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,0CAA2B,CAAG,GAAI;EAAE,EAA3C,EAA6C,SAAU;EAAvD;;EACO,8BAAe,CAAe,GAAI;EAAE,EAA3C,EAA6C;EAA7C;;EACO,gCAAiB,CAAa,GAAI;EAAE,EAA3C,OAAkD,EAAE;EAApD;;EACO,SAAS,gBAAqB,GAAI;EAAE,EAA3C,OAAkD,EAAE,SAAU;EAA9D;;;;EDTA,IAAqB,oBAArB,CAAA,YAAA;EACa,CAAb,SADqB,kBACN,UAAU,QAAS;EADlC,oCAAA,CAAA,MAAqB;;EAEnB,EAAF,KAAO,WAAW;EAChB,EAAF,KAAO,SAAS;;EAEd,EAAF,KAAO,SAAS;EACd,EAAF,KAAO,SAAS;;EAEd,EAAF,KAAO,WAAW;EAChB,EAAF,KAAO,gBAAgB,KAAK,gBAAgB;;EAE1C,EAAF,KAAO,cAAc;EACnB,EAAF,KAAO,iBAAiB;EACtB,EAAF,KAAO,iBAAiB;;EAEtB,EAAF,IAAO,QAAS;EACb,GAAH,OAAU,SAAU;EACpB;EACA;;EAlBqB,CAArB,kBAAA,UAoBC,MAAI,SApBL,IAoBO,YAAa;EAClB,EAAF,IAAM,OAAO,WAAW,UAAU,KAAK,SAAS,KAAK;EACnD,EAAF,KAAO,KAAM;EACb;;EAvBqB,CAArB,kBAAA,UAyBC,WAAS,SAzBV,SAyBY,OAAQ;EAClB,EAAF,KAAO,SAAS,KAAM;;EAEpB,EAAF,KAAO,iBAAiB;EACtB,EAAF,KAAO,iBAAiB;EACxB;;;;EA9BqB,CAArB,kBAAA,UAiCC,eAAa,SAjCd,aAiCgB,WAAY;EAC1B,EAAF,KAAO,eAAe,KAAM;EAC5B;;EAnCqB,CAArB,kBAAA,UAqCC,kBAAgB,SArCjB,kBAqCoB;EAClB,EAAF,KAAO,iBAAiB;EACtB,EAAF,MAAS;EACT;;EAxCqB,CAArB,kBAAA,UA0CC,iBAAe,SA1ChB,iBA0CmB;EACjB,EAAF,KAAO,iBAAiB;EACtB,EAAF,MAAS;EACT;;EA7CqB,CAArB,kBAAA,UA+CC,cA/CD,CAAA,UAAA,cAAA;;;;;;;;;;EA+CA,IAAa,YAAG;EACd,EAAF,KAAO,eAAe,+BAAiB;EACrC,EAAF,KAAO,YAAY,QAAS;EAC1B,EAAF,KAAO,SAAS,QAAS;EACzB;;EAnDqB,CAArB,kBAAA,UAqDC,OAAK,SArDN,OAqDS;EACP,EAAF,KAAO,QAAQ;EACb,EAAF,MAAS;EACT;;EAxDqB,CAArB,kBAAA,UA0DC,SAAO,SA1DR,OA0DU,YAAa;EACrB,EAAF,IAAM,OAAO,WAAW,UAAU,KAAK,SAAS,KAAK;EACnD,EAAF,gBAAmB,MAAM;EACvB,EAAF,MAAS;EACT;;EA9DqB,CAArB,kBAAA,UAgEC,QAAM,SAhEP,QAgEU;EACR,EAAF,KAAO,OAAO,OAAQ,KAAK,QAAS,QAAS,UAAA,GAA7C;EAAA,GAAA,OAAkD,EAAE;EAApD;EACA;;EAlEA,CAAA,OAAqB;;;;;EAqErB,SAAS,OAAS,SAAU;EAC3B,CAAD,QAAS;EACT;;EAEA,SAAS,YAAc,IAAK;EAC3B,CAAD,GAAI;EACJ;;EAEA,SAAS,MAAQ,IAAK;EACrB,CAAD,IAAM,CAAC,GAAG,SAAS,GAAG,OAAO,UAAU,GAAG,eAAgB;;;;;EAKzD,CAAD,IAAM,CAAC,GAAG,gBAAiB;EACzB,EAAF,IAAO,GAAG,QAAS;EAChB,GAAH,GAAM,OAAO,gBAAiB;EAC9B,SAAS;EACN,GAAH,GAAM;EACN;;EAEE,EAAF,GAAK,iBAAiB;EACtB;;;;EAIC,CAAD,IAAM,CAAC,GAAG,OAAO,UAAU,CAAC,GAAG,eAAgB;EAC7C,EAAF,IAAO,OAAO,GAAG,aAAa,YAAa;EACxC,GAAH,GAAM;EACN;;EAEE,EAAF,IAAO,GAAG,QAAS;EAChB,GAAH,GAAM,OAAO;EACb;EACA;EACA;;AD3GA,EAKA,IAAM,aAAa,IAAI,KAAM;;AAL7B,EAOA,IAAI,QAAJ;;AAPA,EASA,IAAM,UAAU;AAThB,EAUC,CAAD,OAAO,UAAE,UAAU,eAAgB;AAVnC,EAWE,EAAF,IAAM,SAAS;;AAXf,EAaE,EAAF,IAAO,eAAgB;AAbvB,EAcG,GAAH,UAAa,IAdb,aAcwB,CAAE,UAAA,GAA1B;AAdA,EAcA,IAAA,OAAiC,gBAAgB;AAdjD,EAcA;AAdA,EAeA;;AAfA,EAiBE,EAAF,QAAU;AAjBV,EAkBG,GAAH,eAAkB;AAlBlB,EAmBG,GAAH,mBAAsB,IAAI,kBAAmB,eAAe,SAAS,MAAM;AAnB3E,EAoBG,GAAH,WAAc;AApBd,EAqBG,GAAH,OAAU;AArBV,EAsBG,GAAH,oBAAuB;AAtBvB,EAuBG,GAAH,mBAAsB;AAvBtB,EAwBG,GAAH,UAAa;AAxBb,EAyBA;;AAzBA,EA2BE,EAAF,OAAS;AA3BT,EA4BA;;AA5BA,EA8BC,CAAD,KAAK,YAAG;AA9BR,EA+BE,EAAF;;AA/BA,EAiCE,EAAF,MAAQ,kBAAkB;AAjC1B,EAkCE,EAAF,QAAU,MAAM;AAlChB,EAmCA;;AAnCA,EAqCC,CAAD,aAAa,UAAE,UAAW;AArC1B,EAsCE,EAAF,WAAc,MAAM,WAAW;AAtC/B,EAuCA;;AAvCA,EAyCC,CAAD,aAAa,UAAE,UAAU,OAAQ;AAzCjC,EA0CE,EAAF,WAAc,QAAQ,MAAM,oBAAoB,MAAM,oBAAoB;AA1C1E,EA2CA;;AA3CA,EA6CC,CAAD,oBAAoB,UAAE,YAAa;AA7CnC,EA8CE,EAAF,WAAa,WAAW,MAAM;AA9C9B,EA+CE,EAAF,MAAQ,kBAAkB,IAAK;AA/C/B,EAgDA;;AAhDA,EAkDC,CAAD,mBAAmB,UAAE,WAAY;AAlDjC,EAmDE,EAAF,MAAQ,kBAAkB,aAAc;AAnDxC,EAoDA;;AApDA;AAAA,EAuDC,CAAD,iBAAiB,UAAE,OAAQ;AAvD3B,EAwDE,EAAF,MAAQ,kBAAkB,YAAY,KAAM;AAxD5C,EAyDA;;AAzDA,EA2DC,CAAD,cAAc,UAAE,MAAM,YAAa;AA3DnC,EA4DE,EAAF,IAAM;;AA5DN,EA8DE,EAAF,IAAO,CAAC,OAAQ;AA9DhB,EA+DG,GAAH;AA/DA,EAgEA,SAAS;AAhET,EAiEG,GAAH,SAAY;AAjEZ,EAkEG,GAAH,OAAW,cAAc,OAAO,eAAgB;AAlEhD;AAAA;AAAA;AAAA,EAsEI,IAAJ,SAAa,OAAO;AAtEpB,EAuEA;;AAvEA,EAyEG,GAAH,OAAU,MAAM,KAAM;AAzEtB,EA0EA;AA1EA,EA2EA;AA3EA,EA4EA;;;;AA5EA,EAgFA,SAAS,SAAW,UAAW;AAhF/B,EAiFC,CAAD,SAAU;AAjFV,EAkFA;;AAlFA,EAoFA,SAAS,eAAgB;AApFzB,EAqFC,CAAD,IAAK,GAAG,OAAO;;AArFf,EAuFC,CAAD,MAAO,mBAAmB,QAAS;;AAvFnC;AAAA;AAAA,EA2FC,CAAD,IAAK,MAAM,UAAU;AA3FrB,EA4FC,CAAD,OAAS,KAAM;AA5Ff,EA6FE,EAAF,QAAU,MAAM,UAAU;;AA7F1B;AAAA,EAgGE,EAAF,IAAQ,UAAU,MAAM;AAhGxB,EAiGE,EAAF,WAAa,KAAM,SAAS,QAAQ,UAAU;AAjG9C,EAkGE,EAAF,QAAU,UAAU,UAAU;;AAlG9B,EAoGE,EAAF,MAAQ;AApGR,EAqGA;AArGA,EAsGC,CAAD,MAAO,UAAU,SAAS;;AAtG1B,EAwGC,CAAD,MAAO,kBAAkB;;AAxGzB,EA0GC,CAAD,MAAO,kBAAkB,QAAS;;AA1GlC,EA4GC,CAAD,IAAO,QAAQ,MAAM;AA5GrB,EA6GC,CAAD,MAAO,QAAQ;;AA7Gf,EA+GC,CAAD,KAAO,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,GAAI;AA/GzC,EAgHE,EAAF,MAAQ;AAhHR,EAiHA;;AAjHA;AAAA;AAAA;AAAA,EAsHC,CAAD,IAAM,MAAM,UAAU,QAAS,OAAO;AAtHtC,EAuHA;;ADvHA,EAIA,IAAI,QAAQ;;AAJZ,EAMA,IAAI,aAAa;AANjB,EAOC,CAAD,MAAO,YAAY;AAPnB,EAQE,EAAF,IAAM,GAAG,WAAW;;AARpB,EAUE,EAAF,MAAQ;;AAVR,EAYE,EAAF,QAAU;;AAZV,EAcE,EAAF,KAAQ,IAAE,GAAG,IAAE,MAAM,QAAQ,KAAG,GAAI;AAdpC,EAeG,GAAH,YAAe,MAAM;;AAfrB,EAiBG,GAAH,IAAQ,CAAC,UAAU,KAAM,MAAQ;AAjBjC;AAAA,EAmBI,IAAJ,MAAU,OAAQ,KAAK;AAnBvB,EAoBA;AApBA,EAqBA;;AArBA,EAuBE,EAAF,QAAU;;AAvBV,EAyBE,EAAF,IAAO,MAAM,QAAS;AAzBtB,EA0BG,GAAH,IAAQ,WAAW;AA1BnB,EA2BA,SAAS;AA3BT,EA4BG,GAAH,WAAc,UAAU;AA5BxB,EA6BA;AA7BA,EA8BA;;AA9BA,EAgCC,CAAD,KAAM,UAAW,WAAY;AAhC7B,EAiCE,EAAF,MAAQ,KAAM;;AAjCd,EAmCE,EAAF,IAAO,CAAC,WAAW,SAAU;AAnC7B,EAoCG,GAAH,WAAc,UAAU;AApCxB,EAqCG,GAAH,IAAQ,WAAW;AArCnB,EAsCA;AAtCA,EAuCA;;AAvCA;AAAA,EA0CC,CAAD,OAAQ,UAAW,OAAO,MAAO;AA1CjC,EA2CE,EAAF,IAAM,IAAI,MAAM;AA3ChB,EA2CA,MAAwB;;AA3CxB,EA6CE,EAAF,OAAU,KAAM;AA7ChB,EA8CG,GAAH,YAAe,MAAM;;AA9CrB,EAgDG,GAAH,IAAQ,UAAU,SAAS,QAAQ,UAAU,UAAU,OAAQ;AAhD/D,EAiDI,IAAJ,UAAc;AAjDd,EAkDA;AAlDA,EAmDA;AAnDA,EAoDA;AApDA;;AAAA;;ADAA,EAIA,IAAI,YAAY,UAAW,SAAU;AAJrC,EAKC,CAAD,IAAK;;AALL,EAOC,CAAD,KAAM,YAAY,KAAK;;AAPvB;AAAA,EAUC,CAAD,KAAO,OAAO,SAAU;AAVxB,EAWE,EAAF,IAAO,QAAQ,eAAgB,MAAQ;AAXvC,EAYG,GAAH,KAAS,OAAQ,QAAS;AAZ1B,EAaA;AAbA,EAcA;;AAdA,EAgBC,CAAD,KAAM,eAAe,YAAa,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,KAAK;AAhBtE,EAiBC,CAAD,KAAM,UAAU;;AAjBhB,EAmBC,CAAD,KAAM;AAnBN,EAoBA;;AApBA,EAsBA,UAAU,YAAY;AAtBtB,EAuBC,CAAD,MAAO,YAAY;AAvBnB,EAwBE,EAAF,IAAM,SAAS,GAAG,OAAO,SAAS,OAAO;;AAxBzC,EA0BE,EAAF,UAAY,KAAK;;AA1BjB,EA4BE,EAAF,IAAO,KAAK,SAAU;AA5BtB,EA6BG,GAAH,UAAa,KAAK;AA7BlB,EA8BG,GAAH,UAAa,UAAU,KAAK;;AA9B5B,EAgCG,GAAH,IAAQ,WAAW,KAAK,UAAW;AAhCnC,EAiCI,IAAJ,IAAS,YAAY,MAAO;AAjC5B,EAkCK,KAAL,QAAa,MAAO,KAAK;;AAlCzB,EAoCK,KAAL,IAAU,KAAK,OAAQ;AApCvB,EAqCM,MAAN,KAAW,MAAM,IAAK,KAAK;AArC3B,EAsCA;;AAtCA,EAwCK,KAAL,QAAa;AAxCb,EAyCA;;AAzCA,EA2CI,IAAJ,IAAS,KAAK,MAAO;AA3CrB,EA4CK,KAAL,KAAU,KAAM,GAAG,KAAK;AA5CxB,EA6CA;;AA7CA,EA+CI,IAAJ,KAAS,SAAU,KAAK;;AA/CxB,EAiDI,IAAJ,QAAY,KAAK,KAAK,YAAY,QAAS;;AAjD3C;AAAA,EAoDI,IAAJ,IAAS,UAAU,CAAC,GAAI;AApDxB,EAqDK,KAAL,YAAkB;AArDlB,EAsDA;;AAtDA,EAwDI,IAAJ,KAAS,KAAK,YAAY,OAAQ,OAAO;;AAxDzC,EA0DI,IAAJ,KAAS,UAAU;AA1DnB,EA2DI,IAAJ,OAAW;AA3DX,EA4DA;;AA5DA,EA8DG,GAAH,IAAO,KAAK,SAAS,KAAK,OAAS,UAAU,KAAK,YAAe,UAAU,KAAK;;AA9DhF,EAgEG,GAAH,IAAQ,YAAY,MAAO;AAhE3B,EAiEI,IAAJ,QAAY,KAAK,aAAc;AAjE/B,EAkEI,IAAJ,QAAY,MAAO,KAAK;;AAlExB,EAoEI,IAAJ,IAAS,KAAK,OAAQ;AApEtB,EAqEK,KAAL,KAAU,MAAM,IAAK;AArErB,EAsEA;;AAtEA,EAwEI,IAAJ,QAAY;AAxEZ,EAyEA;;AAzEA,EA2EG,GAAH,IAAQ,KAAK,MAAO;AA3EpB,EA4EI,IAAJ,KAAS,KAAM,GAAG;AA5ElB,EA6EA;;AA7EA,EA+EG,GAAH,OAAU;AA/EV,EAgFA;;AAhFA,EAkFE,EAAF,OAAS;AAlFT,EAmFA;;AAnFA,EAqFC,CAAD,MAAO,YAAY;AArFnB,EAsFE,EAAF,IAAM;;AAtFN,EAwFE,EAAF,KAAO,UAAU;;AAxFjB,EA0FE,EAAF,QAAU,KAAK,KAAK,YAAY,QAAS;;AA1FzC;AAAA,EA6FE,EAAF,IAAO,UAAU,CAAC,GAAI;AA7FtB,EA8FG,GAAH,YAAgB;AA9FhB,EA+FA;;AA/FA,EAiGE,EAAF,KAAO,KAAK,YAAY,OAAQ,OAAO;AAjGvC,EAkGA;AAlGA,EAmGA;;;;ED5FA,IAAI,cAAc,EAAE,MAAM;EAEX,SAAS,gBAAkB,SAAS,IAAI,SAAU;EAChE,CAAD,IAAK,SACH,eACA,GACA,WACA,YACA,QACA,UACA,MACA,UACA,oBACA,eACA,cACA,OACA;;EAED,CAAD,UAAW,iBAAW,CAAE,UAAA,QAAxB;EAAA,EAAA,OAAkC,gBAAgB;EAAlD;;;EAGC,CAAD,IAAM,OAAO,YAAY,UAAW;EAClC,EAAF,UAAY,MAAM;EAChB,EAAF,SAAW,QAAQ;EACjB,EAAF,WAAa,QAAQ;;EAEnB,EAAF,aAAe;;;;;EAKb,EAAF,OAAS,QAAQ;EACf,EAAF,WAAa,QAAQ;;EAEnB,EAAF,IAAO,QAAQ,UAAW;EACvB,GAAH,gBAAmB;;EAEhB,GAAH,QAAW,OAAO;EACf,GAAH,QAAW,WAAW;;EAEnB,GAAH,qBAAwB,UAAW,SAAU;EACzC,IAAJ,OAAW,UAAW,GAAG,OAAQ;EAC5B,KAAL,cAAoB,WAAY;EAChC;EACA;EACA;;EAGE,EAAF,KAAQ,KAAK,SAAU;EACpB,GAAH,IAAQ,QAAQ,eAAgB,IAAM;EAClC,IAAJ,IAAS,QAAQ,UAAW;EACvB,KAAL,eAAoB,mBAAoB;EACnC,KAAL,UAAe,EAAE,QAAA,QAAQ,UAAA;;EAEpB,KAAL,IAAU,MAAO;EACX,MAAN,QAAc,OAAO;EACrB;EACA;;EAEI,IAAJ,QAAY,WAAW,WAAW,eAAe;EAC7C,IAAJ,WAAe,KAAM,QAAS,MAAM,GAAG,QAAQ,IAAI;EACnD;EACA;;;;EAIE,EAAF,eAAiB,EAAE,QAAA,QAAQ,UAAA;;EAEzB,EAAF,IAAO,MAAO;EACX,GAAH,aAAgB,OAAO,UAAA,GAAvB;EAAA,IAAA,OAA4B,KAAM,GAAG;EAArC;EACA;;EAEE,EAAF,IAAO,UAAW;EACf,GAAH,QAAW,KAAM,UAAA,GAAjB;EAAA,IAAA,OAAsB,SAAU,GAAG;EAAnC;EACA;;EAEE,EAAF,aAAe,WAAW;;EAExB,EAAF,QAAU,QAAS,MAAM,MAAM,MAAM;EACnC,EAAF,WAAa,KAAM;;EAEjB,EAAF,QAAU,OAAO,YAAM;EACpB,GAAH,IAAO;;EAEJ,GAAH,OAAW,YAAY,WAAW,OAAQ;EACtC,IAAJ,UAAc;EACd;;EAEG,GAAH,IAAQ,OAAQ;EACZ,IAAJ,MAAU;EACV;EACA;;EAEE,EAAF,OAAS;EACT;;;EAGC,CAAD,UAAW,WAAW;;EAErB,CAAD,IAAM,QAAQ,UAAW;EACvB,EAAF,QAAU,KAAM,QAAQ;EACxB;;EAEC,CAAD,QAAS,WAAW;EACnB,CAAD,YAAa,QAAS,MAAM,SAAS,IAAI;;EAExC,CAAD,QAAS,OAAO,YAAhB;EAAA,EAAA,OAAsB,UAAU;EAAhC;EACC,CAAD,OAAQ;EACR;;EAEA,SAAS,QAAU,MAAM,SAAS,IAAI,SAAU;EAC/C,CAAD,IAAK,QAAQ,UAAU,WAAW;;EAEjC,CAAD,IAAK,QAAL;;EAEC,CAAD,IAAM,SAAU;;;EAGd,EAAF,QAAU,KAAK,UAAU,QAAS,UAAW,SAAU,MAAO;EAC5D,EAAF,OAAS,MAAM;;;;EAIb,mBAAU,CAAC,MAAO,OAAO;EAC3B;;;EAGC,CAAD,IAAM,QAAS,MAAM,KAAO;EAC1B,EAAF,IAAO,QAAQ,UAAW;EACvB,GAAH,QAAW,SAAU,QAAQ;EAC7B;;EAEE,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,QAAQ,QAAS;EACrB,EAAF,IAAO,OAAO,QAAQ,WAAW,YAAa;EAC3C,GAAH,SAAY,QAAQ;EACpB,SAEO;EACJ,GAAH,SAAY,KAAK,OAAQ,QAAQ;EACjC;;EAEE,EAAF,IAAO,OAAO,WAAW,YAAa;EACnC,GAAH,SAAY;EACZ;EACA;;;EAGC,CAAD,WAAc,QAAQ,aAAa,YAAY,MAAM,QAAQ;;;EAG5D,CAAD,YAAa,IAAI,UAAU;EACzB,EAAF,OAAE;EACA,EAAF,MAAE;EACA,EAAF,IAAE;EACA,EAAF,MAAE;EACA,EAAF,UAAE;EACA,EAAF,QAAE;EACA,EAAF,cAAgB,QAAQ;;;EAGtB,EAAF,MAAQ,QAAQ;EACd,EAAF,UAAY,QAAQ;EACpB;;EAEC,kBAAU,CAAC,IAAK;EAChB,CAAD,KAAM,YAAY,KAAM;;EAEvB,CAAD,OAAQ;EACR;;;EDhLA,IAAI,aAAa,IAAI,KAAM;EAEZ,SAAS,iBAAkB;EACzC,CAAD,IAAM,KAAK,YAAa;EACtB,EAAF,OAAS,KAAK;EACd;;EAEC,CAAD,IAAM,KAAK,IAAK;EACd,EAAF,gBAAmB,KAAK,GAAG,uBAAuB;EAClD;;EAEC,CAAD,KAAM,KAAK,KAAK,SAAS;EACxB,CAAD,KAAM,aAAa;;EAElB,CAAD,WAAY,KAAM;EACjB,CAAD,OAAQ,KAAK;EACb;;ADnBA;;AAAA,EAAe,SAAS,aAAe,UAAW;AAAlD,EACC,CAAD,IAAM,CAAC,KAAK,IAAK;AADjB,EAEE,EAAF,OAAS;AAFT,EAGA;;AAHA,EAKC,CAAD,OAAQ,KAAK,SAAS,KAAM;AAL5B,EAMA;;;;EDFA,SAAS,uBAAyB,MAAM,WAAY;EACnD,CAAD,IAAM,KAAK,yBAA0B;EACnC,EAAF,IAAQ,UAAU,KAAK,wBAAyB;EAC9C,EAAF,OAAS,UAAY,IAAM,IAAI,CAAC;EAChC;;;;EAIC,CAAD,OAAQ,mBAAoB,MAAM;EAClC;;EAEA,SAAS,mBAAqB,GAAG,GAAI;EACpC,CAAD,IAAO,YAAY,YAAa,EAAE,aAAa,EAAE,SAAS;EACzD,CAAD,IAAO,YAAY,YAAa,EAAE,aAAa,EAAE,SAAS;;EAEzD,CAAD,IAAK,UAAU,SAAU;EACxB,CAAD,IAAK,UAAU,SAAU;EACxB,CAAD,IAAK,iBAAL;;;;EAIC,CAAD,OAAS,WAAa,YAAY,SAAY;EAC5C,EAAF,UAAY;EACV,EAAF,UAAY;;EAEV,EAAF,iBAAmB;;EAEjB,EAAF,UAAY,SAAU;EACpB,EAAF,UAAY,SAAU;EACtB;;;EAGC,CAAD,UAAW,QAAQ,aAAa;EAC/B,CAAD,UAAW,QAAQ,aAAa;;EAE/B,CAAD,IAAO,YAAY,QAAQ;EAC1B,CAAD,IAAO,YAAY,QAAQ;;;EAG1B,CAAD,IAAM,cAAc,WAAY;EAC9B,EAAF,IAAQ,SAAS,UAAU,MAAM,QAAS;EACxC,EAAF,IAAQ,SAAS,UAAU,MAAM,QAAS;;;;EAIxC,EAAF,OAAS,SAAW,UAAY,UAAU,SAAS,UAAU;EAC7D;;;;EAIC,CAAD,IAAO,YAAY,eAAe;EACjC,CAAD,IAAM,WAAY;EAChB,EAAF,IAAQ,SAAS,UAAU,QAAS;EAClC,EAAF,IAAQ,SAAS,UAAU,QAAS;;EAElC,EAAF,OAAS,SAAW,UAAY,UAAU,SAAS,UAAU;EAC7D;;EAEC,CAAD,MAAO,IAAI,MAAO;EAClB;;EAEA,SAAS,UAAY,MAAO;EAC3B,CAAD,IAAK;;EAEJ,CAAD,IAAM,iBAAiB,KAAK,gBAAiB;EAC3C,EAAF,OAAS,eAAe;EACxB;;EAEC,CAAD,IAAM,KAAK,cAAe,iBAAiB,KAAK,UAAU,iBAAmB;EAC3E,EAAF,OAAS,eAAe;EACxB;EACA;;EAEA,SAAS,YAAc,MAAO;EAC7B,CAAD,IAAK,UAAU;;EAEd,CAAD,WAAY,CAAE;;EAEb,CAAD,WAAY,UAAW;;EAEtB,CAAD,OAAS,UAAW;EAClB,EAAF,SAAW,KAAM;EACf,EAAF,WAAa,UAAW;EACxB;;EAEC,CAAD,OAAQ;EACR;;EAGA,IAAqB,QAArB,CAAA,YAAA;EACa,CAAb,SADqB,MACN,SAAS,UAAU,MAAM,kBAAmB;EAD3D,wBAAA,CAAA,MAAqB;;EAEnB,EAAF,KAAO,UAAU;EACf,EAAF,KAAO,WAAW;EAChB,EAAF,KAAO,OAAO;EACZ,EAAF,KAAO,mBAAmB;;EAExB,EAAF,KAAO,SAAS;;EAEd,EAAF,KAAO,QAAQ;EACf;;EAVqB,CAArB,MAAA,UAYC,MAAI,SAZL,IAYO,MAAO;EACZ,EAAF,KAAO,OAAO,KAAM;EAClB,EAAF,KAAO;EACP;;EAfqB,CAArB,MAAA,UAiBC,SAAO,SAjBR,SAiBW;EACT,EAAF,IAAM,aAAa,UAAU;;EAE3B,EAAF,cAAgB,KAAK,MAAO,KAAK,mBAAmB,yBAAyB;EAC3E,EAAF,WAAa,KAAK;;EAEhB,EAAF,QAAU,YAAY,QAAS;;EAE7B,EAAF,IAAO,UAAU,CAAC,GAAI;EACnB,GAAH,YAAe,OAAQ,OAAO;EAC3B,GAAH,YAAgB,YAAa;EAC7B;EACA;;EA7BqB,CAArB,MAAA,UA+BC,OAAK,SA/BN,OA+BS;EACP,EAAF,KAAO,QAAQ;EACf;;EAjCqB,CAArB,MAAA,UAmCC,YAAU,SAnCX,YAmCc;;;EACZ,EAAF,IAAO,CAAC,KAAK,OAAQ;EAClB,GAAH,KAAQ,QAAQ;;;;EAIb,GAAH,QAAW,aAAc,YAAzB;EAAA,IAAA,OAA+B,MAAK;EAApC;EACA;EACA;;EA3CqB,CAArB,MAAA,UA6CC,SAAO,SA7CR,OA6CU,iBAAkB;EAC1B,EAAF,IAAM,QAAQ,KAAK,OAAO,QAAS,KAAK,mBAAmB,gBAAgB,WAAW;;EAEpF,EAAF,IAAO,UAAU,CAAC,GAAI;EACnB,GAAH,KAAQ,OAAO,OAAQ,OAAO;EAC9B;EACA;;EAnDqB,CAArB,MAAA,UAqDC,SAAO,SArDR,SAqDW;EACT,EAAF,KAAO,OAAO,KAAM,KAAK,mBAAmB,qBAAqB;EAC/D,EAAF,KAAO,QAAQ;EACf;;EAxDqB,CAArB,MAAA,UA0DC,OAAK,SA1DN,KA0DQ,MAAO;EACb,EAAF,OAAS,KAAK,mBACT,CAAC,KAAK,YAAY,KAAK,SAAS,KAAK,WACrC,OAAO,QAAS,MAAM,KAAK,YAAa;EAC7C;;EA9DA,CAAA,OAAqB;;;;ED3FN,SAAS,gBAAkB,UAAU,SAAU;EAC7D,CAAD,IAAK,aAAa;;EAEjB,CAAD,IAAM,CAAC,KAAK,IAAK;EACf,EAAF,OAAS;EACT;;EAEC,CAAD,UAAW,WAAW;EACrB,CAAD,cAAe,KAAK;;;;EAInB,CAAD,IAAM,QAAQ,YAAa,WAAa;;;EAGtC,EAAF,OAAS,WAAa,QAAQ,OAAS,QAAQ,MAAM;EACrD;;EAEC,CAAD,QAAS,IAAI,MAAO,MAAM,UAAU,CAAC,CAAC,QAAQ,MAAM;;;;EAInD,CAAD,IAAM,MAAM,MAAO;EACjB,EAAF,YAAc,KAAM;EAClB,EAAF,YAAe,MAAM,YAAa;EAClC;;EAEC,CAAD,KAAM,SAAS,QAAS,UAAU;;EAEjC,CAAD,MAAO;EACN,CAAD,OAAQ,MAAM;EACd;;;ED/Be,SAAS,0BAA4B,UAAU,SAAU;EACvE,CAAD,IAAK,aAAa;;EAEjB,CAAD,UAAW,WAAW;EACrB,CAAD,cAAe,KAAK;;;;EAInB,CAAD,IAAM,QAAQ,YAAa,WAAa;;;EAGtC,EAAF,OAAS,WAAa,QAAQ,OAAS,QAAQ,MAAM;EACrD;;EAEC,CAAD,QAAS,IAAI,MAAO,MAAM,UAAU,CAAC,CAAC,QAAQ,MAAM;;;;EAInD,CAAD,IAAM,MAAM,MAAO;EACjB,EAAF,YAAc,KAAM;EAClB,EAAF,YAAe,MAAM,YAAa;EAClC;;EAEC,CAAD,KAAM,SAAS,kBAAmB,UAAU;;EAE3C,CAAD,MAAO;EACN,CAAD,OAAQ,MAAM;EACd;;AD7BA;;AAAA,EAAe,SAAS,sBAAwB,UAAW;AAA3D,EACC,CAAD,OAAQ,KAAK,SAAS,cAAe;AADrC,EAEA;;;;EDAA,SAAA,sBAAA,UAAA;EACA,CAAA,IAAA,KAAY,WAAZ;;EAEA,GAAA,OAAA,KAAiB;EACjB,SAAA;EACA,GAAA,OAAA,KAAA,UAAA,cAAA;;EAEA;;EAEC,CAAD,OAAQ;EACP;;ADZD;;AAAA,EAAe,SAAS,mBAAqB,UAAW;;AAAxD,EAEC,CAAD,IAAM,KAAK,QAAS;AAFpB,EAGE,EAAF,IAAO,KAAK,OAAO,aAAa,KAAK,OAAO,UAAU,SAAS,UAAW;AAH1E,EAIG,GAAH,OAAU,KAAK;AAJf,EAKA,SAAS;AALT,EAMG,GAAH,OAAU,KAAK,OAAO,WAAa;AANnC,EAOA;AAPA,EAQA;;AARA,EAUC,CAAD,OAAQ;AAVR,EAWA;;EDXO,SAAS,QAAU,SAAS,OAAQ;EAC1C,CAAD,IAAM,QAAQ,OAAQ;EACpB,EAAF,QAAU,YAAY,KAAM,QAAQ;EACpC;;EAEC,CAAD,QAAS,QAAQ;EACjB;;EAEO,SAAS,QAAU,SAAU;EACnC,CAAD,IAAM,QAAQ,YAAY,QAAS;EACjC,EAAF,QAAU,QAAQ,QAAQ,YAAY;EACtC,QAAQ;EACN,EAAF,QAAU,QAAQ;EAClB;EACA;;EDdA,IAAI,WAAW;;;;;;;;;EAQA,SAAS,4BAA8B,SAAU;EAC/D,CAAD,IAAK,MAAM,SAAS,QAAQ,GAAG,QAAQ;;EAEtC,CAAD,OAAQ,QAAQ,MAAO;EACtB,CAAD,IAAK,EAAG,UAAU,SAAU,KAAK,UAAY;EAC3C,EAAF,UAAY,WAAY,KAAK;EAC7B;;EAEC,CAAD,SAAU;;EAET,CAAD,SAAU,UAAW,MAAM,GAAI;EAC7B,EAAF,OAAS,OAAO,MAAM,KAAK;EAC3B;;EAEC,CAAD,IAAK,QAAQ;EACZ,CAAD,OAAS,KAAM;EACb,EAAF,kBAAoB,QAAQ,GAAG,IAAK,QAAS,KAAM;;EAEjD,EAAF,IAAO,CAAC,OAAO,eAAgB,kBAAoB;EAChD,GAAH,OAAU,KAAM;EACb,GAAH,OAAW,mBAAoB;EAC/B;EACA;;EAEC,CAAD,OAAQ;EACR;;;;;;EAMA,SAAS,WAAa,KAAM;EAC3B,CAAD,IAAK,OAAO;EAAZ,KAAgB;EAAhB,KAAqB;EAArB,KAA6B;EAA7B,KAAsC;EAAtC,KAA8C;EAA9C,KAAiD;EAAjD,KAAoD;EAApD,KAAuD;;EAEtD,CAAD,IAAM,CAAC,SAAU,MAAQ;EACvB,EAAF,UAAY;;EAEV,EAAF,OAAU,KAAK,SAAS,KAAM;EAC3B,GAAH,QAAW;EACX;;EAEE,EAAF,MAAQ,SAAU,MAAM;;EAEtB,EAAF,SAAW,UAAW,OAAQ;EAC3B,GAAH,OAAU,UAAU;EACpB;;EAEE,EAAF,KAAQ,IAAI,GAAG,KAAK,KAAK,KAAK,GAAI;EAC/B,GAAH,SAAY,EAAE,SAAU;EACrB,GAAH,OAAW,OAAO,SAAS,KAAM;EAC7B,IAAJ,SAAa,MAAM;EACnB;;EAEG,GAAH,MAAS;EACN,GAAH,IAAO,OAAO;EACX,GAAH,KAAQ,IAAI,GAAG,IAAI,GAAG,KAAK;EACvB,IAAJ,IAAQ,KAAM,OAAQ,OAAO;EAC7B;EACG,GAAH,QAAW,KAAK;EAChB;;EAEE,EAAF,SAAY,OAAQ;EACpB;;EAEC,CAAD,OAAQ,SAAU;EAClB;;EDtEA,IAAI,gBAAgB;EAEL,SAAS,UAAY,SAAS,WAA0B;EAAvE,CAAA,IAAwD,UAAxD,UAAA,UAAA,KAAA,UAAA,OAAA,YAAkE,KAAlE,UAAA;;EACC,CAAD,IAAM,CAAC,WAAY;EAAE,EAArB;EAAA;;EAEC,CAAD,IAAM,CAAC,QAAQ,OAAQ;EACrB,EAAF,QAAU,QAAQ;EACf,GAAH,MAAS;;EAEN,GAAH,QAAW;EACX;EACA,QAAQ;EACN,EAAF,QAAU,MAAM,OAAO;EACvB;;EAEC,CAAD,IAAK,aAAa,iBAAkB;;EAEnC,CAAD,YAAc,SAAS,YAAY,QAAQ,OAAO,QAAQ,MAAM;EAChE;;EAEA,SAAS,iBAAmB,WAAY;EACvC,CAAD,IAAM,cAAc,eAAgB,YAAc;EAChD,EAAF,OAAS,cAAe;EACxB,QAAQ;EACN,EAAF,OAAS,cAAe,aAAc,4BAA6B;EACnE;EACA;;EAEA,SAAS,YAAe,SAAS,YAAY,OAAO,MAA4B;EAAhF,CAAA,IAA0D,cAA1D,UAAA,UAAA,KAAA,UAAA,OAAA,YAAwE,QAAxE,UAAA;;EAEC,CAAD,IAAK;EAAL,KAAkB;EAAlB,KAAqB,SAAS;;EAE7B,CAAD,QAAU,SAAS;;EAElB,CAAD,KAAO,IAAI,WAAW,QAAQ,KAAK,GAAG,KAAM;EAC1C,EAAF,cAAgB,QAAQ,MAAO,WAAY;;EAEzC,EAAF,IAAO,aAAc;EAClB,GAAH,SAAY,kBAAmB,SAAS,aAAa,OAAO,SAAU;EACtE;EACA;;EAEC,CAAD,QAAU;;EAET,CAAD,IAAM,QAAQ,UAAU,QAAS;;EAE/B,EAAF,IAAO,eAAe,QAAQ,WAAY;EACvC,GAAH,IAAO,WAAW,QAAQ,UAAU,OAAO,MAAM,WAAY,WAAW,SAAO;EAC5E,GAAH,aAAgB,iBAAkB;;EAE/B,GAAH,IAAO,OAAQ;EACX,IAAJ,MAAU,YAAY;EACtB;EACA;;EAEE,EAAF,YAAe,QAAQ,QAAQ,YAAY,OAAO;EAClD;EACA;;EAEA,SAAS,kBAAoB,SAAS,aAAa,OAAO,MAAO;EAChE,CAAD,IAAK,gBAAgB;EAArB,KAA2B,YAAY;;EAEtC,CAAD,IAAM,SAAS,CAAC,MAAM,QAAS;EAC7B,EAAF,OAAS,CAAE,OAAQ,OAAQ;EAC3B;;;;EAIC,CAAD,cAAe,YAAY;;EAE1B,CAAD,KAAO,IAAI,IAAI,GAAG,MAAM,YAAY,QAAQ,IAAI,KAAK,KAAK,GAAI;EAC5D,EAAF,IAAO,YAAa,GAAI,MAAO,SAAS,UAAW,OAAQ;EACxD,GAAH,YAAe;EACf;EACA;;EAEC,CAAD,IAAM,SAAS,CAAC,MAAM,UAAU,cAAe,gBAAgB,MAAM,WAAa;EAChF,EAAF,cAAgB,kBAAkB,cAAc;EAC9C,EAAF,cAAgB,mBAAmB,cAAc;EACjD;;EAEC,CAAD,OAAQ,CAAC;EACT;;;EDnFe,SAAS,aAAe,WAAqB;EAA5D,CAAA,KAAA,IAAA,OAAA,UAAA,QAAqD,OAArD,MAAA,OAAA,IAAA,OAAA,IAAA,IAAA,OAAA,GAAA,OAAA,MAAA,QAAA;EAAqD,EAArD,KAAA,OAAA,KAAA,UAAA;;;EACC,CAAD,UAAY,MAAM,WAAW,EAAE,MAAA;EAC/B;;EDJA,SAAS,aAAe,KAAM;EAC7B,CAAD,MAAO,IAAI,MAAX,gCAAgD,MAAhD;EACA;EAEe,SAAS,0BAA4B,UAAU,KAAM;EACnE,CAAD,IAAO,iBAAiB,SAAS,cAAc;EAC9C,CAAD,IAAO,OAAO,IAAI,MAAO;EACxB,CAAD,IAAO,MAAM,KAAK;;;EAGjB,CAAD,IAAO,OAAO,eAAe,SAAS,eAAgB,OACpD,eAAe,SAAU,OACzB,eAAe,aAAa,eAAgB,OAC3C,eAAe,aAAc,OAC7B;;EAEF,CAAD,IAAM,MAAO;EACX,EAAF,OAAS,KAAK,SAAS,IACpB,KAAK,QAAS,KAAK,MAAO,MAC1B;EACH;;EAEC,CAAD,IAAK,kBAAL;EACC,CAAD,IAAK,2BAAL;;EAEC,CAAD,OAAS,UAAW;;EAElB,EAAF,IAAO,SAAS,aAAc;EAC3B,GAAH,IAAQ,QAAQ,SAAS,OAAO,QAAS;EACrC,IAAJ,IAAS,KAAK,SAAS,GAAI,aAAc;EACrC,IAAJ,OAAW,SAAS,QAAQ;EAC5B;;EAEG,GAAH,IAAQ,QAAQ,SAAS,OAAO,UAAW;EACvC,IAAJ,IAAS,KAAK,SAAS,GAAI,aAAc;EACrC,IAAJ,OAAW,SAAS,QAAQ,cAAe,SAAS;EACpD;EACA;;EAEE,EAAF,IAAO,SAAS,SAAU;;EAEvB,GAAH,IAAQ,CAAC,SAAS,UAAU,SAAS,QAAQ,WAAY,kBAAkB;;EAExE,GAAH,IAAQ,SAAS,QAAQ,IAAK,MAAQ;EAClC,IAAJ,IAAS,0BAA2B;EAC/B,KAAL,eAAoB,IAAK,KAAK,SAAS,QAAQ,QAAS;EACxD;;EAEI,IAAJ,OAAW,SAAS,QAAQ,QAAS;EACrC;EACA;;EAEE,EAAF,IAAO,SAAS,mBAAmB,CAAC,SAAS,QAAQ,UAAW;;EAE7D,GAAH,WAAc,SAAS;EACpB,GAAH,2BAA8B;EAC9B,SAAS;EACN,GAAH,WAAc,SAAS;EACvB;EACA;;EAEC,CAAD,IAAM,CAAC,iBAAkB;EACvB,EAAF,OAAS,eAAe,QAAS;EACjC;EACA;;ED9De,SAAS,iBAAmB,UAAU,KAAM;EAC1D,CAAD,IAAK,UAAU,SAAS;;;;EAIvB,CAAD,IAAM,QAAQ,OAAO,QAAQ,QAAS,OAAO;EAC5C,CAAD,IAAM,QAAQ,YAAa,OAAO,QAAQ;EACzC,CAAD,IAAM,QAAQ,UAAW;EACvB,EAAF,IAAQ,WAAW,SAAS;EAC1B,EAAF,OAAS,SAAS,QAAQ,cAAe,SAAS;EAClD;EACC,CAAD,IAAM,QAAQ,QAAS,OAAO,SAAS,wBAAwB,QAAQ;;;EAGtE,CAAD,IAAM,IAAI,OAAO,KAAM,OAAO,QAAQ,KAAK,QAAS,IAAI,MAAO,GAAI,MAAO;EACzE,CAAD,IAAM,IAAI,OAAO,KAAM;EACrB,EAAF,IAAQ,QAAQ,IAAI,MAAO;;EAEzB,EAAF,OAAU,MAAM,OAAO,OAAO,MAAM,OAAO,MAAO;EAC/C,GAAH,IAAS,OAAO,MAAM;;EAEnB,GAAH,IAAQ,SAAS,MAAO;EACpB,IAAJ,UAAc,QAAQ;EACtB;EACA;;EAEE,EAAF,MAAQ,MAAM,KAAM;;;EAGlB,EAAF,IAAO,IAAI,OAAO,KAAM,MAAM,IAAI,MAAO;EACvC,EAAF,OAAS,QAAQ,QAAS,IAAI,MAAO;EACrC;;EAEC,CAAD,OAAQ,0BAA2B,UAAU;EAC7C;;;EDjCe,SAAS,YAAc,SAAU;EAC/C,CAAD,IAAM,CAAC,SAAU,OAAO,KAAK,UAAU,IAAK;;EAE3C,CAAD,IAAO,OAAO,aAAc;EAC3B,CAAD,IAAO,MAAM,KAAK;;EAEjB,CAAD,IAAK,QAAL;;EAEC,CAAD,IAAM,CAAC,KAAK,UAAU,IAAK,MAAQ;;;EAGjC,EAAF,IAAO,KAAK,WAAY;EACrB,GAAH,QAAW,iBAAkB,KAAK,UAAU,gBAAgB;;EAEzD,GAAH,IAAQ,OAAQ;EACZ,IAAJ,KAAS,UAAU,IAAK,KAAK;EAC7B;EACA;EACA;;EAEC,CAAD,QAAS,KAAK,UAAU,QAAS;EAChC,CAAD,OAAQ,MAAM,IAAK;EACnB;;;;EDtBA,IAAI,aAAa,IAAI,KAAM;EAEZ,SAAS,eAAiB,QAAQ,QAAS;EACzD,CAAD,IAAM,CAAC,KAAK,SAAS,UAAW;;EAE9B,EAAF,MAAQ,IAAI,MAAO;EACnB;;EAEC,CAAD,SAAU,WAAY;EACrB,CAAD,SAAU,WAAY,WAAY;;EAEjC,CAAD,IAAM,CAAC,QAAS;EACd,EAAF,MAAQ,IAAI,MAAO;EACnB;;EAEC,CAAD,OAAQ,aAAc,KAAK,UAAU;EACpC,CAAD,KAAM,KAAK;;EAEV,CAAD,CAAG,OAAO,0BAA2B,OAAO,wBAAwB,KAAO,KAAM;EAChF,CAAD,KAAM,aAAa;;EAElB,CAAD,eAAiB;EACjB;;EAEA,SAAS,eAAgB,SAAU;EAClC,CAAD,WAAY,KAAM;;EAEjB,CAAD,QAAS,kBAAkB,KAAK,QAAS,UAAA,OAAS;EAChD,EAAF,eAAkB,MAAM;EACxB;EACA;;;ED7BA,IAAI,cAAc;;EAElB,SAAS,cAAgB,QAAS;EACjC,CAAD,IAAM,CAAC,QAAS,OAAO;EACtB,CAAD,IAAM,WAAW,MAAO,OAAO,KAAK;EACnC,CAAD,IAAM,OAAO,WAAW,YAAa,OAAO;;EAE3C,CAAD,IAAM,OAAO,WAAW,UAAW;EACjC,EAAF,OAAS,YAAa,YAAc,YAAa,UAAW,UAAA,OAA5D;EAAA,GAAA,OAAqE,MAAO;EAA5E;EACA;;EAEC,CAAD,MAAO,IAAI,MAAO;EAClB;EAEe,SAAS,cAAgB,SAAS,OAAO,SAAU;EACjE,CAAD,IAAO,QAAQ,KAAK,UAAU,QAAS,aAAc;EACpD,CAAD,IAAO,UAAU,QAAQ,MAAO,MAAM;EACrC,CAAD,IAAO,QAAQ,MAAM;;EAEpB,CAAD,IAAM,UAAU,OAAQ;EACtB,EAAF,MAAQ,IAAI,MAAO;EACnB,QAAQ,IAAK,CAAC,QAAS,UAAW,CAAC,QAAS,QAAU;EACpD,GAAF,MAAQ,IAAI,MAAO;EACnB;;EAEC,CAAD,IAAO,aAAa,cAAe,WAAW,QAAQ;EACrD,CAAD,MAAO,MAAO,OAAO;;EAEpB,CAAD,QAAS;EACR,CAAD,OAAQ;EACR;;;;ED5Be,SAAS,QAAU,SAAS,UAAU,SAAU;;;EAC9D,CAAD,IAAK,YAAY;;EAEhB,CAAD,IAAM,SAAU,UAAY;;EAC1B,GAAF,IAAQ,MAAM;EACZ,GAAF,UAAY,YAAY;;EAEtB,GAAF,OAAS,KAAM,KAAM,QAAS,UAAA,SAAW;EACtC,IAAH,IAAS,WAAW,IAAK;;EAEtB,IAAH,QAAW,MAAO,KAAM,QAAS,UAAA,SAAW;EACxC,KAAJ,UAAc,KAAM,eAApB,OAA0C,SAAS,UAAU;EAC7D;EACA;;EACA,QAEM;EACJ,EAAF,IAAM,WAAN;;EAEE,EAAF,IAAO,OAAO,YAAY,YAAa;EACpC,GAAH,UAAa;EACV,GAAH,WAAc;EACX,GAAH,WAAc,CAAE;EAChB,SAAS;EACN,GAAH,WAAc,QAAQ,MAAO;EAC7B;;EAEE,EAAF,SAAW,QAAS,UAAA,SAAW;EAC5B,GAAH,UAAa,KAAM,eAAnB,OAAyC,SAAS,UAAU,WAAW;EACvE;EACA;;;;EAIC,CAAD,KAAM,WAAW,KAAK,MAAO,KAAK,YAAY;;EAE7C,CAAD,OAAQ;EACN,EAAF,QAAS,YAAG;EACT,GAAH,UAAa,QAAS;EACtB;EACA;EACA;;EAEA,SAAS,eAAiB,SAAS,SAAS,UAAU,SAAU;EAC/D,CAAD,IAAO,YAAY,QAAQ;;EAE1B,CAAD,IAAO,OAAO,aAAc;EAC3B,CAAD,IAAO,gBAAgB,KAAK,QAAS;;;EAGpC,CAAD,IAAM,EAAC,CAAC,eAAgB;EACtB,EAAF,IAAQ,MAAM,KAAK;;EAEjB,EAAF,IAAO,CAAC,UAAU,IAAK,MAAQ;;EAE5B,GAAH,IAAQ,QAAQ,WAAY;EACxB,IAAJ,IAAU,SAAQ,iBAAkB,QAAQ,UAAU,gBAAgB;EAClE,IAAJ,IAAS,QAAQ,UAAU,IAAK,KAAK;EACrC;EACA;;EAEE,EAAF,IAAQ,QAAQ,UAAU,QAAS;EACjC,EAAF,OAAS,IAAI,SAAU,SAAS,OAAO,UAAU;EACjD;;;EAGC,CAAD,IAAO,YAAY,kBAAkB,IACnC,YACA,UAAU,QAAS,KAAK,MAAO,GAAG;;EAEnC,CAAD,OAAQ,IAAI,gBAAiB,SAAS,WAAW,KAAK,OAAQ,gBAAiB,UAAU;EACzF;;EAEA,IAAM,WAAN,CAAA,YAAA;EACa,CAAb,SADM,SACS,SAAS,OAAO,UAAU,SAAU;EADnD,0BAAA,CAAA,MAAM;;EAEJ,EAAF,KAAO,UAAU;EACf,EAAF,KAAO,QAAQ;EACb,EAAF,KAAO,UAAU,MAAM;EACrB,EAAF,KAAO,WAAW;;EAEhB,EAAF,KAAO,WAAW;EAChB,EAAF,KAAO,WAAW,MAAM;;EAEtB,EAAF,KAAO,QAAQ,QAAQ;EACrB,EAAF,KAAO,OAAO,QAAQ;EACpB,EAAF,KAAO,SAAS,QAAQ;;EAEtB,EAAF,KAAO,QAAQ;;EAEb,EAAF,IAAO,QAAQ,SAAS,OAAQ;EAC7B,GAAH,KAAQ;EACR,SAAS;EACN,GAAH,KAAQ,WAAW,KAAK;EACxB;;EAEE,EAAF,MAAQ,SAAU;EAClB;;EAvBM,CAAN,SAAA,UAyBC,SAAO,SAzBR,SAyBW;EACT,EAAF,KAAO,MAAM,WAAY;EACzB;;EA3BM,CAAN,SAAA,UA6BC,WAAS,SA7BV,WA6Ba;EACX,EAAF,KAAO,SAAS,KAAM,KAAK,SAAS,KAAK,UAAU,KAAK,UAAU,KAAK;EACrE,EAAF,KAAO,WAAW,KAAK;EACrB,EAAF,KAAO,QAAQ;EACf;;EAjCM,CAAN,SAAA,UAmCC,eAAa,SAnCd,eAmCiB;EACf,EAAF,IAAO,CAAC,KAAK,OAAQ;EAClB,GAAH,KAAQ,WAAW,KAAK,MAAM;;EAE3B,GAAH,IAAQ,KAAK,UAAU,KAAK,aAAa,KAAK,UAAW;;EAEtD,GAAH,QAAW,YAAa,MAAM,KAAK;EAChC,GAAH,KAAQ,QAAQ;;EAEb,GAAH,IAAQ,KAAK,MAAO,KAAK;EACzB;EACA;;EA9CA,CAAA,OAAM;;;EAiDN,IAAM,kBAAN,CAAA,YAAA;EACa,CAAb,SADM,gBACS,SAAS,WAAW,MAAM,UAAU,SAAU;;;EAD7D,0BAAA,CAAA,MAAM;;EAEJ,EAAF,KAAO,UAAU;EACf,EAAF,KAAO,YAAY;EACjB,EAAF,KAAO,OAAO;EACZ,EAAF,KAAO,WAAW;;EAEhB,EAAF,IAAQ,UAAU,KAAK,KAAM,OAAQ,QAAS,OAAO;EACnD,EAAF,IAAQ,cAAc,UAAU;EAC9B,EAAF,KAAO,UAAU,IAAI,OAArB,OAAiC,cAAc,cAAc,MAAM,MAAK,UAAxE;;EAEE,EAAF,KAAO,YAAY;EACjB,EAAF,KAAO,YAAY;;EAEjB,EAAF,KAAO,QAAQ,QAAQ;EACrB,EAAF,KAAO,OAAO,QAAQ;EACpB,EAAF,KAAO,SAAS,QAAQ;;EAEtB,EAAF,KAAO,QAAQ;;EAEb,EAAF,KAAO,UAAU,YAAa,KAAK,MAAO,QAAS,UAAA,OAAS;EACzD,GAAH,OAAQ,UAAW,MAAM,gBAAiB,MAAM;EAChD;;EAEE,EAAF,IAAO,QAAQ,SAAS,OAAQ;EAC7B,GAAH,KAAQ;EACR,SAAS;EACN,GAAH,KAAQ,YAAY,KAAK;EACzB;;EAEE,EAAF,UAAY,SAAU;EACtB;;EA/BM,CAAN,gBAAA,UAiCC,SAAO,SAjCR,SAiCW;EACT,EAAF,KAAO,UAAU,WAAY;EAC7B;;EAnCM,CAAN,gBAAA,UAqCC,WAAS,SArCV,WAqCa;;;EACX,EAAF,OAAS,KAAM,KAAK,WAAY,QAAS,UAAA,SAAW;EACjD,GAAH,IAAS,WAAW,OAAK,UAAW;EACjC,GAAH,IAAS,WAAW,OAAK,UAAW;;EAEjC,GAAH,IAAQ,OAAK,UAAU,aAAa,UAAW;EAC5C,GAAH,IAAQ,QAAS,UAAU,WAAa;;EAErC,GAAH,IAAS,YAAY,OAAK,QAAQ,KAAM,SAAU,MAAO;EACtD,GAAH,IAAS,OAAO,CAAE,UAAU,UAAU,SAAU,OAAQ;;EAErD,GAAH,OAAQ,SAAS,MAAO,OAAK,SAAS;EACtC;;EAEE,EAAF,KAAO,YAAY,KAAK;EACtB,EAAF,KAAO,QAAQ;EACf;;EArDM,CAAN,gBAAA,UAuDC,eAAa,SAvDd,eAuDiB;;;EACf,EAAF,IAAO,CAAC,KAAK,OAAQ;EAClB,GAAH,KAAQ,YAAY;;;;;;;;;EASjB,GAAH,KAAQ,UAAU,YAAa,KAAK,MAAO,QAAS,UAAA,OAAS;EACzD,IAAJ,IAAU,UAAU,MAAM;EACtB,IAAJ,OAAS,UAAW,WAAY,MAAM;EACtC;;EAEG,GAAH,QAAW,YAAa,MAAM,KAAK;EAChC,GAAH,KAAQ,QAAQ;;EAEb,GAAH,IAAQ,KAAK,MAAO,KAAK;EACzB;EACA;;EA5EA,CAAA,OAAM;;;;;ED7HS,SAAS,YAAc,SAAS,UAAU,SAAU;EAClE,CAAD,IAAM,OAAO,YAAY,UAAW;EAClC,EAAF,MAAQ,IAAI,MAAO;EACnB;;EAEC,CAAD,IAAO,QAAQ,KAAK,UAAU,QAAS,aAAc;EACpD,CAAD,IAAO,WAAW,IAAI,aAAc,MAAM,OAAO,UAAU,WAAW;;;;EAIrE,CAAD,KAAM,WAAW,KAAM;;EAEtB,CAAD,OAAQ;EACN,EAAF,QAAS,YAAG;EACT,GAAH,SAAY;EACZ;EACA;EACA;;EAEA,SAAS,cAAe;EACvB,CAAD,OAAQ,CAAC;EACT;;EAEA,IAAM,eAAN,CAAA,YAAA;EACa,CAAb,SADM,aACS,SAAS,OAAO,UAAU,SAAU;EADnD,8BAAA,CAAA,MAAM;;EAEJ,EAAF,KAAO,UAAU;EACf,EAAF,KAAO,QAAQ;EACb,EAAF,KAAO,UAAU,MAAM;EACrB,EAAF,KAAO,WAAW;;EAEhB,EAAF,KAAO,UAAU;;EAEf,EAAF,MAAQ,SAAU;;EAEhB,EAAF,IAAO,QAAQ,SAAS,OAAQ;EAC7B,GAAH,KAAQ,SAAS;EACd,GAAH,KAAQ,QAAQ;EACb,GAAH,KAAQ;EACR,SAAS;EACN,GAAH,KAAQ,SAAS,KAAK;EACtB;EACA;;EAlBM,CAAN,aAAA,UAoBC,eAAa,SApBd,eAoBiB;EACf,EAAF,IAAO,KAAK,SAAU;;EAEnB,GAAH,KAAQ,SAAU,KAAK;EACpB,GAAH,KAAQ,UAAU;EAClB,SAEO;;EAEJ,GAAH,KAAQ,QAAS,KAAK,OAAO,IAAK;EAC/B,GAAH,KAAQ;EACR;EACA;;EAhCM,CAAN,aAAA,UAkCC,UAAQ,SAlCT,QAkCW,YAAa;;;EACtB,EAAF,IAAQ,WAAW,KAAK;;EAEtB,EAAF,IAAM,WAAW;EACf,EAAF,IAAM,UAAU;EACd,EAAF,IAAM,QAAN;;EAEE,EAAF,IAAM,WAAW;;EAEf,EAAF,WAAa,QAAS,UAAE,UAAU,UAAc;EAC7C,GAAH,SAAa,YAAa;;EAEvB,GAAH,IAAQ,aAAa,YAAY,UAAU,WAAY;EACnD,IAAJ,QAAY;EACZ;;EAEG,GAAH,IAAQ,aAAa,CAAC,GAAI;EACtB,IAAJ,QAAY,KAAM,MAAK,OAAQ;EAC/B;EACA;;EAEE,EAAF,IAAO,UAAU,WAAY,QAAQ,WAAW;;EAE9C,EAAF,IAAM,MAAM,SAAS;EACnB,EAAF,KAAQ,IAAI,IAAI,GAAG,IAAI,KAAK,KAAK,GAAI;EAClC,GAAH,IAAQ,CAAC,SAAS,IAAK,SAAS,KAAM,SAAS;EAC/C;;EAEE,EAAF,KAAO,UAAU,EAAE,UAAA,UAAU,SAAA,SAAS,OAAA;EACpC,EAAF,KAAO,SAAS;EAChB;;EAhEM,CAAN,aAAA,UAkEC,QAAM,SAlEP,QAkEU;EACR,EAAF,IAAQ,QAAQ,KAAK,MAAM;EACzB,EAAF,OAAS,QAAS,SAAU,MAAM,UAAU;EAC5C;;EArEA,CAAA,OAAM;;;EDvBN,IAAM,cAAc,EAAE,MAAM,OAAO,MAAM;EAE1B,SAAS,YAAc,SAAS,UAAU,SAAU;EAClE,CAAD,IAAM,SAAU,YAAa,OAAO,YAAY,YAAa;EAC3D,EAAF,8BAAkB,CAAE,YAAY,IAAI;EAClC,EAAF,OAAS,KAAK,QAAS,SAAS;EAChC;;EAEC,CAAD,8BAAiB,CAAE,WAAW,IAAI;EACjC,CAAD,OAAQ,KAAK,QAAS,SAAS,UAAU;EACzC;;ADbA,oBAAe,UAAA,KAAf;AAAA,EAAA,EAAA,OAAsB,IAAI;AAA1B,EAAA;;ADAA,uBAAe,UAAA,KAAf;AAAA,EAAA,EAAA,OAAsB,QAAQ;AAA9B,EAAA;;;EDGe,SAAS,YAAc,WAAW,UAAW;;;EAC3D,CAAD,IAAK;;;EAGJ,CAAD,IAAM,CAAC,WAAY;;;;;EAKjB,EAAF,KAAQ,aAAa,KAAK,OAAQ;EAC/B,GAAH,OAAU,KAAK,MAAO;EACtB;EACA,QAEM;;EAEJ,EAAF,aAAe,UAAU,MAAO,KAAM,eAAS,EAAG,OAAQ;;EAExD,EAAF,WAAa,QAAS,UAAA,WAAa;EAChC,GAAH,IAAO,aAAa;;;EAGjB,GAAH,IAAQ,cAAc,MAAK,MAAO,YAAc;;EAE5C,IAAJ,IAAS,UAAW;EACf,KAAL,QAAa,YAAY,QAAS;EAC7B,KAAL,IAAU,UAAU,CAAC,GAAI;EACnB,MAAN,YAAkB,OAAQ,OAAO;EACjC;EACA;;;EAGA,SAAS;EACJ,MAAL,MAAU,MAAO,aAAc;EAC/B;EACA;EACA;EACA;;EAEC,CAAD,OAAQ;EACR;;;EDxCe,SAAS,WAAa,WAAW,UAAW;;;EAC1D,CAAD,IAAK,WAAW,GAAG;;;EAGlB,CAAD,IAAM,OAAO,cAAc,UAAW;EACpC,EAAF,YAAc;;EAEZ,EAAF,KAAQ,KAAK,WAAY;EACtB,GAAH,IAAQ,UAAU,eAAgB,IAAM;EACpC,IAAJ,UAAc,KAAM,KAAK,GAAI,GAAG,UAAW;EAC3C;EACA;;EAEE,EAAF,OAAS;EACN,GAAH,QAAW,YAAY;EACnB,IAAJ,IAAQ;;EAEJ,IAAJ,OAAY,WAAW,UAAU,OAAQ;EACpC,KAAL,SAAc;EACd;EACA;EACA;EACA;;;EAGC,CAAD,aAAc,UAAU,MAAO,KAAM,eAAS,EAAG,OAAQ;;EAExD,CAAD,WAAY,QAAS,UAAA,WAAa;EAChC,EAAF,CAAI,MAAK,MAAO,eAAiB,MAAK,MAAO,aAAc,KAAO,KAAM;EACxE;;EAEC,CAAD,OAAQ;EACN,EAAF,QAAU,YAAV;EAAA,GAAA,OAAgB,MAAK,IAAK,WAAW;EAArC;EACA;EACA;;ADrCA;;AAAA,EAAe,SAAS,aAAe,WAAW,SAAU;;AAA5D,EAEC,CAAD,IAAK,WAAW,KAAK,GAAI,WAAW,YAAY;AAFhD,EAGE,EAAF,QAAU,MAAO,MAAM;AAHvB,EAIE,EAAF,SAAW;AAJX,EAKA;;AALA;AAAA,EAQC,CAAD,OAAQ;AARR,EASA;;;;;;;;;;;;;;;;;;;;;;;;;;;EDgBe,SAAS,cAAgB,QAAQ,YAAY,MAAO;EAClE,CAAD,IAAK;EAAL,KAAsB,aAAa;EAAnC,KAAuC;EAAvC,KAAoD;EAApD,KAA+D;EAA/D,KAAwE;;EAEvE,CAAD,kBAAmB,oBAAqB,QAAQ,YAAY;;EAE3D,CAAD,IAAM,CAAC,iBAAkB;EACvB,EAAF,OAAS;EACT;;EAEC,CAAD,UAAW,gBAAkB,SAAS,IAAM,gBAAgB;;EAE3D,CAAD,cAAe,KAAK,IAAK,QAAQ,gBAAgB;EAChD,CAAD,YAAa,cAAc,gBAAgB;;EAE1C,CAAD,KAAO,IAAI,GAAG,IAAI,aAAa,KAAK,GAAI;EACtC,EAAF,WAAa,KAAM;EACnB;;EAEC,CAAD,OAAS,IAAI,WAAW,KAAK,GAAI;EAC/B,EAAF,WAAa,KAAM,CAAC;EACpB;;EAEC,CAAD,OAAS,IAAI,QAAQ,KAAK,GAAI;EAC5B,EAAF,WAAa,KAAM,IAAI;EACvB;;;EAGC,CAAD,IAAM,YAAY,GAAI;EACpB,EAAF,WAAa,cAAc,gBAAgB;EAC3C,QAAQ;EACN,EAAF,WAAa,cAAc;EAC3B;;EAEC,CAAD,OAAQ;EACR;;;;EAKA,SAAS,oBAAsB,QAAQ,YAAY,MAAO;EACzD,CAAD,QAAU;EACR,EAAF,KAAO;EACJ,GAAH,IAAQ,KAAK,OAAO,aAAa,KAAK,KAAK,GAAI;EAC3C,IAAJ,KAAS,KAAK,SAAS,KAAK,IAAK,KAAK,IAAI,CAAC;EAC3C;;EAEG,GAAH,OAAW,KAAK,SAAS,GAAI;EACzB,IAAJ,KAAS,KAAM,SAAS,KAAK;EAC7B;;;EAGG,GAAH,KAAQ,KAAK,KAAK,IAAK,KAAK,IAAI,SAAS,KAAK;;EAE3C,GAAH,OAAU;;EAAK,EAAf,KAEO;EACL,EAAF,KAAO;EACJ,GAAH,OAAU;;EAAK,EAAf,KAEO;EACJ,GAAH,IAAQ,QAAS;EACb,IAAJ,OAAW,CAAE,SAAS,GAAG;EACzB;EACG,GAAH,OAAU,CAAE,GAAG;;EAAI,EAAnB,KAEO;EACJ,GAAH,OAAU,CAAE,QAAQ,GAAI,OAAQ;;EAAO,EAAvC,KAEO;EACJ,GAAH,OAAU,CAAE,GAAG,SAAS,IAAI;;EAAI,EAAhC,KAEO;EACJ,GAAH,OAAU,CAAE,GAAG,GAAI,OAAQ;EAAO;EAElC;;ADnGA,EAKA,IAAI,aAAa,MAAM;;AALvB,wBAOe,UAAW,YAAa;AAPvC,EAQC,CAAD,OAAQ,UAAW,SAAmB;AARtC,EASE,EAAF,IAAQ,QAAQ,KAAK,UAAU,QAAS,UAAW,SAAU,MAAO;AATpE,EAUE,EAAF,IAAQ,QAAQ,MAAM;;AAVtB,EAYE,EAAF,IAAO,CAAC,QAAS,QAAU;AAZ3B,EAaG,GAAH,MAAS,IAAI,MAAb,0BAA4C,aAA5C,6BAAiF,QAAQ;AAbzF,EAcA;;AAdA,EAQA,EAAA,KAAA,IAAA,OAAA,UAAA,QAA+B,OAA/B,MAAA,OAAA,IAAA,OAAA,IAAA,IAAA,OAAA,GAAA,OAAA,MAAA,QAAA;AARA,EAQ+B,GAA/B,KAAA,OAAA,KAAA,UAAA;AARA;;AAAA,EAgBE,EAAF,IAAQ,aAAa,cAAe,MAAM,QAAQ,YAAY;AAhB9D,EAiBE,EAAF,IAAQ,SAAS,WAAY,YAAa,MAAO,OAAO;;AAjBxD,EAmBE,EAAF,IAAQ,UAAU,QAAQ,MAAO,MAAM,MAAO,KAAM,YAApD;AAnBA,EAmBA,GAAA,OAA0D;AAnB1D,EAmBA;;AAnBA,EAqBE,EAAF,IAAO,YAAa;AArBpB,EAsBG,GAAH,MAAS,QAAS;AAtBlB,EAuBA,SAAS;AAvBT,EAwBG,GAAH,MAAS,IAAK;AAxBd,EAyBA;;AAzBA,EA2BE,EAAF,QAAU;;AA3BV,EA6BE,EAAF,OAAS;AA7BT,EA8BA;AA9BA,EA+BA;;AD/BA,YACe,gBAAiB;;ADDhC,uBACe,gBAAiB;;ADDhC,EAGA,IAAI;AAHJ,EAIA,IAJA,kBAIO;AAJP,EAKA,IAAC;AALD,EAMA,IAAC;AAND,EAOA,IAAC;AAPD,EAQA,IAAC;AARD,EASA,IATA,kBASO,GAAG;AATV,EAUA,IAAC,SAAS;AAVV,EAWA,IAAC,QAAQ;;AAXT,EAaA,IAAK,CAAC,KAAM;AAbZ;AAAA,EAeC,CAAD,MAAO;AAfP,EAgBE,EAAF,KAAO;AAhBP,EAiBE,EAAF,OAAS;AAjBT,EAkBA;AAlBA,EAmBA,OAAO;AAnBP,EAoBC,CAAD,eAAgB,IAAI,cAAe;AApBnC,EAqBC,CAAD,aAAc,OAAO;;AArBrB,EAuBC,CAAD,OAAQ,IAAI,qBAAsB,QAAS;;AAvB3C,EAyBC,CAAD,QAAS;;AAzBT;AAAA;AAAA,EA6BC,CAAD,aAAc,aAAa;;AA7B3B,EA+BC,CA/BD,kBA+BO,GAAG,YAAY;AA/BtB,EAgCE,EAAF,IAAM,MAhCN,kBAgCkB,GAAG,OAAO,IAAK,UAAA,GAAjC;AAhCA,EAgCA,GAAA,OAAA,WAA+C,EAAE,KAAjD,WAA4D,EAAE;AAhC9D,EAgCA,KAAyE,KAAM;;AAhC/E,EAkCE,EAAF,IAAO,YAAa;AAlCpB,EAmCG,GAAH,WAAc,UAAU;AAnCxB,EAoCA,SAAS;AApCT,EAqCG,GAAH,aAAgB,YAAY;AArC5B,EAsCA;;AAtCA,EAwCE,EAAF,IAAO,CAAC,OAAQ;AAxChB,EAyCG,GAAH,KAAQ,YAAa;AAzCrB,EA0CG,GAAH,QAAW;AA1CX,EA2CA;AA3CA,EA4CA;;AA5CA,EA8CC,CAAD,MAAO;AA9CP,EA+CE,EAAF,KAAM,UAAE,GAAI;AA/CZ,EAgDG,GAAH,OAAU,KAAM;AAhDhB,EAiDG,GAAH,QAAW;AAjDX,EAkDA;;AAlDA,EAoDE,EAAF,OAAQ,YAAG;AApDX,EAqDG,GAAH,IAAQ,OAAQ;AArDhB,EAsDI,IAtDJ,kBAsDU;AAtDV,EAuDI,IAAJ,QAAY;AAvDZ,EAwDA;AAxDA,EAyDA;AAzDA,EA0DA;AA1DA;;AAAA;;;EDMA,uBAAgB,GAAG,IAAI,KAAM;EAC7B,yBAAkB,GAAG,IAAI,KAAM;EAEhB,wBAAe,CAAG,SAAS,QAAQ,QAAS;;EAE1D,CAAD,IAAO,qBAAqB,QAAQ;EACnC,CAAD,IAAM,QAAQ,SAAU,QAAQ,qBAAqB;;EAEpD,CAAD,IAAO,UAAU,QAAQ,MAAO,SAAS;EACxC,CAAD,QAAS,aAAc,YAAvB;EAAA,EAAA,0BAAuC,CAAC,KAAM;EAA9C,IAAyD;;EAExD,CAAD,IAAM,QAAQ,SAAS,UAAW;EAChC,EAAF,MAAQ,IAAI,MAAO;EACnB;;EAEC,CAAD,SAAU,WAAY,WAAY,QAAQ;;EAEzC,CAAD,QAAS,KAAK;EACb,CAAD,QAAS,SAAS;;;EAGjB,CAAD,IAAM,QAAQ,iBAAW,CAAC;;EAEzB,CAAD,IAAM,QAAS;EACb,EAAF,CAAI,OAAO,0BAA2B,OAAO,wBAAwB,KAAO,KAAM;;EAEhF,EAAF,IAAO,QAAS;EACb,GAAH,IAAS,UAAU,IAAI;EACpB,GAAH,QAAW,SAAS,OAAQ;EACzB,GAAH,OAAU,aAAc,SAAS;EACjC,SAAS;EACN,GAAH,QAAW,SAAS,OAAQ;EAC5B;EACA;;EAEC,CAAD,QAAS;EACR,CAAD,QAAS,qBAAqB;;EAE7B,CAAD,OAAQ,QAAQ,KAAM,YAAtB;EAAA,EAAA,4BAAwC,CAAC,KAAM;EAA/C;EACA;;;;EDzCe,SAAS,eAAiB,QAAQ,QAAS;EACzD,CAAD,SAAU,WAAY,WAAY,KAAK;;EAEtC,CAAD,IAAM,CAAC,KAAK,UAAU,QAAS;;;EAG7B,EAAF,IAAM,SAAS,OAAO;EACpB,EAAF,IAAO,UAAU,OAAO,QAAS;EAC9B,GAAH,qBAAyB;EACzB;;;EAGE,EAAF,OAAS,YAAY;EACrB;;EAEC,CAAD,cAAc,CAAE,MAAM,QAAQ;EAC9B;;EAEA,SAAS,qBAAuB,QAAS;EACxC,CAAD,OAAQ,OAAQ,GAAG,OAAO,QAAS,+BAAiB;EACpD;;ADxBA,EAEA,IAAI,oBAAoB;AAFxB,EAGC,CAAD,QAAS,UAAE,QAAQ,OAAO,SAAa;AAHvC,EAIE,EAAF,MAAQ,QAJR,0BAIuB,CAAE,MAAM,OAAO,YAAa,QAAQ;AAJ3D,EAKA;;AALA,EAOC,CAAD,MAAM,YAAG;AAPT,EAQA;;;;AARA,EAYA,SAZA,0BAYgB,CAAG,GAAG,GAAI;AAZ1B,EAaC,CAAD,IAAK,IAAI,EAAE;AAbX,EAaA,KAAoB,IAAI,EAAE;;AAb1B,EAeC,CAAD,OAAS,KAAM;AAff,EAgBE,EAAF,IAAO,EAAC,CAAC,EAAE,QAAS,EAAE,KAAO;AAhB7B,EAiBG,GAAH,EAAK,KAAM,EAAE;AAjBb,EAkBA;AAlBA,EAmBA;;AAnBA,EAqBC,CAAD,OAAQ;AArBR,EAsBA;;EDtBA,IAAI,mBAAmB;EACvB,IAAC,kBAAkB;EACnB,IAAC,sBAAsB;EACvB,IAAC,oBAAoB;EACrB,IAAC,qBAAqB;EAEP,SAAS,aAAc,KAAK,IAAK;EAC/C,CAAD,IAAK,aAAa,UAAU;;EAE3B,CAAD,WAAA,0BAAoC,KAApC;;EAEC,CAAD,UAAW,UAAW,UAAW;EAC/B,EAAF,IAAM;EAAN,MAAqB;EAArB,MAA4B;EAA5B,MAAkC;EAAlC,MAAwC;EAAxC,MAAmD;EAAnD,MAA6D;EAA7D,MAAgE,cAAc;;EAE5E,EAAF,gBAAkB;;EAEhB,EAAF,OAAU,QAAQ,oBAAoB,KAAM,WAAa;EACtD,GAAH,cAAiB,KAAK;EAClB,IAAJ,KAAS,MAAM;EACX,IAAJ,MAAU,MAAM;EACZ,IAAJ,WAAe,MAAM;EACrB;EACA;;;;EAIE,EAAF,OAAS,cAAc,IAAK;;EAE1B,EAAF,IAAM,cAAc;EAClB,EAAF,OAAU,KAAM;EACb,GAAH,WAAc,KAAK;;;EAGhB,GAAH,OAAU,cAAc;EACrB,GAAH,SAAY,KAAK,KAAK,OAAO,WAAW,KAAK,aAAa;;EAEvD,GAAH,YAAe,KAAK;EACjB,GAAH,UAAa,KAAK,WAAW,MAAM,UAAU;;EAE1C,GAAH,YAAe,KAAM,SAAS,KAAM,MAAO,UAAU,KAAM;EAC3D;;EAEE,EAAF,OAAS,YAAY,KAAM;EAC3B;;EAEC,CAAD,IAAM,mBAAmB,KAAM,MAAQ;EACrC,EAAF,cAAgB,IAAI,QAAS,oBAAoB;EACjD,QAAQ;EACN,EAAF,cAAgB,IACb,QAAS,iBAAiB,IAC1B,QAAS,kBAAkB,UAAW,OAAO,IAAK;EAClD,GAAH,IAAO,WAAW;;;EAGf,GAAH,IAAQ,kBAAkB,KAAM,KAAO,OAAO;;EAE3C,GAAH,YAAe,GAAG,MAAO,KAAM,IAAK;EACjC,GAAH,cAAiB,UAAU,IAAK,SAAU,KAAM,QAAS;;EAEtD,GAAH,OAAU,MAAM,QAAS,IAAI;EAC7B;EACA;;EAEC,CAAD,OAAQ;EACR;;EAEA,SAAS,KAAO,KAAM;EACrB,CAAD,IAAM,IAAI,MAAO;EACf,EAAF,OAAS,IAAI;EACb;;EAEC,CAAD,OAAQ,IAAI,QAAS,QAAQ,IAAK,QAAS,QAAQ;EACnD;;EAEA,SAAS,cAAgB,MAAO;EAC/B,CAAD,OAAQ,KAAK;EACb;;AD5EA,EAGA,IAHA,oBAGO,GAAG;;AAHV,EAKA,IAAI,kBAAkB;AALtB,EAMC,CAAD,MAAO;;AANP,EAQC,CAAD,QAAS,UAAE,QAAQ,OAAO,SAAa;AARvC,EASE,EAAF,IAAO,QAAQ,KAAM;AATrB,EAUG,GAAH,IAAO,KAVP,oBAUe;AAVf,EAWG,GAAH,IAAO,SAAS,QAAQ,iBAAiB,QAAQ,MAAM,aAAc,QAAQ,KAAK;;AAXlF,EAaG,GAAH,MAAS,QAAQ;AAbjB,EAcG,GAdH,UAcM,CAAC,IAAI,EAAE,IAAA,IAAI,QAAA;AAdjB,EAeA;AAfA,EAgBA;;AAhBA,EAkBC,CAAD,MAAO,YAAM;AAlBb,EAmBA;;ADnBA,EAGA,SAAS,SAAW,MAAO;AAH3B;AAAA,EAKC,CAAD,IAAM,QAAQ,KAAK,gBAAgB,QAAS;AAL5C,EAME,EAAF,IAAO,OAAO,SAAS,YAAa;AANpC;AAAA,EAQA,SAAS,IAAK,OAAO,SAAS,UAAW;AARzC,EASG,IAAH,MAAA,mDAA4D,OAA5D;AATA,EAUA,UAAS;AAVT,EAWG,IAAH,YAAgB;AAXhB,EAYA;AAZA,EAaA;AAbA,EAcA;;AAdA,EAgBA,IAAI,mBAAmB;AAhBvB,EAiBC,CAAD,MAAO;;AAjBP,EAmBC,CAAD,QAAS,UAAE,QAAQ,OAAO,SAAa;AAnBvC,EAoBE,EAAF,IAAM,MAAN;AApBA,EAoBA,MAAW,QAAX;;AApBA;AAAA,EAuBE,EAAF,IAAO,QAAQ,QAAQ,SAAU,QAAQ,OAAS;AAvBlD,EAwBG,GAAH,KAAS,OAAO,QAAQ,MAAO;AAxB/B,EAyBI,IAAJ,QAAY,QAAQ,KAAM;;AAzB1B,EA2BI,IAAJ,IAAS,SAAS,OAAO,UAAU,UAAW;AA3B9C,EA4BK,KAAL,IAAU,SAAU,UAAW,QAAS,QAAU;AA5BlD,EA6BM,MAAN,YAAA;AA7BA,EA0CA;AA1CA,EA2CA;AA3CA,EA4CA;AA5CA,EA6CA;;AA7CA,EA+CE,EAAF,MAAQ,OA/CR,yBA+CsB,CAAE,MAAM,MAAM,QAAQ;AA/C5C,EAgDA;;AAhDA,EAkDC,CAAD,MAAO,UAAE,QAAQ,SAAS,SAAa;AAlDvC,EAmDE,EAAF,IAAM,SAnDN,yBAmDsB,CAAE,OAAO,UAAU,MAAM,QAAQ;;AAnDvD,EAqDE,EAAF,IAAO,OAAO,WAAW,YAAa;AArDtC,EAsDG,GAAH,SAAY,OAAO,KAAM;AAtDzB,EAuDA;;AAvDA,EAyDE,EAAF,OAAS,UAAU;AAzDnB,EA0DA;;AA1DA,EA4DC,CAAD,OAAQ,UAAW,SAAU;AA5D7B,EA6DE,EAAF,IAAM,SAAS,KAAK,KAAM,QAAQ,aAAa,SAAS,QAAQ;AA7DhE,EA8DE,EAAF,QAAU,UAAU,KAAK,IAAK;AA9D9B,EA+DE,EAAF,OAAS;AA/DT,EAgEA;AAhEA,EAiEA;;;;AAjEA,EAqEA,SArEA,yBAqEgB,CAAG,aAAa,YAAa;AArE7C,EAsEC,CAAD,SAAW;;AAtEX,EAwEC,CAAD,IAAK,aAAa,OAAO,gBAAgB;AAxEzC,EAyEC,CAAD,IAAK,YAAY,OAAO,eAAe;;AAzEvC;AAAA;AAAA;AAAA,EA8EC,CAAD,IAAM,CAAC,cAAc,CAAC,YAAa;AA9EnC,EA+EE,EAAF,aAAe;AA/Ef,EAgFA;;AAhFA;AAAA;AAAA,EAoFC,CAAD,IAAM,CAAC,cAAc,CAAC,WAAY;AApFlC,EAqFE,EAAF,OAAS,eAAgB,YAAY;AArFrC,EAsFA;;AAtFA,EAwFC,CAAD,OAAQ,YAAY;AAxFpB,EAyFE,EAAF,IAAM,QAAQ,YAAY,iBAAkB,YAAY,QAAS;AAzFjE,EA0FE,EAAF,IAAM,SAAS,aAAa,iBAAkB,aAAa,QAAS;;AA1FpE,EA4FE,EAAF,OAAS,eAAgB,OAAO;AA5FhC,EA6FA;AA7FA,EA8FA;;AA9FA,EAgGA,SAAS,iBAAmB,IAAI,SAAU;AAhG1C,EAiGC,CAAD,IAAK,OAAO,GAAG,KAAM;;AAjGrB,EAmGC,CAAD,IAAM,CAAC,MAAO;;AAnGd,EAqGC,CAAD,IAAM,OAAO,SAAS,UAAW;AArGjC,EAsGE,EAAF,MAAS;AAtGT,EAuGA;;AAvGA,EAyGC,CAAD,IAAM,KAAK,gBAAgB,QAAS;AAzGpC,EA0GE,EAAF,gBAAmB;AA1GnB,EA2GA;;AA3GA,EA6GC,CAAD,OAAQ;AA7GR,EA8GA;;AA9GA,EAgHA,SAAS,eAAiB,SAAS,WAAY;AAhH/C,EAiHC,CAAD,IAAM,WAAW,WAAY;AAjH7B,EAkHE,EAAF,KAAQ,IAAI,OAAO,WAAY;AAlH/B,EAmHG,GAAH,IAAQ,EAAG,OAAO,UAAY;AAnH9B,EAoHI,IAAJ,QAAa,OAAQ,UAAW;AApHhC,EAqHA;AArHA,EAsHA;;AAtHA,EAwHE,EAAF,OAAS;AAxHT,EAyHA;;AAzHA,EA2HC,CAAD,OAAQ,WAAW;AA3HnB,EA4HA;;AD5HA,EAEA,IAAI;AAFJ,EAEA,IAAY;AAFZ,EAEA,IAFA,yBAEyC,GAAG;;AAF5C,EAIA,aAAa,UAAW,SAAU;AAJlC,EAKC,CAAD,KAAM,OAAO;AALb,EAMC,CAAD,KAAM,UAAU;AANhB,EAOC,CAAD,IAAK;AAPL,EAQE,EAAF,MAAQ,IAAI,MAAM;AARlB,EASA,GAAG,OAAO,GAAG;AATb,EAUE,EAAF,KAAO,QAAQ,EAAE;AAVjB,EAWA;AAXA,EAYA;;AAZA,EAcA,WAAW,YAAY,MAAM;;AAd7B,EAgBA,SAAS,UAAW,KAAK,SAAU;AAhBnC,EAiBC,CAAD,IAAK;AAjBL,EAiBA,KAAY;AAjBZ,EAiBA,KAAkB,YAAY;;AAjB9B,EAmBC,CAAD,KAAM,MAAM;AAnBZ,EAoBC,CAAD,KAAM,UAAU,WAAW;AApB3B,EAqBC,CAAD,KAAM,MAAM;;AArBZ,EAuBC,CAAD,KAAM,QAAQ,KAAK,IAAI,MAAO;AAvB9B,EAwBC,CAAD,KAAM,WAAW,KAAK,MAAM,IAAK,UAAA,MAAQ;AAxBzC,EAyBE,EAAF,IAAM,UAAU,YAAY,KAAK,SAAS;;AAzB1C,EA2BE,EAAF,YAAc;AA3Bd,EA4BE,EAAF,OAAS;AA5BT,EA6BA,IAAI;;AA7BJ;AAAA,EAgCC,CAAD,IAAM,KAAK,MAAO,KAAK,KAAM,KAAK;;AAhClC,EAkCC,CAAD,QAAS;;AAlCT,EAoCC,CAAD,OAAS,KAAO,MAAM,KAAK,IAAI,WAAc,OAAO,KAAK,SAAW;AApCpE,EAqCE,EAAF,MAAQ,KAAM;AArCd,EAsCA;;AAtCA,EAwCC,CAAD,KAAM,WAAW,KAAK;AAxCtB,EAyCC,CAAD,KAAM,SAAS,KAAK,cAAc,KAAK,YAAa,OAAO,WAAY;AAzCvE,EA0CA;;AA1CA,EA4CA,OAAO,YAAY;AA5CnB,EA6CC,CAAD,MAAO,UAAW,YAAa;AA7C/B,EA8CE,EAAF,IAAM,KAAK,GAAG,KAAK;;AA9CnB,EAgDE,EAAF,IAAO,CAAC,YAAa,aAAa,KAAK;;AAhDvC,EAkDE,EAAF,MAAQ,KAAK;;AAlDb,EAoDE,EAAF,MAAQ,WAAW;AApDnB,EAqDE,EAAF,KAAQ,IAAI,GAAG,IAAI,KAAK,KAAK,GAAI;AArDjC,EAsDG,GAAH,KAAQ,MAAM;;AAtDd,EAwDG,GAAH,IAAQ,OAAO,WAAW,GAAI,OAAS;AAxDvC,EAyDI,IAAJ,OAAW;AAzDX,EA0DA;AA1DA,EA2DA;;AA3DA,EA6DE,EAAF,OAAS;AA7DT,EA8DA;;AA9DA,EAgEC,CAAD,YAAa,UAAW,MAAO;AAhE/B,EAiEE,EAAF,IAAM,UAAU;AAjEhB,EAiEA,MAAmB,YAAY;AAjE/B,EAiEA,MAAkC;;AAjElC,EAmEE,EAAF,OAAU,QAAQ,KAAK,SAAU,UAAY;AAnE7C,EAoEG,GAAH,YAAe,KAAK,SAAU;AApE9B,EAqEG,GAAH,WAAc;AArEd,EAsEA;;AAtEA,EAwEE,EAAF,YAAc,OAAO;AAxErB,EAyEE,EAAF,OAAS,CAAE,UAAU,GAAG,YAAY,GAAG;AAzEvC,EA0EA;;AA1EA,EA4EC,CAAD,OAAQ,UAAW,SAAU;AA5E7B,EA6EE,EAAF,IAAM,MAAM,KAAK,WAAY,KAAK;AA7ElC,EA8EE,EAAF,IAAM,UAAU,IAAI;AA9EpB,EA+EE,EAAF,IAAM,YAAY,IAAI;;AA/EtB,EAiFE,EAAF,IAAM,OAAO,KAAK,MAAO,IAAI,KAAK;AAjFlC,EAkFE,EAAF,IAAM,UAAU;AAlFhB,EAmFE,EAAF,IAAM,aAAa,KAAK,QAAS,OAAO,UAAE,OAAO,MAAU;AAnF3D,EAoFG,GAAH,IAAQ,OAAO,IAAI,IAAK;AApFxB,EAqFI,IAAJ,WAAe;AArFf,EAsFA;;AAtFA,EAwFG,GAAH,OAAU;AAxFV,EAyFA,OAAO,OAAO,IAAI,MAAO,IAAI,KAAK,SAAU,KAAM,OAAQ;;AAzF1D,EA2FE,EAAF,IAAM,QAAQ,IAAI,WAAe,UAAjC,cAAoD,UAApD,gBAAyE,YAAzE,QAAwF;;AA3FxF,EA6FE,EAAF,MAAQ,OAAO,IAAI;AA7FnB,EA8FE,EAAF,MAAQ,YAAY,IAAI;AA9FxB,EA+FE,EAAF,MAAQ,eAAe;;AA/FvB,EAiGE,EAAF,MAAQ;AAjGR,EAkGA;;AAlGA,EAoGC,CAAD,aAAc,UAAW,QAAS;AApGlC,EAqGE,EAAF,IAAO,KAAK,IAAI,OAAQ,KAAK,KAAK,OAAO,YAAa,QAAS;AArG/D,EAsGG,GAAH,KAAQ,OAAO,OAAO;AAtGtB,EAuGG,GAAH,OAAU;AAvGV,EAwGA;AAxGA,EAyGA;;AAzGA,EA2GC,CAAD,cAAe,UAAW,SAAU;AA3GpC,EA4GE,EAAF,IAAM;;AA5GN,EA8GE,EAAF,IAAO,QAAQ,QAAQ,KAAM,KAAK,cAAgB;AA9GlD,EA+GG,GAAH,KAAQ,OAAO,MAAM,GAAG;AA/GxB,EAgHG,GAAH,OAAU,MAAM,MAAM,MAAM;AAhH5B,EAiHA;AAjHA,EAkHA;;AAlHA,EAoHC,CAAD,iBAAkB,YAAY;AApH9B,EAqHE,EAAF,KAAO,aArHP,yBAqHsC;AArHtC,EAsHA;;AAtHA,EAwHC,CAAD,WAAY,YAAY;AAxHxB,EAyHE,EAAF,OAAS,KAAK,IAAI,UAAW,KAAK;AAzHlC,EA0HA;;AA1HA,EA4HC,CAAD,UAAW,YAAY;AA5HvB,EA6HE,EAAF,OAAS,KAAK,IAAI,OAAQ,KAAK;AA7H/B,EA8HA;AA9HA,EA+HA;;AA/HA,EAiIA,OAAO,SAAS,UAAW,OAAQ;AAjInC,EAkIC,CAAD,IAAK,SAAS;AAlId,EAkIA,KAAoB;AAlIpB,EAkIA,KAA2B;;AAlI3B,EAoIC,CAAD,QAAS,UAAW,KAAK,SAAU;AApInC,EAqIE,EAAF,OAAS,KAAM,MAAM,KAAK;AArI1B,EAsIA;;AAtIA,EAwIC,CAAD,MAAO,YAAY,OAAQ,OAAO;;AAxIlC,EA0IC,CAAD,KAAO,OAAO,OAAQ;AA1ItB,EA2IE,EAAF,IAAO,OAAO,KAAM,OAAO,MAAQ;AA3InC,EA4IG,GAAH,MAAS,UAAW,OAAQ,MAAO;AA5InC,EA6IA;AA7IA,EA8IA;;AA9IA,EAgJC,CAAD,MAAO,SAAS,OAAO;AAhJvB,EAiJC,CAAD,OAAQ;AAjJR,EAkJA;;ADlJO,EAAA,IAAI,OAAoB;AAAxB,EACA,IAAI,eAAoB;AADxB,EAEA,IAAI,SAAoB;AAFxB,EAGA,IAAI,UAAoB;AAHxB,EAIA,IAAI,WAAoB;AAJxB,EAKA,IAAI,UAAoB;AALxB,EAMA,IAAI,UAAoB;AANxB,EAOA,IAAI,UAAoB;AAPxB,EAQA,IAAI,UAAoB;AARxB,EASA,IAAI,cAAoB;AATxB,EAUA,IAAI,YAAoB;AAVxB,EAWA,IAAI,cAAoB;AAXxB,EAYA,IAAI,YAAoB;AAZxB,EAaA,IAAI,UAAoB;AAbxB,EAcA,IAAI,iBAAoB;AAdxB,EAeA,IAAI,UAAoB;;AAfxB,EAiBA,IAAI,iBAAoB;AAjBxB,EAkBA,IAAI,iBAAoB;AAlBxB,EAmBA,IAAI,gBAAoB;AAnBxB,EAoBA,IAAI,iBAAoB;AApBxB,EAqBA,IAAI,kBAAoB;AArBxB,EAsBA,IAAI,iBAAoB;;AAtBxB,EAwBA,IAAI,SAAoB;AAxBxB,EAyBA,IAAI,iBAAoB;;AAzBxB,EA4BA,IAAI,YAAoB;AA5BxB,EA6BA,IAAI,aAAoB;AA7BxB,EA8BA,IAAI,SAAoB;AA9BxB,EA+BA,IAAI,kBAAoB;AA/BxB,EAgCA,IAAI,YAAoB;AAhCxB,EAiCA,IAAI,cAAoB;AAjCxB,EAkCA,IAAI,iBAAoB;;AAlCxB,EAoCA,IAAI,aAAoB;;AApCxB,EAsCA,IAAI,aAAoB;AAtCxB,EAuCA,IAAI,iBAAoB;AAvCxB,EAwCA,IAAI,eAAoB;AAxCxB,EAyCA,IAAI,eAAoB;AAzCxB,EA0CA,IAAI,kBAAoB;;AA1CxB,EA4CA,IAAI,OAAoB;AA5CxB,EA6CA,IAAI,SAAoB;;ED7C/B,IAAI,yBAAyB;EAA7B,IAAyC,oBAAoB;EAE9C,SAAS,oBAAsB,QAAS;EACtD,CAAD,IAAK,OAAO,SAAS;;EAEpB,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS;EACT;;EAEC,CAAD,QAAS,OAAO;;;EAGf,CAAD,OAAQ;;EAEP,CAAD,UAAW,OAAO,aAAc;EAC/B,CAAD,IAAM,CAAC,SAAU;EACf,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,CAAC,OAAO,aAAc,oBAAsB;EAChD,EAAF,OAAS;EACT;;EAEC,CAAD,UAAW,OAAO,aAAc;EAC/B,CAAD,IAAM,CAAC,SAAU;EACf,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;;EAGC,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ,CAAE,SAAS;EACnB;;;EDtCA,IAAI,gBAAgB;EAEL,6CAA0B,CAAG,QAAS;EACpD,CAAD,IAAK;;EAEJ,CAAD,IAAM,SAAS,OAAO,aAAc,gBAAkB;EACpD,EAAF,OAAS;EACN,GAAH,GAAM;EACH,GAAH,GAAM;EACN;EACA;;EAEC,CAAD,OAAQ;EACR;;EDXA,IAAI,uBAAuB,EAAE,GAAG,aAAa,SAAS;EAEvC,SAAS,aAAe,QAAS;EAC/C,CAAD,IAAK,UAAU;;;;EAId,CAAD,IAAM,OAAO,YAAa,OAAO,YAAa,OAAQ;EACpD,EAAF,OAAS;EACT;;EAEC,CAAD,KAAO,IAAI,GAAG,IAAI,OAAO,KAAK,QAAQ,KAAK,GAAI;EAC7C,EAAF,IAAO,WAAW,mBAAoB,QAAQ,OAAO,KAAK,KAAO;EAC9D,GAAH,OAAU;EACV;EACA;EACA;;EAEA,SAAS,mBAAqB,QAAQ,KAAM;EAC3C,CAAD,IAAK,OAAO,UAAU,QAAQ;;EAE7B,CAAD,QAAS,OAAO;;EAEf,CAAD,IAAM,OAAO,YAAa,OAAO,IAAI,OAAS;EAC5C,EAAF,IAAO,UAAU,KAAK,OAAO,IAAK,QAAQ,OAAQ,MAAO;EACtD,GAAH,OAAU,IAAI;EACd;EACA,QAAQ,IAAK,CAAC,OAAO,YAAa,IAAI,OAAS;EAC7C,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,WAAW,oBAAqB,SAAW;;EAE/C,EAAF,IAAO,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,GAAH,OAAU;EACV;;;EAGE,EAAF,IAAM,OAAO,SAAS;EACpB,EAAF,IAAM,QAAQ,SAAS;EACrB,EAAF,OAAS;;EAEP,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;;EAGP,CAAD,IAAM,OAAO,YAAa,MAAQ;EAChC,EAAF,OAAS,OAAO;EACd,EAAF,IAAM,SAAS,OAAO;EACpB,EAAF,IAAO,CAAC,kBAAmB,SAAW;EACnC,GAAH,OAAU,MAAM,SAAW,IAAI,MAAM;EAClC,GAAH,OAAU,MAAO;EACjB,SAAS;EACN,GAAH,OAAU,MAAM;EAChB;EACA;;EAEC,CAAD,KAAO,IAAI,GAAG,IAAI,IAAI,QAAQ,QAAQ,KAAK,GAAI;EAC7C,EAAF,SAAW,IAAI,QAAQ;;EAErB,EAAF,IAAO,WAAW,OAAQ,QAAQ,MAAQ;EACvC,GAAH,IAAQ,IAAI,UAAW;EACnB,IAAJ,SAAa,IAAI;EACjB;;EAEG,GAAH,IAAQ,OAAO,sBAAuB;EAClC,IAAJ,SAAa,IAAI,OAAO,WAAY;EACpC;;EAEG,GAAH,OAAU;EACV;EACA;;EAEC,CAAD,OAAQ,MAAM;EACb,CAAD,OAAQ;EACR;;ADlFO,EAAA,IAAI,qBAAqB;AAAzB,EACA,IAAI,gBAAgB;;;;EDE3B,oCAAiB,GAAG;EAEL,6CAA0B,CAAG,QAAS;EACpD,CAAD,IAAK;;EAEJ,CAAD,IAAM,SAAS,OAAO,6CAA2B,GAAK;EACpD,EAAF,OAAS;EACN,GAAH,GAAM;EACH,GAAH,GAAM;EACN;EACA;;EAEC,CAAD,OAAQ;EACR;;EDde,SAAS,mBAAqB,QAAS;EACrD,CAAD,IAAK,YAAY,OAAO;;EAEvB,CAAD,IAAM,UAAU,OAAQ,GAAG,OAAQ,QAAS;EAC1C,EAAF,OAAS,OAAO;EACd,EAAF,OAAS;EACN,GAAH,GAAM;EACH,GAAH,GAAM;EACN;EACA;;EAEC,CAAD,IAAM,UAAU,OAAQ,GAAG,OAAQ,SAAU;EAC3C,EAAF,OAAS,OAAO;EACd,EAAF,OAAS;EACN,GAAH,GAAM;EACH,GAAH,GAAM;EACN;EACA;;EAEC,CAAD,OAAQ;EACR;;ADtBA,EAAA,IAAI,qBAAqB,uBAAuB;;AAAhD;AAAA;AAAA,EAIA,sBAAsB;;AAJtB;AAAA,EAOA,wBAAwB;;AAPxB;AAAA,EAUA,0BAA0B;;AAV1B;AAAA,gCAae,UAAW,SAAU;AAbpC,EAcC,CAAD,OAAQ,UAAW,QAAS;AAd5B,EAeE,EAAF,IAAM,OAAO,SAAS,MAAM;;AAf5B,EAiBE,EAAF,QAAU,OAAO;AAjBjB,EAkBE,EAAF,UAAY;AAlBZ,EAmBE,EAAF,OAAS;;AAnBT,EAqBE,EAAF,OAAU,CAAC,MAAO;AArBlB,EAsBG,GAAH,OAAY,OAAO,aAAc,wBAAyB,OAAO,aAAc,0BAC3E,OAAO,YAAa;AAvBxB,EAwBG,GAAH,IAAQ,MAAO;AAxBf,EAyBI,IAAJ,IAAS,SAAS,KAAM;AAzBxB,EA0BK,KAAL,WAAgB;AA1BhB,EA2BA,WAAW,IAAK,SAAS,OAAQ;AA3BjC,EA4BK,KAAL,WAAgB;AA5BhB,EA6BA,WAAW;AA7BX,EA8BK,KAAL,WAAgB;AA9BhB,EA+BA;AA/BA,EAgCA,UAAU;AAhCV,EAiCI,IAAJ,OAAW,OAAO,aAAc;AAjChC,EAkCI,IAAJ,IAAS,MAAO;AAlChB;AAAA,EAoCK,KAAL,WAAgB,QAAQ,CAAE,QAAQ,KAAK,WAAW,GAAG,SAAS,KAAM,MAAO,CAAC;AApC5E,EAqCA,WAAW;AArCX,EAsCK,KAAL,OAAY;AAtCZ,EAuCA;AAvCA,EAwCA;AAxCA,EAyCA;;AAzCA,EA2CE,EAAF,WAAa;;AA3Cb;AAAA,EA8CE,EAAF,OAAS,KAAK,MAAO;AA9CrB,EA+CA;AA/CA,EAgDA;;ADhDA,EAGA,IAAI,wBAAwB,wBAAyB;AAHrD,EAIA,IAAI,wBAAwB,wBAAyB;;AAJrD,0BAMe,UAAW,QAAS;AANnC,EAOC,CAAD,IAAK,OAAO;;AAPZ,EASC,CAAD,QAAS,OAAO;;AAThB,EAWC,CAAD,IAAM,OAAO,YAAa,MAAQ;AAXlC,EAYE,EAAF,SAAW,sBAAuB;;AAZlC,EAcE,EAAF,IAAO,CAAC,OAAO,YAAa,MAAQ;AAdpC,EAeG,GAAH,OAAU,MAAM;AAfhB,EAgBG,GAAH,OAAU;AAhBV,EAiBA;;AAjBA,EAmBE,EAAF,OAAS;AAnBT,EAoBG,GAAH,GAAM;AApBN,EAqBG,GAAH,GAAM;AArBN,EAsBA;AAtBA,EAuBA;;AAvBA,EAyBC,CAAD,IAAM,OAAO,YAAa,MAAQ;AAzBlC,EA0BE,EAAF,SAAW,sBAAuB;;AA1BlC,EA4BE,EAAF,IAAO,CAAC,OAAO,YAAa,MAAQ;AA5BpC,EA6BG,GAAH,OAAU,MAAM;AA7BhB,EA8BG,GAAH,OAAU;AA9BV,EA+BA;;AA/BA,EAiCE,EAAF,OAAS;AAjCT,EAkCG,GAAH,GAAM;AAlCN,EAmCG,GAAH,GAAM;AAnCN,EAoCA;AApCA,EAqCA;;AArCA,EAuCC,CAAD,OAAQ;AAvCR,EAwCA;;ADxCO,EAAA,IAAA,cAAQ,GAAG;;EDAlB,IAAA,aAAA;;EAGe;EACd;;EAED,SAAA,QAAA,QAAA;;;EAGC,CAAD,IAAO,QAAQ,kBAAf,SAAA;;;;EAIC,CAAD,IAAK,kCAA0B,CAAE,SAAjC;;EAEC;;EAEE,CAAH,IAAA,QAAA,OAAoB,2BAApB,GAAA;EACA,EAAA,OAAA;EACA;EACA;;;EDhBe,SAAS,iBAAmB,QAAS;EACnD,CAAD,IAAK,OAAO,KAAK;;EAEhB,CAAD,QAAS,OAAO;;;EAGf,CAAD,OAAQ;;EAEP,CAAD,MAAO,QAAS;EACf,CAAD,IAAM,QAAQ,MAAO;EACnB,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;;EAGC,CAAD,OAAQ;;;EAGP,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;;EAGC,CAAD,OAAQ;;;EAGP,CAAD,QAAS,eAAgB;EACxB,CAAD,IAAM,UAAU,MAAO;EACrB,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK;EACH,EAAF,GAAK;EACL;EACA;;EDxCe,SAAS,kBAAoB,QAAS;EACpD,CAAD,IAAK,OAAO,OAAO,MAAM;;EAExB,CAAD,QAAS,OAAO;;EAEf,CAAD,mBAAuB,CAAE;EACxB,CAAD,IAAM,SAAS,MAAO;EACpB,EAAF,OAAS;EACT;;EAEC,CAAD,QAAS,CAAE;;EAEV,CAAD,IAAM,OAAO,YAAa,MAAQ;EAChC,EAAF,gBAAkB,kBAAmB;;EAEnC,EAAF,IAAO,CAAC,eAAgB;EACrB,GAAH,OAAU,MAAM;EACb,GAAH,OAAU;EACV;;EAEE,EAAF,OAAS,MAAM,OAAQ;EACvB;;EAEC,CAAD,OAAQ;EACR;;AD1BA,0BAGe,UAAW,QAAS;AAHnC,EAIC,CAAD,IAAK,OAAO;;AAJZ,EAMC,CAAD,QAAS,OAAO;;AANhB;AAAA,EASC,CAAD,OAAQ;;AATR,EAWC,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;AAXnC,EAYE,EAAF,OAAS,MAAM;AAZf,EAaE,EAAF,OAAS;AAbT,EAcA;;AAdA,EAgBC,CAAD,gBAAiB,kBAAmB;;AAhBpC;AAAA,EAmBC,CAAD,OAAQ;;AAnBR,EAqBC,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;AArBnC,EAsBE,EAAF,OAAS,MAAM;AAtBf,EAuBE,EAAF,OAAS;AAvBT,EAwBA;;AAxBA,EA0BC,CAAD,OAAQ;AA1BR,EA2BE,EAAF,GAAK;AA3BL,EA4BE,EAAF,GAAK;AA5BL,EA6BA;AA7BA,EA8BA;;ED3Be,SAAS,mBAAqB,QAAS;EACrD,CAAD,IAAK,OAAO,aAAa,MAAM;;EAE9B,CAAD,QAAS,OAAO;;EAEf,CAAD,OAAQ;;EAEP,CAAD,OAAQ,eAAgB;;EAEvB,CAAD,IAAM,SAAS,MAAO;EACpB,EAAF,OAAS;EACT;;EAEC,CAAD,cAAe,CAAE;;;EAGhB,CAAD,OAAQ;;EAEP,CAAD,IAAM,OAAO,YAAa,MAAQ;EAChC,EAAF,OAAS,mBAAoB;EAC3B,EAAF,IAAO,SAAS,MAAO;EACpB,GAAH,OAAU,MAAO;EACjB;;EAEE,EAAF,KAAO,QAAS;EAChB;;EAEC,CAAD,SAAU,OAAS,YAAa;EAC9B,EAAF,YAAc,KAAM;EACpB;;EAEC,CAAD,OAAQ;EACR;;ADnCA,yBAGe,UAAW,QAAS;AAHnC,EAIC,CAAD,IAAK,OAAO;;AAJZ,EAMC,CAAD,QAAS,OAAO;;AANhB;AAAA,EASC,CAAD,OAAQ;;AATR,EAWC,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;AAXnC,EAYE,EAAF,OAAS,MAAM;AAZf,EAaE,EAAF,OAAS;AAbT,EAcA;;AAdA,EAgBC,CAAD,iBAAkB,mBAAoB;;AAhBtC,EAkBC,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;AAlBnC,EAmBE,EAAF,OAAS,MAAM;AAnBf,EAoBE,EAAF,OAAS;AApBT,EAqBA;;AArBA,EAuBC,CAAD,OAAQ;AAvBR,EAwBE,EAAF,GAAK;AAxBL,EAyBE,EAAF,GAAK;AAzBL,EA0BA;AA1BA,EA2BA;;EDpBe,SAAS,YAAc,QAAS;EAC9C,CAAD,iCAAyB,CAAE,WACnB,mBAAoB,WACpB,kBAAmB,WACnB,kBAAmB,WACnB,iBAAkB,WAClB,kBAAmB;EAC3B;;EDXA,IAAI,gBAAgB;EACpB,IAAC;EACD,IAAC;;;EAGD,UAAU;;;EAGV,WAAW;;EAEX,IAAI,iBAAiB;EACrB,IAAI,cAAc;EAEH,SAAS,cAAgB,QAAS;EAChD,CAAD,IAAK,UAAU,QAAQ,MAAM,QAAQ,WAAW;;EAE/C,CAAD,WAAY,OAAO;;EAElB,CAAD,OAAQ,OAAO,aAAc;;EAE5B,CAAD,IAAM,CAAC,MAAO;EACZ,EAAF,SAAW,OAAO,aAAc,kBAAmB;EACjD,EAAF,OAAS,CAAG,UAAU,OAAO,gBAAgB,OAAO,aAAc,gBACzD,OAAO,aAAc;;EAE5B,EAAF,IAAO,CAAC,QAAQ,WAAW,KAAM;EAC9B,GAAH,SAAY;EACT,GAAH,OAAU;EACV;EACA;;EAEC,CAAD,IAAM,CAAC,MAAO;EACZ,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,CAAC,UAAU,CAAC,OAAO,gBAAgB,SAAS,KAAM,OAAS;EAC/D,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;;EAGC,CAAD,IAAM,CAAC,UAAU,QAAQ,KAAM,OAAS;EACtC,EAAF,SAAW,QAAQ,KAAM,MAAO;EAC9B,EAAF,OAAS,MAAM,WAAW,OAAO;;EAE/B,EAAF,OAAS;EACN,GAAH,GAAM;EACH,GAAH,GAAM;EACN;EACA;;EAEC,CAAD,YAAa,CAAE,UAAU,MAAO,UAAW;;EAE1C,CAAD,IAAM,OAAO,YAAa,MAAQ;;;;EAIhC,EAAF,eAAiB,UAAU,YAAa;EACtC,EAAF,IAAO,iBAAiB,CAAC,GAAI;EAC1B,GAAH,YAAe,UAAU,OAAQ,GAAG;EACjC,GAAH,OAAU,MAAM,WAAW,UAAU;EACrC,SAAS;EACN,GAAH,OAAU,OAAO;EACjB;EACA;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK,UAAU,QAAS,WAAW,MAAO,QAAS,UAAU;EAC7D;EACA;;EDtEe,SAAS,wBAA0B,QAAS;EAC1D,CAAD,IAAK,OAAO;;EAEX,CAAD,QAAS,OAAO;;EAEf,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;EAEP,CAAD,OAAQ,eAAgB;EACvB,CAAD,IAAM,CAAC,MAAO;EACZ,EAAF,OAAS,MAAO;EAChB;;EAEC,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS,MAAO;EAChB;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK;EACL;EACA;;AD9BA,oBAIe,UAAW,QAAS;AAJnC,EAKC,CAAD,OAAQ,YAAa,WAChB,cAAe,WACf,wBAAyB;AAP9B,EAQA;;EDHe,SAAS,eAAiB,QAAS;EACjD,CAAD,IAAK,OAAO,MAAM;;EAEjB,CAAD,QAAS,OAAO;;EAEf,CAAD,OAAQ;;;EAGP,CAAD,IAAM,OAAO,YAAa,MAAQ;EAChC,EAAF,OAAS;;EAEP,EAAF,IAAO,OAAO,OAAO,2BAAyB,GAAK;EAChD,GAAH,OAAU;EACN,IAAJ,GAAO;EACH,IAAJ,GAAO;EACP;EACA;;EAEE,EAAF,OAAS,MAAO;EAChB;;;EAGC,CAAD,IAAM,OAAO,YAAa,MAAQ;EAChC,EAAF,OAAS;;EAEP,EAAF,OAAS,eAAgB;EACvB,EAAF,IAAO,CAAC,MAAO;EACZ,GAAH,OAAU,MAAO;EACjB;;EAEE,EAAF,OAAS;;EAEP,EAAF,IAAO,CAAC,OAAO,YAAa,MAAQ;EACjC,GAAH,OAAU,MAAO;EACjB;;EAEE,EAAF,OAAS;EACN,GAAH,GAAM;EACH,GAAH,GAAM;EACN;EACA;;EAEC,CAAD,OAAQ;EACR;;ADhDA,+BAMe,UAAW,QAAS;AANnC,EAOC,CAAD,IAAK,SAAS,YAAY,YAAY;;AAPtC,EASC,CAAD,aAAc,YAAa;;AAT3B,EAWC,CAAD,IAAM,CAAC,YAAa;AAXpB,EAYE,EAAF,OAAS;AAZT,EAaA;;AAbA,EAeC,CAAD,OAAS,YAAa;AAftB,EAgBE,EAAF,UAAY,OAAO;;AAhBnB,EAkBE,EAAF,IAAO,aAAa,eAAgB,SAAW;AAlB/C,EAmBG,GAAH,aAAgB;AAnBhB,EAoBI,IAAJ,GAAO;AApBP,EAqBI,IAAJ,GAAO;AArBP,EAsBI,IAAJ,GAAO;AAtBP,EAuBA;AAvBA,EAwBA,SAEO,IAAK,OAAO,YAAa,MAAQ;AA1BxC,EA2BG,GAAH,OAAU;AA3BV,EA4BG,GAAH,iBAAoB,mBAAoB;;AA5BxC,EA8BG,GAAH,OAAU;;AA9BV,EAgCG,GAAH,IAAQ,CAAC,OAAO,YAAa,MAAQ;AAhCrC,EAiCI,IAAJ,OAAW,MAAO;AAjClB,EAkCA;;AAlCA,EAoCG,GAAH,aAAgB;AApChB,EAqCI,IAAJ,GAAO;AArCP,EAsCI,IAAJ,GAAO;AAtCP,EAuCA;;AAvCA,EAyCG,GAAH,IAAQ,gBAAiB;AAzCzB,EA0CI,IAAJ,WAAe,IAAI;AA1CnB,EA2CA;AA3CA,EA4CA,SAEO;AA9CP,EA+CG,GAAH;AA/CA,EAgDA;AAhDA,EAiDA;;AAjDA,EAmDC,CAAD,OAAQ;AAnDR,EAoDA;;ADpDA,EAKA,IAAI,YAAY;;AALhB,EAOA,4BAA4B,UAAW,QAAQ,aAAc;AAP7D,EAQC,CAAD,OAAQ,UAAW,QAAS;AAR5B,EASE,EAAF,IAAM;;AATN,EAWE,EAAF,IAAO,aAAa,YAAa,SAAW;AAX5C,EAYG,GAAH,OAAU;AAZV,EAaA;;AAbA,EAeE,EAAF,IAAO,CAAC,OAAO,YAAa,SAAW;AAfvC,EAgBG,GAAH,OAAU;AAhBV,EAiBA;;AAjBA,EAmBE,EAAF,OAAS;;AAnBT,EAqBE,EAAF,aAAe,eAAgB;AArB/B,EAsBE,EAAF,IAAO,CAAC,YAAa;AAtBrB,EAuBG,GAAH,OAAU,MAAO;AAvBjB,EAwBA;;AAxBA,EA0BE,EAAF,OAAS;AA1BT,EA2BG,GAAH,GAAM;AA3BN,EA4BG,GAAH,GAAM;AA5BN,EA6BG,GAAH,GAAM;AA7BN,EA8BA;AA9BA,EA+BA;AA/BA,EAgCA;;AAhCA;AAAA,EAmCA,CAAC,YAAW;AAnCZ,EAoCC,CAAD,IAAK,GAAG,KAAK,SAAS,iBAAiB;;AApCvC,EAsCC,CAAD,kBAAmB,iBAAiB,MAAO;;AAtC3C,EAwCC,CAAD,cAAe;AAxCf,EAyCC,CAAD,KAAO,IAAI,GAAG,MAAM,gBAAgB,QAAQ,IAAI,KAAK,KAAK,GAAI;AAzC9D,EA0CE,EAAF,UAAY,0BAA2B,gBAAgB,IAAI;AA1C3D,EA2CE,EAAF,cAAgB;AA3ChB,EA4CA;;AA5CA;AAAA;AAkDC;AAlDD,EAiDC,CAAD,aAAc;AAjDd;;AAAA;;ADAA,EAGA,IAAI,eAAe;;AAHnB,EAKA,2BAA2B,UAAW,QAAQ,aAAc;AAL5D,EAMC,CAAD,OAAQ,UAAW,QAAS;AAN5B,EAOE,EAAF,IAAM,OAAO,MAAM;;AAPnB,EASE,EAAF,OAAS,YAAa;AATtB,EAUE,EAAF,IAAO,CAAC,MAAO;AAVf,EAWG,GAAH,OAAU;AAXV,EAYA;;AAZA;AAAA;AAAA;AAAA,EAiBE,EAAF,OAAU,MAAO;AAjBjB,EAkBG,GAAH,QAAW,OAAO;;AAlBlB,EAoBG,GAAH,OAAU;;AApBV,EAsBG,GAAH,IAAQ,CAAC,OAAO,YAAa,SAAW;AAtBxC,EAuBI,IAAJ,OAAW,MAAM;AAvBjB,EAwBI,IAAJ,OAAW;AAxBX,EAyBA;;AAzBA;AAAA,EA4BG,GAAH,IAAQ,WAAW,QAAQ,gBAAgB,KAAM,OAAO,YAAY,OAAQ,KAAQ;AA5BpF,EA6BI,IAAJ,OAAW,MAAM;AA7BjB,EA8BI,IAAJ,OAAW;AA9BX,EA+BA;;AA/BA,EAiCK,GAAL,OAAY;;AAjCZ;AAAA,EAoCG,GAAH,QAAW,YAAa;AApCxB,EAqCG,GAAH,IAAQ,CAAC,OAAQ;AArCjB,EAsCI,IAAJ,OAAW,MAAM;AAtCjB,EAuCI,IAAJ,OAAW;AAvCX,EAwCA;;AAxCA,EA0CG,GAAH,OAAU;AA1CV,EA2CI,IAAJ,GAAO;AA3CP,EA4CI,IAAJ,GAAO;AA5CP,EA6CI,IAAJ,GAAO,CAAE,MAAM;AA7Cf,EA8CA;;AA9CA;AAAA;AAAA,EAkDA;AAlDA,EAmDA;AAnDA,EAoDA;;AApDA;AAAA,EAuDA,CAAC,YAAW;AAvDZ,EAwDC,CAAD,IAAK,GAAG,KAAK,SAAS,gBAAgB;;AAxDtC;AAAA;AAAA;AAAA;AAAA,EA8DC,CAAD,iBAAkB,wEAAwE,MAAO;;AA9DjG;AAAA,EAiEC,CAAD,cAAe;AAjEf,EAkEC,CAAD,KAAO,IAAI,GAAG,MAAM,eAAe,QAAQ,IAAI,KAAK,KAAK,GAAI;AAlE7D,EAmEE,EAAF,UAAY,yBAA0B,eAAe,IAAI;AAnEzD,EAoEE,EAAF,cAAgB;AApEhB,EAqEA;;AArEA;AAAA,EAwEC,CAAD,gBAAiB;AAxEjB;;AAAA;;;;;EDMe,SAAS,eAAiB,QAAS;EACjD,CAAD,IAAK,OAAO,YAAY,QAAQ;;EAE/B,CAAD,sCAA2B,CAAE;EAC5B,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,OAAS;EACT;;EAEC,CAAD,QAAS,OAAO;;EAEf,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;EAEP,CAAD,SAAU,eAAgB;EACzB,CAAD,IAAM,CAAC,QAAS;EACd,EAAF,OAAS,MAAO;EAChB;;EAEC,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS,MAAO;EAChB;;EAEC,CAAD,OAAQ;;EAEP,CAAD,UAAW,eAAgB;EAC1B,CAAD,IAAM,CAAC,SAAU;EACf,EAAF,OAAS,MAAO;EAChB;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK,CAAE,YAAY,QAAQ;EAC3B;EACA;;ED7Ce,SAAS,eAAiB,QAAS;;;;;;;EAOjD,CAAD,OAAQ,gBAAiB;EACzB;;EDPe,SAAS,kBAAoB,YAAa;EACxD,CAAD,IAAK;;EAEJ,CAAD,YAAc,YAAY,OAAO;;EAEhC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK,UAAW;EAChB;;EAEC,CAAD,SAAU,UAAY,MAAO;EAC3B,EAAF,QAAW,KAAK;EACb,GAAH,KAAQ;EACL,GAAH,KAAQ;EACL,GAAH,KAAQ;EACL,GAAH,KAAQ;EACL,IAAH,OAAU,KAAK;;EAAE,GAAjB,KAEQ;EACL,IAAH,OAAU,KAAK,UAAW,OAAQ,KAAK;;EAAM,GAA7C,KAEQ;EACL,IAAH,OAAU,OAAQ,KAAK,IAAI,KAAK,EAAE,IAAK,WAAY,KAAM,OAAQ,MAAO;;EAAI,GAA5E,KAEQ;EACL,IAAH,OAAU,OAAQ,KAAK,IAAI,KAAK,EAAE,IAAK,WAAY,KAAM,OAAQ,MAAO;;EAAI,GAA5E,KAEQ;EACL,IAAH,OAAU,KAAK,IAAI,MAAM,UAAW,KAAK;;EAAI,GAA7C,KAEQ;EACL,IAAH,OAAU,CAAE,KAAK,MAAM,WAAW,YAAY,KAAK,KAAM,UAAW,KAAK;;EAAI,GAA7E,KAEQ;EACL,IAAH,OAAU,UAAW,KAAK,EAAE,OAAS,KAAK,EAAE,OAAQ,GAAG,OAAQ,OAAO,MAAM,KAAK,IAAI,MAAM,KAAK,KAAM,UAAW,KAAK,EAAE;;EAAK,GAA7H,KAEQ;EACL,IAAH,OAAU,UAAW,KAAK,KAAM,OAAQ,KAAK,IAAI,KAAK,EAAE,IAAK,WAAY,KAAM,OAAQ,MAAO;;EAAI,GAAlG,KAEQ;EACL,IAAH,OAAU,MAAM,UAAW,KAAK,KAAM;;EAAI,GAA1C,KAEQ;EACL,IAAH,OAAU,UAAW,KAAK,KAAM,UAAW,KAAK;;EAAI,GAApD,KAEQ;EACL,IAAH,OAAY,KAAK,IAAI,MAAM,KAAK,IAAI,MAAM,UAAW,KAAK,KAAM;;EAAM,GAAtE,KAEQ;EACL,IAAH,OAAU,UAAW,KAAK,EAAE,MAAO,MAAM,UAAW,KAAK,EAAE,MAAO,MAAM,UAAW,KAAK,EAAE;;EAAK,GAA/F,KAEQ;EACL,IAAH,OAAU,MAAM,KAAK,QAAS,KAAK;;EAAI,GAAvC;EAGG,IAAH,MAAS,IAAI,MAAO;EAA8B;EAElD;EACA;;;EAGA,SAAS,YAAc,MAAM,MAAO;EACnC,CAAD,IAAK,GAAG;;EAEP,CAAD,IAAM,KAAK,MAAM,WAAY;EAC3B,EAAF,IAAO,KAAK,QAAS,KAAK,OAAQ,CAAC,GAAI;EACpC,GAAH,KAAQ,QAAS,KAAK;EACtB;EACA;;EAEC,CAAD,OAAQ,KAAK,KAAK,KAAK;EACtB,CAAD,IAAM,MAAO;EACX,EAAF,IAAO,SAAU,OAAS;EACvB,GAAH,YAAgB,MAAM;EACtB,SAAS;EACN,GAAH,IAAO,KAAK;EACT,GAAH,OAAW,KAAM;EACb,IAAJ,YAAiB,KAAK,IAAI;EAC1B;EACA;EACA;;EAEC,CAAD,IAAM,KAAK,GAAI;EACb,EAAF,YAAe,KAAK,GAAG;EACvB;;EAEC,CAAD,IAAM,KAAK,GAAI;EACb,EAAF,YAAe,KAAK,GAAG;EACvB;;EAEC,CAAD,IAAM,KAAK,GAAI;EACb,EAAF,YAAe,KAAK,GAAG;EACvB;EACA;;ED7FA,IAAI,qBAAqB;EAEV,SAAS,iBAAmB,YAAY,UAAW;EACjE,CAAD,IAAK;;EAEJ,CAAD,IAAM,YAAa;EACjB,EAAF,OAAU,WAAW,MAAM,aAAa,WAAW,GAAI;EACpD,GAAH,aAAgB,WAAW;EAC3B;;;;EAIE,EAAF,IAAO,WAAW,MAAM,WAAY;EACjC,GAAH,SAAY,IAAI,WAAW;EAC3B,SAAS;EACN,GAAH,IAAQ,WAAW,MAAM,kBAAkB,mBAAmB,KAAM,WAAW,IAAM;EACjF,IAAJ,SAAa,IAAI,WAAW;EAC5B,UAAU,IAAK,sBAAsB,uBAAwB,aAAe;EACxE,IAAJ,SAAa,KAAK;EAClB,UAAU;EACN,IAAJ,SAAa,IAAI,kBAAmB;EACpC;EACA;;EAEE,EAAF,OAAS;EACT;EACA;;;EAGA,SAAS,uBAAyB,YAAa;EAC9C,CAAD,IAAK,UAAU;EAAf,KAAmB;;EAElB,CAAD,OAAS,WAAW,MAAM,UAAU,WAAW,EAAE,MAAM,YAAa;EAClE,EAAF,aAAe,WAAW;;EAExB,EAAF,IAAO,WAAW,GAAI;EACnB,GAAH,IAAQ,WAAW,EAAE,MAAM,WAAY;EACnC,IAAJ,QAAY,QAAS,WAAW;EAChC,UAAU;EACN,IAAJ,QAAY,QAAS,kBAAmB,WAAW;EACnD;EACA,SAAS;EACN,GAAH,QAAW,QAAS,WAAW;EAC/B;;EAEE,EAAF,aAAe,WAAW;EAC1B;;EAEC,CAAD,IAAM,WAAW,MAAM,WAAY;EACjC,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK,WAAW;EACd,EAAF,GAAK;EACL;EACA;;EDvDe,SAAS,WAAa,QAAQ,KAAM;EAClD,CAAD,IAAK,aAAa,eAAgB;EAAlC,KAA4C;;EAE3C,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;EACA;;EAEC,CAAD,SAAU,EAAE,GAAG;EACd,CAAD,iBAAmB,YAAY;;EAE9B,CAAD,OAAQ;EACR;;EDfe,SAAS,cAAgB,QAAQ,KAAM;EACrD,CAAD,IAAK,YAAY;;EAEhB,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;EAEP,CAAD,aAAc,eAAgB;;EAE7B,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;EACA;;EAEC,CAAD,SAAU,EAAE,GAAG;EACd,CAAD,iBAAmB,YAAY;;EAE9B,CAAD,OAAQ;EACR;;EDvBe,SAAS,YAAc,QAAQ,KAAM;EACnD,CAAD,IAAK,OAAO,WAAW,YAAY,SAAS;;EAE3C,CAAD,QAAS,OAAO;;EAEf,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;EACP,CAAD,YAAa,OAAO;;;;;;EAMnB,CAAD,OAAQ,eAAe;EACtB,CAAD,aAAc,eAAgB;EAC7B,CAAD,OAAQ,eAAe;;EAEtB,CAAD,OAAQ;EACP,CAAD,UAAW,eAAgB;EAC1B,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,OAAS;EACT;;EAEC,CAAD,UAAW,EAAE,GAAG;EACf,CAAD,iBAAmB,YAAY;;EAE9B,CAAD,OAAQ;;;;EAIP,CAAD,IAAM,SAAU;EACd,EAAF,UAAY;EACT,GAAH,GAAM;EACH,GAAH,GAAM;EACH,GAAH,GAAM,CAAE;EACR;;EAEE,EAAF,iBAAoB,SAAS;EAC7B;;EAEC,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;EACA;;EAEC,CAAD,OAAQ;EACR;;;EDpDe,SAAS,YAAc,QAAQ,KAAM;EACnD,CAAD,IAAK;;EAEJ,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS;EACT;;EAEC,CAAD,QAAS,OAAO,YAAY,QAAS,IAAI;;EAExC,CAAD,IAAM,UAAU,CAAC,GAAI;EACnB,EAAF,OAAS,OAAO,QAAQ,IAAI,MAAM;EAChC,EAAF,OAAS,EAAE,GAAG;EACd;EACA;;EDZe,SAAS,0BAA4B,QAAQ,mBAAoB;EAC/E,CAAD,IAAK,OAAO,YAAY;;EAEvB,CAAD,QAAS,OAAO;EACf,CAAD,aAAc,eAAgB;;EAE7B,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,OAAS;EACT;;EAEC,CAAD,KAAO,IAAI,GAAG,IAAI,kBAAkB,QAAQ,KAAK,GAAI;EACnD,EAAF,IAAO,OAAO,YAAY,OAAQ,GAAG,kBAAkB,GAAG,YAAa,kBAAkB,IAAK;EAC3F,GAAH,OAAU;EACV;EACA;;EAEC,CAAD,OAAQ,MAAM;EACb,CAAD,OAAQ,cAAe;EACvB;;EDjBe,SAAS,iBAAmB,QAAQ,KAAM;EACxD,CAAD,IAAK,OAAO,YAAY,cAAc;;EAErC,CAAD,QAAS,OAAO;;;EAGf,CAAD,IAAK;EACH,EAAF,aAAe,0BAA2B,QAAQ,CAAE,IAAI;EACxD,GAAG,OAAQ,GAAI;EACb,EAAF,MAAQ;EACR;;EAEC,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,IAAO,OAAO,IAAI,OAAQ,WAAY,KAAM;;EAEzC,GAAH,OAAU,MAAM;EACb,GAAH,OAAU;EACV;;EAEE,EAAF,IAAO,KAAM;EACV,GAAH,MAAS;EACT;EACA;;EAEC,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;;EAEE,EAAF,IAAO,CAAC,YAAa;;EAElB,GAAH,IAAQ,OAAO,eAAe,KAAM;EAChC,IAAJ,OAAW;EACX;;EAEG,GAAH,OAAU,MAAV;EACA;EACA;;EAEC,CAAD,eAAgB,EAAE,GAAG;EACpB,CAAD,iBAAmB,YAAY;;EAE9B,CAAD,OAAQ;EACR;;ED3CA,IAAI,eAAe;EAEJ,SAAS,YAAc,QAAQ,KAAM;EACnD,CAAD,IAAK,OAAO,MAAM;;EAEjB,CAAD,IAAM,CAAC,OAAO,aAAc,eAAiB;EAC3C,EAAF,OAAS;EACT;;EAEC,CAAD,QAAS,OAAO;EACf,CAAD,OAAQ,OAAO,aAAc;;EAE5B,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT;EACA;;EAEC,CAAD,UAAW,EAAE,GAAG;;EAEf,CAAD,IAAM,MAAO;EACX,EAAF,QAAU,IAAI;EACd;;EAEC,CAAD,OAAQ;EACR;;EDzBe,SAAS,YAAc,QAAQ,KAAM;EACnD,CAAD,IAAK,OAAO,WAAW,OAAO;;EAE7B,CAAD,QAAS,OAAO;;EAEf,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,OAAS;EACtC,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,MAAQ;EACjC,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;EAEP,CAAD,YAAa,OAAO;EACnB,CAAD,QAAS,UAAU,QAAS,IAAI;;EAE/B,CAAD,IAAM,UAAU,CAAC,GAAI;EACnB,EAAF,UAAY;EACT,GAAH,GAAM;EACH,GAAH,GAAM,UAAU,OAAQ,GAAG,OAAQ,MAAO,KAAM;EAChD;;EAEE,EAAF,OAAS,OAAO;;EAEd,EAAF,IAAO,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,GAAH,OAAU,MAAV,kCAAgD,IAAI,QAApD;EACA;;EAEE,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ,MAAM;EACb,CAAD,OAAQ;EACR;;EDtCA,yBAAe,GAAG;EAEH,SAAS,SAAW,QAAQ,KAAM;EAChD,CAAD,IAAK,QAAQ,OAAO;;EAEnB,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,OAAS;EACtC,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,CAAC,OAAO,kCAAyB,GAAK;EAC1C,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;EACA;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACL;EACA;;EDpBA,2BAAe,GAAG;EAEH,SAAS,WAAa,QAAQ,KAAM;EAClD,CAAD,IAAO,QAAQ,OAAO;;EAErB,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,OAAS;EACtC,EAAF,OAAS;EACT;;EAEC,CAAD,IAAM,CAAC,OAAO,oCAAyB,GAAK;EAC1C,EAAF,OAAS,MAAM;EACb,EAAF,OAAS;EACT;;EAEC,CAAD,IAAO,aAAa,eAAgB;;EAEnC,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;EACA;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK;EACL;EACA;;AD3BA,6BAEe;AAFf,EAGC,CAAD,QAAY;AAHZ,EAIC,CAAD,MAAY;AAJZ,EAKC,CAAD,WAAY;AALZ,EAMC,CAAD,QAAY;AANZ,EAOC,CAAD,UAAY;AAPZ,EAQA;;EDEA,IAAI,kBAAkB;EACtB,IAAC,qBAAqB;EACtB,IAAC,yBAAyB,IAAI,OAAQ,OAAO,OAAO,KAAM,sBAAuB,KAAM,OAAQ;EAEhF,SAAS,YAAc,QAAQ,KAAM;EACnD,CAAD,IAAK,OAAO,YAAY,SAAS,OAAO,UAAU,SAAS,OAAO,aAAa,YAAY,QAAQ,GAAG;;EAErG,CAAD,QAAS,OAAO;;EAEf,CAAD,IAAM,OAAO,YAAa,MAAQ;EAChC,EAAF,UAAY,EAAE,GAAG,SAAS,GAAG,IAAI,GAAG;EACpC,QAAQ,IAAK,OAAO,YAAa,MAAQ;EACvC,EAAF,UAAY,EAAE,GAAG,SAAS,GAAG;;EAE3B,EAAF,IAAO,OAAO,YAAa,YAAc;EACtC,GAAH,OAAU,MAAM,QAAQ,OAAO,mBAAmB,GAAG;EAClD,GAAH,OAAU,MAAO;EACjB;;EAEE,EAAF,IAAO,QAAQ,OAAO,aAAc,yBAA2B;EAC5D,GAAH,gBAAmB;EAChB,GAAH,QAAW,IAAI,qBAAsB;EACrC;EACA,QAAQ;EACN,EAAF,OAAS;EACT;;EAEC,CAAD,OAAQ;;EAEP,CAAD,aAAc,eAAgB;;EAE7B,CAAD,IAAM,CAAC,YAAa;EAClB,EAAF,OAAS,MAAO;EAChB;;;EAGC,CAAD,IAAM,IAAI,OAAO,aAAc,kBAAoB;EACjD,EAAF,IAAM,QAAN;;EAEE,EAAF,IAAO,QAAQ,OAAO,aAAc,qBAAuB;EACxD,GAAH,QAAW,IAAI,IAAI,MAAM;EACzB,SAAS;EACN,GAAH,QAAW,IAAI;EACf;EACA;;EAEC,CAAD,OAAQ;;EAEP,CAAD,IAAM,CAAC,OAAO,YAAa,IAAI,QAAU;EACvC,EAAF,OAAS,MAAT,kCAA+C,IAAI,QAAnD;EACA;;EAEC,CAAD,OAAQ,gBAAgB;EACvB,CAAD,WAAY,QAAQ;;EAEnB,CAAD,aAAc;;EAEb,CAAD,GAAI;EACF,EAAF,IAAO,QAAQ,YAAa,QAAQ,MAAQ;EACzC,GAAH,IAAQ,iBAAiB,MAAM,MAAM,eAAgB;EACjD,IAAJ,OAAW,MAAX,cAA8B,IAAI,OAAlC,MAA0C,gBAAgB,IAAI;EAC9D;;EAEG,GAAH,OAAU,gBAAgB;EACvB,GAAH,SAAY;EACZ,SAEO,IAAK,QAAQ,WAAY,QAAQ,MAAQ;EAC7C,GAAH,IAAQ,QAAQ,MAAM,gBAAiB;EACnC,IAAJ,OAAW,MAAO;EAClB;;EAEG,GAAH,IAAQ,SAAU;EACd,IAAJ,OAAW,MAAO;EAClB;;EAEG,GAAH,IAAQ,CAAC,aAAc;EACnB,IAAJ,cAAkB,kBAAmB,YAAY,QAAQ;EACzD;;EAEG,GAAH,YAAe,EAAE,KAAK;EAClB,IAAJ,GAAO;EACH,IAAJ,GAAO;EACH,IAAJ,GAAO,sCAA0B,CAAE,WAAW,OAAQ,MAAM;EACxD,IAAJ,GAAO,WAAW;EAClB;;EAEG,GAAH,WAAc,KAAM,OAAQ,MAAM;EAClC,SAEO,IAAK,QAAQ,SAAU,QAAQ,MAAQ;EAC3C,GAAH,IAAQ,QAAQ,MAAM,gBAAiB;EACnC,IAAJ,OAAW,MAAO;EAClB;;EAEG,GAAH,IAAQ,SAAU;EACd,IAAJ,OAAW,MAAO;EAClB;;EAEG,GAAH,UAAa;;;EAGV,GAAH,IAAQ,CAAC,aAAc;EACnB,IAAJ,cAAkB,kBAAmB,YAAY,QAAQ;EACrD,IAAJ,WAAe,YAAY;EAC3B,UAAU;EACN,IAAJ,YAAgB,EAAE,KAAK;EAClB,KAAL,GAAQ;EACH,KAAL,GAAQ;EACH,KAAL,GAAQ,sCAA0B,CAAE;EAC/B,KAAL,GAAQ,WAAW;EACnB;EACA;EACA,SAEO;EACJ,GAAH,QAAW,OAAO,KAAM;;EAErB,GAAH,IAAQ,CAAC,OAAQ;EACb,IAAJ;EACA;;EAEG,GAAH,SAAY,KAAM;EAClB;EACA,UAAW,CAAC;;EAEX,CAAD,IAAM,aAAc;;;;;EAKlB,EAAF,IAAO,QAAQ,MAAM,cAAe;EACjC,GAAH,QAAW,IAAI;EACf;;EAEE,EAAF,QAAU,IAAI;EACd;;EAEC,CAAD,iBAAmB,YAAY;;;;;;EAM9B,CAAD,IAAM,CAAC,QAAQ,EAAE,QAAS;EACxB,EAAF,OAAS,QAAQ;EACjB;;EAEC,CAAD,OAAQ;EACR;;EAEA,SAAS,kBAAoB,YAAY,aAAc;EACtD,CAAD,IAAK,cAAc;EACjB,EAAF,GAAK;EACH,EAAF,GAAK;EACH,EAAF,GAAK;EACL;;EAEC,CAAD,iBAAmB,YAAY;;EAE9B,CAAD,OAAQ;EACR;;EAEA,SAAS,OAAS,YAAa;EAC9B,CAAD,IAAM,WAAW,MAAM,mBAAmB,WAAW,MAAM,KAAM;EAC/D,EAAF,OAAS,WAAW;EACpB;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK;EACH,EAAF,GAAK,kBAAmB;EACxB;EACA;;EAEA,6BAAgB,CAAG,aAAc;EAChC,CAAD,IAAM,YAAY,WAAW,GAAI;EAC/B,EAAF,OAAS,YAAY;EACrB;;EAEC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK;EACH,EAAF,GAAK,CACF,kBAAmB,YAAY,KAC/B,sCAA0B,CAAE,YAAY,MAAO;EAElD;EACA;;EAEA,SAAS,kBAAoB,YAAa;;EAEzC,CAAD,OAAQ;EACN,EAAF,GAAK;EACH,EAAF,GAAK;EACL;EACA;;ED5MA,IAAI,eAAe;EACnB,IAAC,gBAAgB;EAEF,SAAS,gBAAkB,QAAS;EAClD,CAAD,IAAK,OAAO,SAAS,WAAW,UAAU;;EAEzC,CAAD,QAAS,OAAO;;EAEf,CAAD,IAAM,CAAC,OAAO,YAAa,eAAiB;EAC1C,EAAF,OAAS;EACT;;EAEC,CAAD,YAAa,OAAO;EACnB,CAAD,WAAY,UAAU,QAAS;;EAE9B,CAAD,IAAM,aAAa,CAAC,GAAI;EACtB,EAAF,OAAS,MAAO;EAChB;;EAEC,CAAD,UAAW,UAAU,OAAQ,GAAG;EAC/B,CAAD,OAAQ,OAAO,WAAW;;EAEzB,CAAD,UAAW;EACT,EAAF,GAAK;EACH,EAAF,GAAK;EACL;;EAEC,CAAD,IAAM,OAAO,sBAAuB;EAClC,EAAF,QAAU,IAAI,OAAO,WAAY;EACjC;;EAEC,CAAD,OAAQ;EACR;;;ED/BO,IAAM,oBAAoB;EAC1B,IAAM,mBAAmB;;EAEhC,IAAM,eAAe,EAAE,MAAM,IAAI,KAAK,IAAI,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,KAAK,KAAK,KAAK,QAAQ,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,QAAQ,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,MAAM,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,QAAQ,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,KAAK,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,QAAQ,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,QAAQ,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,QAAQ,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,KAAK,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,QAAQ,KAAK,MAAM,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,QAAQ,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,SAAS,KAAK,IAAI,KAAK,KAAK,KAAK,OAAO,KAAK,KAAK,KAAK,SAAS,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,OAAO,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,KAAK,IAAI,KAAK,IAAI,K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"}