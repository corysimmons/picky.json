{"version":3,"sources":["../../src/js/picky.js"],"names":[],"mappings":"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","file":"picky.js","sourcesContent":["/* global $, Clipboard, hljs */\n\n// Activate clipboard\nconst clipboard = new Clipboard('.btn-clipboard') // Stop crying Firefox!\nclipboard // stop crying StandardJS!\n\n// Test if JSON is valid and trigger notification if it's not\nconst validNotification = () => {\n  if ($('textarea').val() !== '') {\n    try {\n      $.parseJSON($('code').text())\n      $('.invalid-json').fadeOut()\n    } catch (err) {\n      $('.invalid-json').fadeIn()\n    }\n  } else {\n    $('.invalid-json').fadeOut()\n  }\n}\n\nsetInterval(validNotification, 500)\n\n// Load example data\n$('.btn-example').click(() => {\n  $('#picked').val('')\n  $.ajax({\n    url: 'https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco',\n    success: (data) => {\n      $('textarea').text('https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco')\n      $('code').html(data)\n      hljs.highlightBlock($('code')[0])\n    },\n    dataType: 'text'\n  })\n})\n\n// Traverse the object and sift out the selector\n// Courtesy of https://github.com/danjford\nconst searchObj = (searchTerm, object) => {\n  let path = []\n  let foundVal = ''\n  let stopSearch = false\n\n  function search (searchTerm, object) {\n    let pointer\n    for (var key in object) {\n      if (typeof object[key] === 'object') {\n        if (!stopSearch) {\n          pointer = key\n          search(searchTerm, object[key])\n        }\n      } else if (object[key].toString().indexOf(searchTerm.toString()) > -1) {\n        pointer = key\n        foundVal = object[key]\n        stopSearch = true\n      }\n      if (stopSearch) break\n    }\n    if (stopSearch) {\n      path.push(isNaN(pointer) ? pointer : `[${pointer}]`)\n    }\n  }\n  search(searchTerm, object)\n  return {\n    value: foundVal,\n    path: path.reverse().join('.').replace(/\\.\\[/g, '[').replace(/\\.$/, '')\n  }\n}\n\n$(document).on('click', '.hljs-string, .hljs-number', () => {\n  // Click highlight\n  $('code *').removeClass('is-selected')\n  $(this).addClass('is-selected')\n\n  // Find selector and display in disabled input field\n  const foundVal = searchObj($(this).text().replace(/[\\\"]/g, ''), $.parseJSON($('code').text()))\n  $('#picked').val(foundVal.path)\n})\n\n// Resize panels\nconst horizontalResize = (offset) => {\n  $('textarea').css('width', offset + '%')\n  $('.code-wrap').css('width', (100 - offset) + '%')\n}\n\nconst verticalResize = (offset) => {\n  $('textarea').css('height', offset + '%')\n  $('.code-wrap').css('height', (100 - offset) + '%')\n}\n\nlet resizing = false\n$('.resize').on('mousedown touchstart', () =>\n  resizing = true\n)\n\n$(document).on('mousemove touchmove', (e) => {\n  if (!resizing) {\n    return\n  }\n  if (document.querySelector('body').clientWidth >= 1000) {\n    horizontalResize((e.pageX / document.querySelector('main').clientWidth) * 100)\n  } else {\n    verticalResize(((e.pageY / document.querySelector('body').clientHeight) * 100) - 5)\n  }\n}).on('mouseup touchend', () =>\n  resizing = false\n)\n\n// Remove the resize styles on window change so it doesn't get wierd\n$(window).on('resize', () =>\n  $('textarea, .code-wrap').removeAttr('style')\n)\n\n$('textarea').keydown((e) => {\n  // Allow insertion of tabs - http://stackoverflow.com/a/28483558/175825\n  if (e.which === 9) {\n    e.preventDefault()\n    if (this.value) {\n      const val = this.value\n      const start = this.selectionStart\n      const end = this.selectionEnd\n      const selected = val.substring(start, end)\n      let re = ''\n      let count = ''\n\n      if (e.shiftKey) {\n        re = /^\\t/gm\n        count = -selected.match(re).length\n        this.value = val.substring(0, start) + selected.replace(re, '') + val.substring(end)\n      } else {\n        re = /^/gm\n        count = selected.match(re).length\n        this.value = val.substring(0, start) + selected.replace(re, '\\t') + val.substring(end)\n      }\n      if (start === end) {\n        this.selectionStart = end + count\n      } else {\n        this.selectionStart = start\n      }\n      this.selectionEnd = end + count\n    }\n  }\n})\n\n// Test the input to see if it's a JSON url\n// If it is, populate <code> with that data\n// If it's not, populate <code> with whatever is in <textarea>\n$('textarea').keyup(() => {\n  const textareaContents = $('textarea').val().trim()\n  $('#picked').val('')\n  $.ajax({\n    url: textareaContents,\n    type: 'GET',\n    dataType: 'json',\n    success: (data) => {\n      $('code').html(JSON.stringify(data, null, '\\t'))\n      hljs.highlightBlock($('code')[0])\n    },\n    error: () => {\n      // Send textarea code to highlight.js <code> container\n      console.log(`Sorry for spamming the ðŸ’© out of your console! https://github.com/corysimmons/picky.json/issues/4`)\n      $('code').html($('textarea').val())\n      hljs.highlightBlock($('code')[0])\n    }\n  })\n})\n"]}