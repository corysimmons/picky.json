{"version":3,"sources":["../../src/js/picky.js"],"names":[],"mappings":"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","file":"picky.js","sourcesContent":["// /* global $, Clipboard, hljs */\n\n// Adds the commas after the attributes in the JSON\nRactive.defaults.data.pickyLengthCheck = function(keypath, index) {\n  const items = this.get(keypath.replace(/\\.[a-z\\_0-9]*$/gi, ''))\n  const length = Array.isArray(items) ? items.length : Object.keys(items).length\n  return index < length - 1\n}\n\nconst main = new Ractive({\n  el: '#outlet',\n  template: '#recurse'\n})\n\nconst input = new Ractive({\n  el: '.grab',\n  template: '#grab',\n  onrender: () => {\n    // Activate clipboard\n    const clipboard = new Clipboard('.btn-clipboard') // Stop crying Firefox!\n    clipboard // stop crying StandardJS!\n  }\n})\n\nmain.on('showPath', function(el, path) {\n  this.set('pickyIsSelected', path);\n  input.set('path', path)\n})\n\ninput.on('highlight', function(el, value) {\n  main.set('pickyIsSelected', value);\n})\n\n// Test if JSON is valid and trigger notification if it's not\nconst validNotification = () => {\n  if ($('textarea').val() !== '') {\n    try {\n      $.parseJSON(JSON.stringify(main.get()))\n      $('.invalid-json').fadeOut()\n    } catch (err) {\n      $('.invalid-json').fadeIn()\n    }\n  } else {\n    $('.invalid-json').fadeOut()\n  }\n}\n\nsetInterval(validNotification, 500)\n\n// Load example data\n$('.btn-example').click(() => {\n  $('#picked').val('')\n  $.ajax({\n    url: 'https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco',\n    success: (data) => {\n      $('textarea').text('https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco')\n      main.set('pickyIsSelected', '');\n      main.set(JSON.parse(data))\n    },\n    dataType: 'text'\n  })\n})\n\n// Resize panels\nconst horizontalResize = (offset) => {\n  $('textarea').css('width', offset + '%')\n  $('.code-wrap').css('width', (100 - offset) + '%')\n}\n\nconst verticalResize = (offset) => {\n  $('textarea').css('height', offset + '%')\n  $('.code-wrap').css('height', (100 - offset) + '%')\n}\n\nlet resizing = false\n$('.resize').on('mousedown touchstart', () =>\n  resizing = true\n)\n\n$(document).on('mousemove touchmove', (e) => {\n  if (!resizing) {\n    return\n  }\n  if (document.querySelector('body').clientWidth >= 1000) {\n    horizontalResize((e.pageX / document.querySelector('main').clientWidth) * 100)\n  } else {\n    verticalResize((((e.originalEvent.pageY || e.originalEvent.touches[0].pageY) / document.querySelector('body').clientHeight) * 100) - 5)\n    return false\n  }\n}).on('mouseup touchend', () =>\n  resizing = false\n)\n\n// Remove the resize styles on window change so it doesn't get wierd\n$(window).on('resize', () =>\n  $('textarea, .code-wrap').removeAttr('style')\n)\n\n$('textarea').on('keydown', (e) => {\n  if (e.which === 9) {\n    e.preventDefault()\n  }\n}).on('keyup', function() {\n  try {\n    main.set(JSON.parse($(this).val()))\n  } catch (error) {\n    if (!$(this).val().length) {\n      main.reset()\n    }\n  }\n})\n\nlet timeout = '';\nconst debounceRequest = (contents, timeout) => {\n  timeout = setTimeout(() => {\n\n    $.ajax({\n      url: contents,\n      type: 'GET',\n      dataType: 'json',\n      success: (data) => {\n        main.set(data)\n      },\n      error: () => {\n        // Send textarea code to highlight.js <code> container\n        console.log(`Sorry for spamming the ðŸ’© out of your console! https://github.com/corysimmons/picky.json/issues/4`)\n        main.set($('textarea').val())\n      }\n    })\n\n  }, timeout)\n}\n\n// Test the input to see if it's a JSON url\n// If it is, populate <code> with that data\n// If it's not, populate <code> with whatever is in <textarea>\n$('textarea').keyup(() => {\n  const expression = /[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi\n  const regex = new RegExp(expression)\n  let url = $('textarea').val().trim()\n\n  clearTimeout(timeout)\n  if (url.match(regex)) {\n    debounceRequest(url, 1000)\n  }\n\n  $('#picked').val('')\n\n})"]}