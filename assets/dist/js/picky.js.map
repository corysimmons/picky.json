{"version":3,"sources":["../../src/js/picky.js"],"names":[],"mappings":"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","file":"picky.js","sourcesContent":["// /* global $, Clipboard, hljs */\n\n// Adds the commas after the attributes in the JSON\nRactive.defaults.data.pickyLengthCheck = function(keypath, index) {\n  const items = this.get(keypath.replace(/\\.[a-z\\_0-9]*$/gi, ''))\n  const length = Array.isArray(items) ? items.length : Object.keys(items).length\n  return index < length - 1\n}\n\nRactive.DEBUG = false\n\nconst expression = /[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi\nconst regex = new RegExp(expression)\n\nconst main = new Ractive({\n  el: '.json',\n  template: '#main'\n})\n\nconst input = new Ractive({\n  el: '.grab',\n  template: '#grab',\n  onrender: () => {\n    // Activate clipboard\n    const clipboard = new Clipboard('.btn-clipboard') // Stop crying Firefox!\n    clipboard // stop crying StandardJS!\n  }\n})\n\nmain.on('showPath', function(el, path) {\n  this.set('pickyIsSelected', path);\n  input.set('path', path)\n})\n\ninput.on('highlight', function(el, value) {\n  main.set('pickyIsSelected', value);\n})\n\n// Test if JSON is valid and trigger notification if it's not\nconst validNotification = () => {\n  if ($('textarea').val() !== '' && !$('textarea').val().match(regex)) {\n    try {\n      $.parseJSON($('textarea').val())\n      $('.invalid-json').fadeOut()\n    } catch (err) {\n      $('.invalid-json').fadeIn()\n    }\n  } else {\n    $('.invalid-json').fadeOut()\n  }\n}\n\nsetInterval(validNotification, 500)\n\n// Load example data\n$('.btn-example').click(() => {\n  $('#picked').val('')\n  $.ajax({\n    url: 'https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco',\n    success: (data) => {\n      $('textarea').val('https://maps.googleapis.com/maps/api/geocode/json?address=San%20Francisco')\n      main.set('pickyIsSelected', '');\n      main.reset({data: JSON.parse(data)})\n    },\n    dataType: 'text'\n  })\n})\n\n// Resize panels\nconst resizer = (offset, field, max) => {\n  if (100 - offset > max && offset > max) {\n    $('textarea').css(field, offset + '%')\n    $('.code-wrap').css(field, (100 - offset) + '%')\n  }\n}\n\nlet resizing = false\n$('.resize').on('mousedown touchstart', () =>\n  resizing = true\n)\n\n$(document).on('mousemove touchmove', (e) => {\n  if (!resizing) {\n    return\n  }\n  if (document.querySelector('body').clientWidth >= 1000) {\n    resizer((e.pageX / document.querySelector('main').clientWidth) * 100, 'width', 10)\n  } else {\n    resizer((((e.originalEvent.pageY || e.originalEvent.touches[0].pageY) / document.querySelector('body').clientHeight) * 100) - 5, 'height', 20)\n    return false\n  }\n}).on('mouseup touchend', () =>\n  resizing = false\n)\n\n// Remove the resize styles on window change so it doesn't get wierd\n$(window).on('resize', () =>\n  $('textarea, .code-wrap').removeAttr('style')\n)\n\n$('textarea').on('keydown', function(e) {\n  if (e.which === 9) {\n    e.preventDefault()\n    if (this.value) {\n      const val = this.value\n      const start = this.selectionStart\n      const end = this.selectionEnd\n      const selected = val.substring(start, end)\n      let re = ''\n      let count = ''\n\n      if (e.shiftKey) {\n        re = /^\\t/gm\n        count = -selected.match(re).length\n        this.value = val.substring(0, start) + selected.replace(re, '') + val.substring(end)\n      } else {\n        re = /^/gm\n        count = selected.match(re).length\n        this.value = val.substring(0, start) + selected.replace(re, '\\t') + val.substring(end)\n      }\n      if (start === end) {\n        this.selectionStart = end + count\n      } else {\n        this.selectionStart = start\n      }\n      this.selectionEnd = end + count\n    }\n  }\n}).on('keyup', function() {\n  try {\n    main.reset({data: JSON.parse($(this).val())})\n  } catch (error) {\n    if (!$(this).val().length) {\n      main.reset()\n    }\n  }\n})\n\nlet timeout = '';\nconst debounceRequest = (contents, timeout) => {\n  timeout = setTimeout(() => {\n\n    $.ajax({\n      url: contents,\n      type: 'GET',\n      dataType: 'json',\n      success: (data) => {\n        main.set(data)\n      },\n      error: () => {\n        // Send textarea code to highlight.js <code> container\n        console.log(`Sorry for spamming the ðŸ’© out of your console! https://github.com/corysimmons/picky.json/issues/4`)\n        main.set($('textarea').val())\n      }\n    })\n\n  }, timeout)\n}\n\n// Test the input to see if it's a JSON url\n// If it is, populate <code> with that data\n// If it's not, populate <code> with whatever is in <textarea>\n$('textarea').keyup(() => {\n  let url = $('textarea').val().trim()\n\n  clearTimeout(timeout)\n  if (url.match(regex)) {\n    debounceRequest(url, 1000)\n  }\n\n  $('#picked').val('')\n\n})"]}